!function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){return o(e[i][1][r]||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){module.exports=require("./lib/axios")},{"./lib/axios":3}],2:[function(require,module,exports){"use strict";var utils=require("./../utils"),settle=require("./../core/settle"),cookies=require("./../helpers/cookies"),buildURL=require("./../helpers/buildURL"),buildFullPath=require("../core/buildFullPath"),parseHeaders=require("./../helpers/parseHeaders"),isURLSameOrigin=require("./../helpers/isURLSameOrigin"),createError=require("../core/createError"),defaults=require("../defaults"),Cancel=require("../cancel/Cancel");module.exports=function(config){return new Promise(function(resolve,reject){function done(){config.cancelToken&&config.cancelToken.unsubscribe(onCanceled),config.signal&&config.signal.removeEventListener("abort",onCanceled)}function onloadend(){if(request){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,responseData=responseType&&"text"!==responseType&&"json"!==responseType?request.response:request.responseText,response={data:responseData,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(function(value){resolve(value),done()},function(err){reject(err),done()},response),request=null}}var onCanceled,requestData=config.data,requestHeaders=config.headers,responseType=config.responseType;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password?unescape(encodeURIComponent(config.auth.password)):"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,"onloadend"in request?request.onloadend=onloadend:request.onreadystatechange=function(){request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))&&setTimeout(onloadend)},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage=config.timeout?"timeout of "+config.timeout+"ms exceeded":"timeout exceeded",transitional=config.transitional||defaults.transitional;config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}"setRequestHeader"in request&&utils.forEach(requestHeaders,function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)}),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),responseType&&"json"!==responseType&&(request.responseType=config.responseType),"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),(config.cancelToken||config.signal)&&(onCanceled=function(cancel){request&&(reject(!cancel||cancel&&cancel.type?new Cancel("canceled"):cancel),request.abort(),request=null)},config.cancelToken&&config.cancelToken.subscribe(onCanceled),config.signal&&(config.signal.aborted?onCanceled():config.signal.addEventListener("abort",onCanceled))),requestData||(requestData=null),request.send(requestData)})}},{"../cancel/Cancel":4,"../core/buildFullPath":9,"../core/createError":10,"../defaults":16,"./../core/settle":14,"./../helpers/buildURL":19,"./../helpers/cookies":21,"./../helpers/isURLSameOrigin":24,"./../helpers/parseHeaders":26,"./../utils":29}],3:[function(require,module,exports){"use strict";function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance.create=function(instanceConfig){return createInstance(mergeConfig(defaultConfig,instanceConfig))},instance}var utils=require("./utils"),bind=require("./helpers/bind"),Axios=require("./core/Axios"),mergeConfig=require("./core/mergeConfig"),defaults=require("./defaults"),axios=createInstance(defaults);axios.Axios=Axios,axios.Cancel=require("./cancel/Cancel"),axios.CancelToken=require("./cancel/CancelToken"),axios.isCancel=require("./cancel/isCancel"),axios.VERSION=require("./env/data").version,axios.all=function(promises){return Promise.all(promises)},axios.spread=require("./helpers/spread"),axios.isAxiosError=require("./helpers/isAxiosError"),module.exports=axios,module.exports.default=axios},{"./cancel/Cancel":4,"./cancel/CancelToken":5,"./cancel/isCancel":6,"./core/Axios":7,"./core/mergeConfig":13,"./defaults":16,"./env/data":17,"./helpers/bind":18,"./helpers/isAxiosError":23,"./helpers/spread":27,"./utils":29}],4:[function(require,module,exports){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},{}],5:[function(require,module,exports){"use strict";function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise(function(resolve){resolvePromise=resolve});var token=this;this.promise.then(function(cancel){if(token._listeners){var i,l=token._listeners.length;for(i=0;i<l;i++)token._listeners[i](cancel);token._listeners=null}}),this.promise.then=function(onfulfilled){var _resolve,promise=new Promise(function(resolve){token.subscribe(resolve),_resolve=resolve}).then(onfulfilled);return promise.cancel=function(){token.unsubscribe(_resolve)},promise},executor(function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))})}var Cancel=require("./Cancel");CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.prototype.subscribe=function(listener){if(this.reason)return void listener(this.reason);this._listeners?this._listeners.push(listener):this._listeners=[listener]},CancelToken.prototype.unsubscribe=function(listener){if(this._listeners){var index=this._listeners.indexOf(listener);-1!==index&&this._listeners.splice(index,1)}},CancelToken.source=function(){var cancel;return{token:new CancelToken(function(c){cancel=c}),cancel:cancel}},module.exports=CancelToken},{"./Cancel":4}],6:[function(require,module,exports){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},{}],7:[function(require,module,exports){"use strict";function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}var utils=require("./../utils"),buildURL=require("../helpers/buildURL"),InterceptorManager=require("./InterceptorManager"),dispatchRequest=require("./dispatchRequest"),mergeConfig=require("./mergeConfig"),validator=require("../helpers/validator"),validators=validator.validators;Axios.prototype.request=function(configOrUrl,config){if("string"==typeof configOrUrl?(config=config||{},config.url=configOrUrl):config=configOrUrl||{},!config.url)throw new Error("Provided config url is not valid");config=mergeConfig(this.defaults,config),config.method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var transitional=config.transitional;void 0!==transitional&&validator.assertOptions(transitional,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var requestInterceptorChain=[],synchronousRequestInterceptors=!0;this.interceptors.request.forEach(function(interceptor){"function"==typeof interceptor.runWhen&&!1===interceptor.runWhen(config)||(synchronousRequestInterceptors=synchronousRequestInterceptors&&interceptor.synchronous,requestInterceptorChain.unshift(interceptor.fulfilled,interceptor.rejected))});var responseInterceptorChain=[];this.interceptors.response.forEach(function(interceptor){responseInterceptorChain.push(interceptor.fulfilled,interceptor.rejected)});var promise;if(!synchronousRequestInterceptors){var chain=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(chain,requestInterceptorChain),chain=chain.concat(responseInterceptorChain),promise=Promise.resolve(config);chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise}for(var newConfig=config;requestInterceptorChain.length;){var onFulfilled=requestInterceptorChain.shift(),onRejected=requestInterceptorChain.shift();try{newConfig=onFulfilled(newConfig)}catch(error){onRejected(error);break}}try{promise=dispatchRequest(newConfig)}catch(error){return Promise.reject(error)}for(;responseInterceptorChain.length;)promise=promise.then(responseInterceptorChain.shift(),responseInterceptorChain.shift());return promise},Axios.prototype.getUri=function(config){if(!config.url)throw new Error("Provided config url is not valid");return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],function(method){Axios.prototype[method]=function(url,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:(config||{}).data}))}}),utils.forEach(["post","put","patch"],function(method){Axios.prototype[method]=function(url,data,config){return this.request(mergeConfig(config||{},{method:method,url:url,data:data}))}}),module.exports=Axios},{"../helpers/buildURL":19,"../helpers/validator":28,"./../utils":29,"./InterceptorManager":8,"./dispatchRequest":11,"./mergeConfig":13}],8:[function(require,module,exports){"use strict";function InterceptorManager(){this.handlers=[]}var utils=require("./../utils");InterceptorManager.prototype.use=function(fulfilled,rejected,options){return this.handlers.push({fulfilled:fulfilled,rejected:rejected,synchronous:!!options&&options.synchronous,runWhen:options?options.runWhen:null}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,function(h){null!==h&&fn(h)})},module.exports=InterceptorManager},{"./../utils":29}],9:[function(require,module,exports){"use strict";var isAbsoluteURL=require("../helpers/isAbsoluteURL"),combineURLs=require("../helpers/combineURLs");module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},{"../helpers/combineURLs":20,"../helpers/isAbsoluteURL":22}],10:[function(require,module,exports){"use strict";var enhanceError=require("./enhanceError");module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},{"./enhanceError":12}],11:[function(require,module,exports){"use strict";function throwIfCancellationRequested(config){if(config.cancelToken&&config.cancelToken.throwIfRequested(),config.signal&&config.signal.aborted)throw new Cancel("canceled")}var utils=require("./../utils"),transformData=require("./transformData"),isCancel=require("../cancel/isCancel"),defaults=require("../defaults"),Cancel=require("../cancel/Cancel");module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData.call(config,config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],function(method){delete config.headers[method]}),(config.adapter||defaults.adapter)(config).then(function(response){return throwIfCancellationRequested(config),response.data=transformData.call(config,response.data,response.headers,config.transformResponse),response},function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData.call(config,reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)})}},{"../cancel/Cancel":4,"../cancel/isCancel":6,"../defaults":16,"./../utils":29,"./transformData":15}],12:[function(require,module,exports){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},error}},{}],13:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function(config1,config2){function getMergedValue(target,source){return utils.isPlainObject(target)&&utils.isPlainObject(source)?utils.merge(target,source):utils.isPlainObject(source)?utils.merge({},source):utils.isArray(source)?source.slice():source}function mergeDeepProperties(prop){return utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])?void 0:getMergedValue(void 0,config1[prop]):getMergedValue(config1[prop],config2[prop])}function valueFromConfig2(prop){if(!utils.isUndefined(config2[prop]))return getMergedValue(void 0,config2[prop])}function defaultToConfig2(prop){return utils.isUndefined(config2[prop])?utils.isUndefined(config1[prop])?void 0:getMergedValue(void 0,config1[prop]):getMergedValue(void 0,config2[prop])}function mergeDirectKeys(prop){return prop in config2?getMergedValue(config1[prop],config2[prop]):prop in config1?getMergedValue(void 0,config1[prop]):void 0}config2=config2||{};var config={},mergeMap={url:valueFromConfig2,method:valueFromConfig2,data:valueFromConfig2,baseURL:defaultToConfig2,transformRequest:defaultToConfig2,transformResponse:defaultToConfig2,paramsSerializer:defaultToConfig2,timeout:defaultToConfig2,timeoutMessage:defaultToConfig2,withCredentials:defaultToConfig2,adapter:defaultToConfig2,responseType:defaultToConfig2,xsrfCookieName:defaultToConfig2,xsrfHeaderName:defaultToConfig2,onUploadProgress:defaultToConfig2,onDownloadProgress:defaultToConfig2,decompress:defaultToConfig2,maxContentLength:defaultToConfig2,maxBodyLength:defaultToConfig2,transport:defaultToConfig2,httpAgent:defaultToConfig2,httpsAgent:defaultToConfig2,cancelToken:defaultToConfig2,socketPath:defaultToConfig2,responseEncoding:defaultToConfig2,validateStatus:mergeDirectKeys};return utils.forEach(Object.keys(config1).concat(Object.keys(config2)),function(prop){var merge=mergeMap[prop]||mergeDeepProperties,configValue=merge(prop);utils.isUndefined(configValue)&&merge!==mergeDirectKeys||(config[prop]=configValue)}),config}},{"../utils":29}],14:[function(require,module,exports){"use strict";var createError=require("./createError");module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;response.status&&validateStatus&&!validateStatus(response.status)?reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response)):resolve(response)}},{"./createError":10}],15:[function(require,module,exports){"use strict";var utils=require("./../utils"),defaults=require("./../defaults");module.exports=function(data,headers,fns){var context=this||defaults;return utils.forEach(fns,function(fn){data=fn.call(context,data,headers)}),data}},{"./../defaults":16,"./../utils":29}],16:[function(require,module,exports){(function(process){(function(){"use strict";function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}function stringifySafely(rawValue,parser,encoder){if(utils.isString(rawValue))try{return(parser||JSON.parse)(rawValue),utils.trim(rawValue)}catch(e){if("SyntaxError"!==e.name)throw e}return(encoder||JSON.stringify)(rawValue)}var utils=require("./utils"),normalizeHeaderName=require("./helpers/normalizeHeaderName"),enhanceError=require("./core/enhanceError"),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"},defaults={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var adapter;return"undefined"!=typeof XMLHttpRequest?adapter=require("./adapters/xhr"):void 0!==process&&"[object process]"===Object.prototype.toString.call(process)&&(adapter=require("./adapters/http")),adapter}(),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)||headers&&"application/json"===headers["Content-Type"]?(setContentTypeIfUnset(headers,"application/json"),stringifySafely(data)):data}],transformResponse:[function(data){var transitional=this.transitional||defaults.transitional,silentJSONParsing=transitional&&transitional.silentJSONParsing,forcedJSONParsing=transitional&&transitional.forcedJSONParsing,strictJSONParsing=!silentJSONParsing&&"json"===this.responseType;if(strictJSONParsing||forcedJSONParsing&&utils.isString(data)&&data.length)try{return JSON.parse(data)}catch(e){if(strictJSONParsing){if("SyntaxError"===e.name)throw enhanceError(e,this,"E_JSON_PARSE");throw e}}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(status){return status>=200&&status<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function(method){defaults.headers[method]={}}),utils.forEach(["post","put","patch"],function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)}),module.exports=defaults}).call(this)}).call(this,require("_process"))},{"./adapters/http":2,"./adapters/xhr":2,"./core/enhanceError":12,"./helpers/normalizeHeaderName":25,"./utils":29,_process:140}],17:[function(require,module,exports){module.exports={version:"0.25.0"}},{}],18:[function(require,module,exports){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},{}],19:[function(require,module,exports){"use strict";function encode(val){return encodeURIComponent(val).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var utils=require("./../utils");module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,function(val,key){null!==val&&void 0!==val&&(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))}))}),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},{"./../utils":29}],20:[function(require,module,exports){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},{}],21:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){return{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":29}],22:[function(require,module,exports){"use strict";module.exports=function(url){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(url)}},{}],23:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=function(payload){return utils.isObject(payload)&&!0===payload.isAxiosError}},{"./../utils":29}],24:[function(require,module,exports){"use strict";var utils=require("./../utils");module.exports=utils.isStandardBrowserEnv()?function(){function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return function(){return!0}}()},{"./../utils":29}],25:[function(require,module,exports){"use strict";var utils=require("../utils");module.exports=function(headers,normalizedName){utils.forEach(headers,function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])})}},{"../utils":29}],26:[function(require,module,exports){"use strict";var utils=require("./../utils"),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}}),parsed):parsed}},{"./../utils":29}],27:[function(require,module,exports){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},{}],28:[function(require,module,exports){"use strict";function assertOptions(options,schema,allowUnknown){if("object"!=typeof options)throw new TypeError("options must be an object");for(var keys=Object.keys(options),i=keys.length;i-- >0;){var opt=keys[i],validator=schema[opt];if(validator){var value=options[opt],result=void 0===value||validator(value,opt,options);if(!0!==result)throw new TypeError("option "+opt+" must be "+result)}else if(!0!==allowUnknown)throw Error("Unknown option "+opt)}}var VERSION=require("../env/data").version,validators={};["object","boolean","number","function","string","symbol"].forEach(function(type,i){validators[type]=function(thing){return typeof thing===type||"a"+(i<1?"n ":" ")+type}});var deprecatedWarnings={};validators.transitional=function(validator,version,message){function formatMessage(opt,desc){return"[Axios v"+VERSION+"] Transitional option '"+opt+"'"+desc+(message?". "+message:"")}return function(value,opt,opts){if(!1===validator)throw new Error(formatMessage(opt," has been removed"+(version?" in "+version:"")));return version&&!deprecatedWarnings[opt]&&(deprecatedWarnings[opt]=!0,console.warn(formatMessage(opt," has been deprecated since v"+version+" and will be removed in the near future"))),!validator||validator(value,opt,opts)}},module.exports={assertOptions:assertOptions,validators:validators}},{"../env/data":17}],29:[function(require,module,exports){"use strict";function isArray(val){return Array.isArray(val)}function isUndefined(val){return void 0===val}function isBuffer(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)}function isArrayBuffer(val){return"[object ArrayBuffer]"===toString.call(val)}function isFormData(val){return"[object FormData]"===toString.call(val)}function isArrayBufferView(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&isArrayBuffer(val.buffer)}function isString(val){return"string"==typeof val}function isNumber(val){return"number"==typeof val}function isObject(val){return null!==val&&"object"==typeof val}function isPlainObject(val){if("[object Object]"!==toString.call(val))return!1;var prototype=Object.getPrototypeOf(val);return null===prototype||prototype===Object.prototype}function isDate(val){return"[object Date]"===toString.call(val)}function isFile(val){return"[object File]"===toString.call(val)}function isBlob(val){return"[object Blob]"===toString.call(val)}function isFunction(val){return"[object Function]"===toString.call(val)}function isStream(val){return isObject(val)&&isFunction(val.pipe)}function isURLSearchParams(val){return"[object URLSearchParams]"===toString.call(val)}function trim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function forEach(obj,fn){if(null!==obj&&void 0!==obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}function merge(){function assignValue(val,key){isPlainObject(result[key])&&isPlainObject(val)?result[key]=merge(result[key],val):isPlainObject(val)?result[key]=merge({},val):isArray(val)?result[key]=val.slice():result[key]=val}for(var result={},i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result}function extend(a,b,thisArg){return forEach(b,function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val}),a}function stripBOM(content){return 65279===content.charCodeAt(0)&&(content=content.slice(1)),content}var bind=require("./helpers/bind"),toString=Object.prototype.toString;module.exports={isArray:isArray,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isObject:isObject,isPlainObject:isPlainObject,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isFunction:isFunction,isStream:isStream,isURLSearchParams:isURLSearchParams,isStandardBrowserEnv:isStandardBrowserEnv,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM}},{"./helpers/bind":18}],30:[function(require,module,exports){module.exports={default:require("core-js/library/fn/json/stringify"),__esModule:!0}},{"core-js/library/fn/json/stringify":32}],31:[function(require,module,exports){module.exports={default:require("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":33}],32:[function(require,module,exports){var core=require("../../modules/_core"),$JSON=core.JSON||(core.JSON={stringify:JSON.stringify});module.exports=function(it){return $JSON.stringify.apply($JSON,arguments)}},{"../../modules/_core":41}],33:[function(require,module,exports){require("../modules/es6.object.to-string"),require("../modules/es6.string.iterator"),require("../modules/web.dom.iterable"),require("../modules/es6.promise"),require("../modules/es7.promise.finally"),require("../modules/es7.promise.try"),module.exports=require("../modules/_core").Promise},{"../modules/_core":41,"../modules/es6.object.to-string":97,"../modules/es6.promise":98,"../modules/es6.string.iterator":99,"../modules/es7.promise.finally":100,"../modules/es7.promise.try":101,"../modules/web.dom.iterable":102}],34:[function(require,module,exports){module.exports=function(it){if("function"!=typeof it)throw TypeError(it+" is not a function!");return it}},{}],35:[function(require,module,exports){module.exports=function(){}},{}],36:[function(require,module,exports){module.exports=function(it,Constructor,name,forbiddenField){if(!(it instanceof Constructor)||void 0!==forbiddenField&&forbiddenField in it)throw TypeError(name+": incorrect invocation!");return it}},{}],37:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it){if(!isObject(it))throw TypeError(it+" is not an object!");return it}},{"./_is-object":58}],38:[function(require,module,exports){var toIObject=require("./_to-iobject"),toLength=require("./_to-length"),toAbsoluteIndex=require("./_to-absolute-index");module.exports=function(IS_INCLUDES){return function($this,el,fromIndex){var value,O=toIObject($this),length=toLength(O.length),index=toAbsoluteIndex(fromIndex,length);if(IS_INCLUDES&&el!=el){for(;length>index;)if((value=O[index++])!=value)return!0}else for(;length>index;index++)if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;return!IS_INCLUDES&&-1}}},{"./_to-absolute-index":86,"./_to-iobject":88,"./_to-length":89}],39:[function(require,module,exports){var cof=require("./_cof"),TAG=require("./_wks")("toStringTag"),ARG="Arguments"==cof(function(){return arguments}()),tryGet=function(it,key){try{return it[key]}catch(e){}};module.exports=function(it){var O,T,B;return void 0===it?"Undefined":null===it?"Null":"string"==typeof(T=tryGet(O=Object(it),TAG))?T:ARG?cof(O):"Object"==(B=cof(O))&&"function"==typeof O.callee?"Arguments":B}},{"./_cof":40,"./_wks":94}],40:[function(require,module,exports){var toString={}.toString;module.exports=function(it){return toString.call(it).slice(8,-1)}},{}],41:[function(require,module,exports){var core=module.exports={version:"2.6.12"};"number"==typeof __e&&(__e=core)},{}],
42:[function(require,module,exports){var aFunction=require("./_a-function");module.exports=function(fn,that,length){if(aFunction(fn),void 0===that)return fn;switch(length){case 1:return function(a){return fn.call(that,a)};case 2:return function(a,b){return fn.call(that,a,b)};case 3:return function(a,b,c){return fn.call(that,a,b,c)}}return function(){return fn.apply(that,arguments)}}},{"./_a-function":34}],43:[function(require,module,exports){module.exports=function(it){if(void 0==it)throw TypeError("Can't call method on  "+it);return it}},{}],44:[function(require,module,exports){module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":48}],45:[function(require,module,exports){var isObject=require("./_is-object"),document=require("./_global").document,is=isObject(document)&&isObject(document.createElement);module.exports=function(it){return is?document.createElement(it):{}}},{"./_global":50,"./_is-object":58}],46:[function(require,module,exports){module.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],47:[function(require,module,exports){var global=require("./_global"),core=require("./_core"),ctx=require("./_ctx"),hide=require("./_hide"),has=require("./_has"),$export=function(type,name,source){var key,own,out,IS_FORCED=type&$export.F,IS_GLOBAL=type&$export.G,IS_STATIC=type&$export.S,IS_PROTO=type&$export.P,IS_BIND=type&$export.B,IS_WRAP=type&$export.W,exports=IS_GLOBAL?core:core[name]||(core[name]={}),expProto=exports.prototype,target=IS_GLOBAL?global:IS_STATIC?global[name]:(global[name]||{}).prototype;IS_GLOBAL&&(source=name);for(key in source)(own=!IS_FORCED&&target&&void 0!==target[key])&&has(exports,key)||(out=own?target[key]:source[key],exports[key]=IS_GLOBAL&&"function"!=typeof target[key]?source[key]:IS_BIND&&own?ctx(out,global):IS_WRAP&&target[key]==out?function(C){var F=function(a,b,c){if(this instanceof C){switch(arguments.length){case 0:return new C;case 1:return new C(a);case 2:return new C(a,b)}return new C(a,b,c)}return C.apply(this,arguments)};return F.prototype=C.prototype,F}(out):IS_PROTO&&"function"==typeof out?ctx(Function.call,out):out,IS_PROTO&&((exports.virtual||(exports.virtual={}))[key]=out,type&$export.R&&expProto&&!expProto[key]&&hide(expProto,key,out)))};$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128,module.exports=$export},{"./_core":41,"./_ctx":42,"./_global":50,"./_has":51,"./_hide":52}],48:[function(require,module,exports){module.exports=function(exec){try{return!!exec()}catch(e){return!0}}},{}],49:[function(require,module,exports){var ctx=require("./_ctx"),call=require("./_iter-call"),isArrayIter=require("./_is-array-iter"),anObject=require("./_an-object"),toLength=require("./_to-length"),getIterFn=require("./core.get-iterator-method"),BREAK={},RETURN={},exports=module.exports=function(iterable,entries,fn,that,ITERATOR){var length,step,iterator,result,iterFn=ITERATOR?function(){return iterable}:getIterFn(iterable),f=ctx(fn,that,entries?2:1),index=0;if("function"!=typeof iterFn)throw TypeError(iterable+" is not iterable!");if(isArrayIter(iterFn)){for(length=toLength(iterable.length);length>index;index++)if((result=entries?f(anObject(step=iterable[index])[0],step[1]):f(iterable[index]))===BREAK||result===RETURN)return result}else for(iterator=iterFn.call(iterable);!(step=iterator.next()).done;)if((result=call(iterator,f,step.value,entries))===BREAK||result===RETURN)return result};exports.BREAK=BREAK,exports.RETURN=RETURN},{"./_an-object":37,"./_ctx":42,"./_is-array-iter":57,"./_iter-call":59,"./_to-length":89,"./core.get-iterator-method":95}],50:[function(require,module,exports){var global=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=global)},{}],51:[function(require,module,exports){var hasOwnProperty={}.hasOwnProperty;module.exports=function(it,key){return hasOwnProperty.call(it,key)}},{}],52:[function(require,module,exports){var dP=require("./_object-dp"),createDesc=require("./_property-desc");module.exports=require("./_descriptors")?function(object,key,value){return dP.f(object,key,createDesc(1,value))}:function(object,key,value){return object[key]=value,object}},{"./_descriptors":44,"./_object-dp":69,"./_property-desc":76}],53:[function(require,module,exports){var document=require("./_global").document;module.exports=document&&document.documentElement},{"./_global":50}],54:[function(require,module,exports){module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":44,"./_dom-create":45,"./_fails":48}],55:[function(require,module,exports){module.exports=function(fn,args,that){var un=void 0===that;switch(args.length){case 0:return un?fn():fn.call(that);case 1:return un?fn(args[0]):fn.call(that,args[0]);case 2:return un?fn(args[0],args[1]):fn.call(that,args[0],args[1]);case 3:return un?fn(args[0],args[1],args[2]):fn.call(that,args[0],args[1],args[2]);case 4:return un?fn(args[0],args[1],args[2],args[3]):fn.call(that,args[0],args[1],args[2],args[3])}return fn.apply(that,args)}},{}],56:[function(require,module,exports){var cof=require("./_cof");module.exports=Object("z").propertyIsEnumerable(0)?Object:function(it){return"String"==cof(it)?it.split(""):Object(it)}},{"./_cof":40}],57:[function(require,module,exports){var Iterators=require("./_iterators"),ITERATOR=require("./_wks")("iterator"),ArrayProto=Array.prototype;module.exports=function(it){return void 0!==it&&(Iterators.Array===it||ArrayProto[ITERATOR]===it)}},{"./_iterators":64,"./_wks":94}],58:[function(require,module,exports){module.exports=function(it){return"object"==typeof it?null!==it:"function"==typeof it}},{}],59:[function(require,module,exports){var anObject=require("./_an-object");module.exports=function(iterator,fn,value,entries){try{return entries?fn(anObject(value)[0],value[1]):fn(value)}catch(e){var ret=iterator.return;throw void 0!==ret&&anObject(ret.call(iterator)),e}}},{"./_an-object":37}],60:[function(require,module,exports){"use strict";var create=require("./_object-create"),descriptor=require("./_property-desc"),setToStringTag=require("./_set-to-string-tag"),IteratorPrototype={};require("./_hide")(IteratorPrototype,require("./_wks")("iterator"),function(){return this}),module.exports=function(Constructor,NAME,next){Constructor.prototype=create(IteratorPrototype,{next:descriptor(1,next)}),setToStringTag(Constructor,NAME+" Iterator")}},{"./_hide":52,"./_object-create":68,"./_property-desc":76,"./_set-to-string-tag":80,"./_wks":94}],61:[function(require,module,exports){"use strict";var LIBRARY=require("./_library"),$export=require("./_export"),redefine=require("./_redefine"),hide=require("./_hide"),Iterators=require("./_iterators"),$iterCreate=require("./_iter-create"),setToStringTag=require("./_set-to-string-tag"),getPrototypeOf=require("./_object-gpo"),ITERATOR=require("./_wks")("iterator"),BUGGY=!([].keys&&"next"in[].keys()),returnThis=function(){return this};module.exports=function(Base,NAME,Constructor,next,DEFAULT,IS_SET,FORCED){$iterCreate(Constructor,NAME,next);var methods,key,IteratorPrototype,getMethod=function(kind){if(!BUGGY&&kind in proto)return proto[kind];switch(kind){case"keys":case"values":return function(){return new Constructor(this,kind)}}return function(){return new Constructor(this,kind)}},TAG=NAME+" Iterator",DEF_VALUES="values"==DEFAULT,VALUES_BUG=!1,proto=Base.prototype,$native=proto[ITERATOR]||proto["@@iterator"]||DEFAULT&&proto[DEFAULT],$default=$native||getMethod(DEFAULT),$entries=DEFAULT?DEF_VALUES?getMethod("entries"):$default:void 0,$anyNative="Array"==NAME?proto.entries||$native:$native;if($anyNative&&(IteratorPrototype=getPrototypeOf($anyNative.call(new Base)))!==Object.prototype&&IteratorPrototype.next&&(setToStringTag(IteratorPrototype,TAG,!0),LIBRARY||"function"==typeof IteratorPrototype[ITERATOR]||hide(IteratorPrototype,ITERATOR,returnThis)),DEF_VALUES&&$native&&"values"!==$native.name&&(VALUES_BUG=!0,$default=function(){return $native.call(this)}),LIBRARY&&!FORCED||!BUGGY&&!VALUES_BUG&&proto[ITERATOR]||hide(proto,ITERATOR,$default),Iterators[NAME]=$default,Iterators[TAG]=returnThis,DEFAULT)if(methods={values:DEF_VALUES?$default:getMethod("values"),keys:IS_SET?$default:getMethod("keys"),entries:$entries},FORCED)for(key in methods)key in proto||redefine(proto,key,methods[key]);else $export($export.P+$export.F*(BUGGY||VALUES_BUG),NAME,methods);return methods}},{"./_export":47,"./_hide":52,"./_iter-create":60,"./_iterators":64,"./_library":65,"./_object-gpo":71,"./_redefine":78,"./_set-to-string-tag":80,"./_wks":94}],62:[function(require,module,exports){var ITERATOR=require("./_wks")("iterator"),SAFE_CLOSING=!1;try{var riter=[7][ITERATOR]();riter.return=function(){SAFE_CLOSING=!0},Array.from(riter,function(){throw 2})}catch(e){}module.exports=function(exec,skipClosing){if(!skipClosing&&!SAFE_CLOSING)return!1;var safe=!1;try{var arr=[7],iter=arr[ITERATOR]();iter.next=function(){return{done:safe=!0}},arr[ITERATOR]=function(){return iter},exec(arr)}catch(e){}return safe}},{"./_wks":94}],63:[function(require,module,exports){module.exports=function(done,value){return{value:value,done:!!done}}},{}],64:[function(require,module,exports){module.exports={}},{}],65:[function(require,module,exports){module.exports=!0},{}],66:[function(require,module,exports){var global=require("./_global"),macrotask=require("./_task").set,Observer=global.MutationObserver||global.WebKitMutationObserver,process=global.process,Promise=global.Promise,isNode="process"==require("./_cof")(process);module.exports=function(){var head,last,notify,flush=function(){var parent,fn;for(isNode&&(parent=process.domain)&&parent.exit();head;){fn=head.fn,head=head.next;try{fn()}catch(e){throw head?notify():last=void 0,e}}last=void 0,parent&&parent.enter()};if(isNode)notify=function(){process.nextTick(flush)};else if(!Observer||global.navigator&&global.navigator.standalone)if(Promise&&Promise.resolve){var promise=Promise.resolve(void 0);notify=function(){promise.then(flush)}}else notify=function(){macrotask.call(global,flush)};else{var toggle=!0,node=document.createTextNode("");new Observer(flush).observe(node,{characterData:!0}),notify=function(){node.data=toggle=!toggle}}return function(fn){var task={fn:fn,next:void 0};last&&(last.next=task),head||(head=task,notify()),last=task}}},{"./_cof":40,"./_global":50,"./_task":85}],67:[function(require,module,exports){"use strict";function PromiseCapability(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(void 0!==resolve||void 0!==reject)throw TypeError("Bad Promise constructor");resolve=$$resolve,reject=$$reject}),this.resolve=aFunction(resolve),this.reject=aFunction(reject)}var aFunction=require("./_a-function");module.exports.f=function(C){return new PromiseCapability(C)}},{"./_a-function":34}],68:[function(require,module,exports){var anObject=require("./_an-object"),dPs=require("./_object-dps"),enumBugKeys=require("./_enum-bug-keys"),IE_PROTO=require("./_shared-key")("IE_PROTO"),Empty=function(){},createDict=function(){var iframeDocument,iframe=require("./_dom-create")("iframe"),i=enumBugKeys.length;for(iframe.style.display="none",require("./_html").appendChild(iframe),iframe.src="javascript:",iframeDocument=iframe.contentWindow.document,iframeDocument.open(),iframeDocument.write("<script>document.F=Object<\/script>"),iframeDocument.close(),createDict=iframeDocument.F;i--;)delete createDict.prototype[enumBugKeys[i]];return createDict()};module.exports=Object.create||function(O,Properties){var result;return null!==O?(Empty.prototype=anObject(O),result=new Empty,Empty.prototype=null,result[IE_PROTO]=O):result=createDict(),void 0===Properties?result:dPs(result,Properties)}},{"./_an-object":37,"./_dom-create":45,"./_enum-bug-keys":46,"./_html":53,"./_object-dps":70,"./_shared-key":81}],69:[function(require,module,exports){var anObject=require("./_an-object"),IE8_DOM_DEFINE=require("./_ie8-dom-define"),toPrimitive=require("./_to-primitive"),dP=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(O,P,Attributes){if(anObject(O),P=toPrimitive(P,!0),anObject(Attributes),IE8_DOM_DEFINE)try{return dP(O,P,Attributes)}catch(e){}if("get"in Attributes||"set"in Attributes)throw TypeError("Accessors not supported!");return"value"in Attributes&&(O[P]=Attributes.value),O}},{"./_an-object":37,"./_descriptors":44,"./_ie8-dom-define":54,"./_to-primitive":91}],70:[function(require,module,exports){var dP=require("./_object-dp"),anObject=require("./_an-object"),getKeys=require("./_object-keys");module.exports=require("./_descriptors")?Object.defineProperties:function(O,Properties){anObject(O);for(var P,keys=getKeys(Properties),length=keys.length,i=0;length>i;)dP.f(O,P=keys[i++],Properties[P]);return O}},{"./_an-object":37,"./_descriptors":44,"./_object-dp":69,"./_object-keys":73}],71:[function(require,module,exports){var has=require("./_has"),toObject=require("./_to-object"),IE_PROTO=require("./_shared-key")("IE_PROTO"),ObjectProto=Object.prototype;module.exports=Object.getPrototypeOf||function(O){return O=toObject(O),has(O,IE_PROTO)?O[IE_PROTO]:"function"==typeof O.constructor&&O instanceof O.constructor?O.constructor.prototype:O instanceof Object?ObjectProto:null}},{"./_has":51,"./_shared-key":81,"./_to-object":90}],72:[function(require,module,exports){var has=require("./_has"),toIObject=require("./_to-iobject"),arrayIndexOf=require("./_array-includes")(!1),IE_PROTO=require("./_shared-key")("IE_PROTO");module.exports=function(object,names){var key,O=toIObject(object),i=0,result=[];for(key in O)key!=IE_PROTO&&has(O,key)&&result.push(key);for(;names.length>i;)has(O,key=names[i++])&&(~arrayIndexOf(result,key)||result.push(key));return result}},{"./_array-includes":38,"./_has":51,"./_shared-key":81,"./_to-iobject":88}],73:[function(require,module,exports){var $keys=require("./_object-keys-internal"),enumBugKeys=require("./_enum-bug-keys");module.exports=Object.keys||function(O){return $keys(O,enumBugKeys)}},{"./_enum-bug-keys":46,"./_object-keys-internal":72}],74:[function(require,module,exports){module.exports=function(exec){try{return{e:!1,v:exec()}}catch(e){return{e:!0,v:e}}}},{}],75:[function(require,module,exports){var anObject=require("./_an-object"),isObject=require("./_is-object"),newPromiseCapability=require("./_new-promise-capability");module.exports=function(C,x){if(anObject(C),isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);return(0,promiseCapability.resolve)(x),promiseCapability.promise}},{"./_an-object":37,"./_is-object":58,"./_new-promise-capability":67}],76:[function(require,module,exports){module.exports=function(bitmap,value){return{enumerable:!(1&bitmap),configurable:!(2&bitmap),writable:!(4&bitmap),value:value}}},{}],77:[function(require,module,exports){var hide=require("./_hide");module.exports=function(target,src,safe){for(var key in src)safe&&target[key]?target[key]=src[key]:hide(target,key,src[key]);return target}},{"./_hide":52}],78:[function(require,module,exports){module.exports=require("./_hide")},{"./_hide":52}],79:[function(require,module,exports){"use strict";var global=require("./_global"),core=require("./_core"),dP=require("./_object-dp"),DESCRIPTORS=require("./_descriptors"),SPECIES=require("./_wks")("species");module.exports=function(KEY){var C="function"==typeof core[KEY]?core[KEY]:global[KEY];DESCRIPTORS&&C&&!C[SPECIES]&&dP.f(C,SPECIES,{configurable:!0,get:function(){return this}})}},{"./_core":41,"./_descriptors":44,"./_global":50,"./_object-dp":69,"./_wks":94}],80:[function(require,module,exports){var def=require("./_object-dp").f,has=require("./_has"),TAG=require("./_wks")("toStringTag");module.exports=function(it,tag,stat){it&&!has(it=stat?it:it.prototype,TAG)&&def(it,TAG,{configurable:!0,value:tag})}},{"./_has":51,"./_object-dp":69,"./_wks":94}],81:[function(require,module,exports){var shared=require("./_shared")("keys"),uid=require("./_uid");module.exports=function(key){return shared[key]||(shared[key]=uid(key))}},{"./_shared":82,"./_uid":92}],82:[function(require,module,exports){var core=require("./_core"),global=require("./_global"),store=global["__core-js_shared__"]||(global["__core-js_shared__"]={});(module.exports=function(key,value){return store[key]||(store[key]=void 0!==value?value:{})})("versions",[]).push({version:core.version,mode:require("./_library")?"pure":"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})},{"./_core":41,"./_global":50,"./_library":65}],83:[function(require,module,exports){var anObject=require("./_an-object"),aFunction=require("./_a-function"),SPECIES=require("./_wks")("species");module.exports=function(O,D){var S,C=anObject(O).constructor;return void 0===C||void 0==(S=anObject(C)[SPECIES])?D:aFunction(S)}},{"./_a-function":34,"./_an-object":37,"./_wks":94}],84:[function(require,module,exports){var toInteger=require("./_to-integer"),defined=require("./_defined");module.exports=function(TO_STRING){return function(that,pos){var a,b,s=String(defined(that)),i=toInteger(pos),l=s.length;return i<0||i>=l?TO_STRING?"":void 0:(a=s.charCodeAt(i),a<55296||a>56319||i+1===l||(b=s.charCodeAt(i+1))<56320||b>57343?TO_STRING?s.charAt(i):a:TO_STRING?s.slice(i,i+2):b-56320+(a-55296<<10)+65536)}}},{"./_defined":43,"./_to-integer":87}],85:[function(require,module,exports){var defer,channel,port,ctx=require("./_ctx"),invoke=require("./_invoke"),html=require("./_html"),cel=require("./_dom-create"),global=require("./_global"),process=global.process,setTask=global.setImmediate,clearTask=global.clearImmediate,MessageChannel=global.MessageChannel,Dispatch=global.Dispatch,counter=0,queue={},run=function(){var id=+this;if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id],fn()}},listener=function(event){run.call(event.data)};setTask&&clearTask||(setTask=function(fn){for(var args=[],i=1;arguments.length>i;)args.push(arguments[i++]);return queue[++counter]=function(){invoke("function"==typeof fn?fn:Function(fn),args)},defer(counter),counter},clearTask=function(id){delete queue[id]},"process"==require("./_cof")(process)?defer=function(id){process.nextTick(ctx(run,id,1))}:Dispatch&&Dispatch.now?defer=function(id){Dispatch.now(ctx(run,id,1))}:MessageChannel?(channel=new MessageChannel,port=channel.port2,channel.port1.onmessage=listener,defer=ctx(port.postMessage,port,1)):global.addEventListener&&"function"==typeof postMessage&&!global.importScripts?(defer=function(id){global.postMessage(id+"","*")},global.addEventListener("message",listener,!1)):defer="onreadystatechange"in cel("script")?function(id){html.appendChild(cel("script")).onreadystatechange=function(){html.removeChild(this),run.call(id)}}:function(id){setTimeout(ctx(run,id,1),0)}),module.exports={set:setTask,clear:clearTask}},{"./_cof":40,"./_ctx":42,"./_dom-create":45,"./_global":50,"./_html":53,"./_invoke":55}],86:[function(require,module,exports){var toInteger=require("./_to-integer"),max=Math.max,min=Math.min;module.exports=function(index,length){return index=toInteger(index),index<0?max(index+length,0):min(index,length)}},{"./_to-integer":87}],87:[function(require,module,exports){var ceil=Math.ceil,floor=Math.floor;module.exports=function(it){return isNaN(it=+it)?0:(it>0?floor:ceil)(it)}},{}],88:[function(require,module,exports){var IObject=require("./_iobject"),defined=require("./_defined");module.exports=function(it){return IObject(defined(it))}},{"./_defined":43,"./_iobject":56}],89:[function(require,module,exports){var toInteger=require("./_to-integer"),min=Math.min;module.exports=function(it){return it>0?min(toInteger(it),9007199254740991):0}},{"./_to-integer":87}],90:[function(require,module,exports){var defined=require("./_defined");module.exports=function(it){return Object(defined(it))}},{"./_defined":43}],91:[function(require,module,exports){var isObject=require("./_is-object");module.exports=function(it,S){if(!isObject(it))return it;var fn,val;if(S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;if("function"==typeof(fn=it.valueOf)&&!isObject(val=fn.call(it)))return val;if(!S&&"function"==typeof(fn=it.toString)&&!isObject(val=fn.call(it)))return val;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":58}],92:[function(require,module,exports){var id=0,px=Math.random();module.exports=function(key){return"Symbol(".concat(void 0===key?"":key,")_",(++id+px).toString(36))}},{}],93:[function(require,module,exports){var global=require("./_global"),navigator=global.navigator;module.exports=navigator&&navigator.userAgent||""},{"./_global":50}],94:[function(require,module,exports){var store=require("./_shared")("wks"),uid=require("./_uid"),Symbol=require("./_global").Symbol,USE_SYMBOL="function"==typeof Symbol;(module.exports=function(name){return store[name]||(store[name]=USE_SYMBOL&&Symbol[name]||(USE_SYMBOL?Symbol:uid)("Symbol."+name))}).store=store},{"./_global":50,"./_shared":82,"./_uid":92}],95:[function(require,module,exports){var classof=require("./_classof"),ITERATOR=require("./_wks")("iterator"),Iterators=require("./_iterators");module.exports=require("./_core").getIteratorMethod=function(it){if(void 0!=it)return it[ITERATOR]||it["@@iterator"]||Iterators[classof(it)]}},{"./_classof":39,"./_core":41,"./_iterators":64,"./_wks":94}],96:[function(require,module,exports){"use strict";var addToUnscopables=require("./_add-to-unscopables"),step=require("./_iter-step"),Iterators=require("./_iterators"),toIObject=require("./_to-iobject");module.exports=require("./_iter-define")(Array,"Array",function(iterated,kind){this._t=toIObject(iterated),this._i=0,this._k=kind},function(){var O=this._t,kind=this._k,index=this._i++;return!O||index>=O.length?(this._t=void 0,step(1)):"keys"==kind?step(0,index):"values"==kind?step(0,O[index]):step(0,[index,O[index]])},"values"),Iterators.Arguments=Iterators.Array,addToUnscopables("keys"),addToUnscopables("values"),addToUnscopables("entries")},{"./_add-to-unscopables":35,"./_iter-define":61,"./_iter-step":63,"./_iterators":64,"./_to-iobject":88}],97:[function(require,module,exports){},{}],98:[function(require,module,exports){"use strict";var Internal,newGenericPromiseCapability,OwnPromiseCapability,Wrapper,LIBRARY=require("./_library"),global=require("./_global"),ctx=require("./_ctx"),classof=require("./_classof"),$export=require("./_export"),isObject=require("./_is-object"),aFunction=require("./_a-function"),anInstance=require("./_an-instance"),forOf=require("./_for-of"),speciesConstructor=require("./_species-constructor"),task=require("./_task").set,microtask=require("./_microtask")(),newPromiseCapabilityModule=require("./_new-promise-capability"),perform=require("./_perform"),userAgent=require("./_user-agent"),promiseResolve=require("./_promise-resolve"),TypeError=global.TypeError,process=global.process,versions=process&&process.versions,v8=versions&&versions.v8||"",$Promise=global.Promise,isNode="process"==classof(process),empty=function(){},newPromiseCapability=newGenericPromiseCapability=newPromiseCapabilityModule.f,USE_NATIVE=!!function(){try{var promise=$Promise.resolve(1),FakePromise=(promise.constructor={})[require("./_wks")("species")]=function(exec){exec(empty,empty)};return(isNode||"function"==typeof PromiseRejectionEvent)&&promise.then(empty)instanceof FakePromise&&0!==v8.indexOf("6.6")&&-1===userAgent.indexOf("Chrome/66")}catch(e){}}(),isThenable=function(it){var then;return!(!isObject(it)||"function"!=typeof(then=it.then))&&then},notify=function(promise,isReject){if(!promise._n){promise._n=!0;var chain=promise._c;microtask(function(){for(var value=promise._v,ok=1==promise._s,i=0;chain.length>i;)!function(reaction){var result,then,exited,handler=ok?reaction.ok:reaction.fail,resolve=reaction.resolve,reject=reaction.reject,domain=reaction.domain;try{handler?(ok||(2==promise._h&&onHandleUnhandled(promise),promise._h=1),!0===handler?result=value:(domain&&domain.enter(),result=handler(value),domain&&(domain.exit(),exited=!0)),result===reaction.promise?reject(TypeError("Promise-chain cycle")):(then=isThenable(result))?then.call(result,resolve,reject):resolve(result)):reject(value)}catch(e){domain&&!exited&&domain.exit(),reject(e)}}(chain[i++]);promise._c=[],promise._n=!1,isReject&&!promise._h&&onUnhandled(promise)})}},onUnhandled=function(promise){task.call(global,function(){var result,handler,console,value=promise._v,unhandled=isUnhandled(promise);if(unhandled&&(result=perform(function(){isNode?process.emit("unhandledRejection",value,promise):(handler=global.onunhandledrejection)?handler({promise:promise,reason:value}):(console=global.console)&&console.error&&console.error("Unhandled promise rejection",value)}),promise._h=isNode||isUnhandled(promise)?2:1),promise._a=void 0,unhandled&&result.e)throw result.v})},isUnhandled=function(promise){return 1!==promise._h&&0===(promise._a||promise._c).length},onHandleUnhandled=function(promise){task.call(global,function(){var handler;isNode?process.emit("rejectionHandled",promise):(handler=global.onrejectionhandled)&&handler({promise:promise,reason:promise._v})})},$reject=function(value){var promise=this;promise._d||(promise._d=!0,promise=promise._w||promise,promise._v=value,promise._s=2,promise._a||(promise._a=promise._c.slice()),notify(promise,!0))},$resolve=function(value){var then,promise=this;if(!promise._d){promise._d=!0,promise=promise._w||promise;try{if(promise===value)throw TypeError("Promise can't be resolved itself");(then=isThenable(value))?microtask(function(){var wrapper={_w:promise,_d:!1};try{then.call(value,ctx($resolve,wrapper,1),ctx($reject,wrapper,1))}catch(e){$reject.call(wrapper,e)}}):(promise._v=value,promise._s=1,notify(promise,!1))}catch(e){$reject.call({_w:promise,_d:!1},e)}}};USE_NATIVE||($Promise=function(executor){anInstance(this,$Promise,"Promise","_h"),aFunction(executor),Internal.call(this);try{executor(ctx($resolve,this,1),ctx($reject,this,1))}catch(err){$reject.call(this,err)}},Internal=function(executor){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},Internal.prototype=require("./_redefine-all")($Promise.prototype,{then:function(onFulfilled,onRejected){var reaction=newPromiseCapability(speciesConstructor(this,$Promise));return reaction.ok="function"!=typeof onFulfilled||onFulfilled,reaction.fail="function"==typeof onRejected&&onRejected,reaction.domain=isNode?process.domain:void 0,this._c.push(reaction),this._a&&this._a.push(reaction),this._s&&notify(this,!1),reaction.promise},catch:function(onRejected){return this.then(void 0,onRejected)}}),OwnPromiseCapability=function(){var promise=new Internal;this.promise=promise,this.resolve=ctx($resolve,promise,1),this.reject=ctx($reject,promise,1)},newPromiseCapabilityModule.f=newPromiseCapability=function(C){return C===$Promise||C===Wrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C)}),$export($export.G+$export.W+$export.F*!USE_NATIVE,{Promise:$Promise}),require("./_set-to-string-tag")($Promise,"Promise"),require("./_set-species")("Promise"),Wrapper=require("./_core").Promise,$export($export.S+$export.F*!USE_NATIVE,"Promise",{reject:function(r){var capability=newPromiseCapability(this);return(0,capability.reject)(r),capability.promise}}),$export($export.S+$export.F*(LIBRARY||!USE_NATIVE),"Promise",{resolve:function(x){return promiseResolve(LIBRARY&&this===Wrapper?$Promise:this,x)}}),$export($export.S+$export.F*!(USE_NATIVE&&require("./_iter-detect")(function(iter){$Promise.all(iter).catch(empty)})),"Promise",{all:function(iterable){var C=this,capability=newPromiseCapability(C),resolve=capability.resolve,reject=capability.reject,result=perform(function(){var values=[],index=0,remaining=1;forOf(iterable,!1,function(promise){var $index=index++,alreadyCalled=!1;values.push(void 0),remaining++,C.resolve(promise).then(function(value){alreadyCalled||(alreadyCalled=!0,values[$index]=value,--remaining||resolve(values))},reject)}),--remaining||resolve(values)});return result.e&&reject(result.v),capability.promise},race:function(iterable){var C=this,capability=newPromiseCapability(C),reject=capability.reject,result=perform(function(){forOf(iterable,!1,function(promise){C.resolve(promise).then(capability.resolve,reject)})});return result.e&&reject(result.v),capability.promise}})},{"./_a-function":34,"./_an-instance":36,"./_classof":39,"./_core":41,"./_ctx":42,"./_export":47,"./_for-of":49,"./_global":50,"./_is-object":58,"./_iter-detect":62,"./_library":65,"./_microtask":66,"./_new-promise-capability":67,"./_perform":74,"./_promise-resolve":75,"./_redefine-all":77,"./_set-species":79,"./_set-to-string-tag":80,"./_species-constructor":83,"./_task":85,"./_user-agent":93,"./_wks":94}],99:[function(require,module,exports){"use strict";var $at=require("./_string-at")(!0);require("./_iter-define")(String,"String",function(iterated){this._t=String(iterated),this._i=0},function(){var point,O=this._t,index=this._i;return index>=O.length?{value:void 0,done:!0}:(point=$at(O,index),this._i+=point.length,{value:point,done:!1})})},{"./_iter-define":61,"./_string-at":84}],100:[function(require,module,exports){"use strict";var $export=require("./_export"),core=require("./_core"),global=require("./_global"),speciesConstructor=require("./_species-constructor"),promiseResolve=require("./_promise-resolve");$export($export.P+$export.R,"Promise",{finally:function(onFinally){var C=speciesConstructor(this,core.Promise||global.Promise),isFunction="function"==typeof onFinally;return this.then(isFunction?function(x){return promiseResolve(C,onFinally()).then(function(){return x})}:onFinally,isFunction?function(e){return promiseResolve(C,onFinally()).then(function(){throw e})}:onFinally)}})},{"./_core":41,"./_export":47,"./_global":50,"./_promise-resolve":75,"./_species-constructor":83}],101:[function(require,module,exports){"use strict";var $export=require("./_export"),newPromiseCapability=require("./_new-promise-capability"),perform=require("./_perform");$export($export.S,"Promise",{try:function(callbackfn){var promiseCapability=newPromiseCapability.f(this),result=perform(callbackfn);return(result.e?promiseCapability.reject:promiseCapability.resolve)(result.v),promiseCapability.promise}})},{"./_export":47,"./_new-promise-capability":67,"./_perform":74}],102:[function(require,module,exports){require("./es6.array.iterator");for(var global=require("./_global"),hide=require("./_hide"),Iterators=require("./_iterators"),TO_STRING_TAG=require("./_wks")("toStringTag"),DOMIterables="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),i=0;i<DOMIterables.length;i++){var NAME=DOMIterables[i],Collection=global[NAME],proto=Collection&&Collection.prototype;proto&&!proto[TO_STRING_TAG]&&hide(proto,TO_STRING_TAG,NAME),Iterators[NAME]=Iterators.Array}},{"./_global":50,"./_hide":52,"./_iterators":64,"./_wks":94,"./es6.array.iterator":96}],103:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}
if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BaseClient_1=require("./BaseClient"),models_1=require("./models"),models_2=require("./models"),AccountClient=function(_super){function AccountClient(accountToken,configOptions){return _super.call(this,accountToken,models_1.ClientOptions.DefaultHeaderNames.ACCOUNT_TOKEN,configOptions)||this}return __extends(AccountClient,_super),AccountClient.prototype.getServers=function(filter,callback){return void 0===filter&&(filter=new models_2.ServerFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/servers",filter,callback)},AccountClient.prototype.getServer=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/servers/".concat(id),{},callback)},AccountClient.prototype.createServer=function(options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.POST,"/servers",options,callback)},AccountClient.prototype.editServer=function(id,options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.PUT,"/servers/".concat(id),options,callback)},AccountClient.prototype.deleteServer=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.DELETE,"/servers/".concat(id),{},callback)},AccountClient.prototype.getDomains=function(filter,callback){return void 0===filter&&(filter=new models_1.FilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/domains",filter,callback)},AccountClient.prototype.getDomain=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/domains/".concat(id),{},callback)},AccountClient.prototype.createDomain=function(options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.POST,"/domains/",options,callback)},AccountClient.prototype.editDomain=function(id,options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.PUT,"/domains/".concat(id),options,callback)},AccountClient.prototype.deleteDomain=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.DELETE,"/domains/".concat(id),{},callback)},AccountClient.prototype.verifyDomainDKIM=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.PUT,"/domains/".concat(id,"/verifyDKIM"),{},callback)},AccountClient.prototype.verifyDomainReturnPath=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.PUT,"/domains/".concat(id,"/verifyReturnPath"),{},callback)},AccountClient.prototype.verifyDomainSPF=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.PUT,"/domains/".concat(id,"/verifySPF"),{},callback)},AccountClient.prototype.rotateDomainDKIM=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.PUT,"/domains/".concat(id,"/rotateDKIM"),{},callback)},AccountClient.prototype.getSenderSignature=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/senders/".concat(id),{},callback)},AccountClient.prototype.getSenderSignatures=function(filter,callback){return void 0===filter&&(filter=new models_1.FilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.GET,"/senders",filter,callback)},AccountClient.prototype.createSenderSignature=function(options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.POST,"/senders/",options,callback)},AccountClient.prototype.editSenderSignature=function(id,options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.PUT,"/senders/".concat(id),options,callback)},AccountClient.prototype.deleteSenderSignature=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.DELETE,"/senders/".concat(id),{},callback)},AccountClient.prototype.resendSenderSignatureConfirmation=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.POST,"/senders/".concat(id,"/resend"),{},callback)},AccountClient.prototype.verifySenderSignatureSPF=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.POST,"/senders/".concat(id,"/verifySpf"),{},callback)},AccountClient.prototype.requestNewDKIMForSenderSignature=function(id,callback){return this.processRequestWithoutBody(models_1.ClientOptions.HttpMethod.POST,"/senders/".concat(id,"/requestNewDkim"),{},callback)},AccountClient.prototype.pushTemplates=function(options,callback){return this.processRequestWithBody(models_1.ClientOptions.HttpMethod.PUT,"/templates/push",options,callback)},AccountClient}(BaseClient_1.default);exports.default=AccountClient},{"./BaseClient":104,"./models":116}],104:[function(require,module,exports){"use strict";var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var axios_1=require("axios"),ErrorHandler_1=require("./errors/ErrorHandler"),packageJson=require("../../package.json"),CLIENT_VERSION=packageJson.version,BaseClient=function(){function BaseClient(token,authHeader,configOptions){this.errorHandler=new ErrorHandler_1.ErrorHandler,this.verifyToken(token),this.clientVersion=CLIENT_VERSION,this.token=token.trim(),this.authHeader=authHeader,this.clientOptions=__assign(__assign({},BaseClient.DefaultOptions),configOptions),this.httpClient=this.buildDefaultHttpClient()}return BaseClient.prototype.setClientOptions=function(configOptions){this.clientOptions=__assign(__assign({},BaseClient.DefaultOptions),configOptions),this.buildDefaultHttpClient()},BaseClient.prototype.getClientOptions=function(){return this.clientOptions},BaseClient.prototype.getComposedHttpRequestHeaders=function(){var _a;return _a={},_a[this.authHeader]=this.token,_a.Accept="application/json",_a["User-Agent"]="Postmark.JS - ".concat(this.clientVersion),_a},BaseClient.prototype.processRequestWithBody=function(method,path,body,callback){return this.processRequest(method,path,{},body,callback)},BaseClient.prototype.processRequestWithoutBody=function(method,path,queryParameters,callback){return void 0===queryParameters&&(queryParameters={}),this.processRequest(method,path,queryParameters,null,callback)},BaseClient.prototype.setDefaultPaginationValues=function(filter){filter.count=filter.count||100,filter.offset=filter.offset||0},BaseClient.prototype.processRequest=function(method,path,queryParameters,body,callback){var httpRequest=this.processHttpRequest(method,path,queryParameters,body);return this.processCallbackRequest(httpRequest,callback),httpRequest},BaseClient.prototype.processHttpRequest=function(method,path,queryParameters,body){var _this=this;return this.httpRequest(method,path,queryParameters,body).then(function(response){return response}).catch(function(error){throw _this.errorHandler.buildRequestError(error)})},BaseClient.prototype.processCallbackRequest=function(httpRequest,callback){callback&&httpRequest.then(function(response){return callback(null,response)}).catch(function(error){return callback(error,null)})},BaseClient.prototype.httpRequest=function(method,path,queryParameters,body){return this.httpClient.request({method:method,url:path,data:body,headers:this.getComposedHttpRequestHeaders(),params:queryParameters})},BaseClient.prototype.buildDefaultHttpClient=function(){var httpClient=axios_1.default.create({baseURL:this.getBaseHttpRequestURL(),timeout:this.getRequestTimeoutInSeconds(),responseType:"json",maxContentLength:1/0,maxBodyLength:1/0,validateStatus:function(status){return status>=200&&status<300}});return httpClient.interceptors.response.use(function(response){return response.data}),httpClient},BaseClient.prototype.getRequestTimeoutInSeconds=function(){return 1e3*(this.clientOptions.timeout||60)},BaseClient.prototype.getBaseHttpRequestURL=function(){return"".concat(this.clientOptions.useHttps?"https":"http","://").concat(this.clientOptions.requestHost)},BaseClient.prototype.verifyToken=function(token){if(!token||""===token.trim())throw this.errorHandler.buildGeneralError("A valid API token must be provided.")},BaseClient.DefaultOptions={useHttps:!0,requestHost:"api.postmarkapp.com",timeout:180},BaseClient}();exports.default=BaseClient},{"../../package.json":139,"./errors/ErrorHandler":106,axios:1}],105:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var BaseClient_1=require("./BaseClient"),index_1=require("./models/index"),index_2=require("./models/index"),ServerClient=function(_super){function ServerClient(serverToken,configOptions){return _super.call(this,serverToken,index_1.ClientOptions.DefaultHeaderNames.SERVER_TOKEN,configOptions)||this}return __extends(ServerClient,_super),ServerClient.prototype.sendEmail=function(email,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/email",email,callback)},ServerClient.prototype.sendEmailBatch=function(emails,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/email/batch",emails,callback)},ServerClient.prototype.sendEmailWithTemplate=function(template,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/email/withTemplate",template,callback)},ServerClient.prototype.sendEmailBatchWithTemplates=function(templates,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/email/batchWithTemplates",{Messages:templates},callback)},ServerClient.prototype.getDeliveryStatistics=function(callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/deliveryStats",{},callback)},ServerClient.prototype.getBounces=function(filter,callback){return void 0===filter&&(filter=new index_2.BounceFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/bounces",filter,callback)},ServerClient.prototype.getBounce=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/bounces/".concat(id),{},callback)},ServerClient.prototype.getBounceDump=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/bounces/".concat(id,"/dump"),{},callback)},ServerClient.prototype.activateBounce=function(id,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.PUT,"/bounces/".concat(id,"/activate"),{},callback)},ServerClient.prototype.getTemplates=function(filter,callback){return void 0===filter&&(filter=new index_2.TemplateFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/templates",filter,callback)},ServerClient.prototype.getTemplate=function(idOrAlias,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/templates/".concat(idOrAlias),{},callback)},ServerClient.prototype.deleteTemplate=function(idOrAlias,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.DELETE,"/templates/".concat(idOrAlias),{},callback)},ServerClient.prototype.createTemplate=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/templates/",options,callback)},ServerClient.prototype.editTemplate=function(idOrAlias,options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.PUT,"/templates/".concat(idOrAlias),options,callback)},ServerClient.prototype.validateTemplate=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/templates/validate",options,callback)},ServerClient.prototype.getServer=function(callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/server",{},callback)},ServerClient.prototype.editServer=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.PUT,"/server",options,callback)},ServerClient.prototype.getOutboundMessages=function(filter,callback){return void 0===filter&&(filter=new index_2.OutboundMessagesFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound",filter,callback)},ServerClient.prototype.getOutboundMessageDetails=function(messageId,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/".concat(messageId),{},callback)},ServerClient.prototype.getOutboundMessageDump=function(messageId,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/".concat(messageId,"/dump"),{},callback)},ServerClient.prototype.getInboundMessages=function(filter,callback){return void 0===filter&&(filter=new index_2.InboundMessagesFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/inbound",filter,callback)},ServerClient.prototype.getInboundMessageDetails=function(messageId,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/inbound/".concat(messageId,"/details"),{},callback)},ServerClient.prototype.bypassBlockedInboundMessage=function(messageId,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.PUT,"/messages/inbound/".concat(messageId,"/bypass"),{},callback)},ServerClient.prototype.retryInboundHookForMessage=function(messageId,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.PUT,"/messages/inbound/".concat(messageId,"/retry"),{},callback)},ServerClient.prototype.getMessageOpens=function(filter,callback){return void 0===filter&&(filter=new index_2.OutboundMessageOpensFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/opens",filter,callback)},ServerClient.prototype.getMessageOpensForSingleMessage=function(messageId,filter,callback){return void 0===filter&&(filter=new index_2.OutboundMessageOpensFilteringParameters(50,0)),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/opens/".concat(messageId),filter,callback)},ServerClient.prototype.getMessageClicks=function(filter,callback){return void 0===filter&&(filter=new index_2.OutboundMessageClicksFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/clicks",filter,callback)},ServerClient.prototype.getMessageClicksForSingleMessage=function(messageId,filter,callback){return void 0===filter&&(filter=new index_2.OutboundMessageClicksFilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/messages/outbound/clicks/".concat(messageId),filter,callback)},ServerClient.prototype.getOutboundOverview=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound",filter,callback)},ServerClient.prototype.getSentCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/sends",filter,callback)},ServerClient.prototype.getBounceCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/bounces",filter,callback)},ServerClient.prototype.getSpamComplaintsCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/spam",filter,callback)},ServerClient.prototype.getTrackedEmailCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/tracked",filter,callback)},ServerClient.prototype.getEmailOpenCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/opens",filter,callback)},ServerClient.prototype.getEmailOpenPlatformUsage=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/platforms",filter,callback)},ServerClient.prototype.getEmailOpenClientUsage=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/emailClients",filter,callback)},ServerClient.prototype.getEmailOpenReadTimes=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/opens/readTimes",filter,callback)},ServerClient.prototype.getClickCounts=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks",filter,callback)},ServerClient.prototype.getClickBrowserUsage=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/browserFamilies",filter,callback)},ServerClient.prototype.getClickPlatformUsage=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/platforms",filter,callback)},ServerClient.prototype.getClickLocation=function(filter,callback){return void 0===filter&&(filter=new index_2.StatisticsFilteringParameters),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/stats/outbound/clicks/location",filter,callback)},ServerClient.prototype.createInboundRuleTrigger=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/triggers/inboundRules",options,callback)},ServerClient.prototype.deleteInboundRuleTrigger=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.DELETE,"/triggers/inboundRules/".concat(id),{},callback)},ServerClient.prototype.getInboundRuleTriggers=function(filter,callback){return void 0===filter&&(filter=new index_1.FilteringParameters),this.setDefaultPaginationValues(filter),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/triggers/inboundRules",filter,callback)},ServerClient.prototype.getWebhooks=function(filter,callback){return void 0===filter&&(filter={}),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/webhooks",filter,callback)},ServerClient.prototype.getWebhook=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/webhooks/".concat(id),{},callback)},ServerClient.prototype.createWebhook=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/webhooks",options,callback)},ServerClient.prototype.editWebhook=function(id,options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.PUT,"/webhooks/".concat(id),options,callback)},ServerClient.prototype.deleteWebhook=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.DELETE,"/webhooks/".concat(id),{},callback)},ServerClient.prototype.getMessageStreams=function(filter,callback){return void 0===filter&&(filter={}),this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/message-streams",filter,callback)},ServerClient.prototype.getMessageStream=function(id,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/message-streams/".concat(id),{},callback)},ServerClient.prototype.editMessageStream=function(id,options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.PATCH,"/message-streams/".concat(id),options,callback)},ServerClient.prototype.createMessageStream=function(options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/message-streams",options,callback)},ServerClient.prototype.archiveMessageStream=function(id,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/message-streams/".concat(id,"/archive"),{},callback)},ServerClient.prototype.unarchiveMessageStream=function(id,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/message-streams/".concat(id,"/unarchive"),{},callback)},ServerClient.prototype.getSuppressions=function(messageStream,callback){return this.processRequestWithoutBody(index_1.ClientOptions.HttpMethod.GET,"/message-streams/".concat(messageStream,"/suppressions/dump"),callback)},ServerClient.prototype.createSuppressions=function(messageStream,options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/message-streams/".concat(messageStream,"/suppressions"),options,callback)},ServerClient.prototype.deleteSuppressions=function(messageStream,options,callback){return this.processRequestWithBody(index_1.ClientOptions.HttpMethod.POST,"/message-streams/".concat(messageStream,"/suppressions/delete"),options,callback)},ServerClient}(BaseClient_1.default);exports.default=ServerClient},{"./BaseClient":104,"./models/index":116}],106:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorHandler=void 0;var Errors=require("./Errors"),ErrorHandler=function(){function ErrorHandler(){}return ErrorHandler.prototype.buildRequestError=function(error){var response=error.response;return void 0!==response?this.buildErrorForResponse(response,error.message):void 0!==error.message?this.buildGeneralError(error.message):this.buildGeneralError(JSON.stringify(error,Object.getOwnPropertyNames(error)))},ErrorHandler.prototype.buildGeneralError=function(errorMessage){return new Errors.PostmarkError(errorMessage)},ErrorHandler.prototype.buildErrorForResponse=function(response,errorMessage){var data=response.data,errorCode=this.retrieveDefaultOrValue(0,data.ErrorCode),status=this.retrieveDefaultOrValue(0,response.status),message=this.retrieveDefaultOrValue(errorMessage,data.Message);return this.buildRequestErrorByStatus(message,errorCode,status)},ErrorHandler.prototype.retrieveDefaultOrValue=function(defaultValue,data){return void 0===data?defaultValue:data},ErrorHandler.prototype.buildRequestErrorByStatus=function(errorMessage,errorCode,errorStatusCode){switch(errorStatusCode){case 401:return new Errors.InvalidAPIKeyError(errorMessage,errorCode,errorStatusCode);case 404:return new Errors.PostmarkError(errorMessage,errorCode,errorStatusCode);case 422:return Errors.ApiInputError.buildSpecificError(errorMessage,errorCode,errorStatusCode);case 429:return new Errors.RateLimitExceededError(errorMessage,errorCode,errorStatusCode);case 500:return new Errors.InternalServerError(errorMessage,errorCode,errorStatusCode);case 503:return new Errors.ServiceUnavailablerError(errorMessage,errorCode,errorStatusCode);default:return new Errors.UnknownError(errorMessage,errorCode,errorStatusCode)}},ErrorHandler}();exports.ErrorHandler=ErrorHandler},{"./Errors":107}],107:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.InvalidEmailRequestError=exports.InactiveRecipientsError=exports.ApiInputError=exports.UnknownError=exports.RateLimitExceededError=exports.ServiceUnavailablerError=exports.InternalServerError=exports.InvalidAPIKeyError=exports.HttpError=exports.PostmarkError=void 0;var PostmarkError=function(_super){function PostmarkError(message,code,statusCode){void 0===code&&(code=0),void 0===statusCode&&(statusCode=0);var _this=_super.call(this,message)||this;return _this.statusCode=statusCode,_this.code=code,Object.setPrototypeOf(_this,PostmarkError.prototype),_this.setUpStackTrace(),_this}return __extends(PostmarkError,_super),PostmarkError.prototype.setUpStackTrace=function(){this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)},PostmarkError}(Error);exports.PostmarkError=PostmarkError;var HttpError=function(_super){function HttpError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,HttpError.prototype),_this.setUpStackTrace(),_this}return __extends(HttpError,_super),HttpError}(PostmarkError);exports.HttpError=HttpError;var InvalidAPIKeyError=function(_super){function InvalidAPIKeyError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,InvalidAPIKeyError.prototype),_this.setUpStackTrace(),_this}return __extends(InvalidAPIKeyError,_super),InvalidAPIKeyError}(HttpError);exports.InvalidAPIKeyError=InvalidAPIKeyError;var InternalServerError=function(_super){function InternalServerError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,InternalServerError.prototype),_this.setUpStackTrace(),_this}return __extends(InternalServerError,_super),InternalServerError}(HttpError);exports.InternalServerError=InternalServerError;var ServiceUnavailablerError=function(_super){function ServiceUnavailablerError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,ServiceUnavailablerError.prototype),_this.setUpStackTrace(),_this}return __extends(ServiceUnavailablerError,_super),ServiceUnavailablerError}(HttpError);exports.ServiceUnavailablerError=ServiceUnavailablerError;var RateLimitExceededError=function(_super){function RateLimitExceededError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,RateLimitExceededError.prototype),_this.setUpStackTrace(),_this}return __extends(RateLimitExceededError,_super),RateLimitExceededError}(HttpError);exports.RateLimitExceededError=RateLimitExceededError;var UnknownError=function(_super){function UnknownError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,UnknownError.prototype),_this.setUpStackTrace(),_this}return __extends(UnknownError,_super),UnknownError}(HttpError);exports.UnknownError=UnknownError;var ApiInputError=function(_super){function ApiInputError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,ApiInputError.prototype),_this.setUpStackTrace(),_this}return __extends(ApiInputError,_super),ApiInputError.buildSpecificError=function(message,code,statusCode){switch(code){case this.ERROR_CODES.inactiveRecipient:return new InactiveRecipientsError(message,code,statusCode);case this.ERROR_CODES.invalidEmailRequest:return new InvalidEmailRequestError(message,code,statusCode);default:return new ApiInputError(message,code,statusCode)}},ApiInputError.ERROR_CODES={inactiveRecipient:406,invalidEmailRequest:300},ApiInputError}(HttpError);exports.ApiInputError=ApiInputError;var InactiveRecipientsError=function(_super){function InactiveRecipientsError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,InactiveRecipientsError.prototype),_this.setUpStackTrace(),_this.recipients=InactiveRecipientsError.parseInactiveRecipients(message),_this}return __extends(InactiveRecipientsError,_super),InactiveRecipientsError.parseInactiveRecipients=function(message){var result=[];return this.inactiveRecipientsPatterns.some(function(pattern){var regexResult=message.match(pattern);if(null!==regexResult)return result=regexResult[1].split(", ");result=[]}),result},InactiveRecipientsError.inactiveRecipientsPatterns=[/Found inactive addresses: (.+?)\.?$/m,/these inactive addresses: (.+?)\. Inactive/,/these inactive addresses: (.+?)\.?$/],InactiveRecipientsError}(ApiInputError);exports.InactiveRecipientsError=InactiveRecipientsError;var InvalidEmailRequestError=function(_super){function InvalidEmailRequestError(message,code,statusCode){var _this=_super.call(this,message,code,statusCode)||this;return Object.setPrototypeOf(_this,InvalidEmailRequestError.prototype),_this.setUpStackTrace(),_this}return __extends(InvalidEmailRequestError,_super),InvalidEmailRequestError}(ApiInputError);exports.InvalidEmailRequestError=InvalidEmailRequestError},{}],108:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],109:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.BounceFilteringParameters=exports.BounceType=void 0;var FilteringParameters_1=require("../client/FilteringParameters");!function(BounceType){BounceType.HardBounce="HardBounce",BounceType.Transient="Transient",BounceType.Unsubscribe="Unsubscribe",BounceType.Subscribe="Subscribe",BounceType.AutoResponder="AutoResponder",BounceType.AddressChange="AddressChange",BounceType.DnsError="DnsError",BounceType.SpamNotification="SpamNotification",BounceType.OpenRelayTest="OpenRelayTest",BounceType.Unknown="Unknown",BounceType.SoftBounce="SoftBounce",
BounceType.VirusNotification="VirusNotification",BounceType.ChallengeVerification="ChallengeVerification",BounceType.BadEmailAddress="BadEmailAddress",BounceType.SpamComplaint="SpamComplaint",BounceType.ManuallyDeactivated="ManuallyDeactivated",BounceType.Unconfirmed="Unconfirmed",BounceType.Blocked="Blocked",BounceType.SMTPApiError="SMTPApiError",BounceType.InboundError="InboundError",BounceType.DMARCPolicy="DMARCPolicy",BounceType.TemplateRenderingFailed="TemplateRenderingFailed"}(exports.BounceType||(exports.BounceType={}));var BounceFilteringParameters=function(_super){function BounceFilteringParameters(count,offset,type,inactive,emailFilter,tag,messageID,fromDate,toDate,messageStream){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.type=type,_this.inactive=inactive,_this.emailFilter=emailFilter,_this.tag=tag,_this.messageID=messageID,_this.fromDate=fromDate,_this.toDate=toDate,_this.messageStream=messageStream,_this}return __extends(BounceFilteringParameters,_super),BounceFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.BounceFilteringParameters=BounceFilteringParameters},{"../client/FilteringParameters":113}],110:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],111:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ClientOptions=void 0;!function(ClientOptions){var Configuration=function(){function Configuration(useHttps,requestHost,timeout){this.useHttps=useHttps,this.requestHost=requestHost,this.timeout=timeout}return Configuration}();ClientOptions.Configuration=Configuration;!function(HttpMethod){HttpMethod.GET="GET",HttpMethod.POST="POST",HttpMethod.DELETE="DELETE",HttpMethod.PUT="PUT",HttpMethod.OPTIONS="OPTIONS",HttpMethod.HEAD="HEAD",HttpMethod.PATCH="PATCH"}(ClientOptions.HttpMethod||(ClientOptions.HttpMethod={}));!function(DefaultHeaderNames){DefaultHeaderNames.SERVER_TOKEN="X-Postmark-Server-Token",DefaultHeaderNames.ACCOUNT_TOKEN="X-Postmark-Account-Token"}(ClientOptions.DefaultHeaderNames||(ClientOptions.DefaultHeaderNames={}))}(exports.ClientOptions||(exports.ClientOptions={}))},{}],112:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],113:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FilteringParameters=void 0;var FilteringParameters=function(){function FilteringParameters(count,offset){void 0===count&&(count=100),void 0===offset&&(offset=0),this.count=count,this.offset=offset}return FilteringParameters}();exports.FilteringParameters=FilteringParameters},{}],114:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],115:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdateDomainRequest=exports.CreateDomainRequest=void 0;var CreateDomainRequest=function(){function CreateDomainRequest(Name,ReturnPathDomain){this.Name=Name,this.ReturnPathDomain=ReturnPathDomain}return CreateDomainRequest}();exports.CreateDomainRequest=CreateDomainRequest;var UpdateDomainRequest=function(){function UpdateDomainRequest(ReturnPathDomain){this.ReturnPathDomain=ReturnPathDomain}return UpdateDomainRequest}();exports.UpdateDomainRequest=UpdateDomainRequest},{}],116:[function(require,module,exports){"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k),Object.defineProperty(o,k2,{enumerable:!0,get:function(){return m[k]}})}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(require("./client/ClientOptions"),exports),__exportStar(require("./client/SupportingTypes"),exports),__exportStar(require("./client/Callback"),exports),__exportStar(require("./client/DefaultResponse"),exports),__exportStar(require("./client/FilteringParameters"),exports),__exportStar(require("./bounces/Bounce"),exports),__exportStar(require("./bounces/BounceFilteringParameters"),exports),__exportStar(require("./message/Message"),exports),__exportStar(require("./message/SupportingTypes"),exports),__exportStar(require("./messages/OutboundMessage"),exports),__exportStar(require("./messages/OutboundMessageOpen"),exports),__exportStar(require("./messages/OutboundMessageClick"),exports),__exportStar(require("./messages/InboundMessage"),exports),__exportStar(require("./messages/MessageFilteringParameters"),exports),__exportStar(require("./templates/Template"),exports),__exportStar(require("./server/Server"),exports),__exportStar(require("./server/Servers"),exports),__exportStar(require("./server/ServerFilteringParameters"),exports),__exportStar(require("./domains/Domain"),exports),__exportStar(require("./senders/Signature"),exports),__exportStar(require("./suppressions/Suppression"),exports),__exportStar(require("./stats/Stats"),exports),__exportStar(require("./stats/StatsFilteringParameters"),exports),__exportStar(require("./triggers/InboundRule"),exports),__exportStar(require("./webhooks/Webhooks"),exports),__exportStar(require("./webhooks/Webhook"),exports),__exportStar(require("./webhooks/WebhookFilteringParameters"),exports),__exportStar(require("./suppressions/Suppression"),exports),__exportStar(require("./streams/MessageStream"),exports),__exportStar(require("./streams/MessageStreamsFilteringParameters"),exports)},{"./bounces/Bounce":108,"./bounces/BounceFilteringParameters":109,"./client/Callback":110,"./client/ClientOptions":111,"./client/DefaultResponse":112,"./client/FilteringParameters":113,"./client/SupportingTypes":114,"./domains/Domain":115,"./message/Message":117,"./message/SupportingTypes":118,"./messages/InboundMessage":119,"./messages/MessageFilteringParameters":120,"./messages/OutboundMessage":121,"./messages/OutboundMessageClick":122,"./messages/OutboundMessageOpen":123,"./senders/Signature":124,"./server/Server":125,"./server/ServerFilteringParameters":126,"./server/Servers":127,"./stats/Stats":128,"./stats/StatsFilteringParameters":129,"./streams/MessageStream":130,"./streams/MessageStreamsFilteringParameters":131,"./suppressions/Suppression":132,"./templates/Template":133,"./triggers/InboundRule":134,"./webhooks/Webhook":135,"./webhooks/WebhookFilteringParameters":136,"./webhooks/Webhooks":137}],117:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Message=void 0;var Message=function(){function Message(From,Subject,HtmlBody,TextBody,To,Cc,Bcc,ReplyTo,Tag,TrackOpens,TrackLinks,Headers,Attachments,Metadata){this.From=From,this.To=To,this.Cc=Cc,this.Bcc=Bcc,this.Subject=Subject,this.ReplyTo=ReplyTo,this.HtmlBody=HtmlBody,this.TextBody=TextBody,this.Tag=Tag,this.TrackOpens=TrackOpens,this.TrackLinks=TrackLinks,this.Headers=Headers,this.Attachments=Attachments,this.Metadata=Metadata}return Message}();exports.Message=Message},{}],118:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Attachment=exports.Header=exports.ServerDeliveryTypes=exports.LinkClickLocation=exports.LinkTrackingOptions=void 0;!function(LinkTrackingOptions){LinkTrackingOptions.TextOnly="TextOnly",LinkTrackingOptions.HtmlOnly="HtmlOnly",LinkTrackingOptions.HtmlAndText="HtmlAndText",LinkTrackingOptions.None="None"}(exports.LinkTrackingOptions||(exports.LinkTrackingOptions={}));!function(LinkClickLocation){LinkClickLocation.HTML="HTML",LinkClickLocation.Text="Text"}(exports.LinkClickLocation||(exports.LinkClickLocation={}));!function(ServerDeliveryTypes){ServerDeliveryTypes.Live="Live",ServerDeliveryTypes.Sandbox="Sandbox"}(exports.ServerDeliveryTypes||(exports.ServerDeliveryTypes={}));var Header=function(){function Header(Name,Value){this.Name=Name,this.Value=Value}return Header}();exports.Header=Header;var Attachment=function(){function Attachment(Name,Content,ContentType,ContentID,ContentLength){void 0===ContentID&&(ContentID=null),this.Name=Name,this.Content=Content,this.ContentType=ContentType,this.ContentID=ContentID,this.ContentLength=ContentLength}return Attachment}();exports.Attachment=Attachment},{}],119:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],120:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.OutboundMessageClicksFilteringParameters=exports.OutboundMessageOpensFilteringParameters=exports.OutboundMessageTrackingFilteringParameters=exports.InboundMessagesFilteringParameters=exports.OutboundMessagesFilteringParameters=exports.InboundMessageStatus=exports.OutboundMessageStatus=void 0;var FilteringParameters_1=require("../client/FilteringParameters");!function(OutboundMessageStatus){OutboundMessageStatus.Queued="queued",OutboundMessageStatus.Sent="sent",OutboundMessageStatus.Processed="processed"}(exports.OutboundMessageStatus||(exports.OutboundMessageStatus={}));!function(InboundMessageStatus){InboundMessageStatus.Queued="queued",InboundMessageStatus.Sent="sent",InboundMessageStatus.Processed="processed",InboundMessageStatus.Blocked="blocked",InboundMessageStatus.Failed="failed",InboundMessageStatus.Scheduled="scheduled"}(exports.InboundMessageStatus||(exports.InboundMessageStatus={}));var OutboundMessagesFilteringParameters=function(_super){function OutboundMessagesFilteringParameters(count,offset,recipient,fromEmail,tag,status,fromDate,toDate,subject,messageStream){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.recipient=recipient,_this.fromEmail=fromEmail,_this.tag=tag,_this.status=status,_this.fromDate=fromDate,_this.toDate=toDate,_this.subject=subject,_this.messageStream=messageStream,_this}return __extends(OutboundMessagesFilteringParameters,_super),OutboundMessagesFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.OutboundMessagesFilteringParameters=OutboundMessagesFilteringParameters;var InboundMessagesFilteringParameters=function(_super){function InboundMessagesFilteringParameters(count,offset,mailboxHash,recipient,fromEmail,tag,status,fromDate,toDate,subject){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.status=status,_this.mailboxHash=mailboxHash,_this.recipient=recipient,_this.fromEmail=fromEmail,_this.tag=tag,_this.fromDate=fromDate,_this.toDate=toDate,_this.subject=subject,_this}return __extends(InboundMessagesFilteringParameters,_super),InboundMessagesFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.InboundMessagesFilteringParameters=InboundMessagesFilteringParameters;var OutboundMessageTrackingFilteringParameters=function(_super){function OutboundMessageTrackingFilteringParameters(count,offset,recipient,tag,client_name,client_company,client_family,os_name,os_family,os_company,platform,country,region,city,messageStream){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.recipient=recipient,_this.tag=tag,_this.client_name=client_name,_this.client_company=client_company,_this.client_family=client_family,_this.os_name=os_name,_this.os_family=os_family,_this.os_company=os_company,_this.platform=platform,_this.country=country,_this.region=region,_this.city=city,_this.messageStream=messageStream,_this}return __extends(OutboundMessageTrackingFilteringParameters,_super),OutboundMessageTrackingFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.OutboundMessageTrackingFilteringParameters=OutboundMessageTrackingFilteringParameters;var OutboundMessageOpensFilteringParameters=function(_super){function OutboundMessageOpensFilteringParameters(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(OutboundMessageOpensFilteringParameters,_super),OutboundMessageOpensFilteringParameters}(OutboundMessageTrackingFilteringParameters);exports.OutboundMessageOpensFilteringParameters=OutboundMessageOpensFilteringParameters;var OutboundMessageClicksFilteringParameters=function(_super){function OutboundMessageClicksFilteringParameters(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(OutboundMessageClicksFilteringParameters,_super),OutboundMessageClicksFilteringParameters}(OutboundMessageTrackingFilteringParameters);exports.OutboundMessageClicksFilteringParameters=OutboundMessageClicksFilteringParameters},{"../client/FilteringParameters":113}],121:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],122:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],123:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],124:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateSignatureRequest=exports.UpdateSignatureRequest=void 0;var UpdateSignatureRequest=function(){function UpdateSignatureRequest(Name,ReplyToEmail,ReturnPathDomain,ConfirmationPersonalNote){this.Name=Name,this.ReplyToEmail=ReplyToEmail,this.ReturnPathDomain=ReturnPathDomain,this.ConfirmationPersonalNote=ConfirmationPersonalNote}return UpdateSignatureRequest}();exports.UpdateSignatureRequest=UpdateSignatureRequest;var CreateSignatureRequest=function(){function CreateSignatureRequest(Name,FromEmail,ReplyToEmail,ReturnPathDomain,ConfirmationPersonalNote){this.Name=Name,this.ReplyToEmail=ReplyToEmail,this.ReturnPathDomain=ReturnPathDomain,this.FromEmail=FromEmail,this.ConfirmationPersonalNote=ConfirmationPersonalNote}return CreateSignatureRequest}();exports.CreateSignatureRequest=CreateSignatureRequest},{}],125:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateServerRequest=exports.UpdateServerRequest=void 0;var UpdateServerRequest=function(){function UpdateServerRequest(Name,Color,SmtpApiActivated,RawEmailEnabled,InboundHookUrl,BounceHookUrl,OpenHookUrl,DeliveryHookUrl,ClickHookUrl,PostFirstOpenOnly,InboundSpamThreshold,TrackOpens,TrackLinks,IncludeBounceContentInHook,EnableSmtpApiErrorHooks,InboundDomain){this.Name=Name,this.Color=Color,this.SmtpApiActivated=SmtpApiActivated,this.RawEmailEnabled=RawEmailEnabled,this.InboundHookUrl=InboundHookUrl,this.BounceHookUrl=BounceHookUrl,this.OpenHookUrl=OpenHookUrl,this.DeliveryHookUrl=DeliveryHookUrl,this.ClickHookUrl=ClickHookUrl,this.PostFirstOpenOnly=PostFirstOpenOnly,this.InboundSpamThreshold=InboundSpamThreshold,this.InboundDomain=InboundDomain,this.TrackOpens=TrackOpens,this.TrackLinks=TrackLinks,this.IncludeBounceContentInHook=IncludeBounceContentInHook,this.EnableSmtpApiErrorHooks=EnableSmtpApiErrorHooks}return UpdateServerRequest}();exports.UpdateServerRequest=UpdateServerRequest;var CreateServerRequest=function(_super){function CreateServerRequest(Name,Color,SmtpApiActivated,RawEmailEnabled,InboundHookUrl,BounceHookUrl,OpenHookUrl,DeliveryHookUrl,ClickHookUrl,PostFirstOpenOnly,InboundSpamThreshold,TrackOpens,TrackLinks,IncludeBounceContentInHook,EnableSmtpApiErrorHooks,InboundDomain,DeliveryType){var _this=_super.call(this,Name,Color,SmtpApiActivated,RawEmailEnabled,InboundHookUrl,BounceHookUrl,OpenHookUrl,DeliveryHookUrl,ClickHookUrl,PostFirstOpenOnly,InboundSpamThreshold,TrackOpens,TrackLinks,IncludeBounceContentInHook,EnableSmtpApiErrorHooks,InboundDomain)||this;return _this.DeliveryType=DeliveryType,_this}return __extends(CreateServerRequest,_super),CreateServerRequest}(UpdateServerRequest);exports.CreateServerRequest=CreateServerRequest},{}],126:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.ServerFilteringParameters=void 0;var FilteringParameters_1=require("../client/FilteringParameters"),ServerFilteringParameters=function(_super){function ServerFilteringParameters(count,offset,name){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.name=name,_this}return __extends(ServerFilteringParameters,_super),ServerFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.ServerFilteringParameters=ServerFilteringParameters},{"../client/FilteringParameters":113}],127:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],128:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],129:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StatisticsFilteringParameters=void 0;var StatisticsFilteringParameters=function(){function StatisticsFilteringParameters(tag,fromDate,toDate){this.tag=tag,this.fromDate=fromDate,this.toDate=toDate}return StatisticsFilteringParameters}();exports.StatisticsFilteringParameters=StatisticsFilteringParameters},{}],130:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateMessageStreamRequest=exports.UpdateMessageStreamRequest=exports.UnsubscribeHandlingTypes=void 0;!function(UnsubscribeHandlingTypes){UnsubscribeHandlingTypes.None="None",UnsubscribeHandlingTypes.Postmark="Postmark",UnsubscribeHandlingTypes.Custom="Custom"}(exports.UnsubscribeHandlingTypes||(exports.UnsubscribeHandlingTypes={}));var UpdateMessageStreamRequest=function(){function UpdateMessageStreamRequest(name,description,subscriptionManagementConfiguration){this.Name=name,this.Description=description,this.SubscriptionManagementConfiguration=subscriptionManagementConfiguration}return UpdateMessageStreamRequest}();exports.UpdateMessageStreamRequest=UpdateMessageStreamRequest;var CreateMessageStreamRequest=function(){function CreateMessageStreamRequest(id,name,messageStreamType,description,subscriptionManagementConfiguration){this.Name=name,this.Description=description,this.ID=id,this.MessageStreamType=messageStreamType,this.SubscriptionManagementConfiguration=subscriptionManagementConfiguration}return CreateMessageStreamRequest}();exports.CreateMessageStreamRequest=CreateMessageStreamRequest},{}],131:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MessageStreamsFilteringParameters=void 0;var MessageStreamsFilteringParameters=function(){function MessageStreamsFilteringParameters(messageStreamType,includeArchivedStreams){this.messageStreamType=messageStreamType,this.includeArchivedStreams=includeArchivedStreams}return MessageStreamsFilteringParameters}();exports.MessageStreamsFilteringParameters=MessageStreamsFilteringParameters},{}],132:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],133:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplateFilteringParameters=exports.TemplatedMessage=exports.TemplatesPushRequest=exports.TemplateTypes=exports.TemplateValidationOptions=exports.CreateTemplateRequest=exports.UpdateTemplateRequest=void 0;var FilteringParameters_1=require("../client/FilteringParameters"),UpdateTemplateRequest=function(){function UpdateTemplateRequest(Name,Subject,HtmlBody,TextBody,Alias,TemplateType,LayoutTemplate){this.Name=Name,this.Subject=Subject,this.HtmlBody=HtmlBody,this.TextBody=TextBody,this.Alias=Alias,this.LayoutTemplate=LayoutTemplate,this.TemplateType=TemplateType}return UpdateTemplateRequest}();exports.UpdateTemplateRequest=UpdateTemplateRequest;var CreateTemplateRequest=function(_super){function CreateTemplateRequest(Name,Subject,HtmlBody,TextBody,Alias,TemplateType,LayoutTemplate){return _super.call(this,Name,Subject,HtmlBody,TextBody,Alias,TemplateType,LayoutTemplate)||this}return __extends(CreateTemplateRequest,_super),CreateTemplateRequest}(UpdateTemplateRequest);exports.CreateTemplateRequest=CreateTemplateRequest;var TemplateValidationOptions=function(){function TemplateValidationOptions(Subject,HtmlBody,TextBody,TestRenderModel,TemplateType,LayoutTemplate,InlineCssForHtmlTestRender){this.Subject=Subject,this.HtmlBody=HtmlBody,this.TextBody=TextBody,this.TestRenderModel=TestRenderModel,this.TemplateType=TemplateType,this.LayoutTemplate=LayoutTemplate,this.InlineCssForHtmlTestRender=InlineCssForHtmlTestRender}return TemplateValidationOptions}();exports.TemplateValidationOptions=TemplateValidationOptions;!function(TemplateTypes){TemplateTypes.Standard="Standard",TemplateTypes.Layout="Layout"}(exports.TemplateTypes||(exports.TemplateTypes={}));var TemplatesPushRequest=function(){function TemplatesPushRequest(SourceServerID,DestinationServerID,PerformChanges){this.SourceServerID=SourceServerID,this.DestinationServerID=DestinationServerID,this.PerformChanges=PerformChanges}return TemplatesPushRequest}();exports.TemplatesPushRequest=TemplatesPushRequest;var TemplatedMessage=function(){function TemplatedMessage(from,templateIdOrAlias,templateModel,to,cc,bcc,replyTo,tag,trackOpens,trackLinks,headers,attachments){this.From=from,this.TemplateModel=templateModel,"number"==typeof templateIdOrAlias?this.TemplateId=templateIdOrAlias:this.TemplateAlias=templateIdOrAlias,this.To=to,this.Cc=cc,this.Bcc=bcc,this.ReplyTo=replyTo,this.Tag=tag,this.TrackOpens=trackOpens,this.TrackLinks=trackLinks,this.Headers=headers,this.Attachments=attachments}return TemplatedMessage}();exports.TemplatedMessage=TemplatedMessage;var TemplateFilteringParameters=function(_super){function TemplateFilteringParameters(count,offset,templateType,layoutTemplate){void 0===count&&(count=100),void 0===offset&&(offset=0);var _this=_super.call(this,count,offset)||this;return _this.templateType=templateType,_this.layoutTemplate=layoutTemplate,_this}return __extends(TemplateFilteringParameters,_super),TemplateFilteringParameters}(FilteringParameters_1.FilteringParameters);exports.TemplateFilteringParameters=TemplateFilteringParameters},{"../client/FilteringParameters":113}],134:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateInboundRuleRequest=void 0;var CreateInboundRuleRequest=function(){function CreateInboundRuleRequest(Rule){this.Rule=Rule}return CreateInboundRuleRequest}();exports.CreateInboundRuleRequest=CreateInboundRuleRequest},{}],135:[function(require,module,exports){"use strict";var __extends=this&&this.__extends||function(){var extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)Object.prototype.hasOwnProperty.call(b,p)&&(d[p]=b[p])})(d,b)};return function(d,b){function __(){this.constructor=d}if("function"!=typeof b&&null!==b)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.CreateWebhookRequest=exports.UpdateWebhookRequest=void 0;var UpdateWebhookRequest=function(){function UpdateWebhookRequest(url,triggers,httpAuth,httpHeaders){this.Url=url,this.HttpAuth=httpAuth,this.HttpHeaders=httpHeaders,this.Triggers=triggers}return UpdateWebhookRequest}();exports.UpdateWebhookRequest=UpdateWebhookRequest;var CreateWebhookRequest=function(_super){function CreateWebhookRequest(url,triggers,httpAuth,httpHeaders,messageStream){var _this=_super.call(this,url,triggers,httpAuth,httpHeaders)||this;return _this.MessageStream=messageStream,_this}return __extends(CreateWebhookRequest,_super),CreateWebhookRequest}(UpdateWebhookRequest);exports.CreateWebhookRequest=CreateWebhookRequest},{}],136:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WebhookFilteringParameters=void 0;var WebhookFilteringParameters=function(){function WebhookFilteringParameters(messageStream){this.messageStream=messageStream}return WebhookFilteringParameters}();exports.WebhookFilteringParameters=WebhookFilteringParameters},{}],137:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0})},{}],138:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Header=exports.Attachment=exports.TemplatedMessage=exports.Message=exports.Errors=exports.Models=exports.AdminClient=exports.AccountClient=exports.Client=exports.ServerClient=void 0;var AccountClient_1=require("./client/AccountClient");exports.AccountClient=AccountClient_1.default,exports.AdminClient=AccountClient_1.default;var ServerClient_1=require("./client/ServerClient");exports.ServerClient=ServerClient_1.default,exports.Client=ServerClient_1.default;var Models=require("./client/models");exports.Models=Models;var Errors=require("./client/errors/Errors");exports.Errors=Errors;var models_1=require("./client/models");Object.defineProperty(exports,"Message",{enumerable:!0,get:function(){return models_1.Message}});var models_2=require("./client/models");Object.defineProperty(exports,"TemplatedMessage",{enumerable:!0,get:function(){return models_2.TemplatedMessage}});var models_3=require("./client/models");Object.defineProperty(exports,"Attachment",{enumerable:!0,get:function(){return models_3.Attachment}});var models_4=require("./client/models");Object.defineProperty(exports,"Header",{enumerable:!0,get:function(){return models_4.Header}})},{"./client/AccountClient":103,"./client/ServerClient":105,"./client/errors/Errors":107,"./client/models":116}],139:[function(require,module,exports){module.exports={_from:"postmark@^2.5.5",_id:"postmark@2.9.5",_inBundle:!1,_integrity:"sha512-F27gc6wrxdn7GADodGpECoWez7FK2Pdach7A9ni5vVZiYz1YUY7T68nvVCzxrbWCjOS7ZujyclYlq1C0a4ar1w==",_location:"/postmark",_phantomChildren:{},_requested:{type:"range",registry:!0,raw:"postmark@^2.5.5",name:"postmark",escapedName:"postmark",rawSpec:"^2.5.5",saveSpec:null,fetchSpec:"^2.5.5"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/postmark/-/postmark-2.9.5.tgz",_shasum:"d863f3cea6242c1531ace3c53756f706f32d3eeb",_spec:"postmark@^2.5.5",_where:"/data/data/projects/gokart-xzzy",author:{name:"Igor Balos"},bugs:{url:"https://github.com/wildbit/postmark.js/issues"},bundleDependencies:!1,contributors:[{name:"Igor Balos"},{name:"Andrew Theken"},{name:"Aaron Blum"},{name:"Aleksey Aleksandrov"},{name:"Alex Shepard"},{name:"Antony Jones"},{name:"Ben Burwell"},{name:"Ben Williamson"},{name:"Chris Williams"},{name:"Jakub Borys"},{name:"Mark Nguyen"},{name:"Matt"},{name:"Matthew Blackshaw"},{name:"Matthew Conlen"},{name:"Ryan Kirkman"},{name:"Scott Anderson"},{name:"Sebastien Chopin"},{name:"Theophane RUPIN"},{name:"codesplicer"},{name:"francescoRubini"}],dependencies:{axios:"^0.25.0"},deprecated:!1,description:"Official Node.js client library for the Postmark HTTP API - https://www.postmarkapp.com",devDependencies:{"@types/chai":"^4.1.4","@types/mocha":"^5.2.5","@types/nconf":"0.0.37","@types/node":"^4.0.29","@types/sinon":"^7.5.0",chai:"^4.1.2",mocha:"^5.2.0",nconf:"^0.10.0","pre-commit":"1.2.2",sinon:"^7.5.0","ts-node":"^7.0.1",tslint:"^6.1.3",typedoc:"^0.22.11",typescript:"4.5.5"},directories:{lib:"./dist/index.js"},homepage:"http://wildbit.github.io/postmark.js",license:"MITNFA",main:"./dist/index.js",name:"postmark",precommit:["compile","lint","test","compile-docs"],repository:{type:"git",url:"git+https://github.com/wildbit/postmark.js.git"},scripts:{compile:"rm -r -f ./dist && node_modules/.bin/tsc","compile-docs":"echo 'Generating docs...' && mkdir -p ./docs && rm -r ./docs && node_modules/.bin/typedoc --options typedoc.json && git add -A ./docs && echo 'Generated docs!'",lint:"tslint -c tslint.json 'src/**/*.ts'",lintfix:"tslint -c tslint.json 'src/**/*.ts' --fix",test:"node_modules/mocha/bin/mocha --timeout 30000 --retries 1 -r ts-node/register test/**/*test.ts",unittest:"node_modules/mocha/bin/mocha --timeout 30000 --retries 1 -r ts-node/register test/unit/**/*test.ts",watchtests:"mocha --timeout 30000 --retries 1 -r ts-node/register -R list -w --recursive -G test/**/*test.ts"},tags:["email","utility","postmark","sending","transactional"],types:"./dist/index.d.ts",version:"2.9.5"}},{}],140:[function(require,module,exports){function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,
queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,runClearTimeout(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}var cachedSetTimeout,cachedClearTimeout,process=module.exports={};!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},{}],141:[function(require,module,exports){function patchView(View){var unbuild=View.unbuild;View.unbuild=function(defer){if(!this.hotUpdating){removeView(this.childVM&&this.childVM.constructor,this),defer&&addView(this.Component,this)}return unbuild.call(this,defer)}}function addView(Component,view){var id=Component&&Component.options.hotID;id&&(map[id]||(map[id]={Component:Component,views:[],instances:[]}),map[id].views.push(view))}function removeView(Component,view){var id=Component&&Component.options.hotID;id&&map[id].views.$remove(view)}function makeOptionsHot(id,options){options.hotID=id,injectHook(options,"created",function(){var record=map[id];record.Component||(record.Component=this.constructor),record.instances.push(this)}),injectHook(options,"beforeDestroy",function(){map[id].instances.$remove(this)})}function injectHook(options,name,hook){var existing=options[name];options[name]=existing?Array.isArray(existing)?existing.concat(hook):[existing,hook]:[hook]}function updateView(view,Component){if(view._bound){view.Component=Component,view.hotUpdating=!0,view.vm._isCompiled=!1;var state=extractState(view.childVM),keepAlive=view.keepAlive;view.keepAlive=!1,view.mountComponent(),view.keepAlive=keepAlive,restoreState(view.childVM,state,!0),view.vm._isCompiled=!0,view.hotUpdating=!1}}function extractState(vm){return{cid:vm.constructor.cid,data:vm.$data,children:vm.$children.map(extractState)}}function restoreState(vm,state,isRoot){var oldAsyncConfig;isRoot&&(oldAsyncConfig=Vue.config.async,Vue.config.async=!1),isRoot||!vm._props?vm.$data=state.data:Object.keys(state.data).forEach(function(key){vm._props[key]||(vm.$data[key]=state.data[key])}),vm.$children.every(function(c,i){return state.children[i]&&state.children[i].cid===c.constructor.cid})&&vm.$children.forEach(function(c,i){restoreState(c,state.children[i])}),isRoot&&(Vue.config.async=oldAsyncConfig)}function format(id){var match=id.match(/[^\/]+\.vue$/);return match?match[0]:id}var Vue,map=Object.create(null),shimmed=!1,isBrowserify=!1;exports.install=function(vue,browserify){if(!shimmed){if(shimmed=!0,Vue=vue,isBrowserify=browserify,exports.compatible=!!Vue.internalDirectives,!exports.compatible)return void console.warn("[HMR] vue-loader hot reload is only compatible with Vue.js 1.0.0+.");patchView(Vue.internalDirectives.component),console.log("[HMR] Vue component hot reload shim applied.");var routerView=Vue.elementDirective("router-view");routerView&&(patchView(routerView),console.log("[HMR] vue-router <router-view> hot reload shim applied."))}},exports.createRecord=function(id,options){"function"==typeof options&&(options=options.options),"string"!=typeof options.el&&"object"!=typeof options.data&&(makeOptionsHot(id,options),map[id]={Component:null,views:[],instances:[]})},exports.update=function(id,newOptions,newTemplate){var record=map[id];if(!record||record.instances.length&&!record.views.length){if(console.log("[HMR] Root or manually-mounted instance modified. Full reload may be required."),isBrowserify)return;window.location.reload()}isBrowserify||console.log("[HMR] Updating component: "+format(id));var Component=record.Component;newOptions&&(Component=record.Component="function"==typeof newOptions?newOptions:Vue.extend(newOptions),makeOptionsHot(id,Component.options)),newTemplate&&(Component.options.template=newTemplate),Component.options.name&&(Component.options.components[Component.options.name]=Component),Component.linker=null,record.views.forEach(function(view){updateView(view,Component)}),window.__VUE_DEVTOOLS_GLOBAL_HOOK__&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__.emit("flush")}},{}],142:[function(require,module,exports){(function(process){(function(){"use strict";function set(obj,key,val){if(hasOwn(obj,key))return void(obj[key]=val);if(obj._isVue)return void set(obj._data,key,val);var ob=obj.__ob__;if(!ob)return void(obj[key]=val);if(ob.convert(key,val),ob.dep.notify(),ob.vms)for(var i=ob.vms.length;i--;){var vm=ob.vms[i];vm._proxy(key),vm._digest()}return val}function del(obj,key){if(hasOwn(obj,key)){delete obj[key];var ob=obj.__ob__;if(!ob)return void(obj._isVue&&(delete obj._data[key],obj._digest()));if(ob.dep.notify(),ob.vms)for(var i=ob.vms.length;i--;){var vm=ob.vms[i];vm._unproxy(key),vm._digest()}}}function hasOwn(obj,key){return hasOwnProperty.call(obj,key)}function isLiteral(exp){return literalValueRE.test(exp)}function isReserved(str){var c=(str+"").charCodeAt(0);return 36===c||95===c}function _toString(value){return null==value?"":value.toString()}function toNumber(value){if("string"!=typeof value)return value;var parsed=Number(value);return isNaN(parsed)?value:parsed}function toBoolean(value){return"true"===value||"false"!==value&&value}function stripQuotes(str){var a=str.charCodeAt(0);return a!==str.charCodeAt(str.length-1)||34!==a&&39!==a?str:str.slice(1,-1)}function camelize(str){return str.replace(camelizeRE,toUpper)}function toUpper(_,c){return c?c.toUpperCase():""}function hyphenate(str){return str.replace(hyphenateRE,"$1-$2").replace(hyphenateRE,"$1-$2").toLowerCase()}function classify(str){return str.replace(classifyRE,toUpper)}function bind(fn,ctx){return function(a){var l=arguments.length;return l?l>1?fn.apply(ctx,arguments):fn.call(ctx,a):fn.call(ctx)}}function toArray(list,start){start=start||0;for(var i=list.length-start,ret=new Array(i);i--;)ret[i]=list[i+start];return ret}function extend(to,from){for(var keys=Object.keys(from),i=keys.length;i--;)to[keys[i]]=from[keys[i]];return to}function isObject(obj){return null!==obj&&"object"==typeof obj}function isPlainObject(obj){return toString.call(obj)===OBJECT_STRING}function def(obj,key,val,enumerable){Object.defineProperty(obj,key,{value:val,enumerable:!!enumerable,writable:!0,configurable:!0})}function _debounce(func,wait){var timeout,args,context,timestamp,result,later=function later(){var last=Date.now()-timestamp;last<wait&&last>=0?timeout=setTimeout(later,wait-last):(timeout=null,result=func.apply(context,args),timeout||(context=args=null))};return function(){return context=this,args=arguments,timestamp=Date.now(),timeout||(timeout=setTimeout(later,wait)),result}}function indexOf(arr,obj){for(var i=arr.length;i--;)if(arr[i]===obj)return i;return-1}function cancellable(fn){var cb=function cb(){if(!cb.cancelled)return fn.apply(this,arguments)};return cb.cancel=function(){cb.cancelled=!0},cb}function looseEqual(a,b){return a==b||!(!isObject(a)||!isObject(b))&&JSON.stringify(a)===JSON.stringify(b)}function isNative(Ctor){return/native code/.test(Ctor.toString())}function Cache(limit){this.size=0,this.limit=limit,this.head=this.tail=void 0,this._keymap=Object.create(null)}function peek(){return str.charCodeAt(index+1)}function next(){return str.charCodeAt(++index)}function eof(){return index>=len}function eatSpace(){for(;peek()===spaceChr;)next()}function isStringStart(chr){return chr===doubleChr||chr===singleChr}function isExpStart(chr){return expStartChr[chr]}function isExpEnd(start,chr){return expChrPair[start]===chr}function parseString(){for(var chr,stringQuote=next();!eof();)if((chr=next())===escapeChr)next();else if(chr===stringQuote)break}function parseSpecialExp(chr){for(var inExp=0,startChr=chr;!eof();)if(chr=peek(),isStringStart(chr))parseString();else if(startChr===chr&&inExp++,isExpEnd(startChr,chr)&&inExp--,next(),0===inExp)break}function parseExpression(){for(var start=index;!eof();)if(chr=peek(),isStringStart(chr))parseString();else if(isExpStart(chr))parseSpecialExp(chr);else if(chr===pipeChr){if(next(),(chr=peek())!==pipeChr){state!==startState&&state!==filterArgState||(state=filterState);break}next()}else{if(chr===spaceChr&&(state===filterNameState||state===filterArgState)){eatSpace();break}state===filterState&&(state=filterNameState),next()}return str.slice(start+1,index)||null}function parseFilterList(){for(var filters=[];!eof();)filters.push(parseFilter());return filters}function parseFilter(){var args,filter={};return state=filterState,filter.name=parseExpression().trim(),state=filterArgState,args=parseFilterArguments(),args.length&&(filter.args=args),filter}function parseFilterArguments(){for(var args=[];!eof()&&state!==filterState;){var arg=parseExpression();if(!arg)break;args.push(processFilterArg(arg))}return args}function processFilterArg(arg){if(reservedArgRE.test(arg))return{value:toNumber(arg),dynamic:!1};var stripped=stripQuotes(arg),dynamic=stripped===arg;return{value:dynamic?arg:stripped,dynamic:dynamic}}function parseDirective(s){var hit=cache$1.get(s);if(hit)return hit;str=s,dir={},len=str.length,index=-1,chr="",state=startState;var filters;return str.indexOf("|")<0?dir.expression=str.trim():(dir.expression=parseExpression().trim(),filters=parseFilterList(),filters.length&&(dir.filters=filters)),cache$1.put(s,dir),dir}function escapeRegex(str){return str.replace(regexEscapeRE,"\\$&")}function compileRegex(){var open=escapeRegex(config.delimiters[0]),close=escapeRegex(config.delimiters[1]),unsafeOpen=escapeRegex(config.unsafeDelimiters[0]),unsafeClose=escapeRegex(config.unsafeDelimiters[1]);tagRE=new RegExp(unsafeOpen+"((?:.|\\n)+?)"+unsafeClose+"|"+open+"((?:.|\\n)+?)"+close,"g"),htmlRE=new RegExp("^"+unsafeOpen+"((?:.|\\n)+?)"+unsafeClose+"$"),cache=new Cache(1e3)}function parseText(text){cache||compileRegex();var hit=cache.get(text);if(hit)return hit;if(!tagRE.test(text))return null;for(var match,index,html,value,first,oneTime,tokens=[],lastIndex=tagRE.lastIndex=0;match=tagRE.exec(text);)index=match.index,index>lastIndex&&tokens.push({value:text.slice(lastIndex,index)}),html=htmlRE.test(match[0]),value=html?match[1]:match[2],first=value.charCodeAt(0),oneTime=42===first,value=oneTime?value.slice(1):value,tokens.push({tag:!0,value:value.trim(),html:html,oneTime:oneTime}),lastIndex=index+match[0].length;return lastIndex<text.length&&tokens.push({value:text.slice(lastIndex)}),cache.put(text,tokens),tokens}function tokensToExp(tokens,vm){return tokens.length>1?tokens.map(function(token){return formatToken(token,vm)}).join("+"):formatToken(tokens[0],vm,!0)}function formatToken(token,vm,single){return token.tag?token.oneTime&&vm?'"'+vm.$eval(token.value)+'"':inlineFilters(token.value,single):'"'+token.value+'"'}function inlineFilters(exp,single){if(filterRE.test(exp)){var dir=parseDirective(exp);return dir.filters?"this._applyFilters("+dir.expression+",null,"+JSON.stringify(dir.filters)+",false)":"("+exp+")"}return single?exp:"("+exp+")"}function appendWithTransition(el,target,vm,cb){applyTransition(el,1,function(){target.appendChild(el)},vm,cb)}function beforeWithTransition(el,target,vm,cb){applyTransition(el,1,function(){before(el,target)},vm,cb)}function removeWithTransition(el,vm,cb){applyTransition(el,-1,function(){remove(el)},vm,cb)}function applyTransition(el,direction,op,vm,cb){var transition=el.__v_trans;if(!transition||!transition.hooks&&!transitionEndEvent||!vm._isCompiled||vm.$parent&&!vm.$parent._isCompiled)return op(),void(cb&&cb());transition[direction>0?"enter":"leave"](op,cb)}function query(el){if("string"==typeof el){var selector=el;el=document.querySelector(el),el||"production"!==process.env.NODE_ENV&&warn("Cannot find element: "+selector)}return el}function inDoc(node){if(!node)return!1;var doc=node.ownerDocument.documentElement,parent=node.parentNode;return doc===node||doc===parent||!(!parent||1!==parent.nodeType||!doc.contains(parent))}function getAttr(node,_attr){var val=node.getAttribute(_attr);return null!==val&&node.removeAttribute(_attr),val}function getBindAttr(node,name){var val=getAttr(node,":"+name);return null===val&&(val=getAttr(node,"v-bind:"+name)),val}function hasBindAttr(node,name){return node.hasAttribute(name)||node.hasAttribute(":"+name)||node.hasAttribute("v-bind:"+name)}function before(el,target){target.parentNode.insertBefore(el,target)}function after(el,target){target.nextSibling?before(el,target.nextSibling):target.parentNode.appendChild(el)}function remove(el){el.parentNode.removeChild(el)}function prepend(el,target){target.firstChild?before(el,target.firstChild):target.appendChild(el)}function replace(target,el){var parent=target.parentNode;parent&&parent.replaceChild(el,target)}function on(el,event,cb,useCapture){el.addEventListener(event,cb,useCapture)}function off(el,event,cb){el.removeEventListener(event,cb)}function getClass(el){var classname=el.className;return"object"==typeof classname&&(classname=classname.baseVal||""),classname}function setClass(el,cls){isIE9&&!/svg$/.test(el.namespaceURI)?el.className=cls:el.setAttribute("class",cls)}function addClass(el,cls){if(el.classList)el.classList.add(cls);else{var cur=" "+getClass(el)+" ";cur.indexOf(" "+cls+" ")<0&&setClass(el,(cur+cls).trim())}}function removeClass(el,cls){if(el.classList)el.classList.remove(cls);else{for(var cur=" "+getClass(el)+" ",tar=" "+cls+" ";cur.indexOf(tar)>=0;)cur=cur.replace(tar," ");setClass(el,cur.trim())}el.className||el.removeAttribute("class")}function extractContent(el,asFragment){var child,rawContent;if(isTemplate(el)&&isFragment(el.content)&&(el=el.content),el.hasChildNodes())for(trimNode(el),rawContent=asFragment?document.createDocumentFragment():document.createElement("div");child=el.firstChild;)rawContent.appendChild(child);return rawContent}function trimNode(node){for(var child;child=node.firstChild,isTrimmable(child);)node.removeChild(child);for(;child=node.lastChild,isTrimmable(child);)node.removeChild(child)}function isTrimmable(node){return node&&(3===node.nodeType&&!node.data.trim()||8===node.nodeType)}function isTemplate(el){return el.tagName&&"template"===el.tagName.toLowerCase()}function createAnchor(content,persist){var anchor=config.debug?document.createComment(content):document.createTextNode(persist?" ":"");return anchor.__v_anchor=!0,anchor}function findRef(node){if(node.hasAttributes())for(var attrs=node.attributes,i=0,l=attrs.length;i<l;i++){var name=attrs[i].name;if(refRE.test(name))return camelize(name.replace(refRE,""))}}function mapNodeRange(node,end,op){for(var next;node!==end;)next=node.nextSibling,op(node),node=next;op(end)}function removeNodeRange(start,end,vm,frag,cb){function onRemoved(){if(removed++,done&&removed>=nodes.length){for(var i=0;i<nodes.length;i++)frag.appendChild(nodes[i]);cb&&cb()}}var done=!1,removed=0,nodes=[];mapNodeRange(start,end,function(node){node===end&&(done=!0),nodes.push(node),removeWithTransition(node,vm,onRemoved)})}function isFragment(node){return node&&11===node.nodeType}function getOuterHTML(el){if(el.outerHTML)return el.outerHTML;var container=document.createElement("div");return container.appendChild(el.cloneNode(!0)),container.innerHTML}function checkComponentAttr(el,options){var tag=el.tagName.toLowerCase(),hasAttrs=el.hasAttributes();if(commonTagRE.test(tag)||reservedTagRE.test(tag)){if(hasAttrs)return getIsBinding(el,options)}else{if(resolveAsset(options,"components",tag))return{id:tag};var is=hasAttrs&&getIsBinding(el,options);if(is)return is;if("production"!==process.env.NODE_ENV){var expectedTag=options._componentNameMap&&options._componentNameMap[tag];expectedTag?warn("Unknown custom element: <"+tag+"> - did you mean <"+expectedTag+">? HTML is case-insensitive, remember to use kebab-case in templates."):isUnknownElement(el,tag)&&warn("Unknown custom element: <"+tag+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function getIsBinding(el,options){var exp=el.getAttribute("is");if(null!=exp){if(resolveAsset(options,"components",exp))return el.removeAttribute("is"),{id:exp}}else if(null!=(exp=getBindAttr(el,"is")))return{id:exp,dynamic:!0}}function mergeData(to,from){var key,toVal,fromVal;for(key in from)toVal=to[key],fromVal=from[key],hasOwn(to,key)?isObject(toVal)&&isObject(fromVal)&&mergeData(toVal,fromVal):set(to,key,fromVal);return to}function mergeAssets(parentVal,childVal){var res=Object.create(parentVal||null);return childVal?extend(res,guardArrayAssets(childVal)):res}function guardComponents(options){if(options.components){var def,components=options.components=guardArrayAssets(options.components),ids=Object.keys(components);if("production"!==process.env.NODE_ENV)var map=options._componentNameMap={};for(var i=0,l=ids.length;i<l;i++){var key=ids[i];commonTagRE.test(key)||reservedTagRE.test(key)?"production"!==process.env.NODE_ENV&&warn("Do not use built-in or reserved HTML elements as component id: "+key):("production"!==process.env.NODE_ENV&&(map[key.replace(/-/g,"").toLowerCase()]=hyphenate(key)),def=components[key],isPlainObject(def)&&(components[key]=Vue.extend(def)))}}}function guardProps(options){var i,val,props=options.props;if(isArray(props))for(options.props={},i=props.length;i--;)val=props[i],"string"==typeof val?options.props[val]=null:val.name&&(options.props[val.name]=val);else if(isPlainObject(props)){var keys=Object.keys(props);for(i=keys.length;i--;)"function"==typeof(val=props[keys[i]])&&(props[keys[i]]={type:val})}}function guardArrayAssets(assets){if(isArray(assets)){for(var asset,res={},i=assets.length;i--;){asset=assets[i];var id="function"==typeof asset?asset.options&&asset.options.name||asset.id:asset.name||asset.id;id?res[id]=asset:"production"!==process.env.NODE_ENV&&warn('Array-syntax assets must provide a "name" or "id" field.')}return res}return assets}function mergeOptions(parent,child,vm){function mergeField(key){var strat=strats[key]||defaultStrat;options[key]=strat(parent[key],child[key],vm,key)}guardComponents(child),guardProps(child),"production"!==process.env.NODE_ENV&&child.propsData&&!vm&&warn("propsData can only be used as an instantiation option.");var key,options={};if(child.extends&&(parent="function"==typeof child.extends?mergeOptions(parent,child.extends.options,vm):mergeOptions(parent,child.extends,vm)),child.mixins)for(var i=0,l=child.mixins.length;i<l;i++){var mixin=child.mixins[i],mixinOptions=mixin.prototype instanceof Vue?mixin.options:mixin;parent=mergeOptions(parent,mixinOptions,vm)}for(key in parent)mergeField(key);for(key in child)hasOwn(parent,key)||mergeField(key);return options}function resolveAsset(options,type,id,warnMissing){if("string"==typeof id){var camelizedId,assets=options[type],res=assets[id]||assets[camelizedId=camelize(id)]||assets[camelizedId.charAt(0).toUpperCase()+camelizedId.slice(1)];return"production"!==process.env.NODE_ENV&&warnMissing&&!res&&warn("Failed to resolve "+type.slice(0,-1)+": "+id,options),res}}function Dep(){this.id=uid$1++,this.subs=[]}function withoutConversion(fn){shouldConvert=!1,fn(),shouldConvert=!0}function Observer(value){if(this.value=value,this.dep=new Dep,def(value,"__ob__",this),isArray(value)){(hasProto?protoAugment:copyAugment)(value,arrayMethods,arrayKeys),this.observeArray(value)}else this.walk(value)}function protoAugment(target,src){target.__proto__=src}function copyAugment(target,src,keys){for(var i=0,l=keys.length;i<l;i++){var key=keys[i];def(target,key,src[key])}}function observe(value,vm){if(value&&"object"==typeof value){var ob;return hasOwn(value,"__ob__")&&value.__ob__ instanceof Observer?ob=value.__ob__:shouldConvert&&(isArray(value)||isPlainObject(value))&&Object.isExtensible(value)&&!value._isVue&&(ob=new Observer(value)),ob&&vm&&ob.addVm(vm),ob}}function defineReactive(obj,key,val){var dep=new Dep,property=Object.getOwnPropertyDescriptor(obj,key);if(!property||!1!==property.configurable){var getter=property&&property.get,setter=property&&property.set,childOb=observe(val);Object.defineProperty(obj,key,{enumerable:!0,configurable:!0,get:function(){var value=getter?getter.call(obj):val;if(Dep.target&&(dep.depend(),childOb&&childOb.dep.depend(),isArray(value)))for(var e,i=0,l=value.length;i<l;i++)(e=value[i])&&e.__ob__&&e.__ob__.dep.depend();return value},set:function(newVal){newVal!==(getter?getter.call(obj):val)&&(setter?setter.call(obj,newVal):val=newVal,childOb=observe(newVal),dep.notify())}})}}function getPathCharType(ch){if(void 0===ch)return"eof";var code=ch.charCodeAt(0);switch(code){case 91:case 93:case 46:case 34:case 39:case 48:return ch;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return code>=97&&code<=122||code>=65&&code<=90?"ident":code>=49&&code<=57?"number":"else"}function formatSubPath(path){var trimmed=path.trim();return("0"!==path.charAt(0)||!isNaN(path))&&(isLiteral(trimmed)?stripQuotes(trimmed):"*"+trimmed)}function parse(path){var c,newChar,key,type,transition,action,typeMap,keys=[],index=-1,mode=BEFORE_PATH,subPathDepth=0,actions=[];for(actions[PUSH]=function(){void 0!==key&&(keys.push(key),key=void 0)},actions[APPEND]=function(){void 0===key?key=newChar:key+=newChar},actions[INC_SUB_PATH_DEPTH]=function(){actions[APPEND](),subPathDepth++},actions[PUSH_SUB_PATH]=function(){if(subPathDepth>0)subPathDepth--,mode=IN_SUB_PATH,actions[APPEND]();else{if(subPathDepth=0,!1===(key=formatSubPath(key)))return!1;actions[PUSH]()}};null!=mode;)if(index++,"\\"!==(c=path[index])||!function(){var nextChar=path[index+1];if(mode===IN_SINGLE_QUOTE&&"'"===nextChar||mode===IN_DOUBLE_QUOTE&&'"'===nextChar)return index++,newChar="\\"+nextChar,actions[APPEND](),!0}()){if(type=getPathCharType(c),typeMap=pathStateMachine[mode],(transition=typeMap[type]||typeMap.else||ERROR)===ERROR)return;if(mode=transition[0],(action=actions[transition[1]])&&(newChar=transition[2],newChar=void 0===newChar?c:newChar,!1===action()))return;if(mode===AFTER_PATH)return keys.raw=path,keys}}function parsePath(path){var hit=pathCache.get(path);return hit||(hit=parse(path))&&pathCache.put(path,hit),hit}function getPath(obj,path){return parseExpression$1(path).get(obj)}function setPath(obj,path,val){var original=obj;if("string"==typeof path&&(path=parse(path)),!path||!isObject(obj))return!1;for(var last,key,i=0,l=path.length;i<l;i++)last=obj,key=path[i],"*"===key.charAt(0)&&(key=parseExpression$1(key.slice(1)).get.call(original,original)),i<l-1?(obj=obj[key],isObject(obj)||(obj={},"production"!==process.env.NODE_ENV&&last._isVue&&warnNonExistent(path,last),set(last,key,obj))):isArray(obj)?obj.$set(key,val):key in obj?obj[key]=val:("production"!==process.env.NODE_ENV&&obj._isVue&&warnNonExistent(path,obj),set(obj,key,val));return!0}function noop(){}function save(str,isString){var i=saved.length;return saved[i]=isString?str.replace(newlineRE,"\\n"):str,'"'+i+'"'}function rewrite(raw){var c=raw.charAt(0),path=raw.slice(1);return allowedKeywordsRE.test(path)?raw:(path=path.indexOf('"')>-1?path.replace(restoreRE,restore):path,c+"scope."+path)}function restore(str,i){return saved[i]}function compileGetter(exp){improperKeywordsRE.test(exp)&&"production"!==process.env.NODE_ENV&&warn("Avoid using reserved keywords in expression: "+exp),saved.length=0;var body=exp.replace(saveRE,save).replace(wsRE,"");return body=(" "+body).replace(identRE,rewrite).replace(restoreRE,restore),makeGetterFn(body)}function makeGetterFn(body){try{return new Function("scope","return "+body+";")}catch(e){return"production"!==process.env.NODE_ENV&&warn(e.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+body),noop}}function compileSetter(exp){var path=parsePath(exp);if(path)return function(scope,val){setPath(scope,path,val)};"production"!==process.env.NODE_ENV&&warn("Invalid setter expression: "+exp)}function parseExpression$1(exp,needSet){exp=exp.trim();var hit=expressionCache.get(exp);if(hit)return needSet&&!hit.set&&(hit.set=compileSetter(hit.exp)),hit;var res={exp:exp};return res.get=isSimplePath(exp)&&exp.indexOf("[")<0?makeGetterFn("scope."+exp):compileGetter(exp),needSet&&(res.set=compileSetter(exp)),expressionCache.put(exp,res),res}function isSimplePath(exp){return pathTestRE.test(exp)&&!literalValueRE$1.test(exp)&&"Math."!==exp.slice(0,5)}function resetBatcherState(){queue.length=0,userQueue.length=0,has={},circular={},waiting=!1}function flushBatcherQueue(){for(var _again=!0;_again;)_again=!1,runBatcherQueue(queue),runBatcherQueue(userQueue),queue.length?_again=!0:(devtools&&config.devtools&&devtools.emit("flush"),resetBatcherState())}function runBatcherQueue(queue){for(var i=0;i<queue.length;i++){var watcher=queue[i],id=watcher.id;if(has[id]=null,watcher.run(),"production"!==process.env.NODE_ENV&&null!=has[id]&&(circular[id]=(circular[id]||0)+1,circular[id]>config._maxUpdateCount)){warn('You may have an infinite update loop for watcher with expression "'+watcher.expression+'"',watcher.vm);break}}queue.length=0}function pushWatcher(watcher){var id=watcher.id;if(null==has[id]){var q=watcher.user?userQueue:queue;has[id]=q.length,q.push(watcher),waiting||(waiting=!0,nextTick(flushBatcherQueue))}}function Watcher(vm,expOrFn,cb,options){options&&extend(this,options);var isFn="function"==typeof expOrFn;if(this.vm=vm,vm._watchers.push(this),this.expression=expOrFn,this.cb=cb,this.id=++uid$2,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new _Set,this.newDepIds=new _Set,this.prevError=null,isFn)this.getter=expOrFn,this.setter=void 0;else{var res=parseExpression$1(expOrFn,this.twoWay);this.getter=res.get,this.setter=res.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function traverse(val,seen){var i=void 0,keys=void 0;seen||(seen=seenObjects,seen.clear());var isA=isArray(val),isO=isObject(val);if((isA||isO)&&Object.isExtensible(val)){if(val.__ob__){var depId=val.__ob__.dep.id;if(seen.has(depId))return;seen.add(depId)}if(isA)for(i=val.length;i--;)traverse(val[i],seen);else if(isO)for(keys=Object.keys(val),i=keys.length;i--;)traverse(val[keys[i]],seen)}}function isRealTemplate(node){return isTemplate(node)&&isFragment(node.content)}function stringToFragment(templateString,raw){var cacheKey=raw?templateString:templateString.trim(),hit=templateCache.get(cacheKey);if(hit)return hit;var frag=document.createDocumentFragment(),tagMatch=templateString.match(tagRE$1),entityMatch=entityRE.test(templateString),commentMatch=commentRE.test(templateString);if(tagMatch||entityMatch||commentMatch){var tag=tagMatch&&tagMatch[1],wrap=map[tag]||map.efault,depth=wrap[0],prefix=wrap[1],suffix=wrap[2],node=document.createElement("div");for(node.innerHTML=prefix+templateString+suffix;depth--;)node=node.lastChild;for(var child;child=node.firstChild;)frag.appendChild(child)}else frag.appendChild(document.createTextNode(templateString));return raw||trimNode(frag),templateCache.put(cacheKey,frag),frag}function nodeToFragment(node){if(isRealTemplate(node))return stringToFragment(node.innerHTML);if("SCRIPT"===node.tagName)return stringToFragment(node.textContent);for(var child,clonedNode=cloneNode(node),frag=document.createDocumentFragment();child=clonedNode.firstChild;)frag.appendChild(child);return trimNode(frag),frag}function cloneNode(node){if(!node.querySelectorAll)return node.cloneNode();var i,original,cloned,res=node.cloneNode(!0);if(hasBrokenTemplate){var tempClone=res;if(isRealTemplate(node)&&(node=node.content,tempClone=res.content),original=node.querySelectorAll("template"),original.length)for(cloned=tempClone.querySelectorAll("template"),i=cloned.length;i--;)cloned[i].parentNode.replaceChild(cloneNode(original[i]),cloned[i])}if(hasTextareaCloneBug)if("TEXTAREA"===node.tagName)res.value=node.value;else if(original=node.querySelectorAll("textarea"),original.length)for(cloned=res.querySelectorAll("textarea"),i=cloned.length;i--;)cloned[i].value=original[i].value;return res}function parseTemplate(template,shouldClone,raw){var node,frag;return isFragment(template)?(trimNode(template),shouldClone?cloneNode(template):template):("string"==typeof template?raw||"#"!==template.charAt(0)?frag=stringToFragment(template,raw):(frag=idSelectorCache.get(template))||(node=document.getElementById(template.slice(1)))&&(frag=nodeToFragment(node),idSelectorCache.put(template,frag)):template.nodeType&&(frag=nodeToFragment(template)),frag&&shouldClone?cloneNode(frag):frag)}function Fragment(linker,vm,frag,host,scope,parentFrag){this.children=[],this.childFrags=[],this.vm=vm,this.scope=scope,this.inserted=!1,this.parentFrag=parentFrag,parentFrag&&parentFrag.childFrags.push(this),this.unlink=linker(vm,frag,host,scope,this),(this.single=1===frag.childNodes.length&&!frag.childNodes[0].__v_anchor)?(this.node=frag.childNodes[0],this.before=singleBefore,this.remove=singleRemove):(this.node=createAnchor("fragment-start"),this.end=createAnchor("fragment-end"),this.frag=frag,prepend(this.node,frag),frag.appendChild(this.end),this.before=multiBefore,this.remove=multiRemove),this.node.__v_frag=this}function singleBefore(target,withTransition){this.inserted=!0,(!1!==withTransition?beforeWithTransition:before)(this.node,target,this.vm),inDoc(this.node)&&this.callHook(attach)}function singleRemove(){this.inserted=!1;var shouldCallRemove=inDoc(this.node),self=this;this.beforeRemove(),removeWithTransition(this.node,this.vm,function(){shouldCallRemove&&self.callHook(detach),self.destroy()})}function multiBefore(target,withTransition){this.inserted=!0;var vm=this.vm,method=!1!==withTransition?beforeWithTransition:before;mapNodeRange(this.node,this.end,function(node){method(node,target,vm)}),inDoc(this.node)&&this.callHook(attach)}function multiRemove(){this.inserted=!1;var self=this,shouldCallRemove=inDoc(this.node);this.beforeRemove(),removeNodeRange(this.node,this.end,this.vm,this.frag,function(){shouldCallRemove&&self.callHook(detach),self.destroy()})}function attach(child){!child._isAttached&&inDoc(child.$el)&&child._callHook("attached")}function detach(child){child._isAttached&&!inDoc(child.$el)&&child._callHook("detached")}function FragmentFactory(vm,el){this.vm=vm;var template,isString="string"==typeof el;isString||isTemplate(el)&&!el.hasAttribute("v-if")?template=parseTemplate(el,!0):(template=document.createDocumentFragment(),template.appendChild(el)),this.template=template;var linker,cid=vm.constructor.cid;if(cid>0){var cacheId=cid+(isString?el:getOuterHTML(el));linker=linkerCache.get(cacheId),linker||(linker=compile(template,vm.$options,!0),linkerCache.put(cacheId,linker))}else linker=compile(template,vm.$options,!0);this.linker=linker}function findPrevFrag(frag,anchor,id){var el=frag.node.previousSibling;if(el){for(frag=el.__v_frag;!(frag&&frag.forId===id&&frag.inserted||el===anchor);){if(!(el=el.previousSibling))return;frag=el.__v_frag}return frag}}
function range(n){for(var i=-1,ret=new Array(Math.floor(n));++i<n;)ret[i]=i;return ret}function getTrackByKey(index,key,value,trackByKey){return trackByKey?"$index"===trackByKey?index:trackByKey.charAt(0).match(/\w/)?getPath(value,trackByKey):value[trackByKey]:key||value}function findVmFromFrag(frag){var node=frag.node;if(frag.end)for(;!node.__vue__&&node!==frag.end&&node.nextSibling;)node=node.nextSibling;return node.__vue__}function getValue(el,multi,init){for(var op,val,res=multi?[]:null,i=0,l=el.options.length;i<l;i++)if(op=el.options[i],init?op.hasAttribute("selected"):op.selected){if(val=op.hasOwnProperty("_value")?op._value:op.value,!multi)return val;res.push(val)}return res}function indexOf$1(arr,val){for(var i=arr.length;i--;)if(looseEqual(arr[i],val))return i;return-1}function keyFilter(handler,keys){var codes=keys.map(function(key){var charCode=key.charCodeAt(0);return charCode>47&&charCode<58?parseInt(key,10):1===key.length&&(charCode=key.toUpperCase().charCodeAt(0))>64&&charCode<91?charCode:keyCodes[key]});return codes=[].concat.apply([],codes),function(e){if(codes.indexOf(e.keyCode)>-1)return handler.call(this,e)}}function stopFilter(handler){return function(e){return e.stopPropagation(),handler.call(this,e)}}function preventFilter(handler){return function(e){return e.preventDefault(),handler.call(this,e)}}function selfFilter(handler){return function(e){if(e.target===e.currentTarget)return handler.call(this,e)}}function normalize(prop){if(propCache[prop])return propCache[prop];var res=prefix(prop);return propCache[prop]=propCache[res]=res,res}function prefix(prop){prop=hyphenate(prop);var camel=camelize(prop),upper=camel.charAt(0).toUpperCase()+camel.slice(1);testEl||(testEl=document.createElement("div"));var prefixed,i=prefixes.length;if("filter"!==camel&&camel in testEl.style)return{kebab:prop,camel:camel};for(;i--;)if((prefixed=camelPrefixes[i]+upper)in testEl.style)return{kebab:prefixes[i]+prop,camel:prefixed}}function normalize$1(value){var res=[];if(isArray(value))for(var i=0,l=value.length;i<l;i++){var _key=value[i];if(_key)if("string"==typeof _key)res.push(_key);else for(var k in _key)_key[k]&&res.push(k)}else if(isObject(value))for(var key in value)value[key]&&res.push(key);return res}function apply(el,key,fn){if(key=key.trim(),-1===key.indexOf(" "))return void fn(el,key);for(var keys=key.split(/\s+/),i=0,l=keys.length;i<l;i++)fn(el,keys[i])}function callActivateHooks(hooks,vm,cb){function next(){++called>=total?cb():hooks[called].call(vm,next)}var total=hooks.length,called=0;hooks[0].call(vm,next)}function compileProps(el,propOptions,vm){for(var options,name,attr,value,path,parsed,prop,props=[],propsData=vm.$options.propsData,names=Object.keys(propOptions),i=names.length;i--;)if(name=names[i],options=propOptions[name]||empty,"production"===process.env.NODE_ENV||"$data"!==name)if(path=camelize(name),identRE$1.test(path)){if(prop={name:name,path:path,options:options,mode:propBindingModes.ONE_WAY,raw:null},attr=hyphenate(name),null===(value=getBindAttr(el,attr))&&(null!==(value=getBindAttr(el,attr+".sync"))?prop.mode=propBindingModes.TWO_WAY:null!==(value=getBindAttr(el,attr+".once"))&&(prop.mode=propBindingModes.ONE_TIME)),null!==value)prop.raw=value,parsed=parseDirective(value),value=parsed.expression,prop.filters=parsed.filters,isLiteral(value)&&!parsed.filters?prop.optimizedLiteral=!0:(prop.dynamic=!0,"production"===process.env.NODE_ENV||prop.mode!==propBindingModes.TWO_WAY||settablePathRE.test(value)||(prop.mode=propBindingModes.ONE_WAY,warn("Cannot bind two-way prop with non-settable parent path: "+value,vm))),prop.parentPath=value,"production"!==process.env.NODE_ENV&&options.twoWay&&prop.mode!==propBindingModes.TWO_WAY&&warn('Prop "'+name+'" expects a two-way binding type.',vm);else if(null!==(value=getAttr(el,attr)))prop.raw=value;else if(propsData&&null!==(value=propsData[name]||propsData[path]))prop.raw=value;else if("production"!==process.env.NODE_ENV){var lowerCaseName=path.toLowerCase();value=/[A-Z\-]/.test(name)&&(el.getAttribute(lowerCaseName)||el.getAttribute(":"+lowerCaseName)||el.getAttribute("v-bind:"+lowerCaseName)||el.getAttribute(":"+lowerCaseName+".once")||el.getAttribute("v-bind:"+lowerCaseName+".once")||el.getAttribute(":"+lowerCaseName+".sync")||el.getAttribute("v-bind:"+lowerCaseName+".sync")),value?warn("Possible usage error for prop `"+lowerCaseName+"` - did you mean `"+attr+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",vm):!options.required||propsData&&(name in propsData||path in propsData)||warn("Missing required prop: "+name,vm)}props.push(prop)}else"production"!==process.env.NODE_ENV&&warn('Invalid prop key: "'+name+'". Prop keys must be valid identifiers.',vm);else warn("Do not use $data as prop.",vm);return makePropsLinkFn(props)}function makePropsLinkFn(props){return function(vm,scope){vm._props={};for(var prop,path,options,value,raw,inlineProps=vm.$options.propsData,i=props.length;i--;)if(prop=props[i],raw=prop.raw,path=prop.path,options=prop.options,vm._props[path]=prop,inlineProps&&hasOwn(inlineProps,path)&&initProp(vm,prop,inlineProps[path]),null===raw)initProp(vm,prop,void 0);else if(prop.dynamic)prop.mode===propBindingModes.ONE_TIME?(value=(scope||vm._context||vm).$get(prop.parentPath),initProp(vm,prop,value)):vm._context?vm._bindDir({name:"prop",def:propDef,prop:prop},null,null,scope):initProp(vm,prop,vm.$get(prop.parentPath));else if(prop.optimizedLiteral){var stripped=stripQuotes(raw);value=stripped===raw?toBoolean(toNumber(raw)):stripped,initProp(vm,prop,value)}else value=options.type===Boolean&&(""===raw||raw===hyphenate(prop.name))||raw,initProp(vm,prop,value)}}function processPropValue(vm,prop,rawValue,fn){var isSimple=prop.dynamic&&isSimplePath(prop.parentPath),value=rawValue;void 0===value&&(value=getPropDefaultValue(vm,prop)),value=coerceProp(prop,value,vm);var coerced=value!==rawValue;assertProp(prop,value,vm)||(value=void 0),isSimple&&!coerced?withoutConversion(function(){fn(value)}):fn(value)}function initProp(vm,prop,value){processPropValue(vm,prop,value,function(value){defineReactive(vm,prop.path,value)})}function updateProp(vm,prop,value){processPropValue(vm,prop,value,function(value){vm[prop.path]=value})}function getPropDefaultValue(vm,prop){var options=prop.options;if(!hasOwn(options,"default"))return options.type!==Boolean&&void 0;var def=options.default;return isObject(def)&&"production"!==process.env.NODE_ENV&&warn('Invalid default value for prop "'+prop.name+'": Props with type Object/Array must use a factory function to return the default value.',vm),"function"==typeof def&&options.type!==Function?def.call(vm):def}function assertProp(prop,value,vm){if(!prop.options.required&&(null===prop.raw||null==value))return!0;var options=prop.options,type=options.type,valid=!type,expectedTypes=[];if(type){isArray(type)||(type=[type]);for(var i=0;i<type.length&&!valid;i++){var assertedType=assertType(value,type[i]);expectedTypes.push(assertedType.expectedType),valid=assertedType.valid}}if(!valid)return"production"!==process.env.NODE_ENV&&warn('Invalid prop: type check failed for prop "'+prop.name+'". Expected '+expectedTypes.map(formatType).join(", ")+", got "+formatValue(value)+".",vm),!1;var validator=options.validator;return!(validator&&!validator(value))||("production"!==process.env.NODE_ENV&&warn('Invalid prop: custom validator check failed for prop "'+prop.name+'".',vm),!1)}function coerceProp(prop,value,vm){var coerce=prop.options.coerce;return coerce?"function"==typeof coerce?coerce(value):("production"!==process.env.NODE_ENV&&warn('Invalid coerce for prop "'+prop.name+'": expected function, got '+typeof coerce+".",vm),value):value}function assertType(value,type){var valid,expectedType;return type===String?(expectedType="string",valid=typeof value===expectedType):type===Number?(expectedType="number",valid=typeof value===expectedType):type===Boolean?(expectedType="boolean",valid=typeof value===expectedType):type===Function?(expectedType="function",valid=typeof value===expectedType):type===Object?(expectedType="object",valid=isPlainObject(value)):type===Array?(expectedType="array",valid=isArray(value)):valid=value instanceof type,{valid:valid,expectedType:expectedType}}function formatType(type){return type?type.charAt(0).toUpperCase()+type.slice(1):"custom type"}function formatValue(val){return Object.prototype.toString.call(val).slice(8,-1)}function pushJob(job){queue$1.push(job),queued||(queued=!0,nextTick(flush))}function flush(){for(var f=document.documentElement.offsetHeight,i=0;i<queue$1.length;i++)queue$1[i]();return queue$1=[],queued=!1,f}function Transition(el,id,hooks,vm){this.id=id,this.el=el,this.enterClass=hooks&&hooks.enterClass||id+"-enter",this.leaveClass=hooks&&hooks.leaveClass||id+"-leave",this.hooks=hooks,this.vm=vm,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=hooks&&hooks.type,"production"!==process.env.NODE_ENV&&this.type&&this.type!==TYPE_TRANSITION&&this.type!==TYPE_ANIMATION&&warn('invalid CSS transition type for transition="'+this.id+'": '+this.type,vm);var self=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(m){self[m]=bind(self[m],self)})}function isHidden(el){if(/svg$/.test(el.namespaceURI)){var rect=el.getBoundingClientRect();return!(rect.width||rect.height)}return!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}function compile(el,options,partial){var nodeLinkFn=partial||!options._asComponent?compileNode(el,options):null,childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||isScript(el)||!el.hasChildNodes()?null:compileNodeList(el.childNodes,options);return function(vm,el,host,scope,frag){var childNodes=toArray(el.childNodes),dirs=linkAndCapture(function(){nodeLinkFn&&nodeLinkFn(vm,el,host,scope,frag),childLinkFn&&childLinkFn(vm,childNodes,host,scope,frag)},vm);return makeUnlinkFn(vm,dirs)}}function linkAndCapture(linker,vm){"production"===process.env.NODE_ENV&&(vm._directives=[]);var originalDirCount=vm._directives.length;linker();var dirs=vm._directives.slice(originalDirCount);sortDirectives(dirs);for(var i=0,l=dirs.length;i<l;i++)dirs[i]._bind();return dirs}function sortDirectives(dirs){if(0!==dirs.length){var i,j,k,l,groupedMap={},index=0,priorities=[];for(i=0,j=dirs.length;i<j;i++){var dir=dirs[i],priority=dir.descriptor.def.priority||DEFAULT_PRIORITY,array=groupedMap[priority];array||(array=groupedMap[priority]=[],priorities.push(priority)),array.push(dir)}for(priorities.sort(function(a,b){return a>b?-1:a===b?0:1}),i=0,j=priorities.length;i<j;i++){var group=groupedMap[priorities[i]];for(k=0,l=group.length;k<l;k++)dirs[index++]=group[k]}}}function makeUnlinkFn(vm,dirs,context,contextDirs){function unlink(destroying){teardownDirs(vm,dirs,destroying),context&&contextDirs&&teardownDirs(context,contextDirs)}return unlink.dirs=dirs,unlink}function teardownDirs(vm,dirs,destroying){for(var i=dirs.length;i--;)dirs[i]._teardown(),"production"===process.env.NODE_ENV||destroying||vm._directives.$remove(dirs[i])}function compileAndLinkProps(vm,el,props,scope){var propsLinkFn=compileProps(el,props,vm),propDirs=linkAndCapture(function(){propsLinkFn(vm,scope)},vm);return makeUnlinkFn(vm,propDirs)}function compileRoot(el,options,contextOptions){var contextLinkFn,replacerLinkFn,containerAttrs=options._containerAttrs,replacerAttrs=options._replacerAttrs;if(11!==el.nodeType)options._asComponent?(containerAttrs&&contextOptions&&(contextLinkFn=compileDirectives(containerAttrs,contextOptions)),replacerAttrs&&(replacerLinkFn=compileDirectives(replacerAttrs,options))):replacerLinkFn=compileDirectives(el.attributes,options);else if("production"!==process.env.NODE_ENV&&containerAttrs){var names=containerAttrs.filter(function(attr){return attr.name.indexOf("_v-")<0&&!onRE.test(attr.name)&&"slot"!==attr.name}).map(function(attr){return'"'+attr.name+'"'});if(names.length){var plural=names.length>1,componentName=options.el.tagName.toLowerCase();"component"===componentName&&options.name&&(componentName+=":"+options.name),warn("Attribute"+(plural?"s ":" ")+names.join(", ")+(plural?" are":" is")+" ignored on component <"+componentName+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return options._containerAttrs=options._replacerAttrs=null,function(vm,el,scope){var contextDirs,context=vm._context;context&&contextLinkFn&&(contextDirs=linkAndCapture(function(){contextLinkFn(context,el,null,scope)},context));var selfDirs=linkAndCapture(function(){replacerLinkFn&&replacerLinkFn(vm,el)},vm);return makeUnlinkFn(vm,selfDirs,context,contextDirs)}}function compileNode(node,options){var type=node.nodeType;return 1!==type||isScript(node)?3===type&&node.data.trim()?compileTextNode(node,options):null:compileElement(node,options)}function compileElement(el,options){if("TEXTAREA"===el.tagName){if(null!==getAttr(el,"v-pre"))return skip;var tokens=parseText(el.value);tokens&&(el.setAttribute(":value",tokensToExp(tokens)),el.value="")}var linkFn,hasAttrs=el.hasAttributes(),attrs=hasAttrs&&toArray(el.attributes);return hasAttrs&&(linkFn=checkTerminalDirectives(el,attrs,options)),linkFn||(linkFn=checkElementDirectives(el,options)),linkFn||(linkFn=checkComponent(el,options)),!linkFn&&hasAttrs&&(linkFn=compileDirectives(attrs,options)),linkFn}function compileTextNode(node,options){if(node._skip)return removeText;var tokens=parseText(node.wholeText);if(!tokens)return null;for(var next=node.nextSibling;next&&3===next.nodeType;)next._skip=!0,next=next.nextSibling;for(var el,token,frag=document.createDocumentFragment(),i=0,l=tokens.length;i<l;i++)token=tokens[i],el=token.tag?processTextToken(token,options):document.createTextNode(token.value),frag.appendChild(el);return makeTextNodeLinkFn(tokens,frag)}function removeText(vm,node){remove(node)}function processTextToken(token,options){function setTokenType(type){if(!token.descriptor){var parsed=parseDirective(token.value);token.descriptor={name:type,def:directives[type],expression:parsed.expression,filters:parsed.filters}}}var el;return token.oneTime?el=document.createTextNode(token.value):token.html?(el=document.createComment("v-html"),setTokenType("html")):(el=document.createTextNode(" "),setTokenType("text")),el}function makeTextNodeLinkFn(tokens,frag){return function(vm,el,host,scope){for(var token,value,node,fragClone=frag.cloneNode(!0),childNodes=toArray(fragClone.childNodes),i=0,l=tokens.length;i<l;i++)token=tokens[i],value=token.value,token.tag&&(node=childNodes[i],token.oneTime?(value=(scope||vm).$eval(value),token.html?replace(node,parseTemplate(value,!0)):node.data=_toString(value)):vm._bindDir(token.descriptor,node,host,scope));replace(el,fragClone)}}function compileNodeList(nodeList,options){for(var nodeLinkFn,childLinkFn,node,linkFns=[],i=0,l=nodeList.length;i<l;i++)node=nodeList[i],nodeLinkFn=compileNode(node,options),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||"SCRIPT"===node.tagName||!node.hasChildNodes()?null:compileNodeList(node.childNodes,options),linkFns.push(nodeLinkFn,childLinkFn);return linkFns.length?makeChildLinkFn(linkFns):null}function makeChildLinkFn(linkFns){return function(vm,nodes,host,scope,frag){for(var node,nodeLinkFn,childrenLinkFn,i=0,n=0,l=linkFns.length;i<l;n++){node=nodes[n],nodeLinkFn=linkFns[i++],childrenLinkFn=linkFns[i++];var childNodes=toArray(node.childNodes);nodeLinkFn&&nodeLinkFn(vm,node,host,scope,frag),childrenLinkFn&&childrenLinkFn(vm,childNodes,host,scope,frag)}}}function checkElementDirectives(el,options){var tag=el.tagName.toLowerCase();if(!commonTagRE.test(tag)){var def=resolveAsset(options,"elementDirectives",tag);return def?makeTerminalNodeLinkFn(el,tag,"",options,def):void 0}}function checkComponent(el,options){var component=checkComponentAttr(el,options);if(component){var ref=findRef(el),descriptor={name:"component",ref:ref,expression:component.id,def:internalDirectives.component,modifiers:{literal:!component.dynamic}},componentLinkFn=function(vm,el,host,scope,frag){ref&&defineReactive((scope||vm).$refs,ref,null),vm._bindDir(descriptor,el,host,scope,frag)};return componentLinkFn.terminal=!0,componentLinkFn}}function checkTerminalDirectives(el,attrs,options){if(null!==getAttr(el,"v-pre"))return skip;if(el.hasAttribute("v-else")){var prev=el.previousElementSibling;if(prev&&prev.hasAttribute("v-if"))return skip}for(var attr,name,value,modifiers,matched,dirName,rawName,arg,def,termDef,i=0,j=attrs.length;i<j;i++)attr=attrs[i],name=attr.name.replace(modifierRE,""),(matched=name.match(dirAttrRE))&&(def=resolveAsset(options,"directives",matched[1]))&&def.terminal&&(!termDef||(def.priority||DEFAULT_TERMINAL_PRIORITY)>termDef.priority)&&(termDef=def,rawName=attr.name,modifiers=parseModifiers(attr.name),value=attr.value,dirName=matched[1],arg=matched[2]);return termDef?makeTerminalNodeLinkFn(el,dirName,value,options,termDef,rawName,arg,modifiers):void 0}function skip(){}function makeTerminalNodeLinkFn(el,dirName,value,options,def,rawName,arg,modifiers){var parsed=parseDirective(value),descriptor={name:dirName,arg:arg,expression:parsed.expression,filters:parsed.filters,raw:value,attr:rawName,modifiers:modifiers,def:def};"for"!==dirName&&"router-view"!==dirName||(descriptor.ref=findRef(el));var fn=function(vm,el,host,scope,frag){descriptor.ref&&defineReactive((scope||vm).$refs,descriptor.ref,null),vm._bindDir(descriptor,el,host,scope,frag)};return fn.terminal=!0,fn}function compileDirectives(attrs,options){function pushDir(dirName,def,interpTokens){var hasOneTimeToken=interpTokens&&hasOneTime(interpTokens),parsed=!hasOneTimeToken&&parseDirective(value);dirs.push({name:dirName,attr:rawName,raw:rawValue,def:def,arg:arg,modifiers:modifiers,expression:parsed&&parsed.expression,filters:parsed&&parsed.filters,interp:interpTokens,hasOneTime:hasOneTimeToken})}for(var attr,name,value,rawName,rawValue,dirName,arg,modifiers,dirDef,tokens,matched,i=attrs.length,dirs=[];i--;)if(attr=attrs[i],name=rawName=attr.name,value=rawValue=attr.value,tokens=parseText(value),arg=null,modifiers=parseModifiers(name),name=name.replace(modifierRE,""),tokens)value=tokensToExp(tokens),arg=name,pushDir("bind",directives.bind,tokens),"production"!==process.env.NODE_ENV&&"class"===name&&Array.prototype.some.call(attrs,function(attr){return":class"===attr.name||"v-bind:class"===attr.name})&&warn('class="'+rawValue+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',options);else if(transitionRE.test(name))modifiers.literal=!bindRE.test(name),pushDir("transition",internalDirectives.transition);else if(onRE.test(name))arg=name.replace(onRE,""),pushDir("on",directives.on);else if(bindRE.test(name))dirName=name.replace(bindRE,""),"style"===dirName||"class"===dirName?pushDir(dirName,internalDirectives[dirName]):(arg=dirName,pushDir("bind",directives.bind));else if(matched=name.match(dirAttrRE)){if(dirName=matched[1],arg=matched[2],"else"===dirName)continue;dirDef=resolveAsset(options,"directives",dirName,!0),dirDef&&pushDir(dirName,dirDef)}if(dirs.length)return makeNodeLinkFn(dirs)}function parseModifiers(name){var res=Object.create(null),match=name.match(modifierRE);if(match)for(var i=match.length;i--;)res[match[i].slice(1)]=!0;return res}function makeNodeLinkFn(directives){return function(vm,el,host,scope,frag){for(var i=directives.length;i--;)vm._bindDir(directives[i],el,host,scope,frag)}}function hasOneTime(tokens){for(var i=tokens.length;i--;)if(tokens[i].oneTime)return!0}function isScript(el){return"SCRIPT"===el.tagName&&(!el.hasAttribute("type")||"text/javascript"===el.getAttribute("type"))}function transclude(el,options){return options&&(options._containerAttrs=extractAttrs(el)),isTemplate(el)&&(el=parseTemplate(el)),options&&(options._asComponent&&!options.template&&(options.template="<slot></slot>"),options.template&&(options._content=extractContent(el),el=transcludeTemplate(el,options))),isFragment(el)&&(prepend(createAnchor("v-start",!0),el),el.appendChild(createAnchor("v-end",!0))),el}function transcludeTemplate(el,options){var template=options.template,frag=parseTemplate(template,!0);if(frag){var replacer=frag.firstChild;if(!replacer)return frag;var tag=replacer.tagName&&replacer.tagName.toLowerCase();return options.replace?(el===document.body&&"production"!==process.env.NODE_ENV&&warn("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),frag.childNodes.length>1||1!==replacer.nodeType||"component"===tag||resolveAsset(options,"components",tag)||hasBindAttr(replacer,"is")||resolveAsset(options,"elementDirectives",tag)||replacer.hasAttribute("v-for")||replacer.hasAttribute("v-if")?frag:(options._replacerAttrs=extractAttrs(replacer),mergeAttrs(el,replacer),replacer)):(el.appendChild(frag),el)}"production"!==process.env.NODE_ENV&&warn("Invalid template option: "+template)}function extractAttrs(el){if(1===el.nodeType&&el.hasAttributes())return toArray(el.attributes)}function mergeAttrs(from,to){for(var name,value,attrs=from.attributes,i=attrs.length;i--;)name=attrs[i].name,value=attrs[i].value,to.hasAttribute(name)||specialCharRE.test(name)?"class"===name&&!parseText(value)&&(value=value.trim())&&value.split(/\s+/).forEach(function(cls){addClass(to,cls)}):to.setAttribute(name,value)}function resolveSlots(vm,content){if(content){for(var el,name,contents=vm._slotContents=Object.create(null),i=0,l=content.children.length;i<l;i++)el=content.children[i],(name=el.getAttribute("slot"))&&(contents[name]||(contents[name]=[])).push(el),"production"!==process.env.NODE_ENV&&getBindAttr(el,"slot")&&warn('The "slot" attribute must be static.',vm.$parent);for(name in contents)contents[name]=extractFragment(contents[name],content);if(content.hasChildNodes()){var nodes=content.childNodes;if(1===nodes.length&&3===nodes[0].nodeType&&!nodes[0].data.trim())return;contents.default=extractFragment(content.childNodes,content)}}}function extractFragment(nodes,parent){var frag=document.createDocumentFragment();nodes=toArray(nodes);for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];!isTemplate(node)||node.hasAttribute("v-if")||node.hasAttribute("v-for")||(parent.removeChild(node),node=parseTemplate(node,!0)),frag.appendChild(node)}return frag}function noop$1(){}function Directive(descriptor,vm,el,host,scope,frag){this.vm=vm,this.el=el,this.descriptor=descriptor,this.name=descriptor.name,this.expression=descriptor.expression,this.arg=descriptor.arg,this.modifiers=descriptor.modifiers,this.filters=descriptor.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=host,this._scope=scope,this._frag=frag,"production"!==process.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function Vue(options){this._init(options)}function limitBy(arr,n,offset){return offset=offset?parseInt(offset,10):0,n=toNumber(n),"number"==typeof n?arr.slice(offset,offset+n):arr}function filterBy(arr,search,delimiter){if(arr=convertArray(arr),null==search)return arr;if("function"==typeof search)return arr.filter(search);search=(""+search).toLowerCase();for(var item,key,val,j,n="in"===delimiter?3:2,keys=Array.prototype.concat.apply([],toArray(arguments,n)),res=[],i=0,l=arr.length;i<l;i++)if(item=arr[i],val=item&&item.$value||item,j=keys.length){for(;j--;)if("$key"===(key=keys[j])&&contains(item.$key,search)||contains(getPath(val,key),search)){res.push(item);break}}else contains(item,search)&&res.push(item);return res}function orderBy(arr){function baseCompare(a,b,sortKeyIndex){var sortKey=sortKeys[sortKeyIndex];return sortKey&&("$key"!==sortKey&&(isObject(a)&&"$value"in a&&(a=a.$value),isObject(b)&&"$value"in b&&(b=b.$value)),a=isObject(a)?getPath(a,sortKey):a,b=isObject(b)?getPath(b,sortKey):b),a===b?0:a>b?order:-order}var comparator=null,sortKeys=void 0;arr=convertArray(arr);var args=toArray(arguments,1),order=args[args.length-1];"number"==typeof order?(order=order<0?-1:1,args=args.length>1?args.slice(0,-1):args):order=1;var firstArg=args[0];return firstArg?("function"==typeof firstArg?comparator=function(a,b){return firstArg(a,b)*order}:(sortKeys=Array.prototype.concat.apply([],args),comparator=function(a,b,i){return i=i||0,i>=sortKeys.length-1?baseCompare(a,b,i):baseCompare(a,b,i)||comparator(a,b,i+1)}),arr.slice().sort(comparator)):arr}function contains(val,search){var i;if(isPlainObject(val)){var keys=Object.keys(val);for(i=keys.length;i--;)if(contains(val[keys[i]],search))return!0}else if(isArray(val)){for(i=val.length;i--;)if(contains(val[i],search))return!0}else if(null!=val)return val.toString().toLowerCase().indexOf(search)>-1}var hasOwnProperty=Object.prototype.hasOwnProperty,literalValueRE=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,camelizeRE=/-(\w)/g,hyphenateRE=/([^-])([A-Z])/g,classifyRE=/(?:^|[-_\/])(\w)/g,toString=Object.prototype.toString,OBJECT_STRING="[object Object]",isArray=Array.isArray,hasProto="__proto__"in{},inBrowser="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),devtools=inBrowser&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,UA=inBrowser&&window.navigator.userAgent.toLowerCase(),isIE=UA&&UA.indexOf("trident")>0,isIE9=UA&&UA.indexOf("msie 9.0")>0,isAndroid=UA&&UA.indexOf("android")>0,isIOS=UA&&/iphone|ipad|ipod|ios/.test(UA),transitionProp=void 0,transitionEndEvent=void 0,animationProp=void 0,animationEndEvent=void 0;if(inBrowser&&!isIE9){var isWebkitTrans=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,isWebkitAnim=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;transitionProp=isWebkitTrans?"WebkitTransition":"transition",transitionEndEvent=isWebkitTrans?"webkitTransitionEnd":"transitionend",animationProp=isWebkitAnim?"WebkitAnimation":"animation",animationEndEvent=isWebkitAnim?"webkitAnimationEnd":"animationend"}var nextTick=function(){function nextTickHandler(){pending=!1;var copies=callbacks.slice(0);callbacks.length=0;for(var i=0;i<copies.length;i++)copies[i]()}var callbacks=[],pending=!1,timerFunc=void 0;if("undefined"!=typeof Promise&&isNative(Promise)){var p=Promise.resolve(),noop=function(){};timerFunc=function(){p.then(nextTickHandler),isIOS&&setTimeout(noop)}}else if("undefined"!=typeof MutationObserver){var counter=1,observer=new MutationObserver(nextTickHandler),textNode=document.createTextNode(String(counter));observer.observe(textNode,{characterData:!0}),timerFunc=function(){counter=(counter+1)%2,textNode.data=String(counter)}}else timerFunc=setTimeout;return function(cb,ctx){var func=ctx?function(){cb.call(ctx)}:cb;callbacks.push(func),pending||(pending=!0,timerFunc(nextTickHandler,0))}}(),_Set=void 0;"undefined"!=typeof Set&&isNative(Set)?_Set=Set:(_Set=function(){this.set=Object.create(null)},_Set.prototype.has=function(key){return void 0!==this.set[key]},_Set.prototype.add=function(key){this.set[key]=1},_Set.prototype.clear=function(){this.set=Object.create(null)});var p=Cache.prototype;p.put=function(key,value){var removed,entry=this.get(key,!0);return entry||(this.size===this.limit&&(removed=this.shift()),entry={key:key},this._keymap[key]=entry,this.tail?(this.tail.newer=entry,entry.older=this.tail):this.head=entry,this.tail=entry,this.size++),entry.value=value,removed},p.shift=function(){var entry=this.head;return entry&&(this.head=this.head.newer,this.head.older=void 0,entry.newer=entry.older=void 0,this._keymap[entry.key]=void 0,this.size--),entry},p.get=function(key,returnEntry){var entry=this._keymap[key];if(void 0!==entry)return entry===this.tail?returnEntry?entry:entry.value:(entry.newer&&(entry===this.head&&(this.head=entry.newer),entry.newer.older=entry.older),entry.older&&(entry.older.newer=entry.newer),entry.newer=void 0,entry.older=this.tail,this.tail&&(this.tail.newer=entry),this.tail=entry,returnEntry?entry:entry.value)};var str,dir,len,index,chr,state,cache$1=new Cache(1e3),reservedArgRE=/^in$|^-?\d+/,startState=0,filterState=1,filterNameState=2,filterArgState=3,doubleChr=34,singleChr=39,pipeChr=124,escapeChr=92,spaceChr=32,expStartChr={91:1,123:1,40:1},expChrPair={91:93,123:125,40:41},directive=Object.freeze({parseDirective:parseDirective}),regexEscapeRE=/[-.*+?^${}()|[\]\/\\]/g,cache=void 0,tagRE=void 0,htmlRE=void 0,filterRE=/[^|]\|[^|]/,text=Object.freeze({compileRegex:compileRegex,parseText:parseText,tokensToExp:tokensToExp}),delimiters=["{{","}}"],unsafeDelimiters=["{{{","}}}"],config=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==process.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return delimiters},set:function(val){delimiters=val,compileRegex()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return unsafeDelimiters},set:function(val){unsafeDelimiters=val,compileRegex()},configurable:!0,enumerable:!0}}),warn=void 0,formatComponentName=void 0;"production"!==process.env.NODE_ENV&&function(){var hasConsole="undefined"!=typeof console;warn=function(msg,vm){hasConsole&&!config.silent&&console.error("[Vue warn]: "+msg+(vm?formatComponentName(vm):""))},formatComponentName=function(vm){var name=vm._isVue?vm.$options.name:vm.name;return name?" (found in component: <"+hyphenate(name)+">)":""}}();var transition=Object.freeze({appendWithTransition:appendWithTransition,beforeWithTransition:beforeWithTransition,removeWithTransition:removeWithTransition,applyTransition:applyTransition}),refRE=/^v-ref:/,commonTagRE=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,reservedTagRE=/^(slot|partial|component)$/i,isUnknownElement=void 0;"production"!==process.env.NODE_ENV&&(isUnknownElement=function(el,tag){return tag.indexOf("-")>-1?el.constructor===window.HTMLUnknownElement||el.constructor===window.HTMLElement:/HTMLUnknownElement/.test(el.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(tag)});var strats=config.optionMergeStrategies=Object.create(null);strats.data=function(parentVal,childVal,vm){return vm?parentVal||childVal?function(){var instanceData="function"==typeof childVal?childVal.call(vm):childVal,defaultData="function"==typeof parentVal?parentVal.call(vm):void 0;return instanceData?mergeData(instanceData,defaultData):defaultData}:void 0:childVal?"function"!=typeof childVal?("production"!==process.env.NODE_ENV&&warn('The "data" option should be a function that returns a per-instance value in component definitions.',vm),parentVal):parentVal?function(){return mergeData(childVal.call(this),parentVal.call(this))}:childVal:parentVal},strats.el=function(parentVal,childVal,vm){if(!vm&&childVal&&"function"!=typeof childVal)return void("production"!==process.env.NODE_ENV&&warn('The "el" option should be a function that returns a per-instance value in component definitions.',vm));var ret=childVal||parentVal;return vm&&"function"==typeof ret?ret.call(vm):ret},strats.init=strats.created=strats.ready=strats.attached=strats.detached=strats.beforeCompile=strats.compiled=strats.beforeDestroy=strats.destroyed=strats.activate=function(parentVal,childVal){return childVal?parentVal?parentVal.concat(childVal):isArray(childVal)?childVal:[childVal]:parentVal},config._assetTypes.forEach(function(type){strats[type+"s"]=mergeAssets}),strats.watch=strats.events=function(parentVal,childVal){if(!childVal)return parentVal;if(!parentVal)return childVal;var ret={};extend(ret,parentVal);for(var key in childVal){var parent=ret[key],child=childVal[key];parent&&!isArray(parent)&&(parent=[parent]),ret[key]=parent?parent.concat(child):[child]}return ret},strats.props=strats.methods=strats.computed=function(parentVal,childVal){
if(!childVal)return parentVal;if(!parentVal)return childVal;var ret=Object.create(null);return extend(ret,parentVal),extend(ret,childVal),ret};var defaultStrat=function(parentVal,childVal){return void 0===childVal?parentVal:childVal},uid$1=0;Dep.target=null,Dep.prototype.addSub=function(sub){this.subs.push(sub)},Dep.prototype.removeSub=function(sub){this.subs.$remove(sub)},Dep.prototype.depend=function(){Dep.target.addDep(this)},Dep.prototype.notify=function(){for(var subs=toArray(this.subs),i=0,l=subs.length;i<l;i++)subs[i].update()};var arrayProto=Array.prototype,arrayMethods=Object.create(arrayProto);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(method){var original=arrayProto[method];def(arrayMethods,method,function(){for(var i=arguments.length,args=new Array(i);i--;)args[i]=arguments[i];var inserted,result=original.apply(this,args),ob=this.__ob__;switch(method){case"push":case"unshift":inserted=args;break;case"splice":inserted=args.slice(2)}return inserted&&ob.observeArray(inserted),ob.dep.notify(),result})}),def(arrayProto,"$set",function(index,val){return index>=this.length&&(this.length=Number(index)+1),this.splice(index,1,val)[0]}),def(arrayProto,"$remove",function(item){if(this.length){var index=indexOf(this,item);return index>-1?this.splice(index,1):void 0}});var arrayKeys=Object.getOwnPropertyNames(arrayMethods),shouldConvert=!0;Observer.prototype.walk=function(obj){for(var keys=Object.keys(obj),i=0,l=keys.length;i<l;i++)this.convert(keys[i],obj[keys[i]])},Observer.prototype.observeArray=function(items){for(var i=0,l=items.length;i<l;i++)observe(items[i])},Observer.prototype.convert=function(key,val){defineReactive(this.value,key,val)},Observer.prototype.addVm=function(vm){(this.vms||(this.vms=[])).push(vm)},Observer.prototype.removeVm=function(vm){this.vms.$remove(vm)};var util=Object.freeze({defineReactive:defineReactive,set:set,del:del,hasOwn:hasOwn,isLiteral:isLiteral,isReserved:isReserved,_toString:_toString,toNumber:toNumber,toBoolean:toBoolean,stripQuotes:stripQuotes,camelize:camelize,hyphenate:hyphenate,classify:classify,bind:bind,toArray:toArray,extend:extend,isObject:isObject,isPlainObject:isPlainObject,def:def,debounce:_debounce,indexOf:indexOf,cancellable:cancellable,looseEqual:looseEqual,isArray:isArray,hasProto:hasProto,inBrowser:inBrowser,devtools:devtools,isIE:isIE,isIE9:isIE9,isAndroid:isAndroid,isIOS:isIOS,get transitionProp(){return transitionProp},get transitionEndEvent(){return transitionEndEvent},get animationProp(){return animationProp},get animationEndEvent(){return animationEndEvent},nextTick:nextTick,get _Set(){return _Set},query:query,inDoc:inDoc,getAttr:getAttr,getBindAttr:getBindAttr,hasBindAttr:hasBindAttr,before:before,after:after,remove:remove,prepend:prepend,replace:replace,on:on,off:off,setClass:setClass,addClass:addClass,removeClass:removeClass,extractContent:extractContent,trimNode:trimNode,isTemplate:isTemplate,createAnchor:createAnchor,findRef:findRef,mapNodeRange:mapNodeRange,removeNodeRange:removeNodeRange,isFragment:isFragment,getOuterHTML:getOuterHTML,mergeOptions:mergeOptions,resolveAsset:resolveAsset,checkComponentAttr:checkComponentAttr,commonTagRE:commonTagRE,reservedTagRE:reservedTagRE,get warn(){return warn}}),uid=0,pathCache=new Cache(1e3),APPEND=0,PUSH=1,INC_SUB_PATH_DEPTH=2,PUSH_SUB_PATH=3,BEFORE_PATH=0,IN_SUB_PATH=4,IN_SINGLE_QUOTE=5,IN_DOUBLE_QUOTE=6,AFTER_PATH=7,ERROR=8,pathStateMachine=[];pathStateMachine[BEFORE_PATH]={ws:[BEFORE_PATH],ident:[3,APPEND],"[":[IN_SUB_PATH],eof:[AFTER_PATH]},pathStateMachine[1]={ws:[1],".":[2],"[":[IN_SUB_PATH],eof:[AFTER_PATH]},pathStateMachine[2]={ws:[2],ident:[3,APPEND]},pathStateMachine[3]={ident:[3,APPEND],0:[3,APPEND],number:[3,APPEND],ws:[1,PUSH],".":[2,PUSH],"[":[IN_SUB_PATH,PUSH],eof:[AFTER_PATH,PUSH]},pathStateMachine[IN_SUB_PATH]={"'":[IN_SINGLE_QUOTE,APPEND],'"':[IN_DOUBLE_QUOTE,APPEND],"[":[IN_SUB_PATH,INC_SUB_PATH_DEPTH],"]":[1,PUSH_SUB_PATH],eof:ERROR,else:[IN_SUB_PATH,APPEND]},pathStateMachine[IN_SINGLE_QUOTE]={"'":[IN_SUB_PATH,APPEND],eof:ERROR,else:[IN_SINGLE_QUOTE,APPEND]},pathStateMachine[IN_DOUBLE_QUOTE]={'"':[IN_SUB_PATH,APPEND],eof:ERROR,else:[IN_DOUBLE_QUOTE,APPEND]};var warnNonExistent;"production"!==process.env.NODE_ENV&&(warnNonExistent=function(path,vm){warn('You are setting a non-existent path "'+path.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',vm)});var path=Object.freeze({parsePath:parsePath,getPath:getPath,setPath:setPath}),expressionCache=new Cache(1e3),allowedKeywords="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",allowedKeywordsRE=new RegExp("^("+allowedKeywords.replace(/,/g,"\\b|")+"\\b)"),improperKeywords="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",improperKeywordsRE=new RegExp("^("+improperKeywords.replace(/,/g,"\\b|")+"\\b)"),wsRE=/\s/g,newlineRE=/\n/g,saveRE=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\"']|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,restoreRE=/"(\d+)"/g,pathTestRE=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,identRE=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,literalValueRE$1=/^(?:true|false|null|undefined|Infinity|NaN)$/,saved=[],expression=Object.freeze({parseExpression:parseExpression$1,isSimplePath:isSimplePath}),queue=[],userQueue=[],has={},circular={},waiting=!1,uid$2=0;Watcher.prototype.get=function(){this.beforeGet();var value,scope=this.scope||this.vm;try{value=this.getter.call(scope,scope)}catch(e){"production"!==process.env.NODE_ENV&&config.warnExpressionErrors&&warn('Error when evaluating expression "'+this.expression+'": '+e.toString(),this.vm)}return this.deep&&traverse(value),this.preProcess&&(value=this.preProcess(value)),this.filters&&(value=scope._applyFilters(value,null,this.filters,!1)),this.postProcess&&(value=this.postProcess(value)),this.afterGet(),value},Watcher.prototype.set=function(value){var scope=this.scope||this.vm;this.filters&&(value=scope._applyFilters(value,this.value,this.filters,!0));try{this.setter.call(scope,scope,value)}catch(e){"production"!==process.env.NODE_ENV&&config.warnExpressionErrors&&warn('Error when evaluating setter "'+this.expression+'": '+e.toString(),this.vm)}var forContext=scope.$forContext;if(forContext&&forContext.alias===this.expression){if(forContext.filters)return void("production"!==process.env.NODE_ENV&&warn("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));forContext._withLock(function(){scope.$key?forContext.rawValue[scope.$key]=value:forContext.rawValue.$set(scope.$index,value)})}},Watcher.prototype.beforeGet=function(){Dep.target=this},Watcher.prototype.addDep=function(dep){var id=dep.id;this.newDepIds.has(id)||(this.newDepIds.add(id),this.newDeps.push(dep),this.depIds.has(id)||dep.addSub(this))},Watcher.prototype.afterGet=function(){Dep.target=null;for(var i=this.deps.length;i--;){var dep=this.deps[i];this.newDepIds.has(dep.id)||dep.removeSub(this)}var tmp=this.depIds;this.depIds=this.newDepIds,this.newDepIds=tmp,this.newDepIds.clear(),tmp=this.deps,this.deps=this.newDeps,this.newDeps=tmp,this.newDeps.length=0},Watcher.prototype.update=function(shallow){this.lazy?this.dirty=!0:this.sync||!config.async?this.run():(this.shallow=this.queued?!!shallow&&this.shallow:!!shallow,this.queued=!0,"production"!==process.env.NODE_ENV&&config.debug&&(this.prevError=new Error("[vue] async stack trace")),pushWatcher(this))},Watcher.prototype.run=function(){if(this.active){var value=this.get();if(value!==this.value||(isObject(value)||this.deep)&&!this.shallow){var oldValue=this.value;this.value=value;var prevError=this.prevError;if("production"!==process.env.NODE_ENV&&config.debug&&prevError){this.prevError=null;try{this.cb.call(this.vm,value,oldValue)}catch(e){throw nextTick(function(){throw prevError},0),e}}else this.cb.call(this.vm,value,oldValue)}this.queued=this.shallow=!1}},Watcher.prototype.evaluate=function(){var current=Dep.target;this.value=this.get(),this.dirty=!1,Dep.target=current},Watcher.prototype.depend=function(){for(var i=this.deps.length;i--;)this.deps[i].depend()},Watcher.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var i=this.deps.length;i--;)this.deps[i].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var seenObjects=new _Set,text$1={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(value){this.el[this.attr]=_toString(value)}},templateCache=new Cache(1e3),idSelectorCache=new Cache(1e3),map={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};map.td=map.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],map.option=map.optgroup=[1,'<select multiple="multiple">',"</select>"],map.thead=map.tbody=map.colgroup=map.caption=map.tfoot=[1,"<table>","</table>"],map.g=map.defs=map.symbol=map.use=map.image=map.text=map.circle=map.ellipse=map.line=map.path=map.polygon=map.polyline=map.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var tagRE$1=/<([\w:-]+)/,entityRE=/&#?\w+?;/,commentRE=/<!--/,hasBrokenTemplate=function(){if(inBrowser){var a=document.createElement("div");return a.innerHTML="<template>1</template>",!a.cloneNode(!0).firstChild.innerHTML}return!1}(),hasTextareaCloneBug=function(){if(inBrowser){var t=document.createElement("textarea");return t.placeholder="t","t"===t.cloneNode(!0).value}return!1}(),template=Object.freeze({cloneNode:cloneNode,parseTemplate:parseTemplate}),html={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=createAnchor("v-html"),replace(this.el,this.anchor))},update:function(value){value=_toString(value),this.nodes?this.swap(value):this.el.innerHTML=value},swap:function(value){for(var i=this.nodes.length;i--;)remove(this.nodes[i]);var frag=parseTemplate(value,!0,!0);this.nodes=toArray(frag.childNodes),before(frag,this.anchor)}};Fragment.prototype.callHook=function(hook){var i,l;for(i=0,l=this.childFrags.length;i<l;i++)this.childFrags[i].callHook(hook);for(i=0,l=this.children.length;i<l;i++)hook(this.children[i])},Fragment.prototype.beforeRemove=function(){var i,l;for(i=0,l=this.childFrags.length;i<l;i++)this.childFrags[i].beforeRemove(!1);for(i=0,l=this.children.length;i<l;i++)this.children[i].$destroy(!1,!0);var dirs=this.unlink.dirs;for(i=0,l=dirs.length;i<l;i++)dirs[i]._watcher&&dirs[i]._watcher.teardown()},Fragment.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var linkerCache=new Cache(5e3);FragmentFactory.prototype.create=function(host,scope,parentFrag){var frag=cloneNode(this.template);return new Fragment(this.linker,this.vm,frag,host,scope,parentFrag)};var uid$3=0,vFor={priority:2200,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){"production"!==process.env.NODE_ENV&&this.el.hasAttribute("v-if")&&warn("<"+this.el.tagName.toLowerCase()+' v-for="'+this.expression+'" v-if="'+this.el.getAttribute("v-if")+'">: Using v-if and v-for on the same element is not recommended - consider filtering the source Array instead.',this.vm);var inMatch=this.expression.match(/(.*) (?:in|of) (.*)/);if(inMatch){var itMatch=inMatch[1].match(/\((.*),(.*)\)/);itMatch?(this.iterator=itMatch[1].trim(),this.alias=itMatch[2].trim()):this.alias=inMatch[1].trim(),this.expression=inMatch[2]}if(!this.alias)return void("production"!==process.env.NODE_ENV&&warn('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++uid$3;var tag=this.el.tagName;this.isOption=("OPTION"===tag||"OPTGROUP"===tag)&&"SELECT"===this.el.parentNode.tagName,this.start=createAnchor("v-for-start"),this.end=createAnchor("v-for-end"),replace(this.el,this.end),before(this.start,this.end),this.cache=Object.create(null),this.factory=new FragmentFactory(this.vm,this.el)},update:function(data){this.diff(data),this.updateRef(),this.updateModel()},diff:function(data){var i,l,frag,key,value,primitive,item=data[0],convertedFromObject=this.fromObject=isObject(item)&&hasOwn(item,"$key")&&hasOwn(item,"$value"),trackByKey=this.params.trackBy,oldFrags=this.frags,frags=this.frags=new Array(data.length),alias=this.alias,iterator=this.iterator,start=this.start,end=this.end,inDocument=inDoc(start),init=!oldFrags;for(i=0,l=data.length;i<l;i++)item=data[i],key=convertedFromObject?item.$key:null,value=convertedFromObject?item.$value:item,primitive=!isObject(value),frag=!init&&this.getCachedFrag(value,i,key),frag?(frag.reused=!0,frag.scope.$index=i,key&&(frag.scope.$key=key),iterator&&(frag.scope[iterator]=null!==key?key:i),(trackByKey||convertedFromObject||primitive)&&withoutConversion(function(){frag.scope[alias]=value})):(frag=this.create(value,alias,i,key),frag.fresh=!init),frags[i]=frag,init&&frag.before(end);if(!init){var removalIndex=0,totalRemoved=oldFrags.length-frags.length;for(this.vm._vForRemoving=!0,i=0,l=oldFrags.length;i<l;i++)frag=oldFrags[i],frag.reused||(this.deleteCachedFrag(frag),this.remove(frag,removalIndex++,totalRemoved,inDocument));this.vm._vForRemoving=!1,removalIndex&&(this.vm._watchers=this.vm._watchers.filter(function(w){return w.active}));var targetPrev,prevEl,currentPrev,insertionIndex=0;for(i=0,l=frags.length;i<l;i++)frag=frags[i],targetPrev=frags[i-1],prevEl=targetPrev?targetPrev.staggerCb?targetPrev.staggerAnchor:targetPrev.end||targetPrev.node:start,frag.reused&&!frag.staggerCb?(currentPrev=findPrevFrag(frag,start,this.id))===targetPrev||currentPrev&&findPrevFrag(currentPrev,start,this.id)===targetPrev||this.move(frag,prevEl):this.insert(frag,insertionIndex++,prevEl,inDocument),frag.reused=frag.fresh=!1}},create:function(value,alias,index,key){var host=this._host,parentScope=this._scope||this.vm,scope=Object.create(parentScope);scope.$refs=Object.create(parentScope.$refs),scope.$els=Object.create(parentScope.$els),scope.$parent=parentScope,scope.$forContext=this,withoutConversion(function(){defineReactive(scope,alias,value)}),defineReactive(scope,"$index",index),key?defineReactive(scope,"$key",key):scope.$key&&def(scope,"$key",null),this.iterator&&defineReactive(scope,this.iterator,null!==key?key:index);var frag=this.factory.create(host,scope,this._frag);return frag.forId=this.id,this.cacheFrag(value,frag,index,key),frag},updateRef:function(){var ref=this.descriptor.ref;if(ref){var refs,hash=(this._scope||this.vm).$refs;this.fromObject?(refs={},this.frags.forEach(function(frag){refs[frag.scope.$key]=findVmFromFrag(frag)})):refs=this.frags.map(findVmFromFrag),hash[ref]=refs}},updateModel:function(){if(this.isOption){var parent=this.start.parentNode,model=parent&&parent.__v_model;model&&model.forceUpdate()}},insert:function(frag,index,prevEl,inDocument){frag.staggerCb&&(frag.staggerCb.cancel(),frag.staggerCb=null);var staggerAmount=this.getStagger(frag,index,null,"enter");if(inDocument&&staggerAmount){var anchor=frag.staggerAnchor;anchor||(anchor=frag.staggerAnchor=createAnchor("stagger-anchor"),anchor.__v_frag=frag),after(anchor,prevEl);var op=frag.staggerCb=cancellable(function(){frag.staggerCb=null,frag.before(anchor),remove(anchor)});setTimeout(op,staggerAmount)}else{var target=prevEl.nextSibling;target||(after(this.end,prevEl),target=this.end),frag.before(target)}},remove:function(frag,index,total,inDocument){if(frag.staggerCb)return frag.staggerCb.cancel(),void(frag.staggerCb=null);var staggerAmount=this.getStagger(frag,index,total,"leave");if(inDocument&&staggerAmount){var op=frag.staggerCb=cancellable(function(){frag.staggerCb=null,frag.remove()});setTimeout(op,staggerAmount)}else frag.remove()},move:function(frag,prevEl){prevEl.nextSibling||this.end.parentNode.appendChild(this.end),frag.before(prevEl.nextSibling,!1)},cacheFrag:function(value,frag,index,key){var id,trackByKey=this.params.trackBy,cache=this.cache,primitive=!isObject(value);key||trackByKey||primitive?(id=getTrackByKey(index,key,value,trackByKey),cache[id]?"$index"!==trackByKey&&"production"!==process.env.NODE_ENV&&this.warnDuplicate(value):cache[id]=frag):(id=this.id,hasOwn(value,id)?null===value[id]?value[id]=frag:"production"!==process.env.NODE_ENV&&this.warnDuplicate(value):Object.isExtensible(value)?def(value,id,frag):"production"!==process.env.NODE_ENV&&warn("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),frag.raw=value},getCachedFrag:function(value,index,key){var frag,trackByKey=this.params.trackBy,primitive=!isObject(value);if(key||trackByKey||primitive){var id=getTrackByKey(index,key,value,trackByKey);frag=this.cache[id]}else frag=value[this.id];return frag&&(frag.reused||frag.fresh)&&"production"!==process.env.NODE_ENV&&this.warnDuplicate(value),frag},deleteCachedFrag:function(frag){var value=frag.raw,trackByKey=this.params.trackBy,scope=frag.scope,index=scope.$index,key=hasOwn(scope,"$key")&&scope.$key,primitive=!isObject(value);if(trackByKey||key||primitive){var id=getTrackByKey(index,key,value,trackByKey);this.cache[id]=null}else value[this.id]=null,frag.raw=null},getStagger:function(frag,index,total,type){type+="Stagger";var trans=frag.node.__v_trans,hooks=trans&&trans.hooks,hook=hooks&&(hooks[type]||hooks.stagger);return hook?hook.call(frag,index,total):index*parseInt(this.params[type]||this.params.stagger,10)},_preProcess:function(value){return this.rawValue=value,value},_postProcess:function(value){if(isArray(value))return value;if(isPlainObject(value)){for(var key,keys=Object.keys(value),i=keys.length,res=new Array(i);i--;)key=keys[i],res[i]={$key:key,$value:value[key]};return res}return"number"!=typeof value||isNaN(value)||(value=range(value)),value||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var frag,i=this.frags.length;i--;)frag=this.frags[i],this.deleteCachedFrag(frag),frag.destroy()}};"production"!==process.env.NODE_ENV&&(vFor.warnDuplicate=function(value){warn('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(value)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var vIf={priority:2100,terminal:!0,bind:function(){var el=this.el;if(el.__vue__)"production"!==process.env.NODE_ENV&&warn('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var next=el.nextElementSibling;next&&null!==getAttr(next,"v-else")&&(remove(next),this.elseEl=next),this.anchor=createAnchor("v-if"),replace(el,this.anchor)}},update:function(value){this.invalid||(value?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new FragmentFactory(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new FragmentFactory(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},show={bind:function(){var next=this.el.nextElementSibling;next&&null!==getAttr(next,"v-else")&&(this.elseEl=next)},update:function(value){this.apply(this.el,value),this.elseEl&&this.apply(this.elseEl,!value)},apply:function(el,value){function toggle(){el.style.display=value?"":"none"}inDoc(el)?applyTransition(el,value?1:-1,toggle,this.vm):toggle()}},text$2={bind:function(){var self=this,el=this.el,isRange="range"===el.type,lazy=this.params.lazy,number=this.params.number,debounce=this.params.debounce,composing=!1;if(isAndroid||isRange||(this.on("compositionstart",function(){composing=!0}),this.on("compositionend",function(){composing=!1,lazy||self.listener()})),this.focused=!1,isRange||lazy||(this.on("focus",function(){self.focused=!0}),this.on("blur",function(){self.focused=!1,self._frag&&!self._frag.inserted||self.rawListener()})),this.listener=this.rawListener=function(){if(!composing&&self._bound){var val=number||isRange?toNumber(el.value):el.value;self.set(val),nextTick(function(){self._bound&&!self.focused&&self.update(self._watcher.value)})}},debounce&&(this.listener=_debounce(this.listener,debounce)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var method=jQuery.fn.on?"on":"bind";jQuery(el)[method]("change",this.rawListener),lazy||jQuery(el)[method]("input",this.listener)}else this.on("change",this.rawListener),lazy||this.on("input",this.listener);!lazy&&isIE9&&(this.on("cut",function(){nextTick(self.listener)}),this.on("keyup",function(e){46!==e.keyCode&&8!==e.keyCode||self.listener()})),(el.hasAttribute("value")||"TEXTAREA"===el.tagName&&el.value.trim())&&(this.afterBind=this.listener)},update:function(value){(value=_toString(value))!==this.el.value&&(this.el.value=value)},unbind:function(){var el=this.el;if(this.hasjQuery){var method=jQuery.fn.off?"off":"unbind";jQuery(el)[method]("change",this.listener),jQuery(el)[method]("input",this.listener)}}},radio={bind:function(){var self=this,el=this.el;this.getValue=function(){if(el.hasOwnProperty("_value"))return el._value;var val=el.value;return self.params.number&&(val=toNumber(val)),val},this.listener=function(){self.set(self.getValue())},this.on("change",this.listener),el.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(value){this.el.checked=looseEqual(value,this.getValue())}},select={bind:function(){var _this=this,self=this,el=this.el;this.forceUpdate=function(){self._watcher&&self.update(self._watcher.get())};var multiple=this.multiple=el.hasAttribute("multiple");this.listener=function(){var value=getValue(el,multiple);value=self.params.number?isArray(value)?value.map(toNumber):toNumber(value):value,self.set(value)},this.on("change",this.listener);var initValue=getValue(el,multiple,!0);(multiple&&initValue.length||!multiple&&null!==initValue)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){nextTick(_this.forceUpdate)}),inDoc(el)||nextTick(this.forceUpdate)},update:function(value){var el=this.el;el.selectedIndex=-1;for(var op,val,multi=this.multiple&&isArray(value),options=el.options,i=options.length;i--;)op=options[i],val=op.hasOwnProperty("_value")?op._value:op.value,op.selected=multi?indexOf$1(value,val)>-1:looseEqual(value,val)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},checkbox={bind:function(){function getBooleanValue(){var val=el.checked;return val&&el.hasOwnProperty("_trueValue")?el._trueValue:!val&&el.hasOwnProperty("_falseValue")?el._falseValue:val}var self=this,el=this.el;this.getValue=function(){return el.hasOwnProperty("_value")?el._value:self.params.number?toNumber(el.value):el.value},this.listener=function(){var model=self._watcher.get();if(isArray(model)){var val=self.getValue(),i=indexOf(model,val);el.checked?i<0&&self.set(model.concat(val)):i>-1&&self.set(model.slice(0,i).concat(model.slice(i+1)))}else self.set(getBooleanValue())},this.on("change",this.listener),el.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(value){var el=this.el;isArray(value)?el.checked=indexOf(value,this.getValue())>-1:el.hasOwnProperty("_trueValue")?el.checked=looseEqual(value,el._trueValue):el.checked=!!value}},handlers={text:text$2,radio:radio,select:select,checkbox:checkbox},model={priority:800,twoWay:!0,handlers:handlers,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==process.env.NODE_ENV&&warn('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var handler,el=this.el,tag=el.tagName;if("INPUT"===tag)handler=handlers[el.type]||handlers.text;else if("SELECT"===tag)handler=handlers.select;else{if("TEXTAREA"!==tag)return void("production"!==process.env.NODE_ENV&&warn("v-model does not support element type: "+tag,this.vm));handler=handlers.text}el.__v_model=this,handler.bind.call(this),this.update=handler.update,this._unbind=handler.unbind},checkFilters:function(){var filters=this.filters;if(filters)for(var i=filters.length;i--;){var filter=resolveAsset(this.vm.$options,"filters",filters[i].name);("function"==typeof filter||filter.read)&&(this.hasRead=!0),filter.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},keyCodes={esc:27,tab:9,enter:13,space:32,delete:[8,46],up:38,left:37,right:39,down:40},on$1={priority:700,acceptStatement:!0,keyCodes:keyCodes,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var self=this;this.iframeBind=function(){on(self.el.contentWindow,self.arg,self.handler,self.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(handler){if(this.descriptor.raw||(handler=function(){}),"function"!=typeof handler)return void("production"!==process.env.NODE_ENV&&warn("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+handler,this.vm));this.modifiers.stop&&(handler=stopFilter(handler)),this.modifiers.prevent&&(handler=preventFilter(handler)),this.modifiers.self&&(handler=selfFilter(handler));var keys=Object.keys(this.modifiers).filter(function(key){return"stop"!==key&&"prevent"!==key&&"self"!==key&&"capture"!==key});keys.length&&(handler=keyFilter(handler,keys)),this.reset(),this.handler=handler,this.iframeBind?this.iframeBind():on(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var el=this.iframeBind?this.el.contentWindow:this.el;this.handler&&off(el,this.arg,this.handler)},unbind:function(){this.reset()}},prefixes=["-webkit-","-moz-","-ms-"],camelPrefixes=["Webkit","Moz","ms"],importantRE=/!important;?$/,propCache=Object.create(null),testEl=null,style={deep:!0,update:function(value){"string"==typeof value?this.el.style.cssText=value:isArray(value)?this.handleObject(value.reduce(extend,{})):this.handleObject(value||{})},handleObject:function(value){var name,val,cache=this.cache||(this.cache={});for(name in cache)name in value||(this.handleSingle(name,null),delete cache[name]);for(name in value)(val=value[name])!==cache[name]&&(cache[name]=val,this.handleSingle(name,val))},handleSingle:function(prop,value){if(prop=normalize(prop))if(null!=value&&(value+=""),value){var isImportant=importantRE.test(value)?"important":"";isImportant?("production"!==process.env.NODE_ENV&&warn("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),value=value.replace(importantRE,"").trim(),this.el.style.setProperty(prop.kebab,value,isImportant)):this.el.style[prop.camel]=value}else this.el.style[prop.camel]=""}},xlinkRE=/^xlink:/,disallowedInterpAttrRE=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,attrWithPropsRE=/^(?:value|checked|selected|muted)$/,enumeratedAttrRE=/^(?:draggable|contenteditable|spellcheck)$/,modelProps={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},bind$1={priority:850,bind:function(){var attr=this.arg,tag=this.el.tagName;attr||(this.deep=!0);var descriptor=this.descriptor,tokens=descriptor.interp;if(tokens&&(descriptor.hasOneTime&&(this.expression=tokensToExp(tokens,this._scope||this.vm)),(disallowedInterpAttrRE.test(attr)||"name"===attr&&("PARTIAL"===tag||"SLOT"===tag))&&("production"!==process.env.NODE_ENV&&warn(attr+'="'+descriptor.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(attr),this.invalid=!0),"production"!==process.env.NODE_ENV)){var raw=attr+'="'+descriptor.raw+'": ';"src"===attr&&warn(raw+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===attr&&warn(raw+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(value){if(!this.invalid){var attr=this.arg;this.arg?this.handleSingle(attr,value):this.handleObject(value||{})}},handleObject:style.handleObject,handleSingle:function(attr,value){var el=this.el,interp=this.descriptor.interp;if(this.modifiers.camel&&(attr=camelize(attr)),!interp&&attrWithPropsRE.test(attr)&&attr in el){var attrValue="value"===attr&&null==value?"":value;el[attr]!==attrValue&&(el[attr]=attrValue)}var modelProp=modelProps[attr];if(!interp&&modelProp){el[modelProp]=value;var model=el.__v_model;model&&model.listener()}if("value"===attr&&"TEXTAREA"===el.tagName)return void el.removeAttribute(attr);enumeratedAttrRE.test(attr)?el.setAttribute(attr,value?"true":"false"):null!=value&&!1!==value?"class"===attr?(el.__v_trans&&(value+=" "+el.__v_trans.id+"-transition"),setClass(el,value)):xlinkRE.test(attr)?el.setAttributeNS("http://www.w3.org/1999/xlink",attr,!0===value?"":value):el.setAttribute(attr,!0===value?"":value):el.removeAttribute(attr)}},el={priority:1500,bind:function(){if(this.arg){var id=this.id=camelize(this.arg),refs=(this._scope||this.vm).$els;hasOwn(refs,id)?refs[id]=this.el:defineReactive(refs,id,this.el)}},unbind:function(){var refs=(this._scope||this.vm).$els;refs[this.id]===this.el&&(refs[this.id]=null)}},ref={bind:function(){"production"!==process.env.NODE_ENV&&warn("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},cloak={bind:function(){var el=this.el;this.vm.$once("pre-hook:compiled",function(){el.removeAttribute("v-cloak")})}},directives={text:text$1,html:html,for:vFor,if:vIf,show:show,model:model,on:on$1,bind:bind$1,el:el,ref:ref,cloak:cloak},vClass={deep:!0,update:function(value){value?"string"==typeof value?this.setClass(value.trim().split(/\s+/)):this.setClass(normalize$1(value)):this.cleanup()},setClass:function(value){this.cleanup(value);for(var i=0,l=value.length;i<l;i++){var val=value[i];val&&apply(this.el,val,addClass)}this.prevKeys=value},cleanup:function(value){var prevKeys=this.prevKeys;if(prevKeys)for(var i=prevKeys.length;i--;){var key=prevKeys[i];(!value||value.indexOf(key)<0)&&apply(this.el,key,removeClass)}}},component={priority:1500,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==process.env.NODE_ENV&&warn('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=extractContent(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=createAnchor("v-component"),replace(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+hyphenate(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(value){this.literal||this.setComponent(value)},setComponent:function(value,cb){if(this.invalidatePending(),value){var self=this;this.resolveComponent(value,function(){self.mountComponent(cb)})}else this.unbuild(!0),this.remove(this.childVM,cb),this.childVM=null},resolveComponent:function(value,cb){var self=this
;this.pendingComponentCb=cancellable(function(Component){self.ComponentName=Component.options.name||("string"==typeof value?value:null),self.Component=Component,cb()}),this.vm._resolveComponent(value,this.pendingComponentCb)},mountComponent:function(cb){this.unbuild(!0);var self=this,activateHooks=this.Component.options.activate,cached=this.getCached(),newComponent=this.build();activateHooks&&!cached?(this.waitingFor=newComponent,callActivateHooks(activateHooks,newComponent,function(){self.waitingFor===newComponent&&(self.waitingFor=null,self.transition(newComponent,cb))})):(cached&&newComponent._updateRef(),this.transition(newComponent,cb))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(extraOptions){var cached=this.getCached();if(cached)return cached;if(this.Component){var options={name:this.ComponentName,el:cloneNode(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};extraOptions&&extend(options,extraOptions);var child=new this.Component(options);return this.keepAlive&&(this.cache[this.Component.cid]=child),"production"!==process.env.NODE_ENV&&this.el.hasAttribute("transition")&&child._isFragment&&warn("Transitions will not work on a fragment instance. Template: "+child.$options.template,child),child}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(defer){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var child=this.childVM;if(!child||this.keepAlive)return void(child&&(child._inactive=!0,child._updateRef(!0)));child.$destroy(!1,defer)},remove:function(child,cb){var keepAlive=this.keepAlive;if(child){this.pendingRemovals++,this.pendingRemovalCb=cb;var self=this;child.$remove(function(){self.pendingRemovals--,keepAlive||child._cleanup(),!self.pendingRemovals&&self.pendingRemovalCb&&(self.pendingRemovalCb(),self.pendingRemovalCb=null)})}else cb&&cb()},transition:function(target,cb){var self=this,current=this.childVM;switch(current&&(current._inactive=!0),target._inactive=!1,this.childVM=target,self.params.transitionMode){case"in-out":target.$before(self.anchor,function(){self.remove(current,cb)});break;case"out-in":self.remove(current,function(){target.$before(self.anchor,cb)});break;default:self.remove(current),target.$before(self.anchor,cb)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var key in this.cache)this.cache[key].$destroy();this.cache=null}}},propBindingModes=config._propBindingModes,empty={},identRE$1=/^[$_a-zA-Z]+[\w$]*$/,settablePathRE=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,bindingModes=config._propBindingModes,propDef={bind:function(){var child=this.vm,parent=child._context,prop=this.descriptor.prop,childKey=prop.path,parentKey=prop.parentPath,twoWay=prop.mode===bindingModes.TWO_WAY,parentWatcher=this.parentWatcher=new Watcher(parent,parentKey,function(val){updateProp(child,prop,val)},{twoWay:twoWay,filters:prop.filters,scope:this._scope});if(initProp(child,prop,parentWatcher.value),twoWay){var self=this;child.$once("pre-hook:created",function(){self.childWatcher=new Watcher(child,childKey,function(val){parentWatcher.set(val)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},queue$1=[],queued=!1,TYPE_TRANSITION="transition",TYPE_ANIMATION="animation",transDurationProp=transitionProp+"Duration",animDurationProp=animationProp+"Duration",raf=inBrowser&&window.requestAnimationFrame,waitForTransitionStart=raf?function(fn){raf(function(){raf(fn)})}:function(fn){setTimeout(fn,50)},p$1=Transition.prototype;p$1.enter=function(op,cb){this.cancelPending(),this.callHook("beforeEnter"),this.cb=cb,addClass(this.el,this.enterClass),op(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,pushJob(this.enterNextTick))},p$1.enterNextTick=function(){var _this=this;this.justEntered=!0,waitForTransitionStart(function(){_this.justEntered=!1});var enterDone=this.enterDone,type=this.getCssTransitionType(this.enterClass);this.pendingJsCb?type===TYPE_TRANSITION&&removeClass(this.el,this.enterClass):type===TYPE_TRANSITION?(removeClass(this.el,this.enterClass),this.setupCssCb(transitionEndEvent,enterDone)):type===TYPE_ANIMATION?this.setupCssCb(animationEndEvent,enterDone):enterDone()},p$1.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,removeClass(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},p$1.leave=function(op,cb){this.cancelPending(),this.callHook("beforeLeave"),this.op=op,this.cb=cb,addClass(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():pushJob(this.leaveNextTick)))},p$1.leaveNextTick=function(){var type=this.getCssTransitionType(this.leaveClass);if(type){var event=type===TYPE_TRANSITION?transitionEndEvent:animationEndEvent;this.setupCssCb(event,this.leaveDone)}else this.leaveDone()},p$1.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),removeClass(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},p$1.cancelPending=function(){this.op=this.cb=null;var hasPending=!1;this.pendingCssCb&&(hasPending=!0,off(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(hasPending=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),hasPending&&(removeClass(this.el,this.enterClass),removeClass(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},p$1.callHook=function(type){this.hooks&&this.hooks[type]&&this.hooks[type].call(this.vm,this.el)},p$1.callHookWithCb=function(type){var hook=this.hooks&&this.hooks[type];hook&&(hook.length>1&&(this.pendingJsCb=cancellable(this[type+"Done"])),hook.call(this.vm,this.el,this.pendingJsCb))},p$1.getCssTransitionType=function(className){if(!(!transitionEndEvent||document.hidden||this.hooks&&!1===this.hooks.css||isHidden(this.el))){var type=this.type||this.typeCache[className];if(type)return type;var inlineStyles=this.el.style,computedStyles=window.getComputedStyle(this.el),transDuration=inlineStyles[transDurationProp]||computedStyles[transDurationProp];if(transDuration&&"0s"!==transDuration)type=TYPE_TRANSITION;else{var animDuration=inlineStyles[animDurationProp]||computedStyles[animDurationProp];animDuration&&"0s"!==animDuration&&(type=TYPE_ANIMATION)}return type&&(this.typeCache[className]=type),type}},p$1.setupCssCb=function(event,cb){this.pendingCssEvent=event;var self=this,el=this.el,onEnd=this.pendingCssCb=function(e){e.target===el&&(off(el,event,onEnd),self.pendingCssEvent=self.pendingCssCb=null,!self.pendingJsCb&&cb&&cb())};on(el,event,onEnd)};var transition$1={priority:1100,update:function(id,oldId){var el=this.el,hooks=resolveAsset(this.vm.$options,"transitions",id);id=id||"v",oldId=oldId||"v",el.__v_trans=new Transition(el,id,hooks,this.vm),removeClass(el,oldId+"-transition"),addClass(el,id+"-transition")}},internalDirectives={style:style,class:vClass,component:component,prop:propDef,transition:transition$1},bindRE=/^v-bind:|^:/,onRE=/^v-on:|^@/,dirAttrRE=/^v-([^:]+)(?:$|:(.*)$)/,modifierRE=/\.[^\.]+/g,transitionRE=/^(v-bind:|:)?transition$/,DEFAULT_PRIORITY=1e3,DEFAULT_TERMINAL_PRIORITY=2e3;skip.terminal=!0;var specialCharRE=/[^\w\-:\.]/,compiler=Object.freeze({compile:compile,compileAndLinkProps:compileAndLinkProps,compileRoot:compileRoot,transclude:transclude,resolveSlots:resolveSlots}),eventRE=/^v-on:|^@/;Directive.prototype._bind=function(){var name=this.name,descriptor=this.descriptor;if(("cloak"!==name||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var attr=descriptor.attr||"v-"+name;this.el.removeAttribute(attr)}var def=descriptor.def;if("function"==typeof def?this.update=def:extend(this,def),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(descriptor.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var dir=this;this.update?this._update=function(val,oldVal){dir._locked||dir.update(val,oldVal)}:this._update=noop$1;var preProcess=this._preProcess?bind(this._preProcess,this):null,postProcess=this._postProcess?bind(this._postProcess,this):null,watcher=this._watcher=new Watcher(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:preProcess,postProcess:postProcess,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(watcher.value)}},Directive.prototype._setupParams=function(){if(this.params){var params=this.params;this.params=Object.create(null);for(var key,val,mappedKey,i=params.length;i--;)key=hyphenate(params[i]),mappedKey=camelize(key),val=getBindAttr(this.el,key),null!=val?this._setupParamWatcher(mappedKey,val):null!=(val=getAttr(this.el,key))&&(this.params[mappedKey]=""===val||val)}},Directive.prototype._setupParamWatcher=function(key,expression){var self=this,called=!1,unwatch=(this._scope||this.vm).$watch(expression,function(val,oldVal){if(self.params[key]=val,called){var cb=self.paramWatchers&&self.paramWatchers[key];cb&&cb.call(self,val,oldVal)}else called=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(unwatch)},Directive.prototype._checkStatement=function(){var expression=this.expression;if(expression&&this.acceptStatement&&!isSimplePath(expression)){var fn=parseExpression$1(expression).get,scope=this._scope||this.vm,handler=function(e){scope.$event=e,fn.call(scope,scope),scope.$event=null};return this.filters&&(handler=scope._applyFilters(handler,null,this.filters)),this.update(handler),!0}},Directive.prototype.set=function(value){this.twoWay?this._withLock(function(){this._watcher.set(value)}):"production"!==process.env.NODE_ENV&&warn("Directive.set() can only be used inside twoWaydirectives.")},Directive.prototype._withLock=function(fn){var self=this;self._locked=!0,fn.call(self),nextTick(function(){self._locked=!1})},Directive.prototype.on=function(event,handler,useCapture){on(this.el,event,handler,useCapture),(this._listeners||(this._listeners=[])).push([event,handler])},Directive.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var i,listeners=this._listeners;if(listeners)for(i=listeners.length;i--;)off(this.el,listeners[i][0],listeners[i][1]);var unwatchFns=this._paramUnwatchFns;if(unwatchFns)for(i=unwatchFns.length;i--;)unwatchFns[i]();"production"!==process.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var filterRE$1=/[^|]\|[^|]/;!function(Vue){Vue.prototype._init=function(options){options=options||{},this.$el=null,this.$parent=options.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=uid++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=options._context||this.$parent,this._scope=options._scope,this._frag=options._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),options=this.$options=mergeOptions(this.constructor.options,options,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),options.el&&this.$mount(options.el)}}(Vue),function(Vue){function noop(){}function makeComputedGetter(getter,owner){var watcher=new Watcher(owner,getter,null,{lazy:!0});return function(){return watcher.dirty&&watcher.evaluate(),Dep.target&&watcher.depend(),watcher.value}}Object.defineProperty(Vue.prototype,"$data",{get:function(){return this._data},set:function(newData){newData!==this._data&&this._setData(newData)}}),Vue.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},Vue.prototype._initProps=function(){var options=this.$options,el=options.el,props=options.props;props&&!el&&"production"!==process.env.NODE_ENV&&warn("Props will not be compiled if no `el` option is provided at instantiation.",this),el=options.el=query(el),this._propsUnlinkFn=el&&1===el.nodeType&&props?compileAndLinkProps(this,el,props,this._scope):null},Vue.prototype._initData=function(){var dataFn=this.$options.data,data=this._data=dataFn?dataFn():{};isPlainObject(data)||(data={},"production"!==process.env.NODE_ENV&&warn("data functions should return an object.",this));var i,key,props=this._props,keys=Object.keys(data);for(i=keys.length;i--;)key=keys[i],props&&hasOwn(props,key)?"production"!==process.env.NODE_ENV&&warn('Data field "'+key+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(key);observe(data,this)},Vue.prototype._setData=function(newData){newData=newData||{};var oldData=this._data;this._data=newData;var keys,key,i;for(keys=Object.keys(oldData),i=keys.length;i--;)(key=keys[i])in newData||this._unproxy(key);for(keys=Object.keys(newData),i=keys.length;i--;)key=keys[i],hasOwn(this,key)||this._proxy(key);oldData.__ob__.removeVm(this),observe(newData,this),this._digest()},Vue.prototype._proxy=function(key){if(!isReserved(key)){var self=this;Object.defineProperty(self,key,{configurable:!0,enumerable:!0,get:function(){return self._data[key]},set:function(val){self._data[key]=val}})}},Vue.prototype._unproxy=function(key){isReserved(key)||delete this[key]},Vue.prototype._digest=function(){for(var i=0,l=this._watchers.length;i<l;i++)this._watchers[i].update(!0)},Vue.prototype._initComputed=function(){var computed=this.$options.computed;if(computed)for(var key in computed){var userDef=computed[key],def={enumerable:!0,configurable:!0};"function"==typeof userDef?(def.get=makeComputedGetter(userDef,this),def.set=noop):(def.get=userDef.get?!1!==userDef.cache?makeComputedGetter(userDef.get,this):bind(userDef.get,this):noop,def.set=userDef.set?bind(userDef.set,this):noop),Object.defineProperty(this,key,def)}},Vue.prototype._initMethods=function(){var methods=this.$options.methods;if(methods)for(var key in methods)this[key]=bind(methods[key],this)},Vue.prototype._initMeta=function(){var metas=this.$options._meta;if(metas)for(var key in metas)defineReactive(this,key,metas[key])}}(Vue),function(Vue){function registerComponentEvents(vm,el){for(var name,value,handler,attrs=el.attributes,i=0,l=attrs.length;i<l;i++)name=attrs[i].name,eventRE.test(name)&&(name=name.replace(eventRE,""),value=attrs[i].value,isSimplePath(value)&&(value+=".apply(this, $arguments)"),handler=(vm._scope||vm._context).$eval(value,!0),handler._fromParent=!0,vm.$on(name.replace(eventRE),handler))}function registerCallbacks(vm,action,hash){if(hash){var handlers,key,i,j;for(key in hash)if(handlers=hash[key],isArray(handlers))for(i=0,j=handlers.length;i<j;i++)register(vm,action,key,handlers[i]);else register(vm,action,key,handlers)}}function register(vm,action,key,handler,options){var type=typeof handler;if("function"===type)vm[action](key,handler,options);else if("string"===type){var methods=vm.$options.methods,method=methods&&methods[handler];method?vm[action](key,method,options):"production"!==process.env.NODE_ENV&&warn('Unknown method: "'+handler+'" when registering callback for '+action+': "'+key+'".',vm)}else handler&&"object"===type&&register(vm,action,key,handler.handler,handler)}function onAttached(){this._isAttached||(this._isAttached=!0,this.$children.forEach(callAttach))}function callAttach(child){!child._isAttached&&inDoc(child.$el)&&child._callHook("attached")}function onDetached(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(callDetach))}function callDetach(child){child._isAttached&&!inDoc(child.$el)&&child._callHook("detached")}Vue.prototype._initEvents=function(){var options=this.$options;options._asComponent&&registerComponentEvents(this,options.el),registerCallbacks(this,"$on",options.events),registerCallbacks(this,"$watch",options.watch)},Vue.prototype._initDOMHooks=function(){this.$on("hook:attached",onAttached),this.$on("hook:detached",onDetached)},Vue.prototype._callHook=function(hook){this.$emit("pre-hook:"+hook);var handlers=this.$options[hook];if(handlers)for(var i=0,j=handlers.length;i<j;i++)handlers[i].call(this);this.$emit("hook:"+hook)}}(Vue),function(Vue){Vue.prototype._updateRef=function(remove){var ref=this.$options._ref;if(ref){var refs=(this._scope||this._context).$refs;remove?refs[ref]===this&&(refs[ref]=null):refs[ref]=this}},Vue.prototype._compile=function(el){var options=this.$options,original=el;if(el=transclude(el,options),this._initElement(el),1!==el.nodeType||null===getAttr(el,"v-pre")){var contextOptions=this._context&&this._context.$options,rootLinker=compileRoot(el,options,contextOptions);resolveSlots(this,options._content);var contentLinkFn,ctor=this.constructor;options._linkerCachable&&((contentLinkFn=ctor.linker)||(contentLinkFn=ctor.linker=compile(el,options)));var rootUnlinkFn=rootLinker(this,el,this._scope),contentUnlinkFn=contentLinkFn?contentLinkFn(this,el):compile(el,options)(this,el);this._unlinkFn=function(){rootUnlinkFn(),contentUnlinkFn(!0)},options.replace&&replace(original,el),this._isCompiled=!0,this._callHook("compiled")}},Vue.prototype._initElement=function(el){isFragment(el)?(this._isFragment=!0,this.$el=this._fragmentStart=el.firstChild,this._fragmentEnd=el.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=el):this.$el=el,this.$el.__vue__=this,this._callHook("beforeCompile")},Vue.prototype._bindDir=function(descriptor,node,host,scope,frag){this._directives.push(new Directive(descriptor,this,node,host,scope,frag))},Vue.prototype._destroy=function(remove,deferCleanup){if(this._isBeingDestroyed)return void(deferCleanup||this._cleanup());var destroyReady,pendingRemoval,self=this,cleanupIfPossible=function(){!destroyReady||pendingRemoval||deferCleanup||self._cleanup()};remove&&this.$el&&(pendingRemoval=!0,this.$remove(function(){pendingRemoval=!1,cleanupIfPossible()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var i,parent=this.$parent;for(parent&&!parent._isBeingDestroyed&&(parent.$children.$remove(this),this._updateRef(!0)),i=this.$children.length;i--;)this.$children[i].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),i=this._watchers.length;i--;)this._watchers[i].teardown();this.$el&&(this.$el.__vue__=null),destroyReady=!0,cleanupIfPossible()},Vue.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}(Vue),function(Vue){Vue.prototype._applyFilters=function(value,oldValue,filters,write){var filter,fn,args,arg,offset,i,l,j,k;for(i=0,l=filters.length;i<l;i++)if(filter=filters[write?l-i-1:i],(fn=resolveAsset(this.$options,"filters",filter.name,!0))&&"function"==typeof(fn=write?fn.write:fn.read||fn)){if(args=write?[value,oldValue]:[value],offset=write?2:1,filter.args)for(j=0,k=filter.args.length;j<k;j++)arg=filter.args[j],args[j+offset]=arg.dynamic?this.$get(arg.value):arg.value;value=fn.apply(this,args)}return value},Vue.prototype._resolveComponent=function(value,cb){var factory;if(factory="function"==typeof value?value:resolveAsset(this.$options,"components",value,!0))if(factory.options)cb(factory);else if(factory.resolved)cb(factory.resolved);else if(factory.requested)factory.pendingCallbacks.push(cb);else{factory.requested=!0;var cbs=factory.pendingCallbacks=[cb];factory.call(this,function(res){isPlainObject(res)&&(res=Vue.extend(res)),factory.resolved=res;for(var i=0,l=cbs.length;i<l;i++)cbs[i](res)},function(reason){"production"!==process.env.NODE_ENV&&warn("Failed to resolve async component"+("string"==typeof value?": "+value:"")+". "+(reason?"\nReason: "+reason:""))})}}}(Vue),function(Vue){function clean(obj){return JSON.parse(JSON.stringify(obj))}Vue.prototype.$get=function(exp,asStatement){var res=parseExpression$1(exp);if(res){if(asStatement){var self=this;return function(){self.$arguments=toArray(arguments);var result=res.get.call(self,self);return self.$arguments=null,result}}try{return res.get.call(this,this)}catch(e){}}},Vue.prototype.$set=function(exp,val){var res=parseExpression$1(exp,!0);res&&res.set&&res.set.call(this,this,val)},Vue.prototype.$delete=function(key){del(this._data,key)},Vue.prototype.$watch=function(expOrFn,cb,options){var parsed,vm=this;"string"==typeof expOrFn&&(parsed=parseDirective(expOrFn),expOrFn=parsed.expression);var watcher=new Watcher(vm,expOrFn,cb,{deep:options&&options.deep,sync:options&&options.sync,filters:parsed&&parsed.filters,user:!options||!1!==options.user});return options&&options.immediate&&cb.call(vm,watcher.value),function(){watcher.teardown()}},Vue.prototype.$eval=function(text,asStatement){if(filterRE$1.test(text)){var dir=parseDirective(text),val=this.$get(dir.expression,asStatement);return dir.filters?this._applyFilters(val,null,dir.filters):val}return this.$get(text,asStatement)},Vue.prototype.$interpolate=function(text){var tokens=parseText(text),vm=this;return tokens?1===tokens.length?vm.$eval(tokens[0].value)+"":tokens.map(function(token){return token.tag?vm.$eval(token.value):token.value}).join(""):text},Vue.prototype.$log=function(path){var data=path?getPath(this._data,path):this._data;if(data&&(data=clean(data)),!path){var key;for(key in this.$options.computed)data[key]=clean(this[key]);if(this._props)for(key in this._props)data[key]=clean(this[key])}console.log(data)}}(Vue),function(Vue){function insert(vm,target,cb,withTransition,op1,op2){target=query(target);var targetIsDetached=!inDoc(target),op=!1===withTransition||targetIsDetached?op1:op2,shouldCallHook=!targetIsDetached&&!vm._isAttached&&!inDoc(vm.$el);return vm._isFragment?(mapNodeRange(vm._fragmentStart,vm._fragmentEnd,function(node){op(node,target,vm)}),cb&&cb()):op(vm.$el,target,vm,cb),shouldCallHook&&vm._callHook("attached"),vm}function query(el){return"string"==typeof el?document.querySelector(el):el}function append(el,target,vm,cb){target.appendChild(el),cb&&cb()}function beforeWithCb(el,target,vm,cb){before(el,target),cb&&cb()}function removeWithCb(el,vm,cb){remove(el),cb&&cb()}Vue.prototype.$nextTick=function(fn){nextTick(fn,this)},Vue.prototype.$appendTo=function(target,cb,withTransition){return insert(this,target,cb,withTransition,append,appendWithTransition)},Vue.prototype.$prependTo=function(target,cb,withTransition){return target=query(target),target.hasChildNodes()?this.$before(target.firstChild,cb,withTransition):this.$appendTo(target,cb,withTransition),this},Vue.prototype.$before=function(target,cb,withTransition){return insert(this,target,cb,withTransition,beforeWithCb,beforeWithTransition)},Vue.prototype.$after=function(target,cb,withTransition){return target=query(target),target.nextSibling?this.$before(target.nextSibling,cb,withTransition):this.$appendTo(target.parentNode,cb,withTransition),this},Vue.prototype.$remove=function(cb,withTransition){if(!this.$el.parentNode)return cb&&cb();var inDocument=this._isAttached&&inDoc(this.$el);inDocument||(withTransition=!1);var self=this,realCb=function(){inDocument&&self._callHook("detached"),cb&&cb()};return this._isFragment?removeNodeRange(this._fragmentStart,this._fragmentEnd,this,this._fragment,realCb):(!1===withTransition?removeWithCb:removeWithTransition)(this.$el,this,realCb),this}}(Vue),function(Vue){function modifyListenerCount(vm,event,count){var parent=vm.$parent;if(parent&&count&&!hookRE.test(event))for(;parent;)parent._eventsCount[event]=(parent._eventsCount[event]||0)+count,parent=parent.$parent}Vue.prototype.$on=function(event,fn){return(this._events[event]||(this._events[event]=[])).push(fn),modifyListenerCount(this,event,1),this},Vue.prototype.$once=function(event,fn){function on(){self.$off(event,on),fn.apply(this,arguments)}var self=this;return on.fn=fn,this.$on(event,on),this},Vue.prototype.$off=function(event,fn){var cbs;if(!arguments.length){if(this.$parent)for(event in this._events)(cbs=this._events[event])&&modifyListenerCount(this,event,-cbs.length);return this._events={},this}if(!(cbs=this._events[event]))return this;if(1===arguments.length)return modifyListenerCount(this,event,-cbs.length),this._events[event]=null,this;for(var cb,i=cbs.length;i--;)if((cb=cbs[i])===fn||cb.fn===fn){modifyListenerCount(this,event,-1),cbs.splice(i,1);break}return this},Vue.prototype.$emit=function(event){var isSource="string"==typeof event;event=isSource?event:event.name;var cbs=this._events[event],shouldPropagate=isSource||!cbs;if(cbs){cbs=cbs.length>1?toArray(cbs):cbs;var hasParentCbs=isSource&&cbs.some(function(cb){return cb._fromParent});hasParentCbs&&(shouldPropagate=!1);for(var args=toArray(arguments,1),i=0,l=cbs.length;i<l;i++){var cb=cbs[i];!0!==cb.apply(this,args)||hasParentCbs&&!cb._fromParent||(shouldPropagate=!0)}}return shouldPropagate},Vue.prototype.$broadcast=function(event){var isSource="string"==typeof event;if(event=isSource?event:event.name,this._eventsCount[event]){var children=this.$children,args=toArray(arguments);isSource&&(args[0]={name:event,source:this});for(var i=0,l=children.length;i<l;i++){var child=children[i];child.$emit.apply(child,args)&&child.$broadcast.apply(child,args)}return this}},Vue.prototype.$dispatch=function(event){var shouldPropagate=this.$emit.apply(this,arguments);if(shouldPropagate){var parent=this.$parent,args=toArray(arguments);for(args[0]={name:event,source:this};parent;)shouldPropagate=parent.$emit.apply(parent,args),parent=shouldPropagate?parent.$parent:null;return this}};var hookRE=/^hook:/}(Vue),function(Vue){function ready(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}Vue.prototype.$mount=function(el){return this._isCompiled?void("production"!==process.env.NODE_ENV&&warn("$mount() should be called only once.",this)):(el=query(el),el||(el=document.createElement("div")),this._compile(el),this._initDOMHooks(),inDoc(this.$el)?(this._callHook("attached"),ready.call(this)):this.$once("hook:attached",ready),this)},Vue.prototype.$destroy=function(remove,deferCleanup){this._destroy(remove,deferCleanup)},Vue.prototype.$compile=function(el,host,scope,frag){return compile(el,this.$options,!0)(this,el,host,scope,frag)}}(Vue);var slot={priority:2300,params:["name"],bind:function(){var name=this.params.name||"default",content=this.vm._slotContents&&this.vm._slotContents[name];content&&content.hasChildNodes()?this.compile(content.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(content,context,host){if(content&&context){if(this.el.hasChildNodes()&&1===content.childNodes.length&&1===content.childNodes[0].nodeType&&content.childNodes[0].hasAttribute("v-if")){var elseBlock=document.createElement("template");elseBlock.setAttribute("v-else",""),elseBlock.innerHTML=this.el.innerHTML,elseBlock._context=this.vm,content.appendChild(elseBlock)}var scope=host?host._scope:this._scope;this.unlink=context.$compile(content,host,scope,this._frag)}content?replace(this.el,content):remove(this.el)},fallback:function(){this.compile(extractContent(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},partial={priority:1750,params:["name"],paramWatchers:{name:function(value){vIf.remove.call(this),value&&this.insert(value)}},bind:function(){this.anchor=createAnchor("v-partial"),replace(this.el,this.anchor),this.insert(this.params.name)},insert:function(id){var partial=resolveAsset(this.vm.$options,"partials",id,!0);partial&&(this.factory=new FragmentFactory(this.vm,partial),vIf.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},elementDirectives={slot:slot,partial:partial},convertArray=vFor._postProcess,digitsRE=/(\d{3})(?=\d)/g,filters={orderBy:orderBy,filterBy:filterBy,limitBy:limitBy,json:{read:function(value,indent){return"string"==typeof value?value:JSON.stringify(value,null,arguments.length>1?indent:2)},write:function(value){try{return JSON.parse(value)}catch(e){return value}}},capitalize:function(value){return value||0===value?(value=value.toString(),value.charAt(0).toUpperCase()+value.slice(1)):""},uppercase:function(value){return value||0===value?value.toString().toUpperCase():""},lowercase:function(value){return value||0===value?value.toString().toLowerCase():""},currency:function(value,_currency,decimals){if(value=parseFloat(value),!isFinite(value)||!value&&0!==value)return"";_currency=null!=_currency?_currency:"$",decimals=null!=decimals?decimals:2;var stringified=Math.abs(value).toFixed(decimals),_int=decimals?stringified.slice(0,-1-decimals):stringified,i=_int.length%3,head=i>0?_int.slice(0,i)+(_int.length>3?",":""):"",_float=decimals?stringified.slice(-1-decimals):"";return(value<0?"-":"")+_currency+head+_int.slice(i).replace(digitsRE,"$1,")+_float},pluralize:function(value){var args=toArray(arguments,1),length=args.length;if(length>1){var index=value%10-1;return index in args?args[index]:args[length-1]}return args[0]+(1===value?"":"s")},debounce:function(handler,delay){if(handler)return delay||(delay=300),_debounce(handler,delay)}};!function(Vue){function createClass(name){return new Function("return function "+classify(name)+" (options) { this._init(options) }")()}Vue.options={directives:directives,elementDirectives:elementDirectives,filters:filters,transitions:{},components:{},partials:{},replace:!0},Vue.util=util,Vue.config=config,Vue.set=set,Vue.delete=del,Vue.nextTick=nextTick,Vue.compiler=compiler,Vue.FragmentFactory=FragmentFactory,Vue.internalDirectives=internalDirectives,Vue.parsers={path:path,text:text,template:template,directive:directive,expression:expression},Vue.cid=0;var cid=1;Vue.extend=function(extendOptions){extendOptions=extendOptions||{};var Super=this,isFirstExtend=0===Super.cid;if(isFirstExtend&&extendOptions._Ctor)return extendOptions._Ctor;var name=extendOptions.name||Super.options.name;"production"!==process.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(name)||(warn('Invalid component name: "'+name+'". Component names can only contain alphanumeric characaters and the hyphen.'),name=null));var Sub=createClass(name||"VueComponent");return Sub.prototype=Object.create(Super.prototype),Sub.prototype.constructor=Sub,Sub.cid=cid++,Sub.options=mergeOptions(Super.options,extendOptions),Sub.super=Super,Sub.extend=Super.extend,config._assetTypes.forEach(function(type){Sub[type]=Super[type]}),name&&(Sub.options.components[name]=Sub),isFirstExtend&&(extendOptions._Ctor=Sub),Sub},Vue.use=function(plugin){if(!plugin.installed){var args=toArray(arguments,1);return args.unshift(this),"function"==typeof plugin.install?plugin.install.apply(plugin,args):plugin.apply(null,args),plugin.installed=!0,this}},Vue.mixin=function(mixin){Vue.options=mergeOptions(Vue.options,mixin)},config._assetTypes.forEach(function(type){Vue[type]=function(id,definition){return definition?("production"!==process.env.NODE_ENV&&"component"===type&&(commonTagRE.test(id)||reservedTagRE.test(id))&&warn("Do not use built-in or reserved HTML elements as component id: "+id),"component"===type&&isPlainObject(definition)&&(definition.name||(definition.name=id),definition=Vue.extend(definition)),
this.options[type+"s"][id]=definition,definition):this.options[type+"s"][id]}}),extend(Vue.transition,transition)}(Vue),Vue.version="1.0.28",setTimeout(function(){config.devtools&&(devtools?devtools.emit("init",Vue):"production"!==process.env.NODE_ENV&&inBrowser&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),module.exports=Vue}).call(this)}).call(this,require("_process"))},{_process:140}],143:[function(require,module,exports){var inserted=exports.cache={};exports.insert=function(css){if(!inserted[css]){inserted[css]=!0;var elem=document.createElement("style");return elem.setAttribute("type","text/css"),"textContent"in elem?elem.textContent=css:elem.styleSheet.cssText=css,document.getElementsByTagName("head")[0].appendChild(elem),elem}}},{}],144:[function(require,module,exports){"use strict";function receiveMessage(event){if(event.origin==window.location.origin){var request=JSON.parse(event.data);request.channel="postMessage",gokartListener._processRequest(request,function(response){event.source.postMessage(response,window.location.origin)})}}Object.defineProperty(exports,"__esModule",{value:!0});var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_stringify),GokartListener=function(){var vm=this;this.debug=!!window.location.search&&window.location.search.toLowerCase().indexOf("debug=true")>=0,this.channelNamePrefix="gokart("+window.location.origin+window.location.pathname+").",window.addEventListener("storage",function(e){if(e.key.startsWith(vm.channelNamePrefix)){var request=JSON.parse(e.newValue);if(!request.clientId||!request.data)return void(this.debug&&console.log(Date()+" : Request without clientId or request data is received from channel "+e.key+". request = "+e.newValue));if(request.method!==e.key.substring(vm.channelNamePrefix.length))return void(this.debug&&console.log(Date()+" : Request with invalid method is received from channel "+e.key+". request = "+e.newValue));request.channel="localStorage",vm._processRequest(request,function(response){localStorage.setItem(e.key+"status",response)})}}),this.debug&&console.log(Date()+" : Gokart listener is initialized.")};GokartListener.prototype._processRequest=function(request,sentResponse){var vm=this,waitingTime=0;vm.debug&&console.log(Date()+" : Receive a request through "+request.channel+". request = "+(0,_stringify2.default)(request)),sentResponse((0,_stringify2.default)(vm.populateResponse(request,"RECEIVED")));var setupCalled=!1;!function func(){if(window.gokart&&window.gokart.loading.appStatus.isFinished())if(window.gokart.loading.appStatus.isSucceed())if(request.method)if(window.gokart[request.data.module])if(window.gokart[request.data.module][request.method]){!setupCalled&&window.gokart[request.data.module].setup&&(vm.debug&&console.log(Date()+" : call setup to initialize module "+request.data.module),window.gokart[request.data.module].setup(),setupCalled=!0);var moduleStatus=window.gokart.loading.getStatus(request.data.module);if(!moduleStatus.isFinished())return waitingTime>=6e4?void sentResponse((0,_stringify2.default)(vm.populateResponse(request,"GOKART_FAILED","Initialize "+request.data.module+" timeout."))):(vm.debug&&console.log(Date()+" : "+request.data.module+" is initializing"),setTimeout(func,1e3),void(waitingTime+=1e3));if(!moduleStatus.isSucceed())return void sentResponse((0,_stringify2.default)(vm.populateResponse(request,"GOKART_FAILED",moduleStatus.failedMessages())));try{window.gokart[request.data.module][request.method](request.data.options),window.focus(),sentResponse((0,_stringify2.default)(vm.populateResponse(request,"OK")))}catch(ex){throw sentResponse((0,_stringify2.default)(vm.populateResponse(request,"METHOD_FAILED",ex))),ex}}else sentResponse((0,_stringify2.default)(vm.populateResponse(request,"METHOD_NOT_SUPPORT")));else sentResponse((0,_stringify2.default)(vm.populateResponse(request,"MODULE_NOT_FOUND")));else sentResponse((0,_stringify2.default)(vm.populateResponse(request,"METHOD_IS_MISSING")));else sentResponse((0,_stringify2.default)(vm.populateResponse(request,"GOKART_FAILED",window.gokart.loading.appStatus.failedMessages())));else{if(waitingTime>=6e4)return vm.debug&&console.log(Date()+" : Initialize gokart timeout"),void sentResponse((0,_stringify2.default)(vm.populateResponse(request,"GOKART_FAILED","Initialize gokart timeout.")));vm.debug&&console.log(Date()+" : gokart is loading"),setTimeout(func,1e3),waitingTime+=1e3}}()},GokartListener.prototype.populateResponse=function(request,code,failedReason){var response={clientId:request.clientId,requestId:request.requestId,requestMethod:request.method,time:Date(),data:{status:"failed",code:code,message:""}},data=response.data;return"RECEIVED"===code?(data.message="Request is received from "+request.channel+". data = "+(0,_stringify2.default)(request.data),data.status="processing"):"GOKART_FAILED"===code?data.message=failedReason:"MODULE_NOT_FOUND"===code?data.message="Module("+window.gokart[request.data.module]+") is not found.":"METHOD_NOT_SUPPORT"===code?data.message="Module("+window.gokart[request.data.module]+") does not support method "+request.method+".":"OK"===code?(data.message="Succeed to execute method '"+request.method+"', data = "+(0,_stringify2.default)(request.data),data.status="succeed"):"METHOD_IS_MISSING"===code?data.message="Rquest method is missing, data = "+(0,_stringify2.default)(request.data):"METHOD_FAILED"===code&&(data.message="Failed to execute method '"+request.method+"', data = "+(0,_stringify2.default)(request.data)+". Reason = "+failedReason),this.debug&&console.log(Date()+" : Send response to client '"+request.clientId+"' through "+request.channel+" . response = "+(0,_stringify2.default)(response)),response};var gokartListener=new GokartListener;window.addEventListener("message",receiveMessage,!1),exports.default=gokartListener},{"babel-runtime/core-js/json/stringify":30}],145:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var gokartProfile={name:"sss",version:"16.11.1",distributionType:"release",description:"Spatial Support System v3",repositoryBranch:"master",lastCommit:"5e6592b",commitDate:"Thu Apr 13 12:04:59 2023 +0800",commitMessage:"Fix for CSW filtering",commitAuthor:"Jason Moore <jason.moore@dbca.wa.gov.au>",build:{datetime:"2023-04-13 12:19:47 AWST(+0800)",date:"2023-04-13 AWST(+0800)",time:"12-19-47 AWST(+0800)",platform:"Linux",host:"gokartsss-dev",vendorMD5:"x32NJE1J6ZKO48-QI-f2Xw"}};exports.default=gokartProfile},{}],146:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _promise=require("babel-runtime/core-js/promise"),_promise2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_promise),_vendor=require("src/vendor.js"),tour=new _vendor.Shepherd.Tour({defaults:{classes:"shepherd-theme-dark",scrollTo:!1}});tour.version=.2,global.tour=tour,tour.start=function(){var _start=tour.start;return function(){this.getCurrentStep()?alert("You already started a tour."):_start.call(this)}}(),tour.on("cancel",function(){global.gokart.touring=!1}),tour.addStep("welcome",{text:'Would you like a tour of the Spatial Support System? If you exit now, you can always rerun the tour by clicking "Take Tour" in <b>System Settings</b>.',buttons:[{text:"Exit",classes:"shepherd-button-secondary",action:tour.cancel},{text:"Next",action:tour.next}]}).addStep("map-controls",{text:"At the top right are common map controls for setting a scale, going full-screen, zooming, and measuring lengths and areas.",attachTo:"#menu-scale left",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-layers-label").click(),(0,_vendor.$)("#layers-active-label").click()},show:function(){global.gokart.map.animate({center:[116,-32]},{resolution:global.gokart.map.resolutions[9]})}}}).addStep("map-search",{text:"There is also a search box with support for coordinates and place names. <br/><b>Try out some of these!</b><ul><li>17 Dick Perry Avenue, Kensington</li><li>Upper Swan, Western Australia</li><li>32.00858S 115.53978E</li><li>115Â° 38â² 58.0â³ E, 33Â° 20â² 52.8â³ S</li><li>MGA 50 718776E 6190981N</li><li>MGA50 3816452</li><li>FD ET 79</li><li>PIL AF50</li></ul>",attachTo:"#map-search left"}).addStep("toolbox",{text:'There is also a tool box which contains lots of helpful tools, for example: weather outlook, measurement tools, etc.<br>You can click the "toolbox" button to expand the list of tools.',attachTo:"#toolbox_expand left",when:{"before-show":function(){global.gokart.toolbox.showTools=!1}}}).addStep("toolbox-expanded",{text:"This panel lists all the tools you can use.",attachTo:"#deselect-tool left",beforeShowPromise:function(resolve,reject){return new _promise2.default(function(resolve,reject){(0,_vendor.$)("#toolbox_expand").click();var func=function func(){(0,_vendor.$)("#toolbox_tools").is(":visible")?resolve():setTimeout(func,10)};setTimeout(func,10)})},when:{}}).addStep("toolbox-select-measurelength",{text:'You can click the tool "Measure Length" to choose it.',attachTo:"#MeasureLength left",when:{}}).addStep("toolbox-measurelength-selected",{text:'The tool "Measure Length" is chosed and ready to use.',attachTo:"#toolbox_tool left",beforeShowPromise:function(resolve,reject){return new _promise2.default(function(resolve,reject){(0,_vendor.$)("#MeasureLength").click();var func=function func(){(0,_vendor.$)("#toolbox_tool").is(":visible")?resolve():setTimeout(func,10)};setTimeout(func,10)})},when:{}}).addStep("menu",{text:"To the left are the interactive panes for <b>Layers</b>, <b>Drawing Tools</b> and <b>Vehicle Tracking</b>, <b> Bushfire Report</b>.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){global.gokart.toolbox.toggleTool(!1)}}}).addStep("layers",{text:"The <b>Layers</b> pane lets you find, organise and print what is visible on the map.",attachTo:"#menu-tab-layers-label right"}).addStep("catalogue",{text:"The catalogue in <b>Browse Layers</b> lets you add more layers to the map. Layers can be found by typing into the search box.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-catalogue-label").click()}}}).addStep("catalogue-toggle",{text:"Clicking a layer's switch will add it on top of other map layers.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#find-layer").val("tenure").change(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("#layers-catalogue-list .switch-input").click(),(0,_vendor.$)("#find-layer").val("land").change()})}}}).addStep("active",{text:"The map layers in <b>Active</b> lets you configure layers that are part of the current map.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-active-label").click()}}}).addStep("active-opacity",{text:"Clicking a layer opens a configuration panel, from which you can adjust transparency and other settings.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){global.gokart.tracking.trackingMapLayer?global.gokart.active.isHidden(global.gokart.tracking.trackingMapLayer)&&global.gokart.active.toggleHidden(global.gokart.tracking.trackingMapLayer):global.gokart.catalogue.onLayerChange(global.gokart.tracking.trackingLayer,!0),(0,_vendor.$)('div[data-id="dpaw:resource_tracking_live"]').click(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("#layer-config input.layer-opacity").val(30).change()})}}}).addStep("active-remove",{text:"You can also drag and drop layers to reorder them, and remove a layer by clicking the red X.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)('div[data-id="dpaw:resource_tracking_live"] a.remove-layer').get(0).click()}}}).addStep("export",{text:"Under <b>Save & Print</b>, you can save the current state of the map (position, layers and drawings), and load previous sessions.<br/>You can also perform a quick print of the displayed map region as JPG, geospatial PDF or GeoTIFF.",attachTo:"#menu-tab-layers-label right",when:{"before-show":function(){(0,_vendor.$)("#layers-export-label").click()}}}).addStep("annotations",{text:"The <b>Drawing Tools</b> pane lets you draw features onto the map.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-annotations-label").click()}}}).addStep("annotations-text",{text:"Some of the tools have additional configuration options. Text notes are even able to be resized.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){(0,_vendor.$)('a[title="Text Note"]').get(0).click(),_vendor.Vue.nextTick(function(){(0,_vendor.$)("textarea.notecontent").height(60).val("Like this one where you\ncan set the text of a note").get(0).click(),global.gokart.annotations.note.colour="#f57900",global.gokart.annotations.colour="#f57900",global.gokart.annotations.note.text="Like this one where you\ncan set the text of a note"})}}}).addStep("annotations-draw",{text:"Clicking on the map will place a feature.",attachTo:"#menu-tab-annotations-label right",when:{"before-show":function(){_vendor.Vue.nextTick(function(){var pixel=global.gokart.map.olmap.getPixelFromCoordinate(global.gokart.map.olmap.getView().getCenter());global.gokart.map.olmap.simulateEvent("pointermove",pixel[0],pixel[1]),global.gokart.map.olmap.simulateEvent("pointerdown",pixel[0],pixel[1]),global.gokart.map.olmap.simulateEvent("pointerup",pixel[0],pixel[1])})}}}).addStep("tracking",{text:"The Tracking pane is used to find and filter the vehicles displayed on the map.",attachTo:"#menu-tab-tracking-label right",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-tracking-label").click()}}}).addStep("BushfireReport",{text:"The bushfire report pane is used to find,filter and edit the bushfire report displayed on the map.",attachTo:"#menu-tab-bfrs-label right",when:{"before-show":function(){(0,_vendor.$)("#menu-tab-bfrs-label").click()}}}).addStep("finish",{text:"And with that, we've reached the end of the tour! The Spatial Support System will revert back to the pre-tour state when you click NEXT.",when:{hide:function(){document.location.reload()}}}),exports.default=tour}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/core-js/promise":31,"src/vendor.js":"src/vendor.js"}],147:[function(require,module,exports){(function(global){(function(){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_vendor=require("src/vendor.js"),_sss=require("./sss.vue"),_sss2=_interopRequireDefault(_sss),_sssTour=require("./sss-tour.js"),_sssTour2=_interopRequireDefault(_sssTour),_sssProfile=require("./sss-profile.js"),_sssProfile2=_interopRequireDefault(_sssProfile),_gokartListener=require("./gokart-listener.js");_interopRequireDefault(_gokartListener);global._env&&(_vendor.$.each(global._env,function(key,value){env[key]=value}),global._env=void 0),global.tour=_sssTour2.default,global.getLayerId=function(id){return env&&env.layerMapping&&env.layerMapping[id]||id},global.getDetailLayerId=function(id){return env&&env.detailLayerMapping&&env.detailLayerMapping[id]||env&&env.layerMapping&&env.layerMapping[id]||id},global.getIndependentLayerId=function(id){if(!env||!env.layerMapping)return id;var independentId=id;return _vendor.$.each(env.layerMapping,function(key,value){if(value===id)return independentId=key,!1}),independentId},global.getAppId=function(id){return env&&env.appMapping&&env.appMapping[id]||id},global.debounce=function(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,context&&context.wait||wait),callNow&&func.apply(context,args)}};var volatileData={appType:env.appType,fixedScales:[.25,.5,1,2,2.5,5,10,20,25,50,80,100,125,250,500,1e3,2e3,3e3,5e3,1e4,25e3],resolutions:[.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.0003433227539062,.0001716613769531,858306884766e-16,429153442383e-16,214576721191e-16,107288360596e-16,53644180298e-16,26822090149e-16,13411045074e-16],mmPerInch:25.4,displayResolution:[1,1],whoami:{email:null},layout:{screenHeight:0,hintsHeight:0,screenWidth:0,leftPanelHeadHeight:90},activeMenu:null,activeSubmenu:null,hints:null,showHints:!1,catalogueFilters:[["basemap","Base Imagery"],["boundaries","Admin Boundaries"],["communications","Communications"],["fire","Fire Operations"],["meteorology","Meteorology"],["vegetation","Vegetation"],["tenure","Tenure and Land Use"],["infrastructure","Infrastructure"],["grid","Grid Systems"],["resources","Resource Tracking"]],matrixSets:{"EPSG:4326":{1024:{name:"gda94",minLevel:0,maxLevel:17}}}},systemSettings={tourVersion:null,undoLimit:0,lengthUnit:"km",areaUnit:"ha",measureFeature:!1,print:{retainBoundingbox:!0,snapToFixedScale:!0},overviewMap:!0,hoverInfo:!1,resourceLabels:!0,resourceDirections:!0,viewportOnly:!1,rightHandTools:!0,graticule:!0,bfrs:{bushfireLabels:!0,viewportOnly:!1},weatheroutlook:{"weather-outlook-customized":null,"weather-outlook-amicus":null}},_persistentData={view:{center:[123.75,-24.966],scale:4026092},activeLayers:[["dpaw:resource_tracking_live",{}],["cddp:state_map_base",{}]],annotations:{type:"FeatureCollection",features:[]},drawingLogs:[],redoPointer:0,drawingSequence:0,settings:JSON.parse((0,_stringify2.default)(systemSettings))};global.gokartService=env.gokartService,global.localforage=_vendor.localforage,global.$=_vendor.$;var resetRe=new RegExp("^\\?([^?]*&)?reset=true(&.*)?$","i"),result=resetRe.exec(window.location.search);result?_vendor.localforage.setItem("sssOfflineStore",{}).then(function(v){var searchString=(result[1]?result[1]:"")+(result[2]&&result[2].length>1?result[2].substring(1):"");document.location.search=0===searchString.length?"":"?"+(result[1]?result[1]:"")+(result[2]&&result[2].length>1?result[2].substring(1):"")}):(_vendor.Vue.use(_vendor.VueStash),_vendor.localforage.getItem("sssOfflineStore").then(function(store){store&&store.activeLayers&&0===store.activeLayers.length&&delete store.activeLayers;var storedData=_vendor.utils.extend(JSON.parse((0,_stringify2.default)(_persistentData)),store||{},volatileData);global.gokart=new _vendor.Vue({el:"body",components:{App:_sss2.default},data:{store:storedData,pngs:{},fixedLayers:[],saved:null,touring:!1,menuRevision:1,tints:{selectedPoint:[["#b43232","#2199e8"]],selectedDivision:[["#000000","#2199e8"],["#7c3100","#2199e8"],["#ff6600","#ffffff"]],selectedRoadClosurePoint:[["#000","#2199e8"]],selectedPlusIcon:[["#006400","#2199e8"]]}},computed:{loading:function(){return this.$refs.app.$refs.loading},dialog:function(){return this.$refs.app.$refs.dialog},map:function(){return this.$refs.app.$refs.map},scales:function(){return this.$refs.app.$refs.map.$refs.scales},search:function(){return this.$refs.app.$refs.map.$refs.search},featuredetail:function(){return this.$refs.app.$refs.map.$refs.featuredetail},weatherforecast:function(){return this.$refs.app.$refs.map.$refs.weatherforecast},toolbox:function(){return this.$refs.app.$refs.map.$refs.toolbox},measure:function(){return this.$refs.app.$refs.map.$refs.measure},info:function(){return this.$refs.app.$refs.map.$refs.info},active:function(){return this.$refs.app.$refs.layers.$refs.active},layers:function(){return this.$refs.app.$refs.layers},catalogue:function(){return this.$refs.app.$refs.layers.$refs.catalogue},export:function(){return this.$refs.app.$refs.layers.$refs.export},annotations:function(){return this.$refs.app.$refs.annotations},tracking:function(){return this.$refs.app.$refs.tracking},thermal:function(){return this.$refs.app.$refs.thermal},settings:function(){return this.$refs.app.$refs.settings},systemsetting:function(){return this.$refs.app.$refs.settings.$refs.systemsetting},bfrs:function(){return this.$refs.app.$refs.bfrs},weatheroutlook:function(){return this.$refs.app.$refs.settings.$refs.weatheroutlook},geojson:function(){return new _vendor.ol.format.GeoJSON},wgs84Sphere:function(){return new _vendor.ol.Sphere(6378137)},profile:function(){return _sssProfile2.default},app:function(){return"SSS"},utils:function(){return _vendor.utils},env:function(_env){function env(){return _env.apply(this,arguments)}return env.toString=function(){return _env.toString()},env}(function(){return env}),persistentData:function(){return _vendor.utils.extract(_persistentData,this.store)},tourVersion:function(){return this.store.settings.tourVersion},defaultSettings:function(){return systemSettings},screenHeight:function(){return this.store.layout.screenHeight},hints:function(){return this.store.hints},activeModule:function(){return this.store.activeSubmenu||this.store.activeMenu},isShowHints:function(){return this.store.showHints&&this.store.hints},hasHints:function(){return this.store.hints}},watch:{tourVersion:function(newValue,oldValue){newValue!==_sssTour2.default.version&&this.takeTour()},hints:function(newValue,oldValue){var vm=this;this.$nextTick(function(){vm.setHintsHeight()})},menuRevision:function(newValue,oldValue){var vm=this;this.$nextTick(function(){vm.store.layout.leftPanelHeadHeight=(0,_vendor.$)("#"+vm.activeModule+"-tabs").height()||90,vm.setHintsHeight()})},screenHeight:function(newValue,oldValue){var module=this.store.activeSubmenu||this.store.activeMenu;this[module].adjustHeight&&this[module].adjustHeight(),this.loading.adjustHeight()}},methods:{setHintsHeight:function(){this[this.activeModule].adjustHeight&&(this.store.layout.hintsHeight=(this.isShowHints?(0,_vendor.$)("#hints").height():0)+(this.hasHints?32:0),this[this.activeModule].adjustHeight())},menuChanged:function(){this.menuRevision+=1},takeTour:function(){this.store.settings.tourVersion=_sssTour2.default.version,this.export.saveState(),this.touring=!0,_sssTour2.default.start()},setHints:function(){this.store.hints=null,this.store.showHints=!1;var module=this.store.activeSubmenu||this.store.activeMenu;module&&this[module]&&(0===arguments.length?this.store.hints=null:1===arguments.length?this.store.hints=arguments[0]:this.store.hints=arguments)}},ready:function(){var self=this;self.loading.app.phaseBegin("initialize",20,"Initialize"),(0,_vendor.$)(document).foundation(),(0,_vendor.svg4everybody)(),(0,_vendor.$)("title").text(_sssProfile2.default.description),(0,_vendor.$)("body").append('<div id="dpi" style="width:1in;display:none"></div>'),self.dpi=parseFloat((0,_vendor.$)("#dpi").width()),self.store.dpmm=self.dpi/self.store.mmPerInch,(0,_vendor.$)("#dpi").remove(),function(){_vendor.$.ajax({url:self.env.authUrl||"/sso/auth",method:"GET",dataType:"json",success:function(response,stat,xhr){_vendor.$.extend(self.store.whoami,response)},error:function(xhr,status,message){alert("Get user profile failed.  "+status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})}();var offCanvasLeft=(0,_vendor.$)("#offCanvasLeft");(0,_vendor.$)("#menu-tabs").on("change.zf.tabs",function(ev){offCanvasLeft.addClass("reveal-responsive"),self.map.olmap.updateSize()}).on("click",".tabs-title a[aria-selected=false]",function(ev){offCanvasLeft.addClass("reveal-responsive"),(0,_vendor.$)(this).attr("aria-selected",!0),self.map.olmap.updateSize()}).on("click",".tabs-title a[aria-selected=true]",function(ev){offCanvasLeft.toggleClass("reveal-responsive"),self.map.olmap.updateSize()}),(0,_vendor.$)("#side-pane-close").on("click",function(ev){offCanvasLeft.removeClass("reveal-responsive"),(0,_vendor.$)("#menu-tabs").find(".tabs-title a[aria-selected=true]").attr("aria-selected",!1),self.map.olmap.updateSize()}),self.fixedLayers=self.fixedLayers.concat([{type:"TimelineLayer",name:"Himawari-8 Hotspots",id:"himawari8:hotspots",params:{FORMAT:"image/png"},timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return self.env.gokartService+"/hi8/AHI_TKY_FHS?updatetime="+lastUpdatetime},setTimeIndex:function(layer,tileLayer,previousTimeline,defaultFunc){var timeIndex=null;if(previousTimeline&&previousTimeline.length>1&&tileLayer.get("timeIndex")&&tileLayer.get("timeIndex")<previousTimeline.length&&tileLayer.get("timeIndex")>=1&&(timeIndex=tileLayer.get("timeIndex")),null==timeIndex||timeIndex==previousTimeline.length-1){var newTimeIndex=layer.timeline.length-1;previousTimeline&&previousTimeline[timeIndex][0]===layer.timeline[newTimeIndex][0]?tileLayer.set("timeIndex",layer.timeline.length-1,!0):tileLayer.set("timeIndex",layer.timeline.length-1)}else{var newTimeIndex=layer.timeline.findIndex(function(o){return o[0]===previousTimeline[timeIndex][0]});newTimeIndex>=0?tileLayer.set("timeIndex",newTimeIndex,!0):defaultFunc(layer,tileLayer,previousTimeline)}}},{type:"TimelineLayer",name:"Himawari-8 True Colour",id:"himawari8:bandtc",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return self.env.gokartService+"/hi8/AHI_TKY_b321?updatetime="+lastUpdatetime},setTimeIndex:function(layer,tileLayer,previousTimeline,defaultFunc){var timeIndex=null;if(previousTimeline&&previousTimeline.length>1&&tileLayer.get("timeIndex")&&tileLayer.get("timeIndex")<previousTimeline.length&&tileLayer.get("timeIndex")>=1&&(timeIndex=tileLayer.get("timeIndex")),null==timeIndex||timeIndex==previousTimeline.length-1){var newTimeIndex=layer.timeline.length-1;previousTimeline&&previousTimeline[timeIndex][0]===layer.timeline[newTimeIndex][0]?tileLayer.set("timeIndex",layer.timeline.length-1,!0):tileLayer.set("timeIndex",layer.timeline.length-1)}else{var newTimeIndex=layer.timeline.findIndex(function(o){return o[0]===previousTimeline[timeIndex][0]});newTimeIndex>=0?tileLayer.set("timeIndex",newTimeIndex,!0):defaultFunc(layer,tileLayer,previousTimeline)}}},{type:"TimelineLayer",name:"Himawari-8 Band 7",id:"himawari8:band7",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return self.env.gokartService+"/hi8/AHI_TKY_b7?updatetime="+lastUpdatetime},setTimeIndex:function(layer,tileLayer,previousTimeline,defaultFunc){var timeIndex=null;if(previousTimeline&&previousTimeline.length>1&&tileLayer.get("timeIndex")&&tileLayer.get("timeIndex")<previousTimeline.length&&tileLayer.get("timeIndex")>=1&&(timeIndex=tileLayer.get("timeIndex")),null==timeIndex||timeIndex==previousTimeline.length-1){var newTimeIndex=layer.timeline.length-1;previousTimeline&&previousTimeline[timeIndex][0]===layer.timeline[newTimeIndex][0]?tileLayer.set("timeIndex",layer.timeline.length-1,!0):tileLayer.set("timeIndex",layer.timeline.length-1)}else{var newTimeIndex=layer.timeline.findIndex(function(o){return o[0]===previousTimeline[timeIndex][0]});newTimeIndex>=0?tileLayer.set("timeIndex",newTimeIndex,!0):defaultFunc(layer,tileLayer,previousTimeline)}}},{type:"TileLayer",name:"Forest Fire Danger Index",id:"bom:forest_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/IDZ71117?basetimelayer=bom:IDZ71117_datetime&timelinesize=72&layertimespan=3600&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Maximum Forest Fire Danger Index",id:"bom:maximum_forest_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/IDZ71118?basetimelayer=bom:IDZ71118_datetime&timelinesize=4&layertimespan=86400&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Grassland Fire Danger Index",id:"bom:grass_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/IDZ71122?basetimelayer=bom:IDZ71122_datetime&timelinesize=72&layertimespan=3600&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Maximum Grassland Fire Danger Index",id:"bom:maximum_grass_fire_danger_index",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/IDZ71123?basetimelayer=bom:IDZ71123_datetime&timelinesize=4&layertimespan=86400&updatetime="+lastUpdatetime}},{type:"TileLayer",name:"Continuous Haines",id:"bom:continuous_haines",timelineRefresh:300,fetchTimelineUrl:function(lastUpdatetime){return"/bom/IDZ71115?basetimelayer=bom:IDZ71115_datetime&timelinesize=56&layertimespan=10800&updatetime="+lastUpdatetime}}]),[{name:"Fire Boundary",icon:"dist/static/images/iD-sprite.svg#icon-area",style:self.annotations.getVectorStyleFunc(self.tints),selectedFillColour:[0,0,0,.25],fillColour:[0,0,0,.25],size:2,interactions:[self.annotations.polygonDrawFactory()],scope:["annotation"],showName:!0,measureLength:!0,measureArea:!0,comments:[{name:"Tips",description:["Draw a fire boundary on map ","Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},self.annotations.ui.defaultText,{name:"Division",icon:"dist/static/symbols/fire/division.svg",tints:self.tints,perpendicular:!0,interactions:[self.annotations.pointDrawFactory(),self.annotations.snapToLineFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedDivision",scope:["annotation"],showName:!0,comments:[{name:"Tips",description:["Place a 'Division' in map."]}]},{name:"Sector",icon:"dist/static/symbols/fire/sector.svg",tints:self.tints,perpendicular:!0,interactions:[self.annotations.pointDrawFactory(),self.annotations.snapToLineFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedDivision",scope:["annotation"],showName:!0,comments:[{name:"Tips",description:["Place a 'Sector' in map."]}]},{name:"Origin Point",icon:"dist/static/symbols/fire/origin.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedPoint",scope:["annotation"],showName:!0,comments:[{name:"Tips",description:["Place a 'Origin Point' in map."]}]},{name:"Spot Fire",icon:"dist/static/symbols/fire/spotfire.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),selectedTint:"selectedPoint",scope:["annotation"],showName:!0,comments:[{name:"Tips",description:["Place a 'Spot Fire' in map."]}]},{name:"Road Closure",icon:"dist/static/symbols/fire/road_closure_point.svg",tints:self.tints,interactions:[self.annotations.pointDrawFactory()],style:self.annotations.getIconStyleFunction(self.tints),sketchStyle:self.annotations.getIconStyleFunction(self.tints),showName:!0,selectedTint:"selectedRoadClosurePoint",scope:["annotation"],comments:[{name:"Tips",description:["Draw a 'Road Closure' on map ","Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},{name:"Control Line",icon:"dist/static/symbols/fire/controlline.svg",interactions:[self.annotations.linestringDrawFactory()],size:1,typeIcon:"dist/static/symbols/fire/plus.svg",typeIconSelectedTint:"selectedPlusIcon",typeIconDims:[20,20],colour:"rgba(0, 0, 0, 0.1)",showName:!0,scope:["annotation"],style:self.annotations.getVectorStyleFunc(this.tints),comments:[{name:"Tips",description:["Draw a 'Control Line' on map ","Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},self.annotations.ui.defaultLine,self.annotations.ui.defaultPolygon,self.annotations.ui.defaultPoint].forEach(function(tool){self.annotations.tools.push(tool)}),self.loading.app.phaseEnd("initialize"),self.loading.app.phaseBegin("init_olmap",10,"Initialize olmap"),self.map.init(),self.loading.app.phaseEnd("init_olmap"),self.loading.app.phaseBegin("load_catalogue",20,"Load catalogue",!0,!0);try{self.catalogue.loadRemoteCatalogue(function(){var failed_phase=null;try{
self.loading.app.phaseEnd("load_catalogue"),self.loading.app.phaseBegin("init_map_layers",10,"Initialize map layers"),failed_phase="init_map_layers",self.map.initLayers(self.fixedLayers,self.store.activeLayers),self.loading.app.phaseEnd("init_map_layers"),self.loading.app.phaseBegin("gk-init",15,"Broadcast 'go-init' event"),failed_phase="gk-init",self.$broadcast("gk-init"),self.loading.app.phaseEnd("gk-init"),self.loading.app.phaseBegin("gk-postinit",15,"Broadcast 'go-init' event"),failed_phase="gk-postinit",self.$broadcast("gk-postinit"),self.loading.app.phaseEnd("gk-postinit"),self.loading.app.phaseBegin("post_init",10,"Post initialization"),failed_phase="post-init",self.store.layout.screenHeight=(0,_vendor.$)(window).height(),self.store.layout.screenWidth=(0,_vendor.$)(window).width(),(0,_vendor.$)(window).resize(debounce(function(){(0,_vendor.$)(window).height()!==self.store.layout.screenHeight&&(self.store.layout.screenHeight=(0,_vendor.$)(window).height()),(0,_vendor.$)(window).width()!==self.store.layout.screenWidth&&(self.store.layout.screenWidth=(0,_vendor.$)(window).width())},200)),(0,_vendor.$)("#menu-tab-layers-label").trigger("click"),self.store.activeMenu="layers",self.layers.setup(),(0,_vendor.$)("#layers-active-label").trigger("click"),self.store.activeSubmenu="active",self.active.setup(),self.loading.app.phaseEnd("post_init")}catch(err){throw self.loading.app.phaseFailed(failed_phase,err),err}self.store.settings.tourVersion!==_sssTour2.default.version&&self.takeTour()},function(reason){self.loading.app.phaseEnd("load_catalogue"),alert(reason)})}catch(err){throw self.loading.app.failed(err),err}}})}))}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./gokart-listener.js":144,"./sss-profile.js":145,"./sss-tour.js":146,"./sss.vue":148,"babel-runtime/core-js/json/stringify":30,"src/vendor.js":"src/vendor.js"}],148:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _map=require("../components/map.vue"),_map2=_interopRequireDefault(_map),_layers=require("../components/layers.vue"),_layers2=_interopRequireDefault(_layers),_annotations=require("../components/annotations.vue"),_annotations2=_interopRequireDefault(_annotations),_tracking=require("../components/sss/tracking.vue"),_tracking2=_interopRequireDefault(_tracking),_thermal=require("../components/sss/thermal.vue"),_thermal2=_interopRequireDefault(_thermal),_loading=require("../components/loading.vue"),_loading2=_interopRequireDefault(_loading),_settings=require("../components/settings.vue"),_settings2=_interopRequireDefault(_settings),_bfrs=require("../components/sss/bfrs.vue"),_bfrs2=_interopRequireDefault(_bfrs),_dialog=require("../components/dialog.vue"),_dialog2=_interopRequireDefault(_dialog);require("src/vendor.js");exports.default={store:{activeMenu:"activeMenu",activeSubmenu:"activeSubmenu",hints:"hints"},data:function(){return{}},computed:{layers:function(){return this.$root.layers},info:function(){return this.$root.info},systemsetting:function(){return this.$root.systemsetting},settings:function(){return this.$root.settings}},components:{gkMap:_map2.default,gkLayers:_layers2.default,gkAnnotations:_annotations2.default,gkTracking:_tracking2.default,gkThermal:_thermal2.default,gkLoading:_loading2.default,gkSettings:_settings2.default,gkBfrs:_bfrs2.default,gkDialog:_dialog2.default},methods:{switchMenu:function(menu){this.activeMenu!==menu&&(this.activeMenu||menu)&&(this.activeMenu&&this.$root[this.activeMenu].teardown&&this.$root[this.activeMenu].teardown(),this.activeMenu=menu||null,this.activeSubmenu=null,this.activeMenu&&this.$root[this.activeMenu].setup&&this.$root[this.activeMenu].setup(),["layers","settings"].indexOf(menu)<0&&(this.activeSubmenu=null),this.$root.menuChanged())}},ready:function(){var vm=this;$("#menu-tabs").on("change.zf.tabs",function(target,selectedTab){var menu=selectedTab.attr("menu");vm.info.hoverable.splice(0,vm.info.hoverable.length),vm.switchMenu(menu)})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n    <gk-loading v-ref:loading="" application="SSS"></gk-loading>\n    <div class="off-canvas-wrapper">\n        <div class="off-canvas-wrapper-inner" data-off-canvas-wrapper="">\n            <div class="off-canvas position-left" id="offCanvasLeft" data-off-canvas="">\n                <a id="side-pane-close" class="button alert hide-for-medium">â</a>\n                <div class="tabs-content vertical" data-tabs-content="menu-tabs">\n                    <gk-settings v-ref:settings=""></gk-settings>\n                    <gk-layers v-ref:layers=""></gk-layers>\n                    <gk-annotations v-ref:annotations=""></gk-annotations>\n                    <gk-tracking v-ref:tracking=""></gk-tracking>\n\t\t\t\t\t<gk-thermal v-ref:thermal=""></gk-thermal>\n                    <gk-bfrs v-ref:bfrs=""></gk-bfrs>\n                    <gk-dialog v-ref:dialog=""></gk-dialog>\n                </div>\n                <div class="tool-slice row collapse" style="width:100%; margin-top:-32px" v-if="$root.hasHints">\n                  <div v-if="$root.isShowHints" id="hints">\n                      <hr class="small-12" style="margin-bottom:0; margin-top:0">\n                      <template v-for="hint in hints">\n                          <div class="small-12">{{hint.name}}:</div>\n                          <div class="small-12">\n                            <ul style="margin-bottom:0px">\n                            <template v-for="description in hint.description">\n                                <li>{{description}}</li>\n                            </template>\n                            </ul>\n                          </div>\n                      </template>\n                  </div>\n                  <div class="small-12 " style="text-align:right;">\n                      <img src="dist/static/images/question-mark.png" style="height:32px;width:32px" @click="systemsetting.toggleShowHints()">\n                  </div>\n                </div>\n            </div>\n            <div class="off-canvas-content" data-off-canvas-content="">\n                <ul class="tabs vertical map-widget" id="menu-tabs" data-tabs="">\n                    <li class="tabs-title side-button is-active" menu="layers">\n                        <a href="#menu-tab-layers" title="Map Layers">\n                            <svg class="icon">\n                                <use xlink:href="dist/static/images/iD-sprite.svg#icon-layers"></use>\n                            </svg>\n                        </a>\n                    </li>\n                    <li class="tabs-title side-button" menu="annotations">\n                        <a href="#menu-tab-annotations" title="Drawing Tools">\n                            <i class="fa fa-pencil" aria-hidden="true"></i>\n                        </a>\n                    </li>\n                    <li class="tabs-title side-button" menu="tracking">\n                        <a href="#menu-tab-tracking" title="Resources Tracking">\n                            <i class="fa fa-truck" aria-hidden="true"></i>\n                        </a>\n                    </li>\n\t\t\t\t\t<li class="tabs-title side-button" menu="thermal">\n                        <a href="#menu-tab-thermal" title="Thermal Imaging">\n                            <i class="fa fa-plane" aria-hidden="true"></i>\n                        </a>\n                    </li>\n                    <li class="tabs-title side-button" menu="bfrs">\n                        <a href="#menu-tab-bfrs" title="Bushfire Report System">\n                            <i class="fa fa-fire" aria-hidden="true"></i>\n                        </a>\n                    </li>\n                    <li class="tabs-title side-button" menu="settings">\n                        <a href="#menu-tab-settings" title="System Settings">\n                            <i class="fa fa-cog" aria-hidden="true"></i>\n                        </a>\n                    </li>\n                </ul>\n                <gk-map v-ref:map=""></gk-map>\n            </div>\n        </div>\n    </div>\n    <div id="external-controls"></div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-079ccc96",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-079ccc96",module.exports))}()},{"../components/annotations.vue":149,"../components/dialog.vue":150,"../components/layers.vue":154,"../components/loading.vue":160,"../components/map.vue":161,"../components/settings.vue":165,"../components/sss/bfrs.vue":166,"../components/sss/thermal.vue":167,"../components/sss/tracking.vue":168,"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141}],149:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.notecontent {\n  width: 100%;\n  height: 100px;\n  resize: both;\n  background-image: url('dist/static/images/boxresize.svg');\n  background-repeat: no-repeat;\n  background-position: right bottom;\n}\n.canvaspane {\n  overflow: hidden;\n  width: 100px;\n  height: 40vh;\n}\n.row.resetmargin {\n  margin: 0px;\n}\n.resetmargin .small-6.rightmargin {\n  margin-right: 1px;\n}\n.resetmargin .small-6 {\n  margin-right: -1px;\n  padding-right: 1px;\n}\n.resetmargin .expanded.button {\n  margin-bottom: 2px;\n}\n.fa.red {\n  color: #b43232;\n}\n.pointshape {\n  padding-left:5px;\n  padding-right:5px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_drawinglogs=require("./drawinglogs.vue"),_drawinglogs2=function(obj){return obj&&obj.__esModule?obj:{default:obj}}(_drawinglogs),noteStyles={general:function(note){var textTmpl={fontSize:"16px",fontFamily:'"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif',text:note.text,x:10,y:10,align:"left",fromCenter:!1};return[["drawText",_vendor.$.extend({layer:!0,name:"decorationLayer",strokeWidth:3,strokeStyle:"rgba(255, 255, 255, 0.9)"},textTmpl)],["drawText",_vendor.$.extend({layer:!0,name:"textLayer",fillStyle:note.colour},textTmpl)]]}};exports.default={store:{dpmm:"dpmm",drawingSequence:"drawingSequence",whoami:"whoami",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu",hints:"hints",screenHeight:"layout.screenHeight",hintsHeight:"layout.hintsHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight"},components:{gkDrawinglogs:_drawinglogs2.default},data:function(){return{ui:{},tool:{},tools:[],annotationTools:[],features:new _vendor.ol.Collection,selectedFeatures:new _vendor.ol.Collection,selectable:[],featureOverlay:{},annotationsfile:"",note:{style:"general",text:"Sector: \nChannel: \nCommander: ",colour:"#000000"},notes:{},size:2,colour:"#000000",colours:[["red","#cc0000"],["orange","#f57900"],["yellow","#edd400"],["green","#73d216"],["blue","#3465a4"],["violet","#75507b"],["brown","#8f5902"],["grey","#555753"],["black","#000000"]],advanced:!1,tints:{},pointShapes:[["dist/static/symbols/points/circle.svg","Circle",[null,"#000000"]],["dist/static/symbols/points/square.svg","Square",[null,"#000000"]],["dist/static/symbols/points/triangle.svg","Triangle",[null,"#000000"]],["dist/static/symbols/points/star.svg","Star",[null,"#000000"]],["dist/static/symbols/points/plus.svg","Plus",[null,"#000000"]],["dist/static/symbols/points/minus.svg","Minus",[null,"#000000"]],["dist/static/symbols/points/Fire_Advice.svg","FireAdvice",["#000000","#000000"]]],shape:null,toolRevision:1}},computed:{map:function(){return this.$root.$refs.app.$refs.map},export:function(){return this.$root.export},active:function(){return this.$root.active},utils:function(){return this.$root.utils},search:function(){return this.$root.search},measure:function(){return this.$root.measure},loading:function(){return this.$root.loading},drawinglogs:function(){return this.$refs.drawinglogs},activeModule:function(){return this.$root.activeModule},selectedAnnotations:function(){return this.getSelectedFeatures("annotations")},featureEditing:function(){return this.tool==this.ui.editStyle&&this.selectedAnnotations.getLength()>0?this.selectedAnnotations.item(0):null},shouldShowNoteEditor:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultText||this.tool===this.ui.editStyle&&this.featureEditing&&this.getTool(this.featureEditing.get("toolName"))===this.ui.defaultText)},shouldShowShapePicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultPoint||this.tool==this.ui.editStyle&&this.featureEditing&&this.getTool(this.featureEditing.get("toolName"))===this.ui.defaultPoint)},shouldShowSizePicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultLine||this.tool===this.ui.defaultPolygon||this.tool==this.ui.editStyle&&this.featureEditing&&[this.ui.defaultLine,this.ui.defaultPolygon].indexOf(this.getTool(this.featureEditing.get("toolName")))>=0)},shouldShowColourPicker:function(){return!(!this.tool||!this.tool.name)&&(this.tool===this.ui.defaultLine||this.tool===this.ui.defaultPolygon||this.tool==this.ui.defaultText||this.tool==this.ui.defaultPoint||this.tool===this.ui.editStyle&&this.featureEditing&&[this.ui.defaultLine,this.ui.defaultPolygon,this.ui.defaultPoint,this.ui.defaultText].indexOf(this.getTool(this.featureEditing.get("toolName")))>=0)},currentTool:{get:function(){var t=this._currentTool[this.activeModule];return t||(t=this.ui.defaultPan,this._currentTool[this.activeModule]=t),this.toolRevision&&t},set:function(t){this.toolRevision+=1,this._currentTool[this.activeModule]=t}}},watch:{featureEditing:function(val,oldVal){val&&val instanceof _vendor.ol.Feature&&val.get&&(val.get("note")?(this.note=val.get("note"),this.drawNote(this.note),this.colour=this.note.colour||this.colour):val.get("shape")?(this.shape=val.get("shape"),this.colour=val.get("colour")||this.colour):(this.size=val.get("size")||this.size,this.colour=val.get("colour")||this.colour)),this.adjustHeight()},tool:function(newValue,oldValue){this.adjustHeight()}},methods:{adjustHeight:function(){"annotations"===this.activeModule&&(0,_vendor.$)("#annotations-flexible-part").height(this.screenHeight-this.leftPanelHeadHeight-41-(0,_vendor.$)("#annotations-fixed-part").height()-this.hintsHeight)},getSelectedFeatures:function(menu,submenu){var key=submenu?menu+"."+submenu:menu,selectedFeatures=null;try{selectedFeatures=this._cachedSelectedFeatures[key]}catch(ex){}if(selectedFeatures)return selectedFeatures;var vm=this;return selectedFeatures=new _vendor.ol.Collection,this._cachedSelectedFeatures=this._cachedSelectedFeatures||{},this._cachedSelectedFeatures[key]=selectedFeatures,selectedFeatures.on("add",function(ev){vm.selectedFeatures===selectedFeatures&&vm.tintSelectedFeature(ev.element)}),selectedFeatures.on("remove",function(ev){vm.selectedFeatures===selectedFeatures&&vm.tintUnselectedFeature(ev.element)}),selectedFeatures},restoreSelectedFeatures:function(){var selectedFeatures=this.getSelectedFeatures(this.activeMenu,this.activeSubmenu);if(this.selectedFeatures!==selectedFeatures){var vm=this;this.selectedFeatures.forEach(function(feat){vm.tintUnselectedFeature(feat)}),this.selectedFeatures=selectedFeatures,this.selectedFeatures.forEach(function(feat){vm.tintSelectedFeature(feat)})}},importAnnotations:function(){if(0!==this.$els.annotationsfile.files.length){var vm=this,file=this.$els.annotationsfile.files[0];this.$els.annotationsfile.value=null,this.export.importVector(file,function(features,fileFormat){var ignoredFeatures=[],f=null;if("gpx"===fileFormat)for(var i=features.length-1;i>=0;i--)if(feature=features[i],feature.getGeometry()instanceof _vendor.ol.geom.Point)ignoredFeatures.push(feature),features.splice(i,1);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString){vm.map.clearFeatureProperties(feature);var coordinates=feature.getGeometry().getCoordinates();coordinates.push(coordinates[0]),feature.setGeometry(new _vendor.ol.geom.Polygon([coordinates])),feature.set("toolName","Fire Boundary")}else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString){vm.map.clearFeatureProperties(feature),features.splice(i,1);var geom=feature.getGeometry(),coordinates=null;_vendor.$.each(geom.getLineStrings(),function(index,linestring){f=feature.clone(),coordinates=linestring.getCoordinates(),coordinates.push(coordinates[0]),f.setGeometry(new _vendor.ol.geom.Polygon([coordinates])),f.set("toolName","Fire Boundary"),features.splice(i,0,f)})}else ignoredFeatures.push(feature),features.splice(i,1);else for(var i=features.length-1;i>=0;i--)if(feature=features[i],!vm.getTool(feature.get("toolName")))if(feature.getGeometry()instanceof _vendor.ol.geom.Point)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Point",!0),feature.set("shape",vm.annotations.pointShapes[0][1],!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Line",!0),feature.set("size",2,!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.Polygon)vm.map.clearFeatureProperties(feature),feature.set("toolName","Custom Area",!0),feature.set("size",2,!0),feature.set("colour","#000000",!0);else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiPoint||feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString||feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon||feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection){features.splice(i,1);var geometries=null;feature.getGeometry()instanceof _vendor.ol.geom.MultiPoint?geometries=feature.getGeometry().getPoints():feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString?geometries=feature.getGeometry().getLineStrings():feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon?geometries=feature.getGeometry().getPolygons():feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection&&(geometries=feature.getGeometry().getGeometries()),_vendor.$.each(geometries,function(index,geometry){f=new _vendor.ol.Feature({geometry:geometry}),features.splice(i,0,f),i+=1})}else ignoredFeatures.push(feature),features.splice(i,1);ignoredFeatures.length&&console.warn("The following features are ignored.\r\n"+vm.$root.geojson.writeFeatures(features)),features&&features.length>0&&(_vendor.$.each(features,function(index,feature){vm.drawingSequence+=1,feature.set("id",vm.drawingSequence),vm.initFeature(feature)}),vm.features.extend(features))})}},downloadAnnotations:function(fmt){this.$root.export.exportVector(this.features.getArray(),"annotations",fmt)},getPerpendicular:function(coords){var nearestFeature=gokart.annotations.featureOverlay.getSource().getClosestFeatureToCoordinate(coords,function(feat){var geom=feat.getGeometry();return geom instanceof _vendor.ol.geom.Polygon||geom instanceof _vendor.ol.geom.LineString});if(!nearestFeature)return 0;var segments=[],source=[],segLength=0;nearestFeature.getGeometry()instanceof _vendor.ol.geom.Polygon?(source=nearestFeature.getGeometry().getCoordinates()[0],segLength=source.length):(source=nearestFeature.getGeometry().getCoordinates(),segLength=source.length-1);for(var i=0;i<segLength;i++)segments.push([source[i],source[(i+1)%source.length]]);segments.sort(function(a,b){return _vendor.ol.coordinate.squaredDistanceToSegment(coords,a)-_vendor.ol.coordinate.squaredDistanceToSegment(coords,b)});var offset=[segments[0][1][0]-segments[0][0][0],segments[0][1][1]-segments[0][0][1]];return Math.atan2(-offset[1],offset[0])},snapToLineFactory:function(options){var inter=new _vendor.ol.interaction.Snap({features:options&&options.features||this.features,edge:!options||void 0===options.edge||options.edge,vertex:!(!options||void 0==options.vertex)&&options.vertex,pixelTolerance:options&&options.pixelTolerance||16});return inter.on("addtomap",function(ev){this.setActive(!0)}),inter},linestringDrawFactory:function(options){var vm=this;return function(tool){var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"LineString",features:tool&&tool.features||vm.features},options&&options.drawOptions||{}));return draw.on("drawend",function(ev){vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now())}),draw.on("addtomap",function(ev){this.setActive(!0)}),draw.events=options&&options.events||{},draw}},polygonDrawFactory:function(options){var vm=this;return function(tool){var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"Polygon",features:tool&&tool.features||vm.features},options&&options.drawOptions||{}));if(options&&options.drawProperties)for(key in options.drawProperties)draw.set(key,options.drawProperties[key],!0);return draw.drawing=!1,draw.on("addtomap",function(ev){this.setActive(!0),this.drawing=!1}),draw.on("drawstart",function(ev){this.drawing=!0,options&&options.listeners&&options.listeners.drawstart&&options.listeners.drawstart(ev)}),draw.on("drawend",function(ev){vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now()),this.drawing=!1,options&&options.listeners&&options.listeners.drawend&&options.listeners.drawend(ev)}),draw.events=options&&options.events||{},draw}},pointDrawFactory:function(options){var vm=this;return function(tool){var sketchStyle=void 0;if(tool&&tool.sketchStyle){var defaultFeat=new _vendor.ol.Feature(_vendor.$.extend({toolName:tool.name},options||{}));sketchStyle=function(res){return tool.sketchStyle.apply(defaultFeat,res)}}var draw=new _vendor.ol.interaction.Draw(_vendor.$.extend({type:"Point",features:options&&options.features||tool&&tool.features||vm.features,style:sketchStyle},options&&options.drawOptions||{}));return draw.on("addtomap",function(ev){this.setActive(!0)}),draw.on("drawend",function(ev){if(vm.drawingSequence+=1,ev.feature.set("id",vm.drawingSequence),ev.feature.set("toolName",tool.name),ev.feature.setStyle(tool.style),ev.feature.set("author",vm.whoami.email),ev.feature.set("createTime",Date.now()),tool.perpendicular){var coords=ev.feature.getGeometry().getCoordinates();ev.feature.set("rotation",vm.getPerpendicular(coords))}}),draw.events=options&&options.events||{},draw}},translateInterFactory:function(options){var vm=this;return function(tool){var translateInter=new _vendor.ol.interaction.Translate({layers:tool&&tool.mapLayers||[vm.featureOverlay],features:tool&&tool.selectedFeatures||vm.selectedAnnotations});return translateInter.handleEvent=function(){var _func=translateInter.handleEvent;return function(ev){return!((!vm._toolStatus.selectTool||vm._toolStatus.selectTool===this)&&_vendor.ol.events.condition.noModifierKeys(ev))||_func.call(this,ev)}}(),translateInter.on("addtomap",function(ev){this.setActive(!0)}),translateInter.on("translating",function(ev){vm._toolStatus.selectTool=this}),translateInter.on("translateend",function(ev){vm._toolStatus.selectTool=null,ev.features.forEach(function(f){f.get("toolName")&&(tool=vm.getTool(f.get("toolName")))&&tool.typeIcon&&(delete f.typeIconStyle,delete f.typeIconMetadata,f.changed())});var rotateAll=!1;_vendor.$.each(ev.features.getArray(),function(index,f){if(f.getGeometry()instanceof _vendor.ol.geom.LineString||f.getGeometry()instanceof _vendor.ol.geom.Polygon)return rotateAll=!0,!1}),rotateAll?vm._rotateAll():_vendor.$.each(ev.features.getArray(),function(index,f){tool=vm.getTool(f.get("toolName")),tool.perpendicular&&f.set("rotation",vm.getPerpendicular(f.getGeometry().getCoordinates()))})}),translateInter}},polygonSelectInterFactory:function(options){var vm=this;return vm._features4Selection||(vm._features4Selection=new _vendor.ol.Collection,vm._listener4Selection=null,vm._source4Selection=new _vendor.ol.source.Vector({features:vm._features4Selection}),vm._style4Selection=new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:"rgba(0,0,0, 0.25)"}),stroke:new _vendor.ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[5,5],width:2})}),vm._overlay4Selection=new _vendor.ol.layer.Vector({source:vm._source4Selection,style:vm._style4Selection}),vm._isGeometryInPolygon=function(geometry,turfPolygon){var isSelected=!1;if(geometry instanceof _vendor.ol.geom.GeometryCollection)_vendor.$.each(geometry.getGeometries(),function(index,geom){if(vm._isGeometryInPolygon(geom,turfPolygon))return isSelected=!0,!1});else if(geometry instanceof _vendor.ol.geom.MultiPolygon)_vendor.$.each(geometry.getPolygons(),function(index,geom){if(vm._isGeometryInPolygon(geom,turfPolygon))return isSelected=!0,!1});else if(geometry instanceof _vendor.ol.geom.MultiLineString)_vendor.$.each(geometry.getLineStrings(),function(index,geom){if(vm._isGeometryInPolygon(geom,turfPolygon))return isSelected=!0,!1});else if(geometry instanceof _vendor.ol.geom.MultiPoint)_vendor.$.each(geometry.getPoints(),function(index,geom){if(vm._isGeometryInPolygon(geom,turfPolygon))return isSelected=!0,!1});else if(geometry instanceof _vendor.ol.geom.Polygon)isSelected=_vendor.turf.intersect(_vendor.turf.polygon(geometry.getCoordinates()),turfPolygon);else if(geometry instanceof _vendor.ol.geom.LineString)isSelected=_vendor.turf.lineIntersect(_vendor.turf.lineString(geometry.getCoordinates()),turfPolygon);else{if(!(geometry instanceof _vendor.ol.geom.Point))throw"Geometry not supported.";isSelected=_vendor.turf.inside(_vendor.turf.point(geometry.getCoordinates()),turfPolygon)}return isSelected}),function(tool){var selectedFeatures_=tool&&tool.selectedFeatures||null,drawInter=new _vendor.ol.interaction.Draw({source:vm._source4Selection,type:"Polygon",style:vm._style4Selection,stopClick:!0,minPoints:3,freehandCondition:function(mapBrowserEvent){var originalEvent=mapBrowserEvent.originalEvent;return(!vm._toolStatus.selectTool||vm._toolStatus.selectTool===this)&&!originalEvent.altKey&&(_vendor.ol.has.MAC?originalEvent.metaKey:originalEvent.ctrlKey)&&originalEvent.shiftKey},condition:_vendor.ol.events.condition.platformModifierKeyOnly});return drawInter.startDrawing_=function(){var _func=drawInter.startDrawing_;return function(event){vm._toolStatus.selectTool=this,_func.call(this,event)}}(),drawInter.abortDrawing_=function(){var _func=drawInter.abortDrawing_;return function(){var result=_func.call(this);return vm._toolStatus.selectTool=null,result}}(),drawInter.on("addtomap",function(ev){vm._overlay4Selection.setMap(vm.map.olmap),vm._listener4Selection&&vm._features4Selection.unByKey(vm._listener4Selection),vm._listener4Selection=vm._features4Selection.on("add",function(ev){var selectedFeatures=selectedFeatures_||vm.selectedFeatures;try{var extent=ev.element.getGeometry().getExtent(),turfPolygon=_vendor.turf.polygon(ev.element.getGeometry().getCoordinates()),multi=void 0==this.multi_||this.multi_;selectedFeatures.clear(),_vendor.$.each(vm.selectable,function(index,layer){if(!multi&&selectedFeatures.getLength()>0)return!1;layer==vm.featureOverlay?(layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){if(!multi&&selectedFeatures.getLength()>0)return!0;if(!feature.get("note")){if(!vm._isGeometryInPolygon(feature.getGeometry(),turfPolygon))return;return selectedFeatures.push(feature),!multi}}),_vendor.$.each(vm.features.getArray(),function(index2,feature){return!(!multi&&selectedFeatures.getLength()>0)&&(feature.get("note")&&ev.element.getGeometry().intersectsExtent(vm.getNoteExtent(feature))?(selectedFeatures.push(feature),multi):void 0)})):layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){if(!multi&&selectedFeatures.getLength()>0)return!0;if(vm._isGeometryInPolygon(feature.getGeometry(),turfPolygon))return selectedFeatures.push(feature),!multi})}),options&&options.listeners&&options.listeners.selected&&options.listeners.selected(selectedFeatures),setTimeout(function(){vm._features4Selection.clear()},100)}catch(ex){setTimeout(function(){vm._features4Selection.clear()},10)}}),this.setActive(!0)}),drawInter.on("removefrommap",function(ev){vm._overlay4Selection.setMap(null),vm._listener4Selection&&vm._features4Selection.unByKey(vm._listener4Selection)}),drawInter.setMulti=function(multi){this.multi_=multi},drawInter}},dragSelectInterFactory:function(options){var vm=this;return function(tool){var selectedFeatures_=tool&&tool.selectedFeatures||null,dragSelectInter=new _vendor.ol.interaction.DragBox({condition:function(ev){return(!vm._toolStatus.selectTool||vm._toolStatus.selectTool===this)&&_vendor.ol.events.condition.noModifierKeys(ev)},boxEndCondition:function(mapBrowserEvent,startPixel,endPixel){return vm._toolStatus.selectTool===this&&(vm._toolStatus.selectTool=null),_vendor.ol.interaction.DragBox.defaultBoxEndCondition.call(this,mapBrowserEvent,startPixel,endPixel)}});return dragSelectInter.on("addtomap",function(ev){this.setActive(!0)}),dragSelectInter.on("boxend",function(event){selectedFeatures=selectedFeatures_||vm.selectedFeatures,selectedFeatures.clear();var extent=event.target.getGeometry().getExtent(),multi=void 0==this.multi_||this.multi_;_vendor.$.each(vm.selectable,function(index,layer){if(!multi&&selectedFeatures.getLength()>0)return!1;layer==vm.featureOverlay?(layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){return!multi&&selectedFeatures.getLength()>0||(feature.get("note")?void 0:(selectedFeatures.push(feature),!multi))}),_vendor.$.each(vm.features.getArray(),function(index2,feature){return!(!multi&&selectedFeatures.getLength()>0)&&(feature.get("note")&&_vendor.ol.extent.intersects(extent,vm.getNoteExtent(feature))?(selectedFeatures.push(feature),multi):void 0)})):layer.getSource().forEachFeatureIntersectingExtent(extent,function(feature){return!multi&&selectedFeatures.getLength()>0||(selectedFeatures.push(feature),!multi)})}),options&&options.listeners&&options.listeners.selected&&options.listeners.selected(selectedFeatures)}),dragSelectInter.on("boxdrag",function(){vm._toolStatus.selectTool=this}),dragSelectInter.setMulti=function(multi){this.multi_=multi},dragSelectInter}},isGeometrySelected:function(geom,mapBrowserEvent){if(geom instanceof _vendor.ol.geom.Point){var geomPosition=this.map.olmap.getPixelFromCoordinate(geom.getCoordinates()),position=mapBrowserEvent.pixel;return Math.abs(position[0]-geomPosition[0])<=12&&Math.abs(position[1]-geomPosition[1])<=12}return geom.intersectsCoordinate(mapBrowserEvent.coordinate)},getSelectedGeometry:function(f,indexes,end){if(indexes=indexes||f.selectedIndex){if((end=null===end||void 0===end?indexes.length-1:end)>=indexes.length)return null;if(end<0)return f.getGeometry();var geom=f.getGeometry();for(i=0;i<=end;i++)if(geom instanceof _vendor.ol.geom.GeometryCollection){if(!(indexes[i]<geom.getGeometriesArray().length))return null;geom=geom.getGeometriesArray()[indexes[i]]}else if(geom instanceof _vendor.ol.geom.MultiPolygon){if(!(indexes[i]<geom.getPolygons().length))return null;geom=geom.getPolygon(indexes[i])}else if(geom instanceof _vendor.ol.geom.MultiPoint){if(!(indexes[i]<geom.getPoints().length))return null;geom=geom.getPoint(indexes[i])}else{if(!(geom instanceof _vendor.ol.geom.MultiLineString))return null;if(!(indexes[i]<geom.getLineStrings().length))return null;geom=geom.getLineString(indexes[i])}return geom}return null},deleteSelectedGeometry:function(f,interaction){var indexes=f.selectedIndex;if(indexes){var geom=this.getSelectedGeometry(f,indexes,indexes.length-2);if(geom){var deleteIndex=indexes[indexes.length-1]
;if(geom instanceof _vendor.ol.geom.GeometryCollection)deleteIndex<geom.getGeometriesArray().length&&(geom.getGeometriesArray().splice(deleteIndex,1),geom.setGeometriesArray(geom.getGeometriesArray()),delete f.selectedIndex,interaction.dispatchEvent(this.map.createEvent(interaction,"deletefeaturegeometry",{feature:f,indexes:indexes})),f.getGeometry().changed());else if(geom instanceof _vendor.ol.geom.MultiPolygon||geom instanceof _vendor.ol.geom.MultiPoint||geom instanceof _vendor.ol.geom.MultiLineString){var coordinates=geom.getCoordinates();if(!(deleteIndex<coordinates.length))return null;coordinates.splice(deleteIndex,1),geom.setCoordinates(coordinates),delete f.selectedIndex,interaction.dispatchEvent(this.map.createEvent(interaction,"deletefeaturegeometry",{feature:f,indexes:indexes})),f.getGeometry().changed()}}}},getSelectedGeometryIndex:function(geom,mapBrowserEvent){var vm=this,indexes=null;if(geom instanceof _vendor.ol.geom.GeometryCollection)_vendor.$.each(geom.getGeometriesArray(),function(index,g){if(g instanceof _vendor.ol.geom.MultiPoint||g instanceof _vendor.ol.geom.MultiLineString||g instanceof _vendor.ol.geom.MultiPolygon||g instanceof _vendor.ol.geom.GeometryCollection){if(indexes=vm.getSelectedGeometryIndex(g,mapBrowserEvent))return indexes.splice(0,0,index),!1}else if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else if(geom instanceof _vendor.ol.geom.MultiPolygon)_vendor.$.each(geom.getPolygons(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else if(geom instanceof _vendor.ol.geom.MultiPoint)_vendor.$.each(geom.getPoints(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1});else{if(!(geom instanceof _vendor.ol.geom.MultiLineString))return!1;_vendor.$.each(geom.getLineStrings(),function(index,g){if(vm.isGeometrySelected(g,mapBrowserEvent))return indexes=[index],!1})}return indexes},selectInterFactory:function(options){var vm=this;return function(tool){var selectedFeatures=tool&&tool.selectedFeatures||vm.selectedAnnotations,selectInter=new _vendor.ol.interaction.Select({layers:function(layer){return vm.selectable.indexOf(layer)>-1},features:selectedFeatures,condition:options&&options.condition||function(ev){var originalEvent=ev.originalEvent;return!vm._toolStatus.selectTool&&_vendor.ol.events.condition.singleClick(ev)&&!originalEvent.altKey&&!(originalEvent.metaKey||originalEvent.ctrlKey)}});return selectInter.on("addtomap",function(ev){this.setActive(!0)}),selectInter.defaultHandleEvent=selectInter.defaultHandleEvent||selectInter.handleEvent,selectInter.handleEvent=function(event){if(!this.condition_(event))return vm.selecting=!1,this.defaultHandleEvent(event);try{vm.selecting=!0;var result=this.defaultHandleEvent(event);return tool&&"geometry"===tool.selectMode?selectedFeatures.forEach(function(f){var indexes=vm.getSelectedGeometryIndex(f.getGeometry(),event);indexes?f.selectedIndex=indexes:delete f.selectedIndex,f.changed()}):options&&options.listeners&&options.listeners.selected&&options.listeners.selected(selectedFeatures),result}finally{vm.selecting=!1}},selectInter.setMulti=function(multi){this.multi_=multi},selectInter}},keyboardInterFactory:function(options){var vm=this;return vm._deleteSelected=vm._deleteSelected||function(features,selectedFeatures){"feature"===vm.tool.selectMode?(selectedFeatures.forEach(function(feature){features.remove(feature)}),selectedFeatures.clear()):"geometry"===vm.tool.selectMode&&selectedFeatures.forEach(function(feature){vm.deleteSelectedGeometry(feature,this)})},function(tool){var keyboardInter=new _vendor.ol.interaction.Interaction({handleEvent:function(mapBrowserEvent){var stopEvent=!1;if(mapBrowserEvent.type===_vendor.ol.events.EventType.KEYDOWN){var keyEvent=mapBrowserEvent.originalEvent;switch(keyEvent.keyCode){case 65:options&&void 0!==options.selectEnabled&&!options.selectEnabled||keyEvent.ctrlKey&&(vm.selectAll(tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures),stopEvent=!0);break;case 46:options&&void 0!==options.deleteEnabled&&!options.deleteEnabled||(options&&options.deleteSelected?options.deleteSelected.call(keyboardInter,tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures):vm._deleteSelected.call(keyboardInter,tool&&tool.features||vm.features,tool&&tool.selectedFeatures||vm.selectedFeatures),stopEvent=!0)}}return stopEvent&&keyEvent.preventDefault(),!stopEvent}});return keyboardInter.on("addtomap",function(ev){this.setActive(!0)}),keyboardInter.events=options&&options.events||{},keyboardInter}},modifyInterFactory:function(options){var vm=this;return function(tool){var modifyInter=new _vendor.ol.interaction.Modify({features:tool&&tool.features||vm.features});return modifyInter.on("addtomap",function(ev){this.setActive(!0)}),modifyInter.on("modifystart",function(ev){ev.features.forEach(function(feature){feature.geometryRevision=feature.getGeometry().getRevision()})}),modifyInter.on("modifyend",function(ev){var modifiedFeatures=new _vendor.ol.Collection(ev.features.getArray().filter(function(feature){return feature.geometryRevision!=feature.getGeometry().getRevision()})),rotateAll=!1;_vendor.$.each(modifiedFeatures.getArray(),function(index,f){if(f.getGeometry()instanceof _vendor.ol.geom.LineString||f.getGeometry()instanceof _vendor.ol.geom.Polygon)return rotateAll=!0,!1}),rotateAll?vm._rotateAll():_vendor.$.each(modifiedFeatures.getArray(),function(index,f){tool=vm.getTool(f.get("toolName")),tool.perpendicular&&f.set("rotation",vm.getPerpendicular(f.getGeometry().getCoordinates()))}),modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",modifiedFeatures,ev))}),modifyInter.on("featuresmodified",function(ev){ev.features.forEach(function(f){f.get("toolName")&&(tool=vm.getTool(f.get("toolName")))&&tool.typeIcon&&(delete f.typeIconStyle,delete f.typeIconMetadata,f.changed())})}),modifyInter}},icon:function(t){var iconUrl=null;return iconUrl="function"==typeof t.icon?t.icon():t.icon,iconUrl.startsWith("fa-")?'<i class="fa '+iconUrl+'" aria-hidden="true"></i>':-1===iconUrl.search("#")?'<img class="icon" src="'+iconUrl+'" />':'<svg class="icon"><use xlink:href="'+iconUrl+'"></use></svg>'},getCustomPointTint:function(shape,colours){var tint=[];return _vendor.$.each(this._pointShapesMap[shape][2],function(index,srcColour){var targetColour=Array.isArray(colours)?colours[index]:colours;srcColour&&targetColour&&srcColour!==targetColour&&tint.push([srcColour,targetColour])}),tint},setProp:function(prop,value){this[prop]=value,this.featureEditing instanceof _vendor.ol.Feature&&!this.featureEditing.get("note")&&this.featureEditing.set(prop,value)},setDefaultTool:function(menu,tool){"string"==typeof tool&&(tool=this.getTool(tool)),this._currentTool[menu]=tool},getTool:function(toolName){return toolName?this.tools.filter(function(t){return t.name===toolName})[0]:null},setTool:function(t,keepSelection){var vm=this;if(keepSelection=keepSelection||!1,!t){if(!this.tool.scope||0===this.tool.scope.length)return;t=this.currentTool,keepSelection=!0}if("string"==typeof t&&(t=this.getTool(t)),this.tool===t)return void(this.tool.scope&&this.tool.scope.length>0&&(this.currentTool=t));this.tool.onUnset&&this.tool.onUnset();var map=this.map;this.tool&&this.tool.interactions&&this.tool.interactions.forEach(function(inter){map.olmap.removeInteraction(inter),inter.dispatchEvent(vm.map.createEvent(inter,"removefrommap"))}),t.interactions.forEach(function(inter){map.olmap.addInteraction(inter),inter.dispatchEvent(vm.map.createEvent(inter,"addtomap"))}),t.cursor&&"string"==typeof t.cursor?(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor",t.cursor):t.cursor&&Array.isArray(t.cursor)?_vendor.$.each(t.cursor,function(index,value){(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor",value)}):(0,_vendor.$)(map.olmap.getTargetElement()).find(".ol-viewport").css("cursor","default"),(keepSelection||t.keepSelection)&&t.selectMode!==this.tool.selectMode&&this.selectedFeatures.forEach(function(f){f.changed()}),this.tool=t,this.tool.scope&&this.tool.scope.length>0&&(this.currentTool=t),keepSelection||t.keepSelection||this.selectedFeatures.clear(),t.onSet&&t.onSet(this.tool),this.$root.setHints(t.comments)},selectAll:function(features,selectedFeatures){features=features||this.features,selectedFeatures=selectedFeatures||this.selectedFeatures;features.forEach(function(feature){feature in selectedFeatures||selectedFeatures.push(feature)})},updateNote:function(save){var note=null;if(this.tool===this.ui.editStyle){if(!this.featureEditing||!this.featureEditing.get("note"))return;note=this.featureEditing.get("note")}else note=this.note;var previousColour=note.colour;note.text=this.$els.notecontent.value,note.colour=this.colour,this.drawNote(note,save),!save&&previousColour===this.colour||this.tool!==this.ui.editStyle||this.featureEditing.set("noteRevision",(this.featureEditing.get("noteRevision")||0)+1)},drawNote:function(note,save){if(note){var vm=this,noteCanvas=this.$els.textpreview;if((0,_vendor.$)(noteCanvas).removeLayer("decorationLayer"),(0,_vendor.$)(noteCanvas).removeLayer("textLayer"),(0,_vendor.$)(noteCanvas).clearCanvas(),note.style&&note.style in noteStyles){(0,_vendor.$)(noteCanvas).attr("height",(0,_vendor.$)(this.$els.notecontent).height()+0),(0,_vendor.$)(noteCanvas).attr("width",(0,_vendor.$)(this.$els.notecontent).width()+0),noteStyles[note.style](note).forEach(function(cmd){(0,_vendor.$)(noteCanvas)[cmd[0]](cmd[1])});var annotationSize=(0,_vendor.$)(noteCanvas).measureText("decorationLayer");if(note.size=[annotationSize.width+0+10,annotationSize.height+10],(0,_vendor.$)(noteCanvas).attr("width",note.size[0]),(0,_vendor.$)(noteCanvas).attr("height",note.size[1]),(0,_vendor.$)(noteCanvas).drawLayers(),save){var key=JSON.stringify(note);this.notes[key]="",noteCanvas.toBlob(function(blob){vm.notes[key]=window.URL.createObjectURL(blob),vm.features.getArray().forEach(function(f){JSON.stringify(f.get("note"))===key&&f.changed()}),vm.drawNote(vm.note,!1)},"image/png")}}}},getNoteUrl:function(note){var key=JSON.stringify(note);return key in this.notes||this.drawNote(note,!0),this.notes[key]},setup:function(){var vm=this;this.restoreSelectedFeatures();var catalogue=this.$root.catalogue;this.map.getMapLayer("annotations")?this.active.isHidden(this.map.getMapLayer("annotations"))&&this.active.toggleHidden(this.map.getMapLayer("annotations")):catalogue.onLayerChange(catalogue.getLayer("annotations"),!0),this.selectable.push(this.featureOverlay),this.setTool(),this.search.setSearchPointFunc(function(searchMethod,coords,name){if(vm.tool&&["DMS","MGA"].indexOf(searchMethod)>=0&&["Origin Point","Spot Fire","Road Closure","Custom Point"].indexOf(vm.tool.name)>=0){var feat=null;return vm.map.olmap.forEachFeatureAtPixel(vm.map.olmap.getPixelFromCoordinate(coords),function(f){var toolName=f.get("toolName");if(toolName&&["Origin Point","Spot Fire","Road Closure","Custom Point"].indexOf(toolName)>=0&&f.getGeometry().getCoordinates()[0]===coords[0]&&f.getGeometry().getCoordinates()[1]===coords[1])return feat=f,!0}),feat?!1:(feat=new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coords)}),vm.drawingSequence+=1,feat.set("id",vm.drawingSequence),feat.set("toolName",vm.tool.name),feat.setStyle(vm.tool.style),feat.set("author",vm.whoami.email),feat.set("createTime",Date.now()),vm.tool.perpendicular&&feat.set("rotation",vm.getPerpendicular(coords)),vm.tool===vm.ui.defaultPoint&&(feat.set("shape",vm.shape,!0),feat.set("colour",vm.colour,!0)),vm.features.push(feat),!0)}})},teardown:function(){this.search.setSearchPointFunc(null),this.selectable.splice(0,this.selectable.length)},getNoteExtent:function(feature){var note=feature.get("note");if(!note)return null;var map=this.map.olmap,bottomLeftCoordinate=feature.getGeometry().getFirstCoordinate(),bottomLeftPosition=map.getPixelFromCoordinate(bottomLeftCoordinate),upRightCoordinate=map.getCoordinateFromPixel([bottomLeftPosition[0]+note.size[0],bottomLeftPosition[1]-note.size[1]]);return[bottomLeftCoordinate[0],bottomLeftCoordinate[1],upRightCoordinate[0],upRightCoordinate[1]]},tintSelectedFeature:function(feature){var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&tool.selectedTint?"function"==typeof tool.selectedTint?feature.tint=tool.selectedTint(feature):feature.tint=tool.selectedTint:feature.tint="selected",tool&&tool.typeIcon&&(feature.typeIconTint=tool.typeIconSelectedTint||"selected"),feature.changed()},tintUnselectedFeature:function(feature){delete feature.tint;var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&tool.typeIcon&&delete feature.typeIconTint,feature.changed()},getStyleProperty:function(f,property,defaultValue,tool){var result=f[property]||f.get(property)||(tool||this.getTool(f.get("toolName"))||{})[property]||(void 0===defaultValue?"default":defaultValue);return"function"==typeof result?result(f):result},getIconStyleFunction:function(tints){var vm=this;return function(res){var f=this;if(void 0===f.tint||""===f.tint)selectMode="none",keySuffix="none";else if("geometry"!==vm.tool.selectMode)selectMode="all",keySuffix="all";else{var selectedGeometry=vm.getSelectedGeometry(f);selectedGeometry&&selectedGeometry instanceof _vendor.ol.geom.Point?(selectMode="partial",keySuffix=f.get("tint")+":partial"):(selectMode="none",keySuffix=f.get("tint")+":none")}return vm.map.cacheStyle(function(f){var tint=null,style=null;try{("none"===selectMode&&f.tint||"partial"===selectMode)&&(tint=f.tint,delete f.tint);var src=vm.map.getBlob(f,["icon","tint"],tints||{});if(!src)return!1;var rot=f.get("rotation")||0;style=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})}finally{tint&&(f.tint=tint)}if("partial"===selectMode){var src=vm.map.getBlob(f,["icon","tint"],tints||{});if(!src)return!1;var rot=f.get("rotation")||0;style=[style,new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})]}return style},f,["icon","tint","rotation"],keySuffix)}},getLabelStyleFunc:function(tints,labelProperty){var vm=this;return labelProperty=labelProperty||"label",function(){var f=this,tool=null;tool=f.get("toolName")?vm.getTool(f.get("toolName"))||vm.tool:vm.tool;var strokeTint=vm.getStyleProperty(f,"tint","",tool)+".textStroke",fillTint=vm.getStyleProperty(f,"tint","",tool)+".textFill",labelStyle=tool.labelStyle||{};return new _vendor.ol.style.Style({text:new _vendor.ol.style.Text({offsetX:labelStyle.offsetX||12,text:f.get(labelProperty),textAlign:"left",font:labelStyle.font||"12px Helvetica,Roboto,Arial,sans-serif",fill:new _vendor.ol.style.Fill({color:tints[fillTint]||"#333"}),stroke:new _vendor.ol.style.Stroke({color:tints[strokeTint],width:labelStyle.strokeWidth||4})})})}},getVectorStyleFunc:function(tints){var vm=this;return function(){var f=this,tool=null;tool=f.get("toolName")?vm.getTool(f.get("toolName"))||vm.tool:vm.tool;if(void 0===f.tint||""===f.tint)selectMode="none";else if("geometry"!==vm.tool.selectMode)selectMode="all";else{var selectedGeometry=vm.getSelectedGeometry(f);selectedGeometry?selectedGeometry instanceof _vendor.ol.geom.Point?selectMode="none":selectMode="partial":selectMode="none"}var baseStyle=vm.map.cacheStyle(function(f){return"partial"===selectMode?[new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"fillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"colour","rgba(0,0,0,1.0)",tool),width:2*vm.getStyleProperty(f,"size",1,tool)})}),new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"selectedFillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"selectedColour","#2199e8",tool),width:2*vm.getStyleProperty(f,"size",1,tool)+2})}),new _vendor.ol.style.Style({geometry:function(f){return vm.getSelectedGeometry(f)},stroke:new _vendor.ol.style.Stroke({color:"#ffffff",width:2*vm.getStyleProperty(f,"size",1,tool)})})]:"all"===selectMode?[new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"selectedFillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"selectedColour","#2199e8",tool),width:2*vm.getStyleProperty(f,"size",1,tool)+2})}),new _vendor.ol.style.Style({stroke:new _vendor.ol.style.Stroke({color:"#ffffff",width:2*vm.getStyleProperty(f,"size",1,tool)})})]:new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:vm.getStyleProperty(f,"fillColour","rgba(255, 255, 255, 0.2)",tool)}),stroke:new _vendor.ol.style.Stroke({color:vm.getStyleProperty(f,"colour","rgba(0,0,0,1.0)",tool),width:2*vm.getStyleProperty(f,"size",1,tool)})})},f,["size","colour"],selectMode),typeIconStyle=null;if(!vm.getStyleProperty(f,"typeIcon",!1,tool))return baseStyle;if(f.typeIconStyle){var diffs=vm.map.getScale()/f.typeIconMetadata.points.scale,typeIconTint=f.typeIconTint||f.get("typeIconTint")||tool.typeIconTint||"default";if(diffs>=.5&&diffs<=1.5)if(typeIconTint===f.typeIconMetadata.points.tint)typeIconStyle=f.typeIconStyle;else{typeIconStyle=f.typeIconStyle;var newStyle=[],src=vm.map.getBlob(f,["typeIcon","typeIconTint","typeIconDims"],tints||{});if(!src)return baseStyle;_vendor.$.each(typeIconStyle,function(index,item){newStyle.push(new _vendor.ol.style.Style({geometry:item.getGeometry(),image:new _vendor.ol.style.Icon({src:src,rotation:item.getImage().getRotation(),rotateWithView:item.getImage().getRotateWithView(),snapToPixel:item.getImage().getSnapToPixel()})}))}),f.typeIconStyle=newStyle,f.typeIconMetadata.points.tint=typeIconTint,typeIconStyle=newStyle}else f.typeIconMetadata.points=!1}if(!typeIconStyle){var linestring=null;if(f.getGeometry()instanceof _vendor.ol.geom.Polygon)linestring=new _vendor.ol.geom.LineString(f.getGeometry().getCoordinates()[0]);else{if(!(f.getGeometry()instanceof _vendor.ol.geom.LineString))return baseStyle;linestring=f.getGeometry()}var src=vm.map.getBlob(f,["typeIcon","typeIconTint","typeIconDims"],tints||{});if(!src)return baseStyle;typeIconStyle=[];var segmentIndex=0,segmentMetadata=null,metadata=f.typeIconMetadata;metadata||(metadata={},f.typeIconMetadata=metadata);var perimeter=0;if(!metadata.segments){var segmentsMetadata=[];linestring.forEachSegment(function(start,end){Math.atan2(end[1]-start[1],end[0]-start[0]);segmentMetadata={length:vm.measure.getLength([start,end]),rotation:-1*Math.atan2(end[1]-start[1],end[0]-start[0])+1*Math.PI/4},segmentsMetadata.push(segmentMetadata),perimeter+=segmentMetadata.length}),metadata.perimeter=perimeter,metadata.closed=linestring.getFirstCoordinate()[0]===linestring.getLastCoordinate()[0]&&linestring.getFirstCoordinate()[1]===linestring.getLastCoordinate()[1];var len=0;_vendor.$.each(segmentsMetadata,function(index,segmentMetadata){len+=segmentMetadata.length,segmentMetadata.position=len/perimeter}),metadata.segments=segmentsMetadata}if(!metadata.points){var pointsMetadata={},iconSize=tool.typeIconDims?tool.typeIconDims[0]:48;pointsMetadata.scale=vm.map.getScale();var perimeterInPixes=parseInt(metadata.perimeter/(1e3*pointsMetadata.scale)*1e3*vm.dpmm);perimeterInPixes<iconSize?(pointsMetadata.symbolSize=1,pointsMetadata.symbolPercentage=.5):perimeterInPixes<2*iconSize?(pointsMetadata.symbolSize=2,pointsMetadata.symbolPercentage=metadata.closed?.5:1):(pointsMetadata.symbolSize=parseInt(perimeterInPixes/(2*iconSize)),pointsMetadata.symbolPercentage=1/pointsMetadata.symbolSize,metadata.closed||(pointsMetadata.symbolSize=pointsMetadata.symbolSize+1)),pointsMetadata.tint=f.typeIconTint||f.get("typeIconTint")||tool.typeIconTint||"default",metadata.points=pointsMetadata}var symbolSize=metadata.points.symbolSize,symbolPercentage=metadata.points.symbolPercentage;if(1==symbolSize){var segmentIndex=metadata.segments.findIndex(function(segment){return segment.position>=symbolPercentage});typeIconStyle.push(new _vendor.ol.style.Style({geometry:new _vendor.ol.geom.Point(linestring.getCoordinateAt(symbolPercentage)),image:new _vendor.ol.style.Icon({src:src,rotation:metadata.segments[segmentIndex].rotation,rotateWithView:!0,snapToPixel:!0})}))}else for(var segmentIndex=0,segmentMetadata=metadata.segments[segmentIndex],symbolPoints=[],fromStartLength=segmentMetadata.length,fraction=null,i=0;i<=symbolSize;i++){if(i==symbolSize||segmentMetadata.position<i*symbolPercentage){if(typeIconStyle.push(new _vendor.ol.style.Style({geometry:new _vendor.ol.geom.MultiPoint(symbolPoints),image:new _vendor.ol.style.Icon({src:src,rotation:segmentMetadata.rotation,rotateWithView:!0,snapToPixel:!0})})),i==symbolSize)break;segmentIndex+=1,segmentMetadata=metadata.segments[segmentIndex],fromStartLength+=segmentMetadata.length,symbolPoints=[]}fraction=Math.min(Math.max(i*symbolPercentage,0),1),symbolPoints.push(linestring.getCoordinateAt(fraction))}f.typeIconStyle=typeIconStyle}return baseStyle.concat(typeIconStyle)}},initFeature:function(feature){var tool=!!feature.get("toolName")&&this.getTool(feature.get("toolName"));tool&&feature.setStyle(tool.style)}},ready:function(){var vm=this,annotationStatus=this.loading.register("annotation","Annotation Component");annotationStatus.phaseBegin("initialize",20,"Initialize"),this._toolStatus={},vm._currentTool={},vm.shape=vm.pointShapes[0][1],this._pointShapesMap={},_vendor.$.each(this.pointShapes,function(index,shape){vm._pointShapesMap[shape[1]]=shape}),this._rotateAll=debounce(function(){_vendor.$.each(vm.features.getArray(),function(index,f){tool=vm.getTool(f.get("toolName")),tool.perpendicular&&f.set("rotation",vm.getPerpendicular(f.getGeometry().getCoordinates()))})},500);var map=this.map;this.features.on("add",function(ev){tool=vm.getTool(ev.element.get("toolName")),tool.onAdd&&tool.onAdd(ev.element),vm._rotateAll()}),this.features.on("remove",function(ev){vm._rotateAll()}),this.featureOverlay=new _vendor.ol.layer.Vector({source:new _vendor.ol.source.Vector({features:this.features})}),this.featureOverlay.set("id","annotations"),this.featureOverlay.set("name","My Drawing"),this.ui.translateInter=this.translateInterFactory()(),this.ui.dragSelectInter=this.dragSelectInterFactory()(),this.ui.polygonSelectInter=this.polygonSelectInterFactory()(),this.ui.selectInter=this.selectInterFactory()(),this.ui.keyboardInter=this.keyboardInterFactory()(),this.ui.modifyInter=this.modifyInterFactory()(),this.ui.defaultPan={name:"Pan",icon:"fa-hand-paper-o",cursor:["-webkit-grab","-moz-grab"],scope:["annotation"],keepSelection:!0,interactions:[map.dragPanInter,map.doubleClickZoomInter,map.keyboardPanInter,map.keyboardZoomInter]},this.ui.editStyle={name:"Edit Style",icon:"fa-pencil-square-o",scope:["annotation"],interactions:[this.ui.dragSelectInter,this.ui.selectInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!1),vm.ui.selectInter.setMulti(!1)},comments:[{name:"Tips",description:["Edit selected text node"]}]},this.ui.defaultSelect={name:"Select",icon:"fa-mouse-pointer",scope:["annotation"],keepSelection:!0,interactions:[this.ui.keyboardInter,this.ui.dragSelectInter,this.ui.polygonSelectInter,this.ui.selectInter,this.ui.translateInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!0),vm.ui.selectInter.setMulti(!0)},comments:[{name:"Tips",description:["Select all features using shortcut key 'Ctrl + A'","Select features using mouse.","Hold 'Ctrl' to enable polygon selection","Delete selected features using key 'Del'"]}]},this.ui.defaultEdit={name:"Edit Geometry",icon:"fa-pencil",scope:["annotation"],interactions:[this.ui.keyboardInter,this.ui.selectInter,this.ui.dragSelectInter,this.ui.modifyInter],onSet:function(){vm.ui.dragSelectInter.setMulti(!1),vm.ui.selectInter.setMulti(!1)},comments:[{name:"Tips",description:["Edit annotation features"]}]},this.tools=[this.ui.defaultPan,this.ui.defaultSelect,this.ui.defaultEdit,this.ui.editStyle];var noteStyleCache={},noteStyle=function(res){var f=this,url="";if(!f)return null;url=vm.getNoteUrl(f.get("note"));var tint=f.tint||f.get("tint")||"notselected";if(noteStyleCache[url]||(noteStyleCache[url]=[]),!noteStyleCache[url][tint]){var color="selected"==tint?"#70BDF0":void 0;noteStyleCache[url][tint]=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({anchorOrigin:"bottom-left",anchor:[0,0],color:color,src:url})})}return noteStyleCache[url][tint]};this.ui.defaultText={name:"Text Note",icon:"fa-comment",style:noteStyle,interactions:[vm.pointDrawFactory()],showName:!0,scope:["annotation"],onAdd:function(f){f.getGeometry().defaultGetExtent=f.getGeometry().defaultGetExtent||f.getGeometry().getExtent,f.getGeometry().getExtent=function(){return vm.selecting?vm.getNoteExtent(f):this.defaultGetExtent()},f.get("note")||f.set("note",_vendor.$.extend({},vm.note))},comments:[{name:"Tips",description:["Create a text note and place it into map."]}]};var customAdd=function(f){f.get("size")||f.set("size",vm.size),f.get("colour")||f.set("colour",vm.colour)},customPointAdd=function(f){f.get("shape")||f.set("shape",vm.shape),f.get("colour")||f.set("colour",vm.colour)};this.ui.defaultPoint={name:"Custom Point",icon:function(feature){return feature?vm._pointShapesMap[feature.get("shape")][0]:"dist/static/symbols/fire/custom_point.svg"},interactions:[this.pointDrawFactory()],showName:!0,scope:["annotation"],onAdd:customPointAdd,style:vm.getIconStyleFunction(vm.tints),sketchStyle:function(res){var feat=this;return feat.set("shape",vm.shape,!0),feat.set("colour",vm.colour,!0),vm.map.cacheStyle(function(feat){var src=vm.map.getBlob(feat,["icon","tint"],vm.tints||{});if(!src)return!1;var rot=feat.get("rotation")||0;return new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,rotation:rot,rotateWithView:!0,snapToPixel:!0})})},feat,["icon","tint","rotation"])},tint:function(feature){var shape=feature.get("shape"),colour=feature.get("colour");return shape?vm.getCustomPointTint(shape,[null,colour]):"default"},selectedTint:function(feature){var shape=feature.get("shape");return shape?vm.getCustomPointTint(shape,["#2199e8","#2199e8"]):"selected"},comments:[{name:"Tips",description:["Create a customized point and place it in map. "]}]},this.ui.defaultLine={name:"Custom Line",icon:"dist/static/images/iD-sprite.svg#icon-line",interactions:[this.linestringDrawFactory()],showName:!0,scope:["annotation"],onAdd:customAdd,style:vm.getVectorStyleFunc(this.tints),comments:[{name:"Tips",description:["Draw a line on map","Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]},this.ui.defaultPolygon={name:"Custom Area",icon:"dist/static/images/iD-sprite.svg#icon-area",interactions:[this.polygonDrawFactory()],showName:!0,scope:["annotation"],onAdd:customAdd,style:vm.getVectorStyleFunc(this.tints),measureLength:!0,measureArea:!0,comments:[{name:"Tips",description:["Draw a polygon on map","Hold down the 'SHIFT' key during drawing to enable freehand mode. "]}]};var getFeatureInfo=function(feature){var tool=vm.getTool(feature.get("toolName")),icon=tool.icon;return"function"==typeof icon&&(icon=icon(feature)),icon?icon.startsWith("fa-")?{name:tool.name,icon:"fa "+icon}:-1===icon.search("#")?{name:tool.name,img:icon}:{name:tool.name,svg:icon}:{name:tool.name}};this.$root.catalogue.catalogue.push({type:"Annotations",id:"annotations",name:"My Drawing",getFeatureInfo:getFeatureInfo}),this.measure.register("annotations",this.features),annotationStatus.phaseEnd("initialize"),annotationStatus.phaseBegin("load_features",10,"Load saved features");var savedFeatures=this.$root.geojson.readFeatures(this.$root.store.annotations);annotationStatus.phaseEnd("load_features"),annotationStatus.phaseBegin("gk-init",40,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){annotationStatus.phaseEnd("gk-init"),annotationStatus.phaseBegin("import_features",10,"Import features"),savedFeatures&&(_vendor.$.each(savedFeatures,function(index,feature){feature.get("id")||(vm.drawingSequence+=1,feature.set("id",vm.drawingSequence)),vm.initFeature(feature)}),this.features.extend(savedFeatures)),annotationStatus.phaseEnd("import_features"),annotationStatus.phaseBegin("init_tools",20,"Initialize tools"),_vendor.$.each(vm.tools,function(index,tool){_vendor.$.each(tool.interactions,function(subindex,interact){"function"==typeof interact&&(tool.interactions[subindex]=interact(tool))}),tool.keepSelection=void 0!==tool.keepSelection&&tool.keepSelection,tool.selectMode=void 0==tool.selectMode?"feature":tool.selectMode,tool.label||(tool.label=tool.name)}),vm.annotationTools=this.tools.filter(function(t){return t.scope&&t.scope.indexOf("annotation")>=0}),vm.setDefaultTool("annotations","Edit"),annotationStatus.phaseEnd("init_tools")})}},module.exports.__esModule&&(module.exports=module.exports.default),
("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-annotations" v-cloak="">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="annotations-tabs">\n        <li class="tabs-title is-active"><a class="label" aria-selected="true">Drawing Tools</a></li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="row collapse" id="annotations-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="annotations-tabs">\n        <div class="tabs-panel is-active" id="annotations-edit" v-cloak="">\n\n          <div id="annotations-fixed-part">\n          <div class="tool-slice row collapse">\n            <div class="small-12">\n              <div class="expanded button-group">\n                <a v-for="t in annotationTools | filterIf \'showName\' undefined" class="button button-tool" v-bind:class="{\'selected\': t.name == tool.name}" @click="setTool(t)" v-bind:title="t.label">{{{ icon(t) }}}</a>\n              </div>\n              <div class="row resetmargin">\n                <div v-for="t in annotationTools | filterIf \'showName\' true" class="small-6" v-bind:class="{\'rightmargin\': $index % 2 === 0}">\n                  <a class="expanded secondary button" v-bind:class="{\'selected\': t.name == tool.name}" @click="setTool(t)" v-bind:title="t.label">{{{ icon(t) }}} {{ t.label }}</a>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="small-12">\n              <div class="expanded button-group hide">\n                <a class="button"><i class="fa fa-cut" aria-hidden="true"></i> Cut</a>\n                <a class="button"><i class="fa fa-copy" aria-hidden="true"></i> Copy</a>\n                <a class="button"><i class="fa fa-paste" aria-hidden="true"></i> Paste</a>\n              </div>\n\n              <div class="expanded button-group">\n                <gk-drawinglogs v-ref:drawinglogs=""></gk-drawinglogs>\n              </div>\n\n              <div class="expanded button-group">\n                <label class="button " for="uploadAnnotations" title="{{utils.importSpatialFileTypeDesc}}"><i class="fa fa-upload"></i> Import Editing </label>\n                <input type="file" id="uploadAnnotations" class="show-for-sr" name="annotationsfile" accept="{{utils.importSpatialFileTypes}}" v-model="annotationsfile" v-el:annotationsfile="" @change="importAnnotations()">\n                <a class="button" @click="downloadAnnotations(\'geojson\')" title="Export Editing as GeoJSON"><i class="fa fa-download" aria-hidden="true"></i> Export Editing <br>(geojson) </a>\n                <a class="button" @click="downloadAnnotations(\'gpkg\')" title="Export Editing as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i> Export Editing <br>(gpkg)</a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowShapePicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Shape:</label></div>\n            <div class="small-10">\n              <div class="expanded button-group">\n                <template v-for="s in pointShapes">\n                  <a @click="setProp(\'shape\', s[1])" v-bind:class="{\'selected\': shape &amp;&amp; (s[1] === shape)}" class="button pointshape"><img v-bind:src="s[0]"></a>\n                </template>\n              </div>\n            clippedOnly</div>\n          </div>\n\n          <div v-show="shouldShowSizePicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Size:<br>({{ size }})</label></div>\n            <div class="small-10">\n              <div class="expanded button-group">\n                <a @click="setProp(\'size\', 1)" v-bind:class="{\'selected\': size == 1}" class="button"><img src="dist/static/images/thick-1.svg"></a>\n                <a @click="setProp(\'size\', 2)" v-bind:class="{\'selected\': size == 2}" class="button"><img src="dist/static/images/thick-2.svg"></a>\n                <a @click="setProp(\'size\', 4)" v-bind:class="{\'selected\': size == 4}" class="button"><img src="dist/static/images/thick-4.svg"></a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowColourPicker" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Colour:</label></div>\n            <div class="small-10">\n              <div @click="updateNote(false)" class="expanded button-group">\n                <a v-for="c in colours" class="button" title="{{ c[0] }}" @click="setProp(\'colour\', c[1])" v-bind:class="{\'selected\': c[1] == colour}" v-bind:style="{ backgroundColor: c[1] }"></a>\n              </div>\n            </div>\n          </div>\n\n          <div v-show="shouldShowNoteEditor" class="tool-slice row collapse">\n            <div class="small-2"><label class="tool-label">Note:</label></div>\n            <div class="small-10">\n              <select name="select" @change="note.text = $event.target.value.split(\'<br>\').join(\'\\n\')">\n                <option value="">Text Templates</option> \n                <option value="Sector: <br>Channel: <br>Commander: " selected="">Sector Details</option>\n              </select>\n              <textarea @blur="updateNote(true)" class="notecontent" v-el:notecontent="" @keyup="updateNote(false)" @click="updateNote(true)" @mouseup="updateNote(false)">{{ note.text }}</textarea>\n            </div>\n          </div>\n          </div>\n\n          <div class="tool-slice row collapse scroller" id="annotations-flexible-part">\n            <div class="small-12 canvaspane" v-show="shouldShowNoteEditor">\n              <canvas v-el:textpreview=""></canvas>\n            </div>\n          </div>\n\n        </div>\n      </div>\n\n      </div>\n    </div>\n  </div>\n\n\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.notecontent {\n  width: 100%;\n  height: 100px;\n  resize: both;\n  background-image: url('dist/static/images/boxresize.svg');\n  background-repeat: no-repeat;\n  background-position: right bottom;\n}\n.canvaspane {\n  overflow: hidden;\n  width: 100px;\n  height: 40vh;\n}\n.row.resetmargin {\n  margin: 0px;\n}\n.resetmargin .small-6.rightmargin {\n  margin-right: 1px;\n}\n.resetmargin .small-6 {\n  margin-right: -1px;\n  padding-right: 1px;\n}\n.resetmargin .expanded.button {\n  margin-bottom: 2px;\n}\n.fa.red {\n  color: #b43232;\n}\n.pointshape {\n  padding-left:5px;\n  padding-right:5px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-fbfc6e6a",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-fbfc6e6a",module.exports))}()},{"./drawinglogs.vue":151,"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],150:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#userdialog .button {\n    padding-left:15px;\n    padding-right:15px;\n    margin-left:30px;\n    margin-right:30px;\n}\n#userdialog .small-centered {\n    text-align:center;\n}\n#userdialog .detail_name {\n    font-weight:bold;\n    text-align: right;\n    padding-right:5px;\n    background:white;\n}\n#userdialog .detail_value {\n    text-align: left;\n    padding-left:5px;\n}\n#userdialog .header {\n    text-align: left;\n    font-weight:bold;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={data:function(){return{classes:"small",title:"",tasks:null,succeedTasks:null,mergedTasks:null,failedTasks:null,warningTasks:null,ignoredTasks:null,callback:null,value:null,defaultValue:null,targetWindow:null,revision:1}},computed:{loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},hasFooter:function(){return this.footer.length>0},isProgressBar:function(){return this.tasks>0},completedTasks:function(){return this.succeedTasks+this.failedTasks+this.warningTasks+this.ignoredTasks},fillstyle:function(){return"width:"+this.completedTasks/this.tasks*100+"%"},messages:function(){return this.revision&&this._messages},footer:function(){return this.revision&&this._footer}},methods:{show:function(options){if(void 0===options)return void(0,_vendor.$)("#userdialog").foundation("open");var vm=this;this.classes=options.classes||"small",this.title=options.title||"",this._messages.splice(0,this._messages.length);Array.isArray(options.messages)?_vendor.$.each(options.messages,function(index,line){vm.addMessage(line)}):this._messages.push([[options.messages,12]]),Array.isArray(options.footer)?_vendor.$.each(options.footer,function(index,line){vm.addMessage(line,vm._footer)}):this._footer.push([[options.footer,12]]),this.callback=options.callback,this.defaultOption=void 0===options.defaultOption?null:options.defaultOption,this.option=null,this.tasks=options.tasks,this.succeedTasks=this.isProgressBar?0:null,this.failedTasks=this.isProgressBar?0:null,this.warningTasks=this.isProgressBar?0:null,this.ignoredTasks=this.isProgressBar?0:null,this.mergedTasks=this.isProgressBar?0:null,this._initData=options.initData||null,this._initFunc=options.initFunc||null,this.revision+=1,this.$nextTick(function(){vm._initFunc&&vm._initFunc(),(0,_vendor.$)("#userdialog").foundation("open")})},close:function(button,handler){button&&button[2].is_valid&&!1===button[2].is_valid(button,this.getData())||(this.option=button&&void 0!==button[0]?button[0]:this.defaultOption,(0,_vendor.$)("#userdialog").foundation("close"))},rerend:function(){var messages=this._messages;this._messages=[];var footer=this._footer;this._footer=[],this.revision+=1;var vm=this;this.$nextTick(function(){vm._messages=messages,vm._footer=footer,vm.revision+=1})},addMessage:function(message,messages){messages=messages||this._messages,messageLine=[],messages.push(messageLine),Array.isArray(message)?_vendor.$.each(message,function(index,column){Array.isArray(column)?messageLine.push(column):messageLine.push([column,12])}):messageLine.push([message,12])},addSucceedTask:function(){this.succeedTasks+=1},addWarningTask:function(){this.warningTasks+=1},addFailedTask:function(){this.failedTasks+=1},addIgnoredTask:function(){this.ignoredTasks+=1},addMergedTask:function(){this.mergedTasks+=1},addTasks:function(newTasks){this.tasks+=newTasks},isLink:function(msg){return this._linkRe=this._linkRe||/^\s*https?\:\/\/.+/i,this._linkRe.test(msg)},messageAttr:function(msg,attr,defaultValue){return msg[2]&&msg[2][attr]?msg[2][attr]:defaultValue},messageClass:function(msg){return this.messageAttr(msg,"class","")},messageType:function(msg){return this.messageAttr(msg,"type","show")},messageName:function(msg){return this.messageAttr(msg,"name","")},getValue:function(msg){return this._initData&&this.messageName(msg)in this._initData?this._initData[this.messageName(msg)]:msg[0]},isChecked:function(msg){return this._initData&&this.messageName(msg)in this._initData?(value=this._initData[this.messageName(msg)],Array.isArray(value)?value.indexOf(msg[0]):value===msg[0]):this.messageAttr(msg,"checked",!1)},getData:function(){return result={},(0,_vendor.$)("#userdialog input").each(function(index){(0,_vendor.$)(this).prop("disabled")||0!==(0,_vendor.$)(this).val().trim().length&&(["radio","checkbox"].indexOf((0,_vendor.$)(this).prop("type").toLowerCase())>=0&&!(0,_vendor.$)(this).prop("checked")||((0,_vendor.$)(this).prop("name")in result?"string"==typeof result[(0,_vendor.$)(this).prop("name")]?result[(0,_vendor.$)(this).prop("name")]=[result[(0,_vendor.$)(this).prop("name")],(0,_vendor.$)(this).val().trim()]:result[(0,_vendor.$)(this).prop("name")].push((0,_vendor.$)(this).val().trim()):result[(0,_vendor.$)(this).prop("name")]=(0,_vendor.$)(this).val().trim()))}),result},processEvent:function(message,event_key,ev){var eventHandler=this.messageAttr(message,event_key);eventHandler&&("close"===eventHandler?this.close(message):eventHandler.call(this,ev,message))}},ready:function(){var vm=this;this._messages=[],this._footer=[];var dialogStatus=this.loading.register("dialog","Dialog Component");dialogStatus.phaseBegin("initialize",100,"Initialize"),(0,_vendor.$)("#userdialog").on("open.zf.reveal",function(){(0,_vendor.$)("#userdialog").css("top",Math.floor(((0,_vendor.$)("#userdialog").parent().height()-_vendor.utils.getHeight((0,_vendor.$)("#userdialog")))/2)+"px")}),(0,_vendor.$)("#userdialog").on("closed.zf.reveal",function(){if(vm._messages.splice(0,vm._messages.length),vm._footer.splice(0,vm._footer.length),vm.revision+=1,vm.callback){var value=null===vm.option||void 0===vm.option?vm.defaultOption:vm.option;null!==value&&void 0!==value&&vm.callback(value,vm.getData()),vm.callback=null}}),dialogStatus.phaseEnd("initialize")}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="{{classes}} reveal" id="userdialog" data-reveal="" data-close-on-click="false"> \n    <h3 v-show="title">{{title}}</h3>\n    <div style="max-height:600px;" class="scroller">\n    <div v-for="line in messages" class="row" track-by="$index">\n        <div v-for="message in line" class="small-{{message[1]}} columns {{messageClass(message)}}" track-by="$index" v-bind:style="messageAttr(message,\'style\')">\n             <div v-if="messageType(message) === \'show\'" style="white-space:pre-wrap;">{{message[0]}}</div>\n             <a v-if="messageType(message) === \'link\'" href="{{message[0]}}" @click.stop.prevent="utils.editResource($event)" target="{{messageAttr(message,\'target\')}}">{{message[0]}}</a>\n             <button v-if="messageType(message) === \'button\'" @click.stop.prevent="processEvent(message,\'click\')" :disabled="messageAttr(message,\'disabled\')" id="userdialog-button-{{message[0]}}">{{messageAttr("title")}}</button>\n             <img v-if="messageType(message) === \'img\'" @click.stop.prevent="processEvent(message,\'click\')" v-bind:src="message[0]">\n             <input v-if="[\'radio\',\'checkbox\'].indexOf(messageType(message)) >= 0" type="{{message[2][\'type\']}}" name="{{messageAttr(message,\'name\')}}" value="{{message[0]}}" @click.stop="processEvent(message,\'click\',$event)" disabled="{{messageAttr(message,\'disabled\',false)}}" checked="{{isChecked(message)}}">\n             <input v-if="messageType(message) === \'text\'" type="text" name="{{messageAttr(message,\'name\')}}" disabled="{{messageAttr(message,\'disabled\')}}" value="{{getValue(message)}}">\n        </div>\n    </div>\n\n    <div class="row align-center" v-if="isProgressBar">\n        <div class="small-2 columns small-centered">\n            Total: {{tasks}}\n        </div>\n\n        <div class="small-2 columns small-centered">\n            Succeed: {{succeedTasks}}\n        </div>\n\n        <div class="small-2 columns small-centered">\n            Succeed: {{mergedTasks}}\n        </div>\n\n        <div class="small-2 columns small-centered">\n            Warning: {{warningTasks}}\n        </div>\n\n        <div class="small-2 columns small-centered">\n            Failed: {{failedTasks}}\n        </div>\n\n        <div class="small-2 columns small-centered">\n            Ignore: {{ignoredTasks}}\n        </div>\n\n        <div class="small-12 columns small-centered">\n            <div class="progress" role="progressbar" tabindex="0" aria-valuenow="{{completedTasks}}" aria-valuemin="0" aria-valuemax="{{tasks}}">\n                <div class="progress-meter" v-bind:style="fillstyle"></div>\n            </div>\n        </div>\n    </div>\n    </div>\n\n    <div v-for="line in footer" track-by="$index" class="row">\n        <br>\n        <div v-for="message in revision &amp;&amp; line" class="small-{{message[1]}} columns {{messageClass(message)}}" track-by="$index" v-bind:style="messageAttr(message,\'style\')">\n             <button v-if="messageType(message) === \'button\'" @click.stop.prevent="processEvent(message,\'click\')" :disabled="messageAttr(message,\'disabled\')" class="button" style="cursor:pointer" id="userdialog-button-{{message[0]}}">{{messageAttr(message,"title")}}</button>\n             <img v-if="messageType(message) === \'img\'" @click.stop.prevent="processEvent(message,\'click\')" v-bind:src="message[0]" style="cursor:pointer">\n             <div v-if="messageType(message) === \'show\'" style="white-space:pre-wrap;">{{message[0]}}</div>\n             <a v-if="messageType(message) === \'link\'" href="{{message[0]}}" @click.stop.prevent="utils.editResource($event)" target="{{messageAttr(message,\'target\')}}">{{message[0]}}</a>\n             <input v-if="[\'radio\',\'checkbox\'].indexOf(messageType(message)) >= 0" type="{{message[2][\'type\']}}" name="{{messageAttr(message,\'name\')}}" value="{{message[0]}}" @click.stop="processEvent(message,\'click\',$event)" disabled="{{messageAttr(message,\'disabled\',false)}}" checked="{{isChecked(message)}}">\n             <input v-if="messageType(message) === \'text\'" type="text" name="{{messageAttr(message,\'name\')}}" disabled="{{messageAttr(message,\'disabled\')}}" value="{{getValue(message)}}">\n        </div>\n    </div>\n\n    <button class="close-button" data-close="" aria-label="Close modal" type="button">\n        <span aria-hidden="true">Ã</span>\n    </button>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#userdialog .button {\n    padding-left:15px;\n    padding-right:15px;\n    margin-left:30px;\n    margin-right:30px;\n}\n#userdialog .small-centered {\n    text-align:center;\n}\n#userdialog .detail_name {\n    font-weight:bold;\n    text-align: right;\n    padding-right:5px;\n    background:white;\n}\n#userdialog .detail_value {\n    text-align: left;\n    padding-left:5px;\n}\n#userdialog .header {\n    text-align: left;\n    font-weight:bold;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-11d2d171",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-11d2d171",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],151:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.drawinglog {\n    padding-left:5px;\n    padding-right:5px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_vendor=require("src/vendor.js");exports.default={store:["drawingLogs","redoPointer","settings"],data:function(){return{modifyingFeatures:{}}},computed:{annotations:function(){return this.$root.annotations},loading:function(){return this.$root.loading},systemsetting:function(){return this.$root.systemsetting},undoSteps:function(){return this.drawingLogs.length&&this.redoPointer},redoSteps:function(){return this.drawingLogs.length&&this.drawingLogs.length-this.redoPointer},size:{get:function(){return this.settings.undoLimit},set:function(val){val<0?this.settings.undoLimit>=0&&(this.off(),this.systemsetting.saveState()):this.settings.undoLimit<0?(this.on(val),this.systemsetting.saveState()):this.settings.undoLimit!==val&&(this.settings.undoLimit=val,this.systemsetting.saveState())}}},methods:{on:function(limit){if((limit=limit||0)<0)return void this.off();var vm=this,attachChangeEventListener=function(feature){var featureId=feature.get("id");feature.getGeometry()._changeListenerId=feature.getGeometry()._changeListenerId||feature.getGeometry().on("change",vm._eventHandlers["geometry:change"](feature,featureId));var tool=!!feature.get("toolName")&&vm.annotations.getTool(feature.get("toolName"));if(tool)if(tool===vm.annotations.ui.defaultText){var previousNote={},note=feature.get("note");note&&(_vendor.$.each(note,function(key,value){previousNote[key]=value}),feature.previousNote=previousNote),feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["text:propertychange"](feature))}else tool===vm.annotations.ui.defaultLine||tool===vm.annotations.ui.defaultPolygon?feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["vector:propertychange"](feature)):tool===vm.annotations.ui.defaultPoint&&(feature._propertyChangeListenerId=feature._propertyChangeListenerId||feature.on("propertychange",vm._eventHandlers["pointer:propertychange"](feature)))};vm.annotations.features.forEach(function(feature){attachChangeEventListener(feature)}),vm._eventListenerIds["features:change"]=vm._eventListenerIds["features:change"]||vm.annotations.features.on("add",function(ev){attachChangeEventListener(ev.element)}),vm._eventListenerIds["features:add"]=vm._eventListenerIds["features:add"]||vm.annotations.features.on("add",function(ev){vm._undoRedoMode||vm.addFeatures(ev.element)}),vm._eventListenerIds["features:remove"]=vm._eventListenerIds["features:remove"]||vm.annotations.features.on("remove",function(ev){vm._undoRedoMode||vm.removeFeatures(ev.element)}),vm._eventListenerIds["translateInter:translateend"]=vm._eventListenerIds["translateInter:translateend"]||vm.annotations.ui.translateInter.on("translateend",function(ev){vm._undoRedoMode||vm.modifyFeatures(ev.features)}),vm._eventListenerIds["modifyInter:modifyend"]=vm._eventListenerIds["modifyInter:modifyend"]||vm.annotations.ui.modifyInter.on("modifyend",function(ev){vm._undoRedoMode||vm.modifyFeatures(ev.features)}),vm._keyboardInter=vm._keyboardInter||new _vendor.ol.interaction.Interaction({handleEvent:function(mapBrowserEvent){var stopEvent=!1;if(mapBrowserEvent.type===_vendor.ol.events.EventType.KEYDOWN){var keyEvent=mapBrowserEvent.originalEvent;switch(keyEvent.keyCode){case 90:keyEvent.ctrlKey&&(vm.undo(),stopEvent=!0);break;case 89:vm.redo(),stopEvent=!0}}return stopEvent&&keyEvent.preventDefault(),!stopEvent}}),vm.$root.map.olmap.addInteraction(vm._keyboardInter),vm.settings.undoLimit=limit},off:function(){var vm=this;vm.annotations.features.forEach(function(feature){feature.getGeometry()._changeListenerId&&(feature.getGeometry().unByKey(feature.getGeometry()._changeListenerId),delete feature.getGeometry()._changeListenerId),feature._propertyChangeListenerId&&(feature.unByKey(feature._propertyChangeListenerId),delete feature._propertyChangeListenerId)}),vm._eventListenerIds["features:change"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:change"]),delete vm._eventListenerIds["features:change"]),vm._eventListenerIds["features:add"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:add"]),delete vm._eventListenerIds["features:add"]),vm._eventListenerIds["features:remove"]&&(vm.annotations.features.unByKey(vm._eventListenerIds["features:remove"]),delete vm._eventListenerIds["features:remove"]),vm._eventListenerIds["translateInter:translateend"]&&(vm.annotations.ui.translateInter.unByKey(vm._eventListenerIds["translateInter:translateend"]),delete vm._eventListenerIds["translateInter:translateend"]),vm._eventListenerIds["modifyInter:modifyend"]&&(vm.annotations.ui.modifyInter.unByKey(vm._eventListenerIds["modifyInter:modifyend"]),delete vm._eventListenerIds["modifyInter:modifyend"]),vm._keyboardInter&&vm.$root.map.olmap.removeInteraction(vm._keyboardInter),vm.drawingLogs.splice(0,vm.drawingLogs.length),vm.redoPointer=0,vm.settings.undoLimit=-1},addFeatures:function(features){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["C",JSON.parse(this.$root.geojson.writeFeatures(features))])},removeFeatures:function(features){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["R",JSON.parse(this.$root.geojson.writeFeatures(features))])},modifyFeatures:function(features){var vm=this;features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),features=features.filter(function(f){return f.get("id")in vm._modifyingFeatureIds}),features.length&&this.addLog(["U",JSON.parse(this.$root.geojson.writeFeatures(this._modifyingFeatures)),JSON.parse(this.$root.geojson.writeFeatures(features))]),this._modifyingFeatures=[],this._modifyingFeatureIds={}},modifyFeaturesProperty:function(features,property,oldValue,newValue){features instanceof _vendor.ol.Collection?features=features.getArray():Array.isArray(features)||(features=[features]),this.addLog(["P",features.map(function(feature){return feature.get("id")}),property,oldValue,newValue])},addLog:function(log){this.drawingLogs.splice(this.redoPointer,this.drawingLogs.length-this.redoPointer,log),this.size>0&&this.drawingLogs.length>this.size&&this.drawingLogs.splice(0,this.drawingLogs.length-this.size),this.redoPointer=this.drawingLogs.length},cleanLogs:function(){window.confirm("This will clear all change logs, and you can't undo/redo previous drawings anymore. Are you sure?")&&(this.drawingLogs.splice(0,this.drawingLogs.length),this.redoPointer=0)},undo:function(){var vm=this;vm.annotations.setTool("Pan");try{if(vm._undoRedoMode=!0,vm.undoSteps<=0)return;var undoIndex=vm.redoPointer-1;if("C"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.selectedFeatures.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});index>=0&&vm.annotations.selectedFeatures.removeAt(index),(index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")}))>=0&&vm.annotations.features.removeAt(index)})}else if("R"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){vm.annotations.initFeature(feature),vm.annotations.features.push(feature)})}else if("U"===vm.drawingLogs[undoIndex][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[undoIndex][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});if(index>=0){var f=vm.annotations.features.item(index),tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0)),f.setGeometry(feature.getGeometry()),f.getGeometry().on("change",vm._eventHandlers["geometry:change"](f,feature.get("id"))),vm.annotations.ui.modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",new _vendor.ol.Collection([f]),null))}})}else{if("P"!==vm.drawingLogs[undoIndex][0])return void alert("Not support");var changedFeatureIds=vm.drawingLogs[undoIndex][1];_vendor.$.each(changedFeatureIds,function(i,featureId){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===featureId});if(index>=0){var f=vm.annotations.features.item(index);if("object"===_typeof(vm.drawingLogs[undoIndex][3])){f.set(vm.drawingLogs[undoIndex][2],_vendor.$.extend(f.get(vm.drawingLogs[undoIndex][2]),vm.drawingLogs[undoIndex][3])),f.changed();var tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));if(tool&&tool===vm.annotations.ui.defaultText){var note=f.get("note");f.previousNote={},_vendor.$.each(note,function(key,value){f.previousNote[key]=value})}}else f.set(vm.drawingLogs[undoIndex][2],vm.drawingLogs[undoIndex][3])}})}vm.redoPointer=undoIndex}finally{vm._undoRedoMode=!1}},redo:function(){var vm=this;vm.annotations.setTool("Pan");try{if(vm._undoRedoMode=!0,vm.redoSteps<=0)return;if("C"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][1]);_vendor.$.each(changedFeatures,function(i,feature){vm.annotations.initFeature(feature),vm.annotations.features.push(feature)})}else if("R"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][1]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});index>=0&&vm.annotations.features.removeAt(index)})}else if("U"===vm.drawingLogs[vm.redoPointer][0]){var changedFeatures=vm.$root.geojson.readFeatures(vm.drawingLogs[vm.redoPointer][2]);_vendor.$.each(changedFeatures,function(i,feature){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===feature.get("id")});if(index>=0){var f=vm.annotations.features.item(index),tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));tool&&tool.typeIcon&&(delete f.typeIconStyle,f.set("typeIconMetadata",void 0,!0)),f.setGeometry(feature.getGeometry()),f.getGeometry().on("change",vm._eventHandlers["geometry:change"](f,feature.get("id"))),vm.annotations.ui.modifyInter.dispatchEvent(new _vendor.ol.interaction.Modify.Event("featuresmodified",new _vendor.ol.Collection([f]),null))}})}else{if("P"!==vm.drawingLogs[vm.redoPointer][0])return void alert("Not support");var changedFeatureIds=vm.drawingLogs[vm.redoPointer][1];_vendor.$.each(changedFeatureIds,function(i,featureId){var index=vm.annotations.features.getArray().findIndex(function(f){return f.get("id")===featureId});if(index>=0){var f=vm.annotations.features.item(index);if("object"===_typeof(vm.drawingLogs[vm.redoPointer][4])){f.set(vm.drawingLogs[vm.redoPointer][2],_vendor.$.extend(f.get(vm.drawingLogs[vm.redoPointer][2]),vm.drawingLogs[vm.redoPointer][4])),f.changed();var tool=!!f.get("toolName")&&vm.annotations.getTool(f.get("toolName"));if(tool&&tool===vm.annotations.ui.defaultText){var note=f.get("note");f.previousNote={},_vendor.$.each(note,function(key,value){f.previousNote[key]=value})}}else f.set(vm.drawingLogs[vm.redoPointer][2],vm.drawingLogs[vm.redoPointer][4])}})}vm.redoPointer+=1}finally{vm._undoRedoMode=!1}},changeUndoLimit:function(){}},ready:function(){var vm=this,logStatus=this.loading.register("drawinglogs","Drawing Logs Component");logStatus.phaseBegin("initialize",20,"Initialize"),vm._undoRedoMode=!1,vm._modifyingFeatures=[],vm._modifyingFeatureIds={},vm._eventHandlers={},vm._eventListenerIds={},vm._eventHandlers["geometry:change"]=function(feature,featureId){return function(ev){if(!(vm._undoRedoMode||featureId in vm._modifyingFeatureIds)){vm._modifyingFeatureIds[featureId]=!0;var tmpFeature=feature.clone();tmpFeature.setProperties({},!0),vm._modifyingFeatures.push(tmpFeature)}}},vm._eventHandlers["text:propertychange"]=function(feature){return function(ev){if(vm.annotations.tool===vm.annotations.ui.editStyle&&"noteRevision"===ev.key){var previousNote=feature.previousNote,note=feature.get("note");if(previousNote){var changed=!1;if(_vendor.$.each(["colour","text"],function(index,key){if(previousNote[key]!==note[key])return changed=!0,!1}),changed){var currentNote={};_vendor.$.each(note,function(key,value){currentNote[key]=value}),vm.modifyFeaturesProperty(feature,"note",previousNote,currentNote),feature.previousNote=currentNote}}}else if("note"===ev.key){var note=feature.get("note");feature.previousNote={},_vendor.$.each(note,function(key,value){feature.previousNote[key]=value})}}},
vm._eventHandlers["vector:propertychange"]=function(feature){return function(ev){vm._undoRedoMode||vm.annotations.tool!==vm.annotations.ui.editStyle||"colour"!==ev.key&&"size"!==ev.key||vm.modifyFeaturesProperty(feature,ev.key,ev.oldValue,feature.get(ev.key))}},vm._eventHandlers["pointer:propertychange"]=function(feature){return function(ev){vm._undoRedoMode||vm.annotations.tool!==vm.annotations.ui.editStyle||"colour"!==ev.key&&"shape"!==ev.key||vm.modifyFeaturesProperty(feature,ev.key,ev.oldValue,feature.get(ev.key))}},logStatus.phaseEnd("initialize"),logStatus.phaseBegin("gk-postinit",60,"Listen 'gk-postinit' event",!0,!0),vm.$on("gk-postinit",function(){logStatus.phaseEnd("gk-postinit"),logStatus.phaseBegin("attach_events",20,"Attach events"),this.on(vm.settings.undoLimit),logStatus.phaseEnd("attach_events")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<a class="button drawinglog" v-bind:disabled="undoSteps == 0" @click="undo()"><i class="fa fa-undo" aria-hidden="true"></i> Undo ({{undoSteps}}/{{drawingLogs.length}})</a>\n<a class="button drawinglog" v-bind:disabled="redoSteps == 0" @click="redo()"><i class="fa fa-repeat" aria-hidden="true"></i> Redo ({{redoSteps}}/{{drawingLogs.length}})</a>\n<a class="button drawinglog" v-bind:disabled="drawingLogs.length == 0" @click="cleanLogs()"><i class="fa fa-trash" aria-hidden="true"></i> Clean ({{drawingLogs.length}})</a>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.drawinglog {\n    padding-left:5px;\n    padding-right:5px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-43dfe818",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-43dfe818",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],152:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{},data:function(){return{layer:{},layers:[],showLayers:!1,warning:!1}},computed:{loading:function(){return this.$root.loading},annotations:function(){return this.$root.annotations},catalogue:function(){return this.$root.catalogue},weatheroutlook:function(){return this.$root.weatheroutlook},active:function(){return this.$root.active},dialog:function(){return this.$root.dialog},map:function(){return this.$root.map},env:function(){return this.$root.env},enabled:function(){return this.layers.length>0},isControlSelected:function(){return!!this.annotations&&(!this.warning&&this.annotations.tool===this._featuredetailTool)},tools:function(){return this.layers}},watch:{},methods:{toggleTool:function(enable){if(this.warning=!1,this._featuredetailTool){if(!0===enable&&this.annotations.tool===this._featuredetailTool)return;if(!1===enable&&this.annotations.tool!==this._featuredetailTool)return;if(this.annotations.tool===this._featuredetailTool)this.annotations.setTool(this.annotations.currentTool,!0);else if(this.annotations.setTool(this._featuredetailTool),this.layer!==this._featureinfo_layer){var mapLayer=this.map.getMapLayer(this.layer);mapLayer?this.active.isHidden(mapLayer)&&this.active.toggleHidden(mapLayer):this.catalogue.onLayerChange(this.layer,!0)}}else this.annotations.setTool(this.annotations.currentTool,!0)},selectTool:function(l){if(this.layer!==l&&(this.layer=l,this.warning=!1,this.isControlSelected)){var mapLayer=this.map.getMapLayer(this.layer);mapLayer?this.active.isHidden(mapLayer)&&this.active.toggleHidden(mapLayer):this.catalogue.onLayerChange(this.layer,!0)}},isToolActivated:function(tool){return this.isControlSelected},isToolWarning:function(tool){return this.warning},set_featureinfo_layer:function(){var vm=this;vm._featureinfo_layer.id=null,vm._featureinfo_layer.title="No Active Vector Layer",_vendor.$.each(this.active.olLayers,function(index,layer){if(layer=vm.active.getLayer(layer.get("id")),"WFS"===layer.service_type)return vm._featureinfo_layer.id=layer.id,vm._featureinfo_layer.title=layer.title,!1})}},ready:function(){var vm=this;this._featuredetailStatus=vm.loading.register("featuredetail","Feature Detail Component"),this._featuredetailStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){if(vm._featuredetailStatus.phaseEnd("gk-init"),vm._featuredetailStatus.phaseBegin("initialize",20,"Initialize",!0,!1),vm.catalogue.catalogue.forEach(function(layer){layer.tags&&layer.tags.some(function(o){return"detail_link"===o.name||"detail_dialog"===o.name})&&(layer.icon="/dist/static/images/"+layer.id.replace(":","-").toLowerCase()+".png",layer.title=layer.name||layer.id,layer.toolid="feauterdetail-"+layer.id.replace(":","-"),vm.layers.splice(0,0,layer))}),vm._featureinfo_layer={id:null,icon:"/dist/static/images/feature_info.svg",title:"Identity Tool",toolid:"featuredetail-vectorlayer-top"},vm.layers.push(vm._featureinfo_layer),vm.set_featureinfo_layer(),vm.map.olmap.on("removeLayer",function(ev){vm.set_featureinfo_layer()}),vm.map.olmap.on("addLayer",function(ev){vm.set_featureinfo_layer()}),vm.map.olmap.on("changeLayerOrder",function(ev){vm.set_featureinfo_layer()}),vm.layers.length){vm.layer=vm.layers[0];var featuredetailInter=new _vendor.ol.interaction.Interaction({handleEvent:function(browserEvent){if(!_vendor.ol.events.condition.click(browserEvent))return!0;if(null!==vm.layer.id){var topLeft=vm.map.olmap.getCoordinateFromPixel(browserEvent.pixel.map(function(d){return d-10})),bottomRight=vm.map.olmap.getCoordinateFromPixel(browserEvent.pixel.map(function(d){return d+10})),bbox="&bbox="+bottomRight[1]+","+topLeft[0]+","+topLeft[1]+","+bottomRight[0]+",urn:ogc:def:crs:EPSG:4326",url=null;return url=vm.layer!==vm._featureinfo_layer&&vm.layer.tags&&vm.layer.tags.some(function(o){return"detail_link"===o.name})?vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&count=1&outputFormat=application%2Fjson&typeNames="+getDetailLayerId(vm.layer.id)+bbox:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&outputFormat=application%2Fjson&typeNames="+getDetailLayerId(vm.layer.id)+bbox,_vendor.$.ajax({url:url,dataType:"json",success:function(response,stat,xhr){if(response.totalFeatures<1)return void(vm.warning=!0);if(vm.warning=!1,vm.layer.tags&&vm.layer.tags.some(function(o){return"detail_link"===o.name}))response.features[0].properties.url&&_vendor.utils.editResource(browserEvent,null,response.features[0].properties.url,vm.layer.id,!0);else{var messages=[];_vendor.$.each(response.features[0].properties,function(key,value){["ogc_fid","md5_rowhash"].indexOf(key)>=0||(vm.dialog.isLink(value)?messages.push([[key,3,{class:"detail_name"}],[value,9,{type:"link",class:"detail_value",target:vm.layer.id+"."+key}]]):messages.push([[key,3,{class:"detail_name"}],[value,9,{class:"detail_value"}]]))});var footer=null,index=1,moveFeature=function(forward){forward?index<response.totalFeatures?index+=1:index=1:index>1?index-=1:index=response.totalFeatures;var propertyIndex=0,vm=this;_vendor.$.each(response.features[index-1].properties,function(key,value){["ogc_fid","md5_rowhash"].indexOf(key)>=0||(vm.messages[propertyIndex][1][0]=value,propertyIndex+=1)}),this.footer[0][2][0]=index+"/"+response.totalFeatures,this.rerend()};response.totalFeatures>1&&(footer=[[["",4],["/dist/static/images/previous.svg",1,{type:"img",style:"text-align:center;",title:"Previous",click:function(){moveFeature.call(this,!1)}}],[index+"/"+response.totalFeatures,2,{style:"text-align:center;"}],["/dist/static/images/next.svg",1,{type:"img",style:"text-align:center;",title:"Next",click:function(){moveFeature.call(this,!0)}}],["",4]]]),vm.dialog.show({title:vm.layer.title,messages:messages,footer:footer})}},error:function(xhr,status,message){vm.warning=!0,alert(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}}),!1}}});vm._featuredetailTool={name:"FeatureDetail",keepSelection:!0,interactions:[featuredetailInter]},vm.annotations.tools.push(vm._featuredetailTool)}vm._featuredetailStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template="\n",module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-6c0e81a4",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-6c0e81a4",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],153:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{hoverInfo:"settings.hoverInfo"},data:function(){return{features:!1,hoverable:[],coordinate:"",offset:0,pixel:[0,0]}},computed:{map:function(){return this.$root.$refs.app.$refs.map},catalogue:function(){return this.$root.catalogue},annotations:function(){return this.$root.$refs.app.$refs.annotations},loading:function(){return this.$root.loading},featuresLength:function(){return Object.keys(this.features).length},css:function(){var map=this.$root.map,css={left:this.pixel[0]+this.offset+"px",top:this.pixel[1]+this.offset+"px",bottom:map.height-this.pixel[1]+this.offset+"px",right:map.width-this.pixel[0]+this.offset+"px",display:"none"};return this.pixel[0]<map.width/2?delete css.right:delete css.left,this.pixel[1]<map.height/2?delete css.bottom:delete css.top,this.pixel[0]>0&&this.enabled&&delete css.display,css},enabled:function(){return this.hoverInfo&&"Pan"===this.$root.annotations.tool.name}},methods:{onPointerMove:function(event){var vm=this;if(!event.dragging&&this.enabled&&vm.hoverable&&0!==vm.hoverable.length){var pixel=this.$root.map.olmap.getEventPixel(event.originalEvent),features=[];this.$root.map.olmap.forEachFeatureAtPixel(pixel,function(f,layer){vm.hoverable.indexOf(layer)>=0&&features.push([f,layer])}),features.length>0?(this.features=features,this.coordinate=_vendor.ol.coordinate.toStringXY(this.$root.map.olmap.getCoordinateFromPixel(pixel),3),this.pixel=pixel):(this.pixel.$set(0,0),this.features=!1)}},selected:function(f){return this.$root.annotations.selectedFeatures.getArray().indexOf(f)>-1},featureInfo:function(feature,mapLayer){if(this._feature===feature)return this._featureInfo;var layer=mapLayer?this.catalogue.getLayer(mapLayer.get("id")):null;return layer&&layer.getFeatureInfo?this._featureInfo=layer.getFeatureInfo(feature):this._featureInfo={name:feature.getId(),img:!1,svg:!1,icon:!1,comments:!1},this._feature=feature,this._featureInfo}},ready:function(){var vm=this,infoStatus=vm.loading.register("info","Info Component");infoStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){infoStatus.phaseEnd("gk-init"),infoStatus.phaseBegin("initialize",20,"Initialize",!0,!1),this.$root.map.olmap.on("pointermove",this.onPointerMove),infoStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div id="info" v-bind:style="css" v-show="features" v-cloak="">\n  \x3c!--div class="row collapse">\n    <div class="columns title">\n      <h5>{{ featuresLength }} {{ featuresLength | pluralize \'feature\' }} <small>{{ coordinate }}</small></h5>\n    </div>\n    <button class="close-button float-right" aria-label="Dismiss info" type="button" v-on:click="features = false"><span aria-hidden="true">&times;</span></button>\n  </div--\x3e\n  <div class="row">\n    <div class="columns content">\n      <div v-for="f in features" class="row feature-row" v-bind:class="{\'feature-selected\': selected(f[0]) }" v-bind:key="f[0].get(\'id\')">\n        <div class="feature-title">\n          <img v-if="featureInfo(f[0],f[1]).img" class="feature-icon" v-bind:src="featureInfo(f[0],f[1]).img">\n          <svg v-if="featureInfo(f[0],f[1]).svg" class="feature-icon"><use v-bind="{\'xlink:href\':featureInfo(f[0],f[1]).svg}"></use></svg>\n          <i v-if="featureInfo(f[0],f[1]).icon" class="feature-icon" v-bind:class="featureInfo(f[0],f[1]).icon" aria-hidden="true"></i>\n          {{featureInfo(f[0],f[1]).name}} <i v-if="featureInfo(f[0],f[1]).comments"><small>{{{featureInfo(f[0],f[1]).comments}}}</small></i>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.feature-icon {\n  width: 24px;\n  height: 24px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-38324617",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-38324617",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],154:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _active=require("./layers/active.vue"),_active2=_interopRequireDefault(_active),_catalogue=require("./layers/catalogue.vue"),_catalogue2=_interopRequireDefault(_catalogue),_export=require("./layers/export.vue"),_export2=_interopRequireDefault(_export);exports.default={store:{activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},data:function(){return{menu:null}},components:{gkActive:_active2.default,gkCatalogue:_catalogue2.default,gkExport:_export2.default},computed:{info:function(){return this.$root.info}},methods:{setup:function(){this.$root.annotations.setTool(),this.switchMenu(this.menu)},teardown:function(){this.activeSubmenu&&this.$root[this.activeSubmenu].teardown&&this.$root[activeSubmenu].teardown()},switchMenu:function(menu){menu=menu||"active",this.activeSubmenu!==menu&&(this.activeSubmenu||menu)&&(this.activeSubmenu&&this.$root[this.activeSubmenu].teardown&&this.$root[this.activeSubmenu].teardown(),this.activeSubmenu=menu,this.activeSubmenu&&this.$root[this.activeSubmenu].setup&&this.$root[this.activeSubmenu].setup(),this.menu=menu)}},ready:function(){var vm=this;$("#layers-tabs").on("change.zf.tabs",function(target,selectedTab){var menu=selectedTab.attr("menu");vm.info.hoverable.splice(0,vm.info.hoverable.length),vm.switchMenu(menu),vm.$root.menuChanged()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel is-active" id="menu-tab-layers">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" data-tabs="" id="layers-tabs">\n        <li class="tabs-title is-active" menu="active"><a href="#layers-active" aria-selected="true">Active</a></li>\n        <li class="tabs-title" menu="catalogue"><a href="#layers-catalogue">Browse Layers</a></li>\n        <li class="tabs-title" menu="export"><a href="#layers-export">Save &amp; Print</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="layers-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="layers-tabs">\n        <gk-active v-ref:active=""></gk-active>\n        <gk-catalogue v-ref:catalogue=""></gk-catalogue>\n        <gk-export v-ref:export=""></gk-export>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-62931c6b",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-62931c6b",module.exports))}()},{"./layers/active.vue":155,"./layers/catalogue.vue":156,"./layers/export.vue":157,vue:142,"vue-hot-reload-api":141}],155:[function(require,module,exports){(function(global){(function(){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},data:function(){return{sliderOpacity:0,layer:{},layerRefreshStopped:!1,refreshRevision:1,allMapLayers:[],timeIndex:0}},computed:{map:function(){return this.$root.map},sliderTimeline:{get:function(){var mapLayer=this.mapLayer();return this.timeIndex=mapLayer?mapLayer.get("timeIndex")||0:0,this.timeIndex},set:function(val){this.mapLayer().set("timeIndex",val),this.refreshRevision+=1,this.timeIndex=val}},olLayers:function(){for(var layers=[],index=this.allMapLayers.length-1;index>=0;index--)!0!==this.allMapLayers[index].dependentLayer&&layers.push(this.allMapLayers[index]);return layers},timelineTS:function(){var mapLayer=this.mapLayer();try{return this.refreshRevision&&this.layer.timeline[mapLayer?mapLayer.get("timeIndex")||0:0][0]}catch(ex){return this.refreshRevision&&""}},sliderMax:function(){return this.layer.timeline.length-1},layerOpacity:{get:function(){return Math.round(100*this.mapLayer().getOpacity())},set:function(val){this.mapLayer().setOpacity(val/100)}},layerRefreshInterval:{get:function(){return this.refreshRevision&&this.layer.refresh},set:function(val){var vm=this;this.refreshRevision+=1,vm.map.setRefreshInterval(vm.layer,val),vm.layerRefreshStopped||(vm.layer.changeRefreshInterval=vm.layer.changeRefreshInterval||global.debounce(function(){vm.mapLayer().stopAutoRefresh(),vm.mapLayer().startAutoRefresh()},5e3),vm.layer.changeRefreshInterval())}},formattedLayerRefreshInterval:function(){if(this.layerRefreshStopped)return this.refreshRevision&&"Stopped";var format="H\\hm\\ms\\s";return this.layer.refresh<60?format="s\\s":this.layer.refresh<3600&&(format="m\\ms\\s"),this.refreshRevision&&(0,_vendor.moment)(new Date(1e3*this.layer.refresh)).utc().format(format)}},watch:{layer:function(){this.layer&&(this.layerRefreshStopped=!this.layer.refresh||(this.layer.autoRefreshStopped||!1))}},methods:{adjustHeight:function(){if("layers"===this.activeMenu&&"active"===this.activeSubmenu){var height=this.screenHeight-this.leftPanelHeadHeight-180;height>65?($("#layers-active-list-container").height(height),$("#layer-config-container").height()<180&&$("#layer-config-container").height(180)):height<=-30?($("#layers-active-list-container").height(this.screenHeight-this.leftPanelHeadHeight),$("#layer-config-container").height(0)):($("#layers-active-list-container").height(65),$("#layer-config-container").height(this.screenHeight-this.leftPanelHeadHeight-65))}},setup:function(){this.adjustHeight()},isHidden:function(layer){return layer?0===layer.getOpacity():void 0},toggleHidden:function(layer){this.isHidden(layer)?layer.setOpacity(1):layer.setOpacity(0)},stopLayerRefresh:function(){this.mapLayer().stopAutoRefresh(),this.layer.autoRefreshStopped=!0,this.layerRefreshStopped=!0},startLayerRefresh:function(){this.mapLayer().startAutoRefresh(),this.layer.autoRefreshStopped=!1,this.layerRefreshStopped=!1},layerRefreshConfigable:function(id){var layer=id?this.getLayer(id):this.layer;return!(!layer||!this.mapLayer(layer)||"WFSLayer"!==layer.type&&"TileLayer"!==layer.type||!layer.refresh)},layerRefreshIntervalConfigable:function(id){var layer=id?this.getLayer(id):this.layer;return!("WFSLayer"!==layer.type&&"TileLayer"!==layer.type||!layer.refresh||!layer.min_interval||!layer.max_interval)},layerRefreshProgress:function(l){return this.refreshRevision&&(l.progress||"")},layerRefreshStatus:function(l){return this.refreshRevision&&l&&l.get("updated")||""},activeLayers:function(){var catalogue=this.$root.catalogue,results=[];return!!this.olLayers.every(function(layer){if(!catalogue.getLayer(layer))return!1;var options={id:layer.get("id"),opacity:layer.getOpacity()};return results.push([layer.get("id"),options]),!0})&&results},mapLayer:function(id){return console.log("MAPLAYER"),console.log(id),this.$root.map?this.$root.map.getMapLayer(id||this.layer):null},getLayer:function(id){return this.$root.catalogue.getLayer(id)},removeLayer:function(olLayer){var layer=olLayer.layer;this.layer===layer&&(this.layer={}),this.map.olmap.removeLayer(olLayer),this.map.olmap.dispatchEvent(this.map.createEvent(this.map,"removeLayer",{mapLayer:olLayer,layer:layer}))},updateOrder:function(el){var map=this.$root.map;Array.prototype.slice.call(el.parentNode.children).reverse().forEach(function(row){var mapLayer=map.getMapLayer(row.dataset.id);map.olmap.removeLayer(mapLayer),map.olmap.addLayer(mapLayer),map.olmap.dispatchEvent(map.createEvent(map,"changeLayerOrder",{mapLayer:mapLayer}))})}},ready:function(){(0,_vendor.dragula)([document.querySelector("#layers-active-list")]).on("drop",this.updateOrder),this.$on("gk-init",function(){this.allMapLayers=this.$root.map.olmap.getLayers().getArray()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel is-active" id="layers-active" v-cloak="">\n\n  <div class="layers-flexibleframe scroller row" id="layers-active-list-container">\n    <div class="columns">\n\n      <div id="layers-active-list">\n        <div v-for="l in olLayers" track-by="values_.id" class="row feature-row status-row" v-bind:class="layerRefreshProgress(l)" data-id="{{ l.get(\'id\') }}" @click="layer = getLayer(l.get(\'id\'))">\n          <div class="small-9">\n            <div class="layer-title">{{ l.get("name") || l.get("id") }} - {{ Math.round(l.getOpacity() * 100) }}%</div>\n            <small v-if="layerRefreshStatus(l)" style="white-space:pre-wrap">Updated: {{ layerRefreshStatus(l) }}</small>\n          </div>\n          <div class="small-3">\n            <div class="text-right">\n              <a @click.stop="toggleHidden(l)" class="button small icon2x" v-bind:class="{success:!isHidden(l),warning:isHidden(l)}" v-bind:title="isHidden(l)?\'Show in map\':\'Hide in map\'">\n                  <i class="fa fa-eye-slash fa-2x" v-if="isHidden(l)"> </i>\n                  <i class="fa fa-eye fa-2x" v-if="!isHidden(l)"> </i>\n              </a>\n              <a @click="removeLayer(l)" class="button small icon2x alert remove-layer" title="Remove from map">\n                  <i class="fa fa-close fa-2x"> </i>\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="row collapse scroller" id="layer-config-container">\n    <hr class="small-12">\n    <div id="layer-config" class="columns">\n      <h4 v-if="layer &amp;&amp; mapLayer()">{{ layer.name }}</h4>\n      <div class="tool-slice row" v-if="layerRefreshConfigable()">\n        <div class="columns small-3"><label class="tool-label">Refresh:<br>{{ formattedLayerRefreshInterval }}</label></div>\n        <div class="columns small-8">\n          <input class="layer-opacity" v-if="layerRefreshIntervalConfigable()" type="range" v-bind:min="layer.min_interval" v-bind:max="layer.max_interval" v-bind:step="layer.interval_step || 1" v-model="layerRefreshInterval">\n        </div>\n        <div class="columns small-1">\n          <a title="Stop auto refresh" v-if="!layerRefreshStopped" class="button tiny secondary float-right" @click="stopLayerRefresh()"><i class="fa fa-stop"></i></a>\n          <a title="Start auto refresh" v-if="layerRefreshStopped" class="button tiny secondary float-right" @click="startLayerRefresh()"><i class="fa fa-play"></i></a>\n        </div>\n      </div>\n      <div class="tool-slice row" v-if="layer &amp;&amp; mapLayer()">\n        <div class="columns small-3"><label class="tool-label">Transparency:<br>{{ layerOpacity }}%</label></div>\n        <div class="columns small-9"><input class="layer-opacity" type="range" min="0" max="100" step="1" v-model="layerOpacity"></div>\n      </div>\n      <div class="tool-slice row" v-if="layer.timeline &amp;&amp; mapLayer()">\n        <div class="columns small-3"><label class="tool-label">Timeline:</label></div>\n        <div class="columns small-9"><input type="range" v-bind:disabled="sliderMax < 0" v-bind:max="sliderMax" min="0" step="1" v-model="sliderTimeline" title="{{layer.timeline.length}} layers"></div>\n        <div class="columns small-12"><label class="tool-label">{{ timelineTS }}</label></div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-3878fa4c",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-3878fa4c",module.exports))}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141}],156:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.short.button {\n    margin: 0px;\n}\n\n/* hide preview on tablets and mobile */\n@media screen and (max-width: 60em) {\n    .ol-previewmap {\n        display: none;\n    }\n}\n\n.ol-previewmap {\n    width: 424px;\n    height: 100vh;\n    z-index: 1;\n}\n\n.ol-previewmap .ol-overviewmap-map {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    margin: 0px;\n}\n\ndiv.ol-previewmap.ol-uncollapsible {\n  background-color: rgba(51, 61, 70, 0.9);\n}\n\n.ol-previewmap .ol-overviewmap-map .ol-overviewmap-box {\n    display: none;\n}\n\n.cat-legend {\n    max-height: 50vh;\n}\n\n#cat-loading {\n    padding: 0.5em;\n    font-style: italic;\n    text-align: center;\n}\n\n.layerdetails {\n    position: absolute;\n    background-color: rgba(39,48,55,0.7);\n    width: 100%;\n    padding-bottom: 0.5em;\n}\n\n.layerdetails p {\n    white-space: pre-wrap;\n    font-size: 12px;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");_vendor.Vue.filter("lessThan",function(value,length){return value.length<length}),exports.default={store:{catalogueFilters:"catalogueFilters",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu",whoami:"whoami"},data:function(){return{layer:{},catalogue:new _vendor.ol.Collection,swapBaseLayers:!0,search:"",searchAttrs:["name","id","tags"],overview:!1,layerDetails:!1}},computed:{map:function(){return this.$root.$refs.app.$refs.map},app:function(){return this.$root.app},env:function(){return this.$root.env},utils:function(){return this.$root.utils},loading:function(){return this.$root.loading}},watch:{search:function(newValue,oldvalue){this.adjustHeight()}},methods:{editable:function(layer){return layer.systemid&&this.whoami.editLayer},adjustHeight:function(){"layers"===this.activeMenu&&"catalogue"===this.activeSubmenu&&(0,_vendor.$)("#catalogue-list-container").height(this.screenHeight-this.leftPanelHeadHeight-(0,_vendor.$)("#catalogue-filter-container").height())},setup:function(){this.adjustHeight()},preview:function(l){if(this.layer!==l){if(this.layer.preview&&this.layer.preview.setMap(null),!l)return void(this.layer={});l.preview||(l.preview=new _vendor.ol.control.OverviewMap({className:"ol-overviewmap ol-previewmap",layers:[this.$root.map["create"+l.type](_vendor.$.extend({},l,{refresh:0,previewLayer:!0}))],collapsed:!1,collapsible:!1,min_ratio:1,max_ratio:1,view:new _vendor.ol.View({projection:"EPSG:4326"})})),l.preview.setMap(this.$root.map.olmap);var previewEl=(0,_vendor.$)(l.preview.getOverviewMap().getViewport());this.layer=l,!previewEl.find(".layerdetails").length>0&&this.$nextTick(function(){previewEl.prepend(this.$els.layerdetails.innerHTML)})}},toggleAll:function(checked,event){(0,_vendor.$)(this.$el).find("input.ctlgsw").attr("checked",!checked).trigger("click")},onToggle:function(index){(0,_vendor.$)(this.$el).find("#ctlgsw"+index).trigger("click")},onLayerChange:function(layer,checked){var vm=this,active=this.$root.active,map=this.$root.map;if(checked===(void 0!==map.getMapLayer(layer)))return!1;if(checked){var olLayer=map["create"+layer.type](layer);olLayer.setOpacity(layer.opacity||1),layer.base?(this.swapBaseLayers&&active.olLayers.forEach(function(mapLayer){mapLayer.get("dependentLayer")||vm.getLayer(mapLayer).base&&active.removeLayer(mapLayer)}),map.olmap.getLayers().insertAt(0,olLayer)):map.olmap.addLayer(olLayer),this.map.olmap.dispatchEvent(this.map.createEvent(this.map,"addLayer",{mapLayer:olLayer}))}else active.removeLayer(map.getMapLayer(layer));return!0},loadRemoteCatalogue:function(callback,failedCallback){var vm=this,req=new window.XMLHttpRequest;req.withCredentials=!0,req.onload=function(){var checkingLayer=null,layers=[];JSON.parse(this.responseText).forEach(function(l){i=0,vm.getLayer(l.identifier)&&(vm.catalogue.remove(vm.getLayer(l.identifier)),i+=1),l.systemid=l.id,l.id=getIndependentLayerId(l.identifier),l.base=l.tags.some(function(t){return"basemap"===t.name}),l.tags.some(function(t){return"overlaymap"===t.name})&&(l.opacity=.5),l.tags.some(function(t){return"livemap_10min"===t.name})&&(l.refresh=600),l.tags.some(function(t){return"livemap_2min"===t.name})&&(l.refresh=120),checkingLayer||(checkingLayer=l),layers.push(l)}),checkingLayer?_vendor.utils.checkPermission(vm.env.catalogueAdminService+"/admin/catalogue/record/"+checkingLayer.systemid+"/change/","GET",function(allowed){vm.whoami.editLayer=allowed,vm.catalogue.extend(layers),callback()}):(vm.whoami.editLayer=!1,vm.catalogue.extend(layers),callback())},req.onerror=function(ev){var msg="Couldn't load layer catalogue!"+(req.statusText?" ("+req.statusText+")":"");failedCallback?failedCallback(msg):console.error(msg)},req.open("GET",vm.env.cswService+"?format=json&application__name="+getAppId(this.app.toLowerCase())),req.send()},getLayer:function(id){return id&&id.get&&(id=id.get("id")),this.catalogue.getArray().find(function(layer){return layer.mapLayerId===id})},getMapLayer:function(id){return this.$root.map.getMapLayer(id)}},ready:function(){var vm=this,catalogueStatus=vm.loading.register("catalogue","Catalogue Component");this.catalogue.on("add",function(event){var l=event.element;l.id=l.id||l.identifier,l.name=l.name||l.title,l.type=l.type||"TileLayer","TileLayer"===l.type&&(l.legend?l.legend.toLowerCase().startsWith("http")||(l.legend=vm.env.catalogueAdminService+l.legend):l.legend="WFS"===l.service_type?vm.env.legendSrc+getLayerId(l.id):null),l.mapLayerId=l.mapLayerId||l.id,l.dependentLayers&&_vendor.$.each(l.dependentLayers,function(index,layer){layer.mapLayerId=layer.mapLayerId||layer.id}),l.refresh&&vm.map.setRefreshInterval(l,l.refresh)}),catalogueStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){catalogueStatus.phaseEnd("gk-init"),catalogueStatus.phaseBegin("initialize",20,"Initialize",!0,!1),(0,_vendor.$)(this.$root.map.olmap.getTargetElement()).on("mouseleave",".ol-previewmap",function(){vm.preview(!1)}),catalogueStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),
("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="layers-catalogue" v-cloak="">\n  <div class="row" id="catalogue-filter-container">\n    <div class="columns">\n      <div class="row collapse">\n        <div class="small-6 columns">\n          <select name="select" v-model="search">\n            <option value="" selected="">All layers</option> \n            <option v-for="filter in catalogueFilters" v-bind:value="filter[0]">{{ filter[1] }}</option>\n            <option v-bind:value="search">Custom search</option>\n          </select>\n        </div>\n        <div class="small-6 columns">\n          <input id="find-layer" type="search" v-model="search" placeholder="Find a layer">\n        </div>\n      </div>\n      <div v-show="search.length > 0 &amp;&amp; search !== \'basemap\'" class="row">\n        <div class="columns text-right">\n          <label for="switchBaseLayers" class="side-label">Toggle all</label>\n        </div>\n        <div class="small-2 text-right">\n          <div class="switch tiny" title="Toggle all filtered layers">\n            <input class="switch-input" title="Toggle all filtered layers" id="ctlgswall" @change="toggleAll($event.target.checked, $event)" type="checkbox">\n            <label class="switch-paddle" for="ctlgswall">\n              <span class="show-for-sr">Toggle all</span>\n            </label>\n          </div>\n        </div>\n      </div>\n      <div class="row" v-show="search === \'basemap\'">\n        <div class="switch tiny">\n          <input class="switch-input" id="switchBaseLayers" type="checkbox" v-model="swapBaseLayers">\n          <label class="switch-paddle" for="switchBaseLayers">\n            <span class="show-for-sr">Switch out base layers</span>\n          </label>\n        </div>\n        <label for="switchBaseLayers" class="side-label">Switch out base layers automatically</label>\n      </div>\n    </div>\n  </div>\n  <div class="layers-flexibleframe scroller row collapse" id="catalogue-list-container">\n    <div class="columns">\n      <div id="layers-catalogue-list">\n        <div v-for="l in catalogue.getArray() | filterBy search in searchAttrs | orderBy \'name\'" class="row layer-row" @mouseover="preview(l)" track-by="mapLayerId" @mouseleave="preview(false)" style="margin-left:0px;margin-right:0px">\n          <div class="small-10">\n            <a v-if="editable(l)" @click.stop.prevent="utils.editResource($event)" title="Edit catalogue entry" href="{{env.catalogueAdminService}}/admin/catalogue/record/{{l.systemid}}/change/" target="{{env.catalogueAdminService}}" class="button tiny secondary float-right short"><i class="fa fa-pencil"></i></a>\n            <div class="layer-title">{{ l.name || l.id }}</div>\n          </div>\n          <div class="small-2">\n            <div class="text-right">\n              <div class="switch tiny" @click.stop="" v-bind:title="getMapLayer(l) === undefined?\'Add to map\':\'Remove from map\'">\n                <input class="switch-input ctlgsw" id="ctlgsw{{ $index }}" @change="onLayerChange(l, $event.target.checked)" v-bind:checked="getMapLayer(l) !== undefined" type="checkbox">\n                <label class="switch-paddle" for="ctlgsw{{ $index }}">\n                  <span class="show-for-sr">Toggle layer</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div v-el:layerdetails="" class="hide">\n        <div class="layerdetails row">\n          <div class="columns small-12">\n            <h5>{{ layer.name }}</h5>\n            <img v-if="layer.legend" v-bind:src="layer.legend" class="cat-legend">\n            <p>{{ layer.abstract }}</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.short.button {\n    margin: 0px;\n}\n\n/* hide preview on tablets and mobile */\n@media screen and (max-width: 60em) {\n    .ol-previewmap {\n        display: none;\n    }\n}\n\n.ol-previewmap {\n    width: 424px;\n    height: 100vh;\n    z-index: 1;\n}\n\n.ol-previewmap .ol-overviewmap-map {\n    width: 100%;\n    height: 100%;\n    border: 0px;\n    margin: 0px;\n}\n\ndiv.ol-previewmap.ol-uncollapsible {\n  background-color: rgba(51, 61, 70, 0.9);\n}\n\n.ol-previewmap .ol-overviewmap-map .ol-overviewmap-box {\n    display: none;\n}\n\n.cat-legend {\n    max-height: 50vh;\n}\n\n#cat-loading {\n    padding: 0.5em;\n    font-style: italic;\n    text-align: center;\n}\n\n.layerdetails {\n    position: absolute;\n    background-color: rgba(39,48,55,0.7);\n    width: 100%;\n    padding-bottom: 0.5em;\n}\n\n.layerdetails p {\n    white-space: pre-wrap;\n    font-size: 12px;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-50e4a4c5",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-50e4a4c5",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],157:[function(require,module,exports){(function(global){(function(){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.datasource {\n    font-size: 18px;\n    font-weight: bold;\n    font-style: italic;\n    background-color: #266f78;\n}\n.convertbutton {\n    padding-left:2px;\n    padding-right:2px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_legend=require("./legend.vue"),_legend2=_interopRequireDefault(_legend),_layerlegends=require("./layerlegends.vue"),_layerlegends2=_interopRequireDefault(_layerlegends);exports.default={store:{whoami:"whoami",dpmm:"dpmm",view:"view",mmPerInch:"mmPerInch",settings:"settings",displayResolution:"displayResolution",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu",screenHeight:"layout.screenHeight",hintsHeight:"layout.hintsHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight"},components:{gkLegend:_legend2.default,gkLayerlegends:_layerlegends2.default},data:function(){return{spatialInfo:{},minDPI:150,paperSizes:{A0:[1189,841],A1:[841,594],A2:[594,420],A3:[420,297],A4:[297,210]},paperSize:"A3",printStatus:{oldLayout:{},layout:{},overviewMap:{},jobs:0},title:"",statefile:"",vectorFormat:"geojson",states:[],vectorFormats:[{format:"geojson",title:"GeoJSON (web GIS)",name:"GeoJSON"},{format:"sqlite",title:"SQLite",name:"SQLite"},{format:"gpkg",title:"GeoPackage",name:"GeoPackage"},{format:"csv",title:"CSV (Spreadsheet/Excel)",name:"CSV"}]}},computed:{loading:function(){return this.$root.loading},env:function(){return this.$root.env},annotations:function(){return this.$root.annotations},utils:function(){return this.$root.utils},layerlegends:function(){return this.$refs.layerlegends},map:function(){return this.$root.map},olmap:function(){return this.$root.map.olmap},shortUrl:{cache:!1,get:function(){if(this.olmap){var lonlat=this.olmap.getView().getCenter();return _vendor.$.param({lon:lonlat[0],lat:lonlat[1],scale:Math.round(1e3*this.$root.map.getScale())})}}},finalTitle:function(){return this.title=this.title.trim(),0==this.title.length?"Quick Print":this.title},bucketKey:function(){return _vendor.hash.MD5({extent:this.printStatus.layout.extent.join(" "),author:this.legendInfo().author,filename:this.finalTitle,time:Date.now()})}},methods:{adjustHeight:function(){"layers"===this.activeMenu&&"export"===this.activeSubmenu&&(0,_vendor.$)("#settings-flexible").height(this.screenHeight-this.leftPanelHeadHeight-16-(0,_vendor.$)("#settings-fixpart").height()-this.hintsHeight)},toggleRetainBoundingbox:function(ev){this.settings.print.retainBoundingbox=!this.settings.print.retainBoundingbox,this.saveState()},toggleSnapToFixedScale:function(ev){this.settings.print.snapToFixedScale=!this.settings.print.snapToFixedScale,this.saveState()},legendInfo:function(){if(!this.$root.map||!this.$root.map.olmap)return{};var result={title:this.finalTitle,author:"Produced by the Department of Parks and Wildlife",date:"Map last amended "+(0,_vendor.moment)().toLocaleString()};return this.$root.map&&(result.km=(Math.round(40*this.$root.map.getScale())/1e3).toLocaleString(),result.scale=this.paperSize+" "+this.$root.scales.scaleString),result},exportVector:function(features,name,format){var name=(name||"")+"."+this.$root.profile.name+"_export_"+(0,_vendor.moment)().format("YYYYMMDD_HHmmss"),result=this.$root.geojson.writeFeatures(features);if("geojson"===(format=format||this.vectorFormat)){var blob=new window.Blob([result],{type:"application/json;charset=utf-8"});(0,_vendor.saveAs)(blob,name+".geojson")}else this.downloadVector(format,{filename:name,datasources:{parameter:"features",default_geometry_type:"auto",default_srs:"EPSG:4326"},features:result,srs:"EPSG:4326"})},getFileFormat:function(filename){return this._fileformats.find(function(f){return filename.substring(filename.length-f[1].length).toLowerCase()===f[1]})},convertFormat:function(format,ev){var file=ev.currentTarget.files.length>0?ev.currentTarget.files[0]:null;if(ev.currentTarget.value=null,file){var fileFormat=this.getFileFormat(file.name);return fileFormat?fileFormat[0]===format?void alert("Target format is the same as source format."):void this.downloadVector(format,{datasources:{parameter:"datafile",default_geometry_type:"auto"},files:{datafile:file},srs:"EPSG:4326"}):void alert("Unsupported file format("+file.name+")")}},downloadVector:function(format,options,callback){var vm=this,formData=new window.FormData,tasks=1,defaultFileName=null;callback||(callback=function(status,msg){msg&&alert(msg)});var sendRequest=function(){if(!(tasks>0))try{var req=new window.XMLHttpRequest;req.open("POST",vm.env.gokartService+"/download/"+format),req.responseType="blob",req.withCredentials=!0,req.onload=function(event){try{if(req.status>=400){var reader=new FileReader;reader.addEventListener("loadend",function(e){callback(!1,e.target.result)}),reader.readAsText(req.response)}else{var filename=null;if(req.getResponseHeader("Content-Disposition")){var matches=vm._filename_re.exec(req.getResponseHeader("Content-Disposition"));filename=matches&&matches[1]?matches[1]:null}filename||(filename=files[0].name.substring(0,files[0].name.length-fileFormat[1].length)+"."+format),filename||(filename="download."+format),(0,_vendor.saveAs)(req.response,filename),callback(!0)}}catch(ex){callback(!1,ex.message||ex)}},req.send(formData)}catch(ex){callback(!1,ex.message||ex)}};try{_vendor.$.each(options,function(key,value){"layers"===key?formData.append("layers",JSON.stringify(options.layers)):"datasources"===key?formData.append("datasources",JSON.stringify(options.datasources)):"files"===key?_vendor.$.each(value,function(name,file){tasks+=1;var fileFormat=vm.getFileFormat(file.name);if(!fileFormat)throw"Unsupported file format("+file.name+")";defaultFileName||(defaultFileName=file.name.substring(0,file.name.length-fileFormat[1].length)+"."+format);var reader=new window.FileReader;reader.onload=function(){var parameter=name,fmt=fileFormat[2],filename=file.name;return function(e){formData.append(parameter,new window.Blob([e.target.result],{type:fmt}),filename),tasks-=1,sendRequest()}}(),reader.readAsArrayBuffer(file)}):formData.append(key,value)}),tasks-=1,sendRequest()}catch(ex){callback(!1,ex.message||ex)}},getSpatialInfo:function(){var file=this.$els.spatialinfofile.files.length>0?this.$els.spatialinfofile.files[0]:null;if(this.$els.spatialinfofile.value=null,file){var fileFormat=this.getFileFormat(file.name);if(!fileFormat)return void alert("Unsupported file format("+file.name+")");var vm=this,reader=new window.FileReader;reader.onload=function(e){try{var formData=new window.FormData;formData.append("datasource",new window.Blob([e.target.result],{type:fileFormat[2]}),file.name);var req=new window.XMLHttpRequest;req.open("POST",vm.env.gokartService+"/ogrinfo"),req.responseType="blob",req.withCredentials=!0,req.onload=function(event){try{if(req.status>=400){var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){alert(e.target.result)}),delete vm._importData}else{var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){if(!e.target.result)return void alert("No spatial data");var spatialInfo=JSON.parse(e.target.result);if(!spatialInfo||!spatialInfo.layerCount)return void alert("No spatial data");vm.spatialInfo=spatialInfo,vm.spatialInfo.title=file.name,vm.spatialInfo.upload=!1,(0,_vendor.$)("#spatialInfoDialog").foundation("open")})}}catch(ex){alert(ex.message||ex)}},req.send(formData)}catch(ex){alert(ex.message||ex)}},reader.readAsArrayBuffer(file)}},importVector:function(file,callback,failedCallback){var vm=this,fileFormat=this.getFileFormat(file.name);if(!fileFormat){var msg="Unsupported file format("+file.name+")";return void(failedCallback?failedCallback(msg):alert(msg))}try{if("geojson"===fileFormat[0]||"json"===fileFormat[0]){var reader=new window.FileReader;reader.onload=function(e){try{var features=(new ol.format.GeoJSON).readFeatures(e.target.result,{dataProjection:"EPSG:4326"});features&&features.length&&callback(features,fileFormat[0])}catch(ex){failedCallback&&failedCallback(ex.message||ex)}},reader.readAsText(file)}else{var reader=new window.FileReader;reader.onload=function(e){try{vm._importData={formData:new window.FormData,callback:callback,failedCallback:failedCallback},vm._importData.formData.append("datasource",new window.Blob([e.target.result],{type:fileFormat[2]}),file.name);var req=new window.XMLHttpRequest;req.open("POST",vm.env.gokartService+"/ogrinfo"),req.responseType="blob",req.withCredentials=!0,req.onload=function(event){try{if(req.status>=400){var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){failedCallback?failedCallback(e.target.result):alert(e.target.result)}),delete vm._importData}else{var reader=new FileReader;reader.readAsText(req.response),reader.addEventListener("loadend",function(e){if(!e.target.result)return void(failedCallback&&failedCallback("No spatial data"));var spatialInfo=JSON.parse(e.target.result);if(!spatialInfo||!spatialInfo.layerCount)return void callback([],"geojson");1===spatialInfo.layerCount?vm.importLayer(spatialInfo.datasources[0].datasource,spatialInfo.datasources[0].layers[0],!0):(vm.spatialInfo=spatialInfo,vm.spatialInfo.title="Please choose the layer to import",vm.spatialInfo.upload=!0,(0,_vendor.$)("#spatialInfoDialog").foundation("open"))})}}catch(ex){failedCallback?failedCallback(ex.message||ex):alert(ex.message||ex)}},req.send(vm._importData.formData)}catch(ex){failedCallback&&failedCallback(ex.message||ex)}},reader.readAsArrayBuffer(file)}}catch(ex){failedCallback&&failedCallback(ex.message||ex)}},importLayer:function(datasource,selectedLayer,autoChoose){try{if(!this._importData)return void alert("Import data is missing.");if(fileFormat=this.getFileFormat(datasource),!fileFormat){var msg="Unsupported file format("+datasource+")";return void(this._importData.failedCallback?this._importData.failedCallback(msg):alert(msg))}if(!selectedLayer){var msg="Please choose import layer.";return void(this._importData.failedCallback?this._importData.failedCallback(msg):alert(msg))}if(selectedLayer.featureCount<=0)return void this._importData.callback([],"geojson");var vm=this,importData=vm._importData,layers={default_geometry_type:"POINT",layer:selectedLayer.layer,srs:"EPSG:4326",sourcelayers:{parameter:"datasource",datasource:datasource,layer:selectedLayer.layer}};this._importData.formData.append("layers",JSON.stringify(layers));var req=new window.XMLHttpRequest;req.open("POST",this.env.gokartService+"/download/geojson"),req.responseType="text",req.withCredentials=!0,req.onload=function(event){try{if(req.status>=400)importData.failedCallback?importData.failedCallback(req.response):alert(req.response);else{var features=(new ol.format.GeoJSON).readFeatures(req.response,{dataProjection:"EPSG:4326"});features&&features.length&&importData.callback(features,fileFormat[0])}}catch(ex){importData.failedCallback?importData.failedCallback(ex.message||ex):alert(ex.message||ex)}},req.send(this._importData.formData)}catch(ex){importData.failedCallback?importData.failedCallback(ex.message||ex):alert(ex.message||ex)}finally{this._importData&&delete this._importData,autoChoose||(0,_vendor.$)("#spatialInfoDialog").foundation("close")}},prepareMapForPrinting:function(){var vm=this;(0,_vendor.$)("body").css("cursor","progress"),this.printStatus.jobs<=0&&(this.printStatus.overviewMap.enabled=this.map.isControlEnabled("overviewMap"),this.printStatus.overviewMap.collapsed=this.map.getControl("overviewMap").getCollapsed(),this.printStatus.overviewMap.collapsed&&this.map.getControl("overviewMap").setCollapsed(!1),this.printStatus.overviewMap.enabled||this.map.enableControl("overviewMap",!0),this.printStatus.oldLayout.size=this.olmap.getSize(),this.printStatus.oldLayout.scale=this.$root.map.getScale(),this.printStatus.oldLayout.extent=this.olmap.getView().calculateExtent(this.olmap.getSize()),this.printStatus.dpmm=this.minDPI/this.mmPerInch,this.printStatus.interactions=this.olmap.getInteractions().getArray().slice(0),_vendor.$.each(this.printStatus.interactions,function(index,interact){vm.olmap.removeInteraction(interact)}),this.printStatus.controls=[],_vendor.$.each(this.map.mapControls,function(key,control){"overviewMap"!==key&&control.enabled&&(vm.printStatus.controls.push(key),vm.map.enableControl(key,!1))}),this.printStatus.startTime=new Date),this.printStatus.layout.width=this.paperSizes[this.paperSize][0],this.printStatus.layout.height=this.paperSizes[this.paperSize][1],this.settings.print.retainBoundingbox?(this.printStatus.layout.size=[this.printStatus.dpmm*this.printStatus.layout.width,this.printStatus.dpmm*this.printStatus.layout.height],this.olmap.setSize(this.printStatus.layout.size),this.olmap.getView().fit(this.printStatus.oldLayout.extent,this.olmap.getSize()),this.printStatus.layout.scale=this.settings.print.snapToFixedScale?this.$root.map.getFixedScale():this.$root.map.getScale(),this.settings.print.snapToFixedScale&&this.$root.map.setScale(this.printStatus.layout.scale)):(this.printStatus.layout.scale=this.settings.print.snapToFixedScale?this.$root.map.getFixedScale(this.printStatus.oldLayout.scale):this.printStatus.oldLayout.scale,this.printStatus.layout.size=[this.printStatus.dpmm*this.printStatus.layout.width,this.printStatus.dpmm*this.printStatus.layout.height],this.olmap.setSize(this.printStatus.layout.size),this.settings.print.snapToFixedScale&&this.$root.map.setScale(this.printStatus.layout.scale)),this.printStatus.layout.extent=this.olmap.getView().calculateExtent(this.olmap.getSize()),this.printStatus.jobs=this.printStatus.jobs>=0?this.printStatus.jobs+1:1},restoreMapFromPrinting:function(){var vm=this;this.printStatus.jobs-=1,this.printStatus.jobs<=0&&(this.printStatus.overviewMap.collapsed&&this.map.getControl("overviewMap").setCollapsed(!0),this.printStatus.overviewMap.enabled||this.map.enableControl("overviewMap",!1),this.olmap.setSize(this.printStatus.oldLayout.size),this.$root.map.setScale(this.printStatus.oldLayout.scale),_vendor.$.each(this.printStatus.interactions,function(index,interact){vm.olmap.addInteraction(interact)}),_vendor.$.each(this.printStatus.controls,function(index,controlKey){vm.map.enableControl(controlKey,!0)}),this.printStatus.endTime=new Date,(0,_vendor.$)("body").css("cursor","default"))},renderLegend:function(bucketKey){var qrcanvas=bucketKey?(0,_vendor.kjua)({text:this.env.s3Service+bucketKey,render:"canvas",size:100}):null;return["data:image/svg+xml;utf8,"+encodeURIComponent(this.$els.legendsvg.innerHTML),qrcanvas]},blobGDAL:function(blob,name,format,bucketKey){var vm=this,_func=function(legendData){var formData=new window.FormData;formData.append("extent",vm.printStatus.layout.extent.join(" ")),formData.append("jpg",blob,name+".jpg"),"pdf"===format&&legendData&&formData.append("legends",legendData,name+".legend.pdf"),formData.append("dpi",Math.round(25.4*vm.printStatus.layout.canvasPxPerMM)),formData.append("title",vm.finalTitle),formData.append("author",vm.legendInfo().author),bucketKey&&formData.append("bucket_key",bucketKey);var req=new window.XMLHttpRequest;req.open("POST",vm.env.gokartService+"/gdal/"+format),req.withCredentials=!0,req.responseType="blob",req.onload=function(event){(0,_vendor.saveAs)(req.response,name+"."+format)},req.send(formData)};"pdf"===format?vm.layerlegends.getLegendBlob(!0,!0,function(legendData){_func(legendData)}):_func()},print:function(format){this.prepareMapForPrinting();var timer,vm=this,whiteout=vm.olmap.on("precompose",function(event){var canvas=event.context.canvas,ctx=canvas.getContext("2d");ctx.beginPath(),ctx.rect(0,0,canvas.width,canvas.height),ctx.fillStyle="white",ctx.fill()}),mainmap_composing=null,overviewmap_composing=null,canvas=null,overviewmap_canvas=null,postcomposeFunc=function(){timer&&clearTimeout(timer),timer=setTimeout(function(){vm.olmap.unByKey(whiteout),vm.olmap.unByKey(mainmap_composing),vm.map.getControl("overviewMap").getOverviewMap().unByKey(overviewmap_composing);var ctx=canvas.getContext("2d"),img=new window.Image,bucketKey="jpg"!==format?vm.bucketKey:null,legend=vm.renderLegend("pdf"===format?bucketKey:null),url=legend[0],qrcanvas=legend[1];img.onerror=function(err){window.alert(JSON.stringify(err)),vm.restoreMapFromPrinting()},img.onload=function(){ctx.drawImage(overviewmap_canvas,canvas.width-overviewmap_canvas.width-2,2,overviewmap_canvas.width,overviewmap_canvas.height);var box=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overviewmap-box");if(box.length){var width=box.width()*vm.displayResolution[0],height=box.height()*vm.displayResolution[1],x=box.parent().position().left*vm.displayResolution[0],y=box.parent().position().top*vm.displayResolution[1];ctx.beginPath(),ctx.rect(canvas.width-overviewmap_canvas.width-2+x,2+y,width,height),ctx.strokeStyle="red",ctx.lineWidth=2,ctx.stroke()}ctx.beginPath(),ctx.rect(canvas.width-overviewmap_canvas.width-4,0,overviewmap_canvas.width+4,overviewmap_canvas.height+4),ctx.strokeStyle="black",ctx.lineWidth=2,ctx.stroke(),vm.printStatus.layout.canvasPxPerMM=canvas.width/vm.printStatus.layout.width;var height=120*vm.printStatus.layout.canvasPxPerMM*img.height/img.width;ctx.drawImage(img,0,0,120*vm.printStatus.layout.canvasPxPerMM,height);var disclaimerImg=(0,_vendor.$)("#map-disclaimer").get(0);height=disclaimerImg.height,ctx.drawImage(disclaimerImg,canvas.width-disclaimerImg.width,canvas.height-height,disclaimerImg.width,height),qrcanvas&&ctx.drawImage(qrcanvas,2,canvas.height-qrcanvas.height-2),window.URL.revokeObjectURL(url);var filename=vm.finalTitle.replace(/ +/g,"_");canvas.toBlob(function(blob){vm.restoreMapFromPrinting(),"jpg"===format?(0,_vendor.saveAs)(blob,filename+".jpg"):vm.blobGDAL(blob,filename,format,bucketKey)},"image/jpeg",.9)},img.src=url},5e3)};mainmap_composing=vm.olmap.on("postcompose",function(event){canvas=event.context.canvas,overviewmap_composing||(overviewmap_composing=vm.map.getControl("overviewMap").getOverviewMap().on("postcompose",function(event){overviewmap_canvas=event.context.canvas,postcomposeFunc()}),vm.map.getControl("overviewMap").getOverviewMap().renderSync())}),vm.olmap.renderSync()},download:function(key){key?_vendor.localforage.getItem("sssStateStore").then(function(store){if(key in store){var blob=new window.Blob([JSON.stringify(store[key],null,2)],{type:"application/json;charset=utf-8"});(0,_vendor.saveAs)(blob,key+".sss")}}):_vendor.localforage.getItem("sssOfflineStore").then(function(store){var blob=new window.Blob([JSON.stringify(store,null,2)],{type:"application/json;charset=utf-8"});(0,_vendor.saveAs)(blob,"sss_view_"+(0,_vendor.moment)().format("YYYY-MM-DD-HHmm")+".sss")})},open:function(key){_vendor.localforage.getItem("sssStateStore").then(function(store){key in store&&_vendor.localforage.setItem("sssOfflineStore",store[key]).then(function(v){document.location.reload()})})},remove:function(key){var vm=this;_vendor.localforage.getItem("sssStateStore").then(function(store){key in store&&(delete store[key],vm.states=Object.keys(store),_vendor.localforage.setItem("sssStateStore",store))})},load:function(){var vm=this,reader=new window.FileReader;if(this.$els.statefile.files.length>0){var key=this.$els.statefile.files[0].name.split(".",1)[0];reader.onload=function(e){_vendor.localforage.getItem("sssStateStore",function(err,value){var store={};value&&(store=value),store[key]=JSON.parse(e.target.result),_vendor.localforage.setItem("sssStateStore",store).then(function(v){vm.states=Object.keys(store)})})},reader.readAsText(this.$els.statefile.files[0])}},saveStateButton:function(){var key=this.$els.savestatename.value;key||(key=(0,_vendor.moment)().format("DD/MM/YYYY HH:mm")),this.saveState(key)},saveState:function(key){var vm=this,store=this.$root.store;if(!vm.$root.touring){store.view.center=vm.olmap.getView().getCenter(),store.view.scale=Math.round(1e3*vm.$root.map.getScale());var activeLayers=vm.$root.active.activeLayers();!1!==activeLayers&&(store.activeLayers=activeLayers||[],store.annotations=JSON.parse(vm.$root.geojson.writeFeatures(vm.$root.annotations.features.getArray())),_vendor.localforage.setItem("sssOfflineStore",vm.$root.persistentData).then(function(value){vm.$root.saved=(0,_vendor.moment)().toLocaleString()}),key&&_vendor.localforage.getItem("sssStateStore",function(err,value){var states={};value&&(states=value),states[key]=vm.$root.persistentData,_vendor.localforage.setItem("sssStateStore",states).then(function(value){vm.states=Object.keys(states)})}))}}},ready:function(){var vm=this,exportStatus=vm.loading.register("export","Export Component");exportStatus.phaseBegin("initialize",10,"Initialize"),this._filename_re=new RegExp("filename=['\"](.+)['\"]"),this._fileformats=[["geojson",".geojson","application/vnd.geo+json"],["shp",".shp","application/shp"],["json",".geojson","application/json"],["gpx",".gpx","application/gpx+xml"],["gpkg",".gpkg","application/x-sqlite3"],["7zip",".7z","application/x-7z-compressed"],["zip",".zip","application/zip"],["tar",".tar","application/x-tar"],["tar.gz",".tar.gz","application/x-gtar-compressed"],["tar.bz",".tar.bz","application/gzip"],["tar.xz",".tar.xz","application/gzip"]],(0,_vendor.$)("#spatialInfoDialog").on("closed.zf.reveal",function(){vm._importData&&(vm._importData.failedCallback&&vm._importData.failedCallback("Cancelled"),delete vm._importData)}),exportStatus.phaseEnd("initialize"),exportStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){exportStatus.phaseEnd("gk-init"),exportStatus.phaseBegin("load_states",10,"Load states from file system",!0,!1),vm.olmap.on("postrender",global.debounce(function(ev){vm.saveState()},1e3,!0));_vendor.localforage.getItem("sssStateStore",function(err,value){value&&(vm.states=Object.keys(value))});exportStatus.phaseEnd("load_states")})}},module.exports.__esModule&&(module.exports=module.exports.default),
("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="layers-export" v-cloak="">\n  <div id="map-export-controls">\n    <div id="settings-fixpart">  \n    \x3c!--div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Vector format:</label>\n      </div>\n      <div class="small-9">\n        <select name="select" v-model="vectorFormat">\n          <option value="json" selected>GeoJSON (web GIS)</option> \n          <option value="kml">KML (Google Earth)</option>\n          <option value="geopkg">Geopackage (high performance)</option>\n          <option value="shapefile">Shapefile (legacy desktop GIS)</option>\n          <option value="csv">CSV (Spreadsheet/Excel)</option>\n        </select>\n      </div>\n    </div--\x3e\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Name:</label>\n      </div>\n      <div class="small-9">\n        <input id="export-name" type="text" v-model="title" placeholder="Map Name">\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Paper size:</label>\n      </div>\n      <div class="small-9">\n        <select v-model="paperSize">\n                  <option v-for="size in paperSizes" v-bind:value="$key">{{ $key }} ({{ size[0] }}mm Ã {{ size[1] }}mm)</option>\n                </select>\n      </div>\n    </div>\n\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Download:</label>\n      </div>\n      <div class="small-9">\n        <div class="expanded button-group">\n          <a class="button" title="JPG for quick and easy printing" @click="print(\'jpg\')"><i class="fa fa-file-image-o"></i><br>JPG</a>\n          <a class="button" title="Geospatial PDF for use in PDF Maps and Adobe Reader" @click="print(\'pdf\')"><i class="fa fa-print"></i><br>PDF</a>\n          <a class="button" title="GeoTIFF for use in QGIS on the desktop" @click="print(\'tif\')"><i class="fa fa-picture-o"></i><br>GeoTIFF</a>\n          <a class="button" title="Legends of active layers" @click="layerlegends.toggleLegends()"><i class="fa fa-file-pdf-o"></i><br>Legend</a>\n        </div>\n      </div>\n    </div>\n\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <div class="switch tiny">\n          <input class="switch-input" id="toggleRetainBoundingbox" type="checkbox" v-bind:checked="settings.print.retainBoundingbox" @change="toggleRetainBoundingbox">\n          <label class="switch-paddle" for="toggleRetainBoundingbox">\n            <span class="show-for-sr">Fit to screen bounding box</span>\n          </label>\n        </div>\n      </div>\n      <div class="small-9">\n        <label for="toggleRetainBoundingbox">Fit to screen bounding box</label>\n      </div>\n    </div>\n    \n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <div class="switch tiny">\n          <input class="switch-input" id="toggleSnapToFixedScale" type="checkbox" v-bind:checked="settings.print.snapToFixedScale" @change="toggleSnapToFixedScale">\n          <label class="switch-paddle" for="toggleSnapToFixedScale">\n            <span class="show-for-sr">Snap to nearest fixed scale</span>\n          </label>\n        </div>\n      </div>\n      <div class="small-9">\n        <label for="toggleSnapToFixedScale">Snap to nearest fixed scale</label>\n      </div>\n    </div>\n    \n    <hr class="row">\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Info:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <label class="button expanded" for="spatialInfo" title="{{utils.importSpatialFileTypeDesc}}">\n              <i class="fa fa-info"></i> Spatial Info\n          </label>\n          <input type="file" id="spatialInfo" class="show-for-sr" name="spatialinfofile" v-el:spatialinfofile="" @change="getSpatialInfo()" accept="{{utils.importSpatialFileTypes}}">\n        </div>\n      </div>\n\n      <div class="small-3">\n        <label class="tool-label">Transform:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <label class="button expanded convertbutton" for="togeojson" title="{{utils.importSpatialFileTypeDesc}}">\n              <i class="fa fa-exchange"></i><br>Transform<br>(geojson)\n          </label>\n          <input type="file" id="togeojson" class="show-for-sr" name="convertfile" v-el:togeojson="" @change="convertFormat(\'geojson\',$event)" accept="{{utils.importSpatialFileTypes}}">\n\n          <label class="button expanded convertbutton" for="togpkg" title="{{utils.importSpatialFileTypeDesc}}">\n              <i class="fa fa-exchange"></i><br>Transform<br>(gpkg)\n          </label>\n          <input type="file" id="togpkg" class="show-for-sr" name="convertfile" v-el:togpkg="" @change="convertFormat(\'gpkg\',$event)" accept="{{utils.importSpatialFileTypes}}">\n\n          <label class="button expanded convertbutton" for="toshp" title="{{utils.importSpatialFileTypeDesc}}">\n          <i class="fa fa-exchange"></i><br>Transform<br>(shp)\n          </label>\n          <input type="file" id="toshp" class="show-for-sr" name="convertfile" v-el:toshp="" @change="convertFormat(\'shp\',$event)" accept="{{utils.importSpatialFileTypes}}">\n\n          <label class="button expanded convertbutton" for="tocsv" title="{{utils.importSpatialFileTypeDesc}}">\n          <i class="fa fa-exchange"></i><br>Transform<br>(csv)\n          </label>\n          <input type="file" id="tocsv" class="show-for-sr" name="convertfile" v-el:tocsv="" @change="convertFormat(\'csv\',$event)" accept="{{utils.importSpatialFileTypes}}">\n\n        </div>\n      </div>\n    </div>\n\n    <hr class="row">\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Save view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="input-group">\n          <input v-el:savestatename="" class="input-group-field" type="text" placeholder="Name for saved view">\n          <div class="input-group-button">\n            <a class="button" @click="saveStateButton()">Save</a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Export view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <a class="button expanded" @click="download()"><i class="fa fa-download"></i> Download current view</a>\n        </div>\n      </div>\n    </div>\n    <div class="tool-slice row collapse">\n      <div class="small-3">\n        <label class="tool-label">Load view:</label>\n      </div>\n      <div class="small-9 columns">\n        <div class="expanded button-group">\n          <label class="button expanded" for="uploadFile"><i class="fa fa-upload"></i> Upload view file</label><input type="file" id="uploadFile" class="show-for-sr" name="statefile" accept="application/json" v-model="statefile" v-el:statefile="" @change="load()">\n        </div>\n      </div>\n    </div>\n    </div>\n\n    <div class="tool-slice row collapse scroller" id="settings-flexible">\n      <div class="small-3">\n        <label class="tool-label"></label>\n      </div>\n      <div class="small-9 columns">\n        <div v-for="state in states" class="feature-row" style="overflow: hidden">\n          <div class="float-right button-group small">\n            <a class="button" title="Open view" @click="open(state)"><i class="fa fa-folder-open"></i></a>\n            <a class="button" title="Download view" @click="download(state)"><i class="fa fa-download"></i></a>\n            <a class="button alert" title="Delete view" @click="remove(state)">â</a>\n          </div>\n          {{ state }}\n        </div>\n        <div v-if="states.length == 0" class="feature-row">\n          No saved views yet\n        </div>\n      </div>\n    </div>\n\n    <div class="hide" v-el:legendsvg="">\n      <gk-legend></gk-legend>\n    </div>\n\n    <img id="map-disclaimer" class="hide" src="/dist/static/images/map-disclaimer.svg">\n\n    <gk-layerlegends v-ref:layerlegends=""></gk-layerlegends>\n  </div>\n\n  <div class="small reveal" id="spatialInfoDialog" data-reveal="" data-close-on-click="false"> \n      <h3>{{spatialInfo.title}}</h3>\n      <div class="row feature-row">\n          <div class="small-5 columns">Layer</div>\n          <div class="small-2 columns">SRS</div>\n          <div class="small-2 columns">Geometry</div>\n          <div class="small-2 columns">Features</div>\n          <div class="small-1 columns"></div>\n      </div>\n      <template v-for="dslayers in spatialInfo[\'datasources\']" class="row feature-row" track-by="$index">\n          <div class="row" v-if="spatialInfo[\'datasourceCount\'] > 1">\n              <div class="small-12 columns datasource"><a>{{dslayers["datasource"]}}</a></div>\n          </div>\n          <div v-for="l in dslayers[\'layers\']" class="row feature-row" track-by="$index">\n              <div class="small-5 columns">{{l.layer}}</div>\n              <div class="small-2 columns">{{l.srs}}</div>\n              <div class="small-2 columns">{{l.geometry}}</div>\n              <div class="small-2 columns">{{l.features}}</div>\n              <div class="small-1 columns">\n                  <a class="button tiny secondary float-right" v-if="spatialInfo.upload" @click="importLayer(dslayers[\'datasource\'],l)"><i class="fa fa-upload"></i></a>\n              </div>\n          </div>\n      </template>\n\n      <button class="close-button" data-close="" aria-label="Close modal" type="button">\n          <span aria-hidden="true">Ã</span>\n      </button>\n  </div>\n\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.datasource {\n    font-size: 18px;\n    font-weight: bold;\n    font-style: italic;\n    background-color: #266f78;\n}\n.convertbutton {\n    padding-left:2px;\n    padding-right:2px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-76671088",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-76671088",module.exports))}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./layerlegends.vue":158,"./legend.vue":159,"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],158:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#active-layer-legends {\n    height:99%;\n}\n#legend-title {\n    cursor:move;\n}\n#active-layer-legends-list {\n    height:99%;\n}\n#active-layer-legends .disabled{\n    color: #8a8a8a;\n}\n#active-layer-legends button{\n    color: #2199e8;\n}\n#active-layer-legends .showall-button{\n    right: 4.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n#active-layer-legends .print-button{\n    right: 2.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n.layer-legend-row{\n    padding-bottom:50px\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["dpmm"],data:function(){return{legendLayers:[],filteredLegendLayers:[],hiddenLayers:{},position:"right-top"}},computed:{displayLegendLayers:function(){return this.filteredLegendLayers||this.legendLayers},disableShowall:function(){return!this.filteredLegendLayers},disablePrint:function(){return 0==this.displayLegendLayers.length},legendsPanel:function(){return this._legendsPanel=this._legendsPanel||new Foundation.Reveal((0,_vendor.$)("#active-layer-legends")),this._legendsPanel},loadFinished:{cache:!1,get:function(){var finished=!0;return(0,_vendor.$)("#active-layer-legend-list").find("img").each(function(index,img){if(0===img.naturalWidth||void 0===img.naturalWidth||0===img.naturalHeight||void 0===img.naturalHeight)return finished=!1,!1}),finished}}},methods:{enableMove:function(enable){this._interact.draggable(enable)},showAll:function(){this.hiddenLayers={},this.filteredLegendLayers=null},hideLegend:function(l){if(!this.hiddenLayers[l.id])if(this.hiddenLayers[l.id]=!0,null==this.filteredLegendLayers){var vm=this;this.filteredLegendLayers=this.legendLayers.filter(function(layer){return!vm.hiddenLayers[layer.id]})}else this.filteredLegendLayers.splice(this.filteredLegendLayers.indexOf(l),1)},syncLegendLayers:function(){var vm=this,catalogue=vm.$root.catalogue,results=[],legendLen=0;if(vm.$root.active.olLayers.every(function(layer){var catLayer=catalogue.getLayer(layer);return!!catLayer&&(!catLayer.legend||void 0!=catLayer.loadLegendFailed&&catLayer.loadLegendFailed||(results.push(catLayer),legendLen+=catLayer.hidden?0:1),!0)}),results.length==vm.legendLayers){results=results.reverse();for(var changed=!1,i=0;i<results.length;i++)if(results[i].id!=vm.legendLayers.id){changed=!0;break}if(!changed)return!1}else results=results.reverse();return vm.legendLayers=results,vm.legendLayers.find(function(layer){return vm.hiddenLayers[layer.id]})?vm.filteredLegendLayers=vm.legendLayers.filter(function(layer){return!vm.hiddenLayers[layer.id]}):vm.filteredLegendLayers=null,!0},toggleLegends:function(){var vm=this;if(vm.legendsPanel.isActive)return vm.legendsPanel.close(),vm.unwatchActiveLayers(),void(vm.unwatchActiveLayers=!1);vm.unwatchActiveLayers||(this.syncLegendLayers(),vm.unwatchActiveLayers=this.$root.active.$watch("olLayers",function(newVal,oldVal){vm.syncLegendLayers()})),vm.legendsPanel.open()},loadLegendFailed:function(index,l){if(this.legendLayers.splice(index,1),l.loadLegendFailed=!0,this.filteredLegendLayers){var index=this.filteredLegendLayers.indexOf(l);index>=0&&this.filteredLegendLayers.splice(index,1)}},getImageDataURL:function(img,format){format=format||"image/jpeg";var canvas=document.createElement("canvas");return canvas.width=img.naturalWidth,canvas.height=img.naturalHeight,(0,_vendor.$)(document.body).append((0,_vendor.$)(canvas)),canvas.getContext("2d").drawImage(img,0,0,img.naturalWidth,img.naturalHeight,0,0,canvas.width,canvas.height),canvas.toDataURL(format,1)},printLegends:function(){var vm=this;this.getLegendBlob(!1,!1,function(blobData){var filename=vm.$root.export.finalTitle.replace(" ","_")+".legend.pdf";(0,_vendor.saveAs)(blobData,filename)})},getLegendBlob:function(printAll,sync,callback){var vm=this;printAll=printAll||!1,sync=sync||!1;var hiddenLayers=null,filteredLegendLayers=null,nextTick=!1;vm.legendsPanel.isActive||(nextTick=vm.syncLegendLayers()),printAll&&null!=vm.filteredLegendLayers&&(hiddenLayers=vm.hiddenLayers,filteredLegendLayers=vm.filteredLegendLayers,vm.showAll(),nextTick=!0);var printFunc=function(){try{if(0===(0,_vendor.$)("#active-layer-legend-list .layer-legend-row").length)return void callback(null);var paperSize=vm.$root.export.paperSizes.A4,style={top:20,bottom:20,left:20,right:20,width:paperSize[1],height:paperSize[0],fontHeight:10,padding:5,font:"helvetica",fontType:"bold",fontSize:10,textColor:[0,0,0],lineWidth:1,lineColor:[77,77,77]},getImageSize=function(img,textHeight){var width=0,height=0,maxImageSize=[style.width-style.left-style.right,style.height-style.top-style.bottom-textHeight],imgSize=[Math.floor(img.naturalWidth/vm.dpmm),Math.floor(img.naturalHeight/vm.dpmm)];return imgSize[0]/imgSize[1]>maxImageSize[0]/maxImageSize[1]?imgSize[0]<=maxImageSize[0]?(width=imgSize[0],height=imgSize[1]):(width=maxImageSize[0],height=imgSize[1]*width/imgSize[0]):imgSize[1]<=maxImageSize[1]?(height=imgSize[1],width=imgSize[0]):(height=maxImageSize[1],width=imgSize[0]*height/imgSize[1]),[width,height]},doc=new _vendor.jsPDF;doc.setFontSize(style.fontSize),doc.setFont(style.font),doc.setFontType(style.fontType),doc.setTextColor(style.textColor[0],style.textColor[1],style.textColor[2]),doc.setLineWidth(style.lineWidth),doc.setDrawColor(style.lineColor[0],style.lineColor[1],style.lineColor[2]);var top=style.top;(0,_vendor.$)("#active-layer-legend-list .layer-legend-row").each(function(index,element){var imgElement=(0,_vendor.$)(element).find("img").get(0),imageSize=getImageSize(imgElement,style.fontHeight);top!=style.top&&top+style.fontHeight+imageSize[1]+style.bottom+2*style.padding+style.lineWidth>style.height?(doc.addPage(),top=style.top):top!=style.top&&(top+=style.padding,doc.setLineWidth(style.lineWidth),doc.line(style.left,top,style.width-style.right,top),top+=style.lineWidth,top+=style.padding),doc.text(style.left,top,(0,_vendor.$)(element).find(".layer-title").text()),top+=style.fontHeight,doc.addImage(vm.getImageDataURL(imgElement,"image/jpeg"),"JPEG",style.left,top,imageSize[0],imageSize[1]),top+=imageSize[1]}),callback(doc.output("blob"))}finally{hiddenLayers&&(vm.hiddenLayers=hiddenLayers,vm.filteredLegendLayers=filteredLegendLayers)}},_syncedFunc=null;_syncedFunc=function(){sync?vm.loadFinished?setTimeout(printFunc,2e3):setTimeout(_syncedFunc,500):printFunc()},nextTick?vm.$nextTick(_syncedFunc):_syncedFunc()},setPosition:function(left,right,top,bottom){this._position[0]=null==left?right-parseInt((0,_vendor.$)("#active-layer-legends").css("width")):left,this._position[1]=null==right?left+parseInt((0,_vendor.$)("#active-layer-legends").css("width")):right,this._position[2]=null==top?bottom-parseInt((0,_vendor.$)("#active-layer-legends").css("height")):top,this._position[3]=null==bottom?top+parseInt((0,_vendor.$)("#active-layer-legends").css("height")):bottom,(0,_vendor.$)("#active-layer-legends").get(0).style.left=this._position[0]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.right=this._position[1]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.top=this._position[2]+"px",(0,_vendor.$)("#active-layer-legends").get(0).style.bottom=this._position[3]+"px"}},ready:function(){var vm=this;vm._position=null,(0,_vendor.$)("#active-layer-legends").on("open.zf.reveal",function(){null==vm._position?(vm._position=[null,null,null,null],vm.setPosition(null,parseInt((0,_vendor.$)(document.body).css("width")),0,null)):vm.setPosition(vm._position[0],vm._position[1],vm._position[2],vm._position[3])}),vm._interact=(0,_vendor.interact)((0,_vendor.$)("#active-layer-legends").get(0),{}).resizable({edges:{top:!0,left:!0,bottom:!0,right:!1},preserveAspectRatio:!1,onmove:function(event){var target=event.target;target.style.width=event.rect.width+"px",target.style.height=event.rect.height+"px",vm.setPosition(event.rect.left,event.rect.right,event.rect.top,event.rect.bottom)}}).draggable({intertia:!0,restrict:{restriction:document.body,endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:function(event){event.target;vm._position[0]=vm._position[0]+event.dx,vm._position[1]=vm._position[1]+event.dx,vm._position[2]=vm._position[2]+event.dy,vm._position[3]=vm._position[3]+event.dy,vm.setPosition(vm._position[0],vm._position[1],vm._position[2],vm._position[3])},onend:function(event){}}),vm._interact.draggable(!1)}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="reveal" id="active-layer-legends" data-reveal="" data-v-offset="0px" data-overlay="false" data-close-on-esc="false" data-close-on-click="false">\n  <h4 id="legend-title" @mouseenter="enableMove(true)" @mouseout="enableMove(false)">Legends ({{displayLegendLayers.length}}/{{legendLayers.length}})</h4>\n  <div id="active-layer-legend-list">\n      <template v-for="l in displayLegendLayers" track-by="id">\n          <div class="layer-row layer-legend-row row">\n              <div class="small-11">\n                  <h6 class="layer-title">{{ l.name || l.id }} </h6>\n              </div>\n              <div class="small-1">\n                  <a class="button tiny secondary" @click="hideLegend(l)" title="Hide"><i class="fa fa-eye-slash"></i></a>\n              </div>\n              <div class="small-12">\n                  <img v-bind:src="l.legend" class="cat-legend" @error="loadLegendFailed($index,l)" crossorigin="use-credentials">\n              </div>\n          </div>\n      </template>\n  </div>\n  <button v-bind:class="{disabled:disableShowall}" v-bind:disabled="disableShowall" type="button" class="showall-button" @click="showAll()" title="Show All">\n    <i class="fa fa-eye"></i>\n  </button>\n  <button v-bind:class="{disabled:disablePrint}" v-bind:disabled="disablePrint" type="button" class="print-button" @click="printLegends()" title="Print">\n    <i class="fa fa-print"></i>\n  </button>\n  <button class="close-button" data-close="" aria-label="Close modal" type="button" title="Close">\n    <span aria-hidden="true">Ã</span>\n  </button>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#active-layer-legends {\n    height:99%;\n}\n#legend-title {\n    cursor:move;\n}\n#active-layer-legends-list {\n    height:99%;\n}\n#active-layer-legends .disabled{\n    color: #8a8a8a;\n}\n#active-layer-legends button{\n    color: #2199e8;\n}\n#active-layer-legends .showall-button{\n    right: 4.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n#active-layer-legends .print-button{\n    right: 2.5rem;\n    font-size: 1.3em;\n    position: absolute;\n    top: 1rem;\n}\n.layer-legend-row{\n    padding-bottom:50px\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-36d342e9",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-36d342e9",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],159:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={computed:{legendInfo:{cache:!1,get:function(){return this.$root.export.legendInfo()}},title:function(){return this.$root.export.title}}},module.exports.__esModule&&(module.exports=module.exports.default),
("function"==typeof module.exports?module.exports.options:module.exports).template='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   height="53.149605"\n   width="556.29919"\n   version="1.1"\n   y="0"\n   x="0"\n   id="svg3127"\n   inkscape:version="0.48.4 r9939"\n   sodipodi:docname="legend.svg">\n  <metadata\n     id="metadata3229">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3227" />\n  <sodipodi:namedview\n     pagecolor="#ffffff"\n     bordercolor="#666666"\n     borderopacity="1"\n     objecttolerance="10"\n     gridtolerance="10"\n     guidetolerance="10"\n     inkscape:pageopacity="0"\n     inkscape:pageshadow="2"\n     inkscape:window-width="1920"\n     inkscape:window-height="1163"\n     id="namedview3225"\n     showgrid="false"\n     units="mm"\n     inkscape:zoom="1.7396984"\n     inkscape:cx="304.56135"\n     inkscape:cy="-35.745445"\n     inkscape:window-x="1920"\n     inkscape:window-y="0"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="g3181" />\n  <g\n     font-size="none"\n     mix-blend-mode="normal"\n     transform="matrix(1.6024522,0,0,1.000088,1.7711449,30.25859)"\n     text-anchor="none"\n     style="fill:#ffffff;fill-opacity:0.86275;stroke:#000000;stroke-width:1.66149998;stroke-miterlimit:10"\n     stroke-miterlimit="10"\n     font-weight="none"\n     id="g3129">\n    <rect\n       height="51.377998"\n       width="346.80063"\n       stroke-miterlimit="10"\n       y="-29.372999"\n       x="-0.44898"\n       id="rect3131"\n       style="fill:#ffffff;fill-opacity:0.86275;stroke:#000000;stroke-width:1.66149998;stroke-miterlimit:10" />\n  </g>\n  <g\n     transform="matrix(2.8669,0,0,2.8669,2.3366,-2969.4)"\n     id="g3133">\n    <rect\n       height="13"\n       width="13"\n       y="1039.4"\n       x="2"\n       id="rect3135"\n       style="fill:#ffffff" />\n    <g\n       transform="matrix(0.21667,0,0,0.21667,-56.963,809.08)"\n       id="g3137"\n       style="fill:#003862">\n      <g\n         transform="matrix(1.448,0,0,-1.448,306.28,1063.2)"\n         id="g3139">\n        <path\n           d="M 0,0 C 0.048,-0.173 0.35,-0.361 0.801,-0.334 1.244,-0.308 1.835,-0.34 1.633,-0.87 1.432,-1.403 2.038,-1.246 2.477,-0.937 2.681,-0.792 1.995,-0.273 1.081,0.274 H -0.19 C -0.082,0.144 -0.014,0.043 0,0"\n           id="path3141"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,292.57,1079.2)"\n         id="g3143">\n        <path\n           d="m 0,0 c -0.287,0.333 -0.899,0.097 -0.749,0.313 0.151,0.218 1.721,0 1.721,0 0.134,-0.177 0.211,-0.52 -0.405,-0.7 C -0.051,-0.569 -0.484,-0.07 -0.381,0 -0.274,0.068 0.29,-0.336 0,0 m 12.611,-5.832 c -0.494,-0.146 -0.026,0.371 -0.5,-0.334 -0.472,-0.703 -0.606,0.711 -2.105,1.226 0,0 -0.234,0.108 0.177,0.371 0.411,0.266 0.292,0.24 -0.196,0.257 -0.485,0.017 0.104,-0.824 -1.007,-0.57 -1.101,0.255 -1.925,0.726 -1.76,0.26 0.163,-0.466 0.127,-0.062 1.349,-0.453 1.219,-0.388 0.85,-0.031 1.285,-0.489 0.432,-0.455 0.272,-0.165 -0.289,-0.377 C 9,-6.155 9.751,-6.388 9.453,-6.463 9.157,-6.536 9.011,-5.698 6.262,-5.387 c 0,0 -1.058,-0.01 0.186,-0.429 1.246,-0.418 0.691,-0.438 0.965,-0.429 0.281,0.011 0.3,0.239 0.48,-0.005 0.181,-0.245 0.225,-0.44 1.129,-0.57 0.905,-0.132 0.562,0.156 0.732,-0.031 0.173,-0.186 -0.372,-0.079 -0.003,-0.293 0.367,-0.212 0.298,0.128 0.169,-0.292 -0.135,-0.419 -0.536,-0.17 -0.713,-0.296 0,0 -0.106,-0.15 0.382,-0.145 0.485,0.011 0.395,0.06 0.311,-0.164 -0.086,-0.223 -0.122,-0.18 0.106,-0.143 0.227,0.041 -0.283,-0.372 -0.784,-0.312 -0.494,0.062 0.256,0.573 -0.952,1.077 -1.212,0.503 -0.92,0.292 -0.871,0.198 0.049,-0.094 0.973,-0.309 0.928,-0.628 -0.05,-0.32 0.177,-0.074 0.255,-0.306 0.075,-0.233 -0.277,-0.147 -0.535,-0.147 -0.261,0.004 -0.218,-0.016 -0.41,0.297 -0.189,0.314 -0.457,-0.09 -0.796,0.243 -0.337,0.336 0.126,0.436 -0.464,0.261 -0.593,-0.174 -0.724,-0.268 -0.616,0.472 0.109,0.74 -0.012,0.181 0.358,0.213 0.367,0.034 0.803,0.059 0.127,0.415 -0.677,0.356 -0.8,-0.169 -1.494,0.211 -0.69,0.377 -1.211,0.631 -1.762,0.36 -0.551,-0.271 -2.528,-0.896 -2.705,0.679 -0.177,1.574 -0.826,0.554 -1.268,1.258 -0.443,0.706 0.338,2.205 1.13,2.076 0.795,-0.131 0.039,-0.674 0.924,-0.536 0.887,0.136 -0.021,0.001 0.054,-0.544 0.079,-0.544 0.098,0.253 0.696,0.554 0.598,0.303 0.239,-0.529 2.012,-0.383 0,0 -0.434,-0.598 0.152,-0.573 0.595,0.02 0.257,0.294 0.229,0.762 -0.023,0.469 -0.587,0.234 -1.033,0.732 -0.443,0.496 -0.844,0.397 -1.129,1.198 0,0 -0.104,0.089 -0.235,0.244 -0.13,0.154 0.194,0.024 0.396,-0.034 C 2.415,-0.454 2.788,-0.98 3.201,-1.015 3.614,-1.051 4.583,-1.73 4.435,-1.959 4.291,-2.187 4.349,-2.122 4.645,-2.126 4.943,-2.131 6.18,-2.314 6.191,-2.537 6.206,-2.76 5.742,-3.259 6.085,-3.184 6.43,-3.108 7.157,-3.039 6.925,-2.679 6.697,-2.318 5.636,-1.57 4.708,-1.318 3.783,-1.059 2.388,-0.43 1.834,0.086 1.284,0.601 0.715,0.568 0.058,0.931 -0.598,1.294 -1.881,1.482 -0.697,1.384 0.49,1.286 -0.19,1.432 -0.43,1.546 -0.667,1.662 0.38,1.493 1.418,1.176 2.456,0.857 3.133,0.127 3.781,0.004 4.433,-0.116 5.021,-0.595 5.316,-0.689 5.616,-0.784 5.43,-0.6 5.143,-0.392 4.856,-0.184 4.476,-0.013 4.386,0.246 4.291,0.506 4.013,0.498 3.942,0.531 3.876,0.564 3.921,0.552 3.964,0.585 c 0,0 0.084,0.155 0.482,-0.017 C 4.85,0.396 4.057,0.834 3.979,1.114 3.901,1.395 4.433,1.049 4.818,0.784 5.204,0.519 7.337,-0.709 7.63,-0.727 7.926,-0.745 7.888,-1.13 7.755,-1.225 7.623,-1.32 7.922,-1.58 8.345,-1.512 c 0.427,0.064 2.588,-1.26 3.237,-1.317 0.649,-0.063 -0.068,-0.488 0.673,-0.45 0.736,0.035 1.234,-0.711 0.937,-0.919 -0.293,-0.212 -0.06,-0.239 0.228,-0.188 0.292,0.052 -0.313,-1.301 -0.809,-1.446 m -1.447,-8.442 c -0.064,-0.505 -0.695,-0.156 -0.991,-0.105 -0.297,0.051 -0.403,0.116 -0.082,-0.083 0.322,-0.2 -0.064,-0.526 -0.064,-0.526 -1.071,0.583 -1.485,1.576 -1.589,1.303 -0.102,-0.273 -0.72,-1.598 -1.565,-0.804 -0.853,0.796 -0.859,-0.195 -0.993,0.367 -0.132,0.564 0.284,0.473 0.385,0.601 0.106,0.13 -0.059,0.297 -0.293,0.305 -0.228,0.008 -0.13,-0.578 -0.322,-0.643 -0.197,-0.069 -0.986,0.147 -2.183,0.676 -1.2,0.533 -1.077,0.109 -1.73,0.43 -0.658,0.319 -0.666,0.081 -0.822,0.298 -0.154,0.213 -0.025,0.493 -0.524,0.673 -0.499,0.184 -1.359,0.876 -0.821,0.679 0.538,-0.188 0.323,0.083 -0.044,0.332 -0.37,0.25 -0.659,0.357 -0.217,0.317 0.44,-0.038 0.615,-0.188 1.212,-0.689 0.594,-0.499 0.698,-0.164 0.772,-0.572 0.075,-0.411 0.115,-0.37 0.59,-0.376 0.468,-0.009 0.648,-0.087 0.828,-0.367 0.182,-0.281 0.49,-0.171 0.49,-0.171 1.16,-0.317 0.209,0.358 0.209,0.358 -1.175,0.334 -3.089,1.662 -3.089,1.662 -1.029,1.072 -2.095,0.548 -1.992,1.085 0.102,0.539 -0.985,0.559 -1.578,0.409 -0.592,-0.152 -0.33,-0.228 -0.425,0.227 -0.098,0.45 -0.6,-0.012 -1.053,-0.022 -0.453,-0.008 0.218,0.18 -0.409,0.236 -0.628,0.057 -0.733,-0.392 -0.575,0.149 0.163,0.539 -0.223,0.248 -0.223,0.248 -0.517,-0.38 -0.502,0.24 -0.29,1.187 0.218,0.946 0.395,-0.293 0.421,0.17 0.023,0.464 -0.037,0.868 0.348,0.69 0.384,-0.177 0.303,0.071 0.427,0.281 0.121,0.212 1.105,-0.355 1.357,-0.51 0.253,-0.153 0.828,-0.022 0.828,-0.022 0.594,-0.158 -0.031,-0.626 -0.031,-0.626 -0.397,-0.006 -0.037,-0.157 -0.037,-0.157 0.276,-0.152 0.491,0.011 0.491,0.011 -0.025,0.271 -0.098,0.835 0.389,0.56 0.489,-0.275 0.588,-0.147 0.588,-0.147 0.281,0.491 0.303,-0.263 0.408,-0.114 0.104,0.147 0.301,0.086 0.301,0.086 2.22,-0.718 2.08,-0.463 2.08,-0.463 -0.062,0.214 0.014,0.21 0.278,0.274 0.266,0.069 -0.191,0.364 0.147,0.411 0.339,0.048 0.447,-0.243 0.683,-0.352 0.242,-0.107 0.236,0.122 0.483,0.043 0.246,-0.079 -0.032,-0.519 0.102,-0.638 0.132,-0.12 0.139,0.681 0.144,0.617 0.007,-0.061 0.234,-0.011 0.234,-0.011 1.081,0.196 1.94,0.092 1.94,0.092 0,0 0.238,-0.344 -0.261,-0.733 -0.504,-0.389 0.518,-0.471 1.334,-0.57 0.82,-0.1 0.576,0.122 1.763,-0.402 1.189,-0.52 0.504,0.028 1.642,-0.073 1.134,-0.098 -0.224,-0.283 0.013,-0.281 0.236,0.003 0.045,-0.313 0.31,-0.36 0.268,-0.054 -0.623,-0.458 -2.358,0.09 l -1.035,0.119 c -1.029,0.116 -0.112,-0.177 0.414,-0.514 0.519,-0.335 1.698,-1.018 2.751,-0.935 1.055,0.081 0.47,-0.571 0.133,-0.797 -0.343,-0.222 0.046,-0.704 -0.397,-0.215 -0.443,0.492 -0.32,0.085 -0.535,0.346 -0.217,0.26 -0.136,0 -0.298,0.023 -0.078,0.01 -0.117,-0.026 -0.133,-0.052 -0.01,-0.022 -0.013,-0.019 0,0 0.003,0.007 0.004,0.007 0.008,0.021 0.027,0.121 -0.077,0.193 -0.077,0.193 -0.822,0.093 -0.564,0.617 -0.865,0.146 -0.298,-0.471 1.874,-1.056 2.303,-1.066 0.428,-0.011 0.36,-0.114 0.36,-0.114 -0.799,-0.67 -2.869,0.495 -3.684,0.768 -0.814,0.276 -2.393,0.897 -2.782,1.142 -0.389,0.246 -0.408,0.003 -0.408,0.003 1.578,-1.346 2.774,-1.342 3.015,-1.494 0.243,-0.147 0.937,0.227 0.68,-0.103 -0.261,-0.33 0.188,-0.338 0.188,-0.338 0.91,0.208 -0.14,-0.159 0.418,-0.13 0.557,0.03 0.82,-0.047 0.664,-0.169 -0.158,-0.125 -0.417,-0.323 -0.131,-0.336 0.285,-0.016 0.513,0.09 0.315,-0.186 -0.2,-0.281 1.046,-0.567 1.709,-0.943 0.66,-0.376 0.808,0.086 0.751,-0.419 M -0.944,3.154 c 0.035,0.531 0.636,0.276 0.636,0.276 0.824,-0.234 0.245,0.026 0.245,0.026 -0.113,0.091 -0.108,0.49 0.182,0.492 C 0.413,3.951 0.833,3.15 0.833,3.15 0.939,3.003 1.007,3.17 1.007,3.17 1.468,3.549 1.57,3.042 1.522,3.062 1.477,3.085 1.118,2.922 1.249,2.684 1.384,2.445 2.1,2.37 2.859,2.096 3.609,1.822 3.003,1.629 2.821,1.656 2.644,1.681 1.666,1.85 2.764,1.432 3.861,1.014 3.236,0.867 3.236,0.867 2.842,1.22 0.294,2.429 -0.259,2.808 -0.809,3.189 -0.983,2.623 -0.944,3.154 m 15.82,8.156 c 0.021,-0.2 0.03,-0.383 0.03,-0.529 0.79,-0.308 1.558,-0.564 1.763,-0.483 0.444,0.174 0.206,-0.052 0.187,-0.071 -0.017,-0.018 -0.505,-0.486 0.171,-0.528 0.675,-0.042 0.576,-0.083 0.634,-0.141 0.057,-0.059 -0.904,-0.342 0.482,-0.358 0,0 0.431,0.049 0.24,-0.199 C 18.191,8.754 18.116,8.648 18.432,8.616 18.744,8.583 18.703,8.591 18.547,8.297 18.395,8.003 18.111,7.251 17.699,7.225 c 0,0 -0.116,-0.099 -0.081,0.155 C 17.65,7.634 17.537,7.414 17.465,7.207 17.385,6.996 17.146,6.704 17.041,6.989 16.936,7.272 16.71,6.99 16.652,6.929 16.595,6.87 16.173,7.126 15.674,7.771 15.177,8.418 15.268,8.239 14.969,8.209 14.673,8.181 14.085,8.016 13.339,8.343 12.597,8.67 11.278,8.651 11.773,8.354 12.264,8.057 13.74,8.213 14.152,7.916 14.571,7.619 15.411,7.446 15.031,7.155 14.655,6.863 14.518,7.319 14.474,7.055 14.432,6.79 14.575,6.529 14.219,6.696 13.861,6.862 13.933,7.329 12.68,7.276 11.432,7.223 10.282,8.291 11.277,7.367 12.27,6.444 12.071,7.292 13.099,6.497 14.13,5.703 14.269,6.038 14.668,6.108 15.062,6.178 14.521,5.763 15.07,5.785 15.617,5.807 14.835,4.956 14.375,5.326 c -0.458,0.37 0.057,-0.44 0.656,-0.516 0.604,-0.077 -1.004,-0.912 -1.09,0.225 0,0 -0.983,1.132 -1.513,0.736 -0.535,-0.397 0.057,0.054 1.116,-0.698 0,0 0.04,-0.167 -0.146,-0.161 -0.189,0.005 0.719,-0.342 -0.326,-0.221 -1.045,0.121 0.094,-0.242 0.84,-0.393 0.752,-0.151 0.621,0.268 1.011,-0.309 0.39,-0.576 0.005,-0.402 -0.41,-0.432 C 14.098,3.527 14.11,3.244 12.627,3.841 11.139,4.438 10.743,3.953 11.94,3.53 c 1.204,-0.425 1.747,-0.546 1.802,-0.796 0,0 0.061,0.136 0.548,-0.077 0.492,-0.215 1.326,0.022 1.148,-0.373 -0.177,-0.393 0.11,-0.503 -0.295,-0.628 0,0 -0.134,-0.004 -0.115,0.129 0.021,0.133 -0.167,-0.003 -0.089,-0.327 0.077,-0.327 0.006,-0.096 -0.078,-0.186 -0.085,-0.09 0.742,-0.449 1.174,-0.589 0.433,-0.142 -0.005,-0.187 -0.4,0 C 15.239,0.871 15.228,0.593 15.886,0.424 16.543,0.257 15.094,0.366 14.4,0.711 13.704,1.054 13.246,0.799 12.088,1.553 10.938,2.308 8.943,2.903 8.583,2.875 8.225,2.846 9.009,2.569 9.498,2.319 9.984,2.066 9.754,2.146 9.9,1.989 c 0.146,-0.156 0.868,-0.594 1.385,-0.586 0.522,0.008 0.618,10e-4 0.844,-0.146 0.225,-0.151 -0.097,-0.395 0.479,-0.326 0.581,0.074 -0.027,-0.23 0.559,-0.24 0.583,-0.009 0.459,0.157 0.248,-0.426 0,0 -0.082,-0.044 0.142,0 0.223,0.044 0.256,0.102 0.199,-0.115 -0.061,-0.22 0.142,-0.353 0.323,-0.386 0.185,-0.034 -0.052,0.065 0.344,-0.106 0.397,-0.171 0.966,-0.535 1.771,-0.76 0,0 0.168,-0.015 -0.052,-0.203 -0.218,-0.189 -0.234,-0.241 -0.129,-0.275 0.104,-0.035 -0.067,-0.082 -0.534,0.076 l -0.469,0.158 c 0,0 -0.153,-0.12 0.133,-0.204 0.292,-0.082 -0.049,-0.439 -0.091,-0.447 -0.036,-0.006 -0.714,0.373 -0.824,0.757 -0.111,0.385 -0.617,0.844 -0.727,0.622 -0.108,-0.223 -0.397,-0.665 -0.547,-0.586 -0.15,0.08 -0.354,-0.3 -0.316,-0.401 0.037,-0.103 -0.371,-0.122 -0.824,0.155 -0.453,0.281 -0.536,0.496 -0.969,0.418 -0.432,-0.079 0.174,0.508 0.301,0.496 0.128,-0.014 0.287,0.144 -0.216,0.256 -0.504,0.113 -0.037,-0.139 -0.362,-0.555 -0.322,-0.413 0.032,0.191 -1.094,0.34 -1.129,0.149 -1.543,0.46 -1.39,0.687 C 8.239,0.423 9.386,0.203 7.455,1.106 5.529,2.008 5.48,2.207 5.408,1.943 5.332,1.681 6.377,1.722 6.445,1.23 6.51,0.735 6.037,0.812 6.663,0.892 7.291,0.972 7.743,0.786 7.755,0.62 7.773,0.452 7.396,-0.424 7.233,0.01 7.069,0.444 6.622,0.257 6.398,0.41 6.172,0.561 6.142,0.511 6.169,0.686 6.191,0.86 5.954,0.462 5.88,0.543 5.806,0.625 5.867,0.918 5.235,1.196 c 0,0 0.152,0.133 -0.006,0.237 C 5.068,1.542 5.28,1.165 5.127,1.403 4.972,1.64 4.732,1.501 4.784,1.833 4.835,2.161 4.702,2.186 4.473,2.342 4.253,2.496 4.742,2.459 4.788,2.394 4.838,2.328 5.01,2.177 5.046,2.32 5.081,2.462 4.253,3.082 3.379,3.283 c 0,0 0.23,0.238 -0.134,0.507 C 2.881,4.059 1.755,3.994 1.57,3.875 1.389,3.759 1.239,3.492 1.219,4.176 c 0,0 -0.636,0.197 -0.81,-0.063 C 0.232,3.857 0.375,4.337 -0.187,4.35 -0.743,4.365 -0.816,4.029 -0.623,4.714 c 0.195,0.685 -0.626,-0.643 -0.606,0.153 0.019,0.802 -0.055,1.712 0.385,1.219 0,0 0.246,-0.211 0.095,0.274 -0.15,0.484 0.178,0.498 0.295,0.408 0.117,-0.088 0.27,-0.175 0.347,0.151 0.079,0.328 0.223,0.089 0.531,0.014 C 0.735,6.859 1.203,6.709 1.27,6.549 1.336,6.386 1.437,6.502 1.71,6.508 1.984,6.516 2.749,6.729 2.406,6.261 2.06,5.793 2.199,6.167 1.948,5.949 1.693,5.733 2.033,5.589 2.472,5.63 2.914,5.671 2.576,6.167 2.633,6.266 2.69,6.368 2.947,6.426 3.489,6.202 4.026,5.98 3.69,6.161 3.707,6.371 3.722,6.579 3.985,6.064 4.026,5.98 4.07,5.897 6.101,5.535 6.35,5.701 6.595,5.865 6.087,5.843 6.703,6.043 c 0,0 0.021,0.447 0.601,0.082 C 7.885,5.758 7.868,5.883 8.054,6.038 8.234,6.191 7.948,5.453 7.841,5.439 7.729,5.427 8.043,5.256 8.144,5.646 8.25,6.034 8.215,5.987 8.594,5.985 8.974,5.981 9.474,5.644 10.145,5.995 10.814,6.345 10.4,5.548 10.17,5.439 9.938,5.33 10.099,5.038 10.678,5.088 c 0.581,0.047 0.409,-0.497 1.455,-0.252 1.049,0.243 0.194,0.177 0.027,0.235 -0.166,0.057 -0.511,0.21 -0.482,0.47 0.024,0.261 -1.086,-0.446 -0.987,0.078 0.095,0.525 0.043,0.706 0.506,0.509 0.46,-0.192 0.526,0.552 -0.512,0.559 C 9.649,6.691 9.725,6.585 9.509,6.786 9.287,6.983 8.447,7.479 7.689,7.11 6.928,6.74 6.745,6.452 6.809,7.063 6.874,7.677 6.257,6.849 6.2,6.784 6.137,6.72 6.309,7.21 5.986,6.935 5.662,6.66 5.567,6.609 5.681,7.164 5.792,7.718 5.471,7.162 5.367,7.05 5.264,6.942 5.254,7.029 5.306,8.282 5.359,9.536 5.055,8.13 4.757,8.563 4.458,8.994 4.752,8.801 4.403,8.738 4.043,8.672 3.884,8.714 4.171,9.048 4.458,9.383 3.57,8.714 3.901,9.39 c 0.337,0.673 0.168,1.584 0.529,1.082 0.361,-0.505 -0.333,0.843 0.507,0.579 0.84,-0.265 -0.496,0.482 0.6,0.08 0,0 0.014,-0.385 0.415,-0.358 0.406,0.026 0.845,0.171 0.141,-0.518 0,0 -0.034,-0.393 0.213,-0.238 0.248,0.158 0.093,0.597 0.318,0.617 0.225,0.016 0.704,-0.306 1.084,-0.161 0.374,0.147 1.357,-0.115 1.391,-0.26 C 9.131,10.063 8.277,9.637 8.647,9.665 9.014,9.692 9.563,9.529 9.39,10.192 9.219,10.856 9.35,10.255 8.52,10.925 8.368,11.048 8.229,11.179 8.094,11.31 H -14.115 V -5.103 h 0.006 c 0.553,-0.017 -0.2,-0.62 0.26,-0.662 0.459,-0.043 0.632,-0.958 0.539,-1.584 -0.089,-0.627 0.432,-1.317 0.458,-1.52 0.028,-0.202 -0.127,-0.738 -0.511,-0.232 -0.389,0.509 -0.155,-0.323 -0.044,-0.5 0.112,-0.177 0.235,0.029 0.489,0.201 0.256,0.174 0.345,-0.14 0.778,-1.258 0.432,-1.117 2.226,-3.252 2.229,-3.48 0.003,-0.23 0.216,-0.339 0.092,-0.469 -0.126,-0.131 -0.314,0.221 -0.621,0.38 -0.303,0.158 -0.215,-0.091 -0.215,-0.091 -0.275,-0.8 2.157,-3.094 2.491,-3.159 0.326,-0.061 0.336,-0.386 1.026,-0.784 0.693,-0.392 0.571,-0.818 0.955,-0.731 0.385,0.084 -0.284,0.451 -0.731,0.879 -0.442,0.423 -0.588,0.605 -0.701,0.771 -0.114,0.163 0.486,0.221 0.173,0.238 -0.311,0.024 -1.007,0.677 -1.717,1.349 -0.711,0.671 -0.416,0.6 -0.243,0.775 0.171,0.174 0.645,0.802 0.683,0.179 0.038,-0.62 0.906,-1.474 1.598,-1.828 0.69,-0.356 0.103,-0.492 0.895,-1.13 0.339,-0.273 0.665,-0.556 0.949,-0.827 -0.008,0.263 0.014,0.522 0.024,0.67 0.04,0.455 0.223,0.662 -0.448,0.429 -0.674,-0.228 -0.705,0 -0.705,0 -0.271,0.721 0.045,1.281 0.354,2.057 0.306,0.777 0.45,0.703 0.503,0.507 0.05,-0.2 0.339,-0.369 0.897,-0.334 0.559,0.037 0.737,-0.165 0.307,-0.611 -0.431,-0.446 0.207,-0.121 0.207,-0.121 0.209,0.812 0.128,0.478 1.552,0.291 1.421,-0.191 0.962,-0.442 0.754,-0.782 -0.216,-0.341 0.47,-0.013 0.47,-0.013 0.718,0.847 0.035,0.742 -0.12,0.699 -0.151,-0.042 -0.142,0.057 -0.238,0.364 -0.094,0.304 -0.771,0.761 -1.076,0.835 -0.302,0.076 -0.779,0.601 -0.889,0.895 -0.11,0.296 -0.573,0.675 -0.753,0.386 -0.175,-0.292 -0.197,-0.146 -0.197,-0.146 -0.269,0.424 -0.316,0.112 -1.158,0.293 -0.848,0.177 -0.412,0.331 -0.412,0.331 2.512,0.048 3.321,-0.835 3.321,-0.835 1.17,-0.344 0.29,-0.435 0.893,-0.694 0.603,-0.263 1.027,-0.315 0.946,-0.642 -0.081,-0.331 0.547,-0.304 0.547,-0.304 2.422,-0.483 -0.281,-0.545 0.963,-1 1.243,-0.451 -0.396,0.291 0.457,0.295 0.853,0.011 0.691,0.14 -0.016,0.531 -0.704,0.395 -0.921,0.808 -1.665,0.91 -0.737,0.104 -1.874,0.992 -2.875,1.606 -1.001,0.619 -0.253,-0.27 -1.753,0.417 -1.499,0.684 -1.044,0.769 -0.027,0.799 1.007,0.029 3.024,-0.928 4.446,-1.744 1.417,-0.812 0.868,-0.295 -0.137,0.419 -1.002,0.716 -2.4,1.615 -3.726,2.256 -1.326,0.64 -1.232,0.559 -1.456,0.621 -0.229,0.061 -0.101,0.156 -0.101,0.156 -0.043,0.718 0.228,0.406 0.675,0.298 0.451,-0.112 0.401,-0.006 0.252,0.112 -0.153,0.117 -0.203,0.267 0.025,0.416 0.227,0.151 0.87,-0.82 1.197,-1.174 0.335,-0.352 0.818,-0.396 1.463,-0.6 0.651,-0.202 0.739,-0.449 0.386,-0.322 -0.352,0.132 0.214,-0.357 0.094,-0.419 -0.124,-0.062 -0.138,0.214 -0.68,0.327 -0.546,0.112 1.15,-1.039 1.379,-1.108 0.234,-0.07 -0.234,0.176 -0.276,0.333 -0.04,0.155 0.292,-0.206 0.682,-0.339 0.397,-0.13 -0.192,0.25 -0.531,0.451 -0.346,0.202 -0.207,0.685 0.194,0.153 0.399,-0.529 1.879,-1.13 1.879,-1.13 0,0 0.202,0.382 0.238,0.128 0.036,-0.258 0.915,-0.681 1.471,-0.898 0.552,-0.218 0.131,-0.534 0.131,-0.534 -0.42,-0.376 0.353,-0.34 0.353,-0.34 0.428,-0.738 2.538,-0.923 3.034,-1.088 0.501,-0.171 1.129,0.124 0.684,-0.327 -0.442,-0.445 0.256,-0.382 0.899,-0.673 0.637,-0.288 1.154,0.095 0.675,-0.369 -0.482,-0.469 0.12,-0.407 0.12,-0.407 0.474,-1.134 -2.096,-1.667 -2.096,-1.667 0,0 -0.627,0.801 -1.114,0.997 -0.49,0.193 0.06,0.112 0.132,0.482 0.075,0.369 -0.388,0.62 -0.306,0.35 0.077,-0.265 -0.185,-0.85 -0.515,-0.667 -0.335,0.179 -0.631,0.355 -1.522,0.234 -0.889,-0.118 -1.456,0.234 -1.677,0.507 -0.224,0.276 -0.521,0.236 -0.779,0.232 -0.25,-0.005 -0.522,-0.318 -0.509,0.111 0.016,0.428 -0.261,-0.029 -0.261,-0.029 -0.558,-0.407 2.211,-0.916 3.194,-1.018 0.983,-0.103 2.318,-0.892 2.027,-0.963 -0.292,-0.068 -0.667,0.28 -0.591,-0.18 0.075,-0.457 0.084,-0.205 -0.438,-0.12 -0.522,0.083 -0.375,0.505 -1.107,0.382 -0.735,-0.123 -0.674,0.251 -1.391,0.3 -0.715,0.053 -1.013,-0.031 -0.341,-0.215 0.671,-0.186 0.506,-0.001 1.831,-0.792 1.322,-0.79 0.939,-0.181 1.617,-0.457 0.681,-0.277 0.239,-0.696 0.044,-0.783 -0.191,-0.088 -0.265,0.18 -0.389,-0.311 -0.123,-0.491 -0.517,-0.16 -0.904,0.407 -0.389,0.563 -0.761,0.588 -1.437,0.437 -0.678,-0.149 -0.482,0.242 -0.482,0.242 0.508,0.593 -0.097,0.101 -0.532,0.463 -0.438,0.36 -0.946,0.289 -1.024,0.281 -0.077,-0.006 -0.342,-0.223 -0.571,0.122 -0.228,0.352 -1.574,0.355 -2.012,0.029 -0.44,-0.326 -0.436,-0.272 -0.439,-0.128 -0.007,0.147 0.311,0.538 -0.753,-0.015 -0.084,-0.044 -0.148,-0.053 -0.218,-0.074 0.013,-0.029 0.046,-0.068 0.052,-0.094 0.094,-0.368 1.369,-1.038 1.675,-1.245 0.307,-0.21 0.525,0.028 0.525,0.028 1.135,-0.112 1.89,-0.503 1.866,-0.639 -0.02,-0.136 -1.075,0.401 -1.222,0.28 -0.145,-0.122 0.669,-0.375 1.219,-0.469 0.551,-0.101 0.235,-0.203 0.235,-0.203 -1.953,-0.415 -5.752,2.871 -5.583,2.378 0.167,-0.494 4.099,-2.414 4.414,-2.866 0.313,-0.454 1.515,-0.48 1.056,-0.765 -0.455,-0.287 -2.703,1.314 -4.782,2.158 -2.073,0.844 -3.696,3.065 -3.826,2.782 -0.137,-0.289 0.537,-1.718 4.368,-3.833 1.334,-0.738 2.209,-1.351 2.809,-1.834 0.98,0.12 1.772,0.384 2.004,0.832 0.564,1.085 0.849,0.805 0.89,0.587 0.043,-0.221 0.149,-0.114 0.322,0.214 0.168,0.322 0.214,0.007 0.214,0.007 0,0 0.025,-0.056 0.324,0.119 0.295,0.178 -0.467,0.058 -0.535,0.308 -0.07,0.248 0.779,0.584 1.059,0.344 0.28,-0.239 -0.355,-0.382 0.029,-0.504 0.382,-0.115 1.759,0.2 2.45,0.66 0.687,0.458 1.764,1.098 2.211,1.642 0.445,0.553 0.772,0.414 0.694,0.38 -0.081,-0.037 -0.427,-0.171 0.297,-0.093 0.728,0.074 0.772,0.609 0.728,0.794 -0.044,0.188 0.038,-0.227 -0.22,0 -0.255,0.226 0.171,0.574 0.236,0.411 0.059,-0.165 -0.019,-0.146 0.433,-0.193 0.453,-0.049 1.466,0.933 2.13,1.593 0.661,0.665 0.976,0.559 0.878,0.804 -0.095,0.241 -0.016,0.308 -0.016,0.308 1.009,0.726 2.004,2.038 2.511,2.641 0.51,0.598 -0.053,-0.674 0.743,0 0.798,0.676 2.065,3.19 2.382,3.761 0.317,0.563 1.04,1.61 1.068,2.274 0.021,0.664 0.239,0.55 0.431,0.489 0.184,-0.063 0.598,0.943 0.563,1.119 -0.03,0.175 -0.075,0.475 0.253,0.526 0.326,0.052 0.058,0.084 0.366,0.865 0.305,0.783 -0.177,0.57 0.473,0.339 0.653,-0.231 0.319,0.763 0.319,0.763 0.259,0.449 1.651,-0.115 1.589,-0.324 -0.055,-0.208 -0.607,-0.511 -0.222,-0.487 0.379,0.027 0.675,-0.358 0.588,-0.328 -0.091,0.031 -0.527,-0.531 -0.234,-0.8 0.293,-0.269 -0.212,-1.507 -0.69,-1.719 -0.479,-0.213 -0.604,-1.426 -0.836,-1.827 -0.225,-0.398 -0.455,0.083 -0.639,0.198 -0.18,0.113 0.29,0.563 0.151,0.674 -0.139,0.112 -1.11,-0.694 -0.724,-1.035 0.38,-0.343 0.722,-0.242 0.013,-1.363 -0.711,-1.122 -2.286,-3.922 -2.608,-4.337 -0.321,-0.414 -0.706,-1.092 -0.607,-0.803 0.096,0.281 0.017,0.195 -0.347,0.206 -0.368,0.011 0.185,0.336 0.272,0.569 0.087,0.229 -0.304,0.484 -0.338,0.174 -0.032,-0.309 -1.776,-1.926 -2.511,-2.547 -0.736,-0.62 -2.475,-2.689 -2.798,-2.957 -0.329,-0.27 -0.387,-0.274 -0.242,-0.361 0.142,-0.084 1.051,0.703 1.451,1.147 0.4,0.446 0.75,0.59 1.117,0.429 0.371,-0.156 0.937,1.133 1.651,2.199 0.711,1.064 0.973,0.458 1.189,0.243 0.216,-0.219 -0.129,-0.436 -0.375,-0.557 -0.245,-0.118 -1.794,-2.116 -1.957,-2.214 -0.164,-0.099 -0.203,0.112 -0.28,0.038 -0.075,-0.07 0.236,-0.13 0.187,-0.283 -0.056,-0.156 -0.655,-0.623 -0.562,-0.399 0.095,0.224 -0.238,0.254 -0.749,-0.42 -0.509,-0.68 -2.428,-1.454 -2.891,-1.813 -0.461,-0.358 -0.074,0.323 -0.585,-0.062 -0.51,-0.383 -0.964,-0.963 -1.402,-1.038 -0.441,-0.072 -0.529,-0.527 -0.514,-0.691 0.016,-0.167 -0.005,-0.363 -0.363,-0.422 -0.361,-0.053 -1.18,-0.634 -1.282,-0.691 -0.106,-0.049 -0.434,0.299 -0.267,0.401 0.163,0.103 1.234,0.956 1.301,1.098 0.065,0.145 0.168,0.244 0.615,0.323 0.446,0.084 1.894,1.299 2.282,1.714 0.396,0.415 -0.351,-0.115 -0.734,-0.361 -0.385,-0.246 -2.847,-2.073 -3.185,-2.269 -0.341,-0.194 -0.077,0.101 -0.711,-0.026 -0.637,-0.122 0.138,-0.429 -0.246,-0.522 -0.382,-0.093 -0.633,0.329 -0.69,0.436 -0.056,0.112 2.889,2.325 4.05,2.948 1.163,0.621 4.051,3.314 4.314,3.587 0.263,0.278 0.62,0.811 0.2,0.423 -0.411,-0.388 0.094,-0.078 -4.179,-3.094 -4.274,-3.014 -5.448,-2.367 -5.55,-3.242 -0.1,-0.871 4.373,-2.094 4.851,-2.182 0,0 0.312,-0.09 0.521,-0.127 0.206,-0.039 0.134,-0.004 0.327,-0.192 0.193,-0.191 0.21,-0.217 0.006,-0.228 -0.205,-0.006 -0.546,-0.024 -0.52,-0.274 0.026,-0.255 3.026,-0.76 3.135,-0.658 0.106,0.102 1.562,0.012 1.963,0.102 0.406,0.093 -0.06,0.27 -0.237,0.16 -0.18,-0.111 -1.08,-0.01 -1.176,0.096 -0.092,0.106 -0.261,0.183 -0.577,0.306 -0.309,0.12 -0.868,-0.15 -1.557,-0.076 -0.686,0.073 -0.268,0.582 -0.221,0.75 0.046,0.163 0.351,-0.047 0.351,-0.047 0.012,-0.006 0.021,-0.014 0.03,-0.019 0.401,-0.212 0.901,-0.045 1.533,-0.102 0.649,-0.054 1.197,-0.318 1.197,-0.318 0.924,0.038 -0.289,-0.366 2.056,-0.183 2.343,0.18 3.172,0.69 3.469,0.913 0.29,0.222 0.436,0.029 0.436,0.029 -1.806,-1.922 -5.571,-1.046 -4.491,-1.576 1.088,-0.526 5.556,1.444 5.454,1.301 -0.107,-0.145 -1.037,-0.278 -0.39,-0.282 0.645,-0.011 0.645,0.315 0.551,0.063 -0.099,-0.254 -0.827,-0.524 -2.703,-1.36 -1.869,-0.84 -5.252,-0.5 -5.488,-0.45 -0.238,0.05 -0.218,-0.092 -0.218,-0.092 0,0 -0.2,-0.369 2.064,-0.313 2.261,0.062 4.068,0.385 5.906,0.902 1.835,0.518 1.42,0.939 1.835,0.705 0.41,-0.238 -0.102,-0.451 -0.43,-0.596 -0.323,-0.146 -0.732,-0.445 -0.491,-0.425 0.242,0.021 0.647,0.079 0.572,-0.19 -0.071,-0.266 -1.737,-0.246 -2.441,-0.315 -0.703,-0.073 -2.42,-0.62 -2.764,-0.709 -0.342,-0.085 0.045,0.383 0.045,0.383 -1.066,0.174 -1.088,-0.237 -1.899,-0.321 -0.809,-0.077 -2.175,0.187 -2.417,0.171 -0.24,-0.017 0.029,-0.248 -0.904,0.049 -0.931,0.298 -1.747,0.191 -2.191,0.37 -0.444,0.175 0.056,0.276 -0.126,0.432 -0.18,0.155 -0.218,0.43 -0.649,0.224 -0.426,-0.207 -4.21,1.387 -4.21,1.387 -0.154,0.06 -0.042,0.174 -0.439,0.14 -0.401,-0.03 -0.205,0.082 -0.115,0.29 0.088,0.212 -0.361,0.181 -0.771,0.445 -0.408,0.267 -0.429,-0.147 -0.421,0.262 0.006,0.407 -0.327,0.3 -0.602,0.129 -0.273,-0.171 -0.355,0.141 -0.244,0.292 0.109,0.152 -0.165,0.057 -0.165,0.057 -0.222,-0.049 -0.177,-0.553 0.368,-0.547 0.539,0.006 0.546,-0.17 0.459,-0.175 -0.08,-0.004 -0.17,-0.133 -0.036,-0.184 0.129,-0.053 -0.199,-0.509 -0.813,-0.204 -0.552,0.279 -0.951,0.193 -1.029,0.174 0.076,-0.065 0.135,-0.087 0.2,-0.063 0.35,0.12 0.51,-0.433 0.244,-0.619 -0.073,-0.051 -0.508,0.154 -1.1,0.477 -3.943,-1.158 -6.577,0.139 -7.008,0.579 -0.449,0.468 -0.922,0.415 -1.088,0.533 -0.166,0.115 -0.022,0.095 -0.356,0.002 -0.331,-0.089 -1.2,0.512 -1.281,0.567 -0.08,0.057 -0.437,0.308 -0.146,0.263 0.291,-0.048 1.428,-0.391 1.899,-0.697 0.467,-0.306 1.235,-0.324 1.341,-0.363 0.105,-0.041 0.694,-0.234 0.734,-0.384 0.048,-0.152 1.324,-0.255 1.324,-0.255 0.3,-0.045 0.109,-0.352 0.2,-0.291 0.094,0.062 0.332,-0.045 0.332,-0.045 0.8,-0.338 1.789,0.166 2.222,0.171 0.432,0.001 0.259,0.088 0.273,0.23 0.015,0.135 -0.019,0.038 -0.019,0.038 -1.346,-0.694 -7.396,1.237 -7.398,1.469 0,0.049 0.008,0.065 0.016,0.076 -0.019,-0.011 -0.069,-0.009 -0.218,0.091 -0.358,0.243 -0.998,0.528 -1.004,0.66 -0.005,0.128 0.5,-0.132 0.865,-0.337 0.359,-0.206 -0.276,0.342 -0.507,0.529 -0.228,0.189 -0.306,0.419 -0.33,0.506 -0.022,0.09 0.643,-0.165 0.563,-0.347 -0.084,-0.184 0.33,-0.538 0.33,-0.538 2.755,-1.172 4.199,-1.373 4.816,-1.497 0.622,-0.123 0.434,0.048 0.434,0.048 -2.708,0.401 -5.992,2.726 -5.992,2.726 -0.403,0.099 -0.304,0.704 0.136,0.313 0.437,-0.391 0.863,-0.343 0.624,-0.258 -0.01,0.007 -0.025,0.012 -0.037,0.018 -0.197,0.089 -0.171,0.214 -0.171,0.214 0.18,0.403 0.529,-0.236 0.529,-0.236 1.026,-1.275 0.729,-0.75 1.208,-0.946 0.483,-0.19 1.282,-0.357 1.222,-0.52 -0.062,-0.16 -0.179,0.103 -0.201,-0.05 -0.019,-0.152 1.767,-0.56 1.767,-0.56 0.711,-0.211 1.676,-0.34 2.643,-0.367 -1.157,0.715 -2.187,1.394 -2.287,1.509 -0.233,0.268 1.407,-0.562 1.34,-0.263 -0.066,0.295 -2.543,1.707 -2.405,1.513 0.144,-0.192 1.578,-0.932 -0.009,-0.255 -1.593,0.681 -2.219,2.63 -2.833,2.615 -0.614,-0.014 -1.513,1.683 -1.808,1.996 -0.295,0.312 -0.788,0.868 -0.674,1.068 0.115,0.204 1.541,-0.903 0.106,0.438 -0.695,0.653 -1.469,1.932 -2.093,3.069 V -30.128 H 27.323 V 11.31 H 14.876 z"\n           id="path3145"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,306.01,1062.8)"\n         id="g3147">\n        <path\n           d="m 0,0 c -0.334,0.401 -1.045,1.07 -1.682,1.138 -0.843,0.094 -1.219,0.776 -1.573,0.71 -0.349,-0.065 -0.539,-0.32 -1,0.005 C -4.722,2.174 -5.292,1.724 -4.736,1.722 -4.179,1.719 -4.737,1.433 -3.407,1.312 -2.321,1.212 -1.794,0.592 -1.184,0 H 0 z"\n           id="path3149"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,314.12,1062.8)"\n         id="g3151">\n        <path\n           d="m 0,0 c -0.049,0.457 -0.165,1.003 -0.402,1.41 -0.458,0.793 -0.319,1.464 0.387,1.776 0,0 0.271,0.04 0.312,-0.295 0.04,-0.335 0.571,0.874 1.714,0.889 0,0 0.35,0.188 0.132,0.233 C 1.929,4.055 2.78,4.355 2.398,3.894 2.019,3.432 2.876,3.847 3.076,4.034 3.274,4.219 3.718,3.832 3.751,3.721 3.78,3.612 3.934,3.987 3.765,4.125 3.602,4.266 4.732,4.717 3.729,4.512 2.728,4.305 3.142,4.55 2.31,4.387 1.483,4.223 0.113,3.888 1.412,4.446 2.71,5.002 2.905,4.999 3.164,5.196 3.425,5.397 4.523,5.638 3.06,5.643 1.599,5.645 2.516,5.097 -0.438,4.055 c 0,0 -0.727,0.004 0.312,0.428 0,0 0.28,0.23 0.457,0.555 C 0.507,5.365 0.47,5.082 0.596,4.978 0.728,4.876 0.967,5.087 1.214,5.194 1.453,5.298 1.366,5.229 1.373,5.145 1.381,5.063 1.852,5.362 1.937,5.471 2.019,5.579 3.11,6.173 3.29,6.112 3.469,6.048 3.503,6.499 2.336,6.006 c 0,0 -0.196,-0.074 -0.208,-0.146 0,0 0.003,-0.038 0.039,-0.049 C 2.202,5.802 2.035,5.556 1.771,5.643 1.511,5.728 1.502,5.572 1.098,5.683 0.691,5.795 0.203,5.533 0.011,5.347 -0.181,5.168 -0.348,5.007 -0.476,5 -0.605,4.994 -0.503,4.516 -0.83,4.572 c -0.328,0.057 -0.204,0.27 -0.204,0.27 0,0 -0.443,1.636 -0.738,2.159 -0.231,0.404 -0.016,0.294 0.147,0.133 -0.233,0.326 -0.698,1.055 -0.654,1.364 0.057,0.433 -0.086,1.304 -0.469,1.075 0,0 -0.142,0 -0.013,-0.089 0.131,-0.089 0.125,-0.265 -0.009,-0.131 -0.134,0.131 -0.485,0.61 -0.646,0.344 0,0 -0.226,-0.055 -0.038,-0.184 0.192,-0.127 0.292,-0.183 0.537,-0.757 0,0 0.052,-0.135 0.2,-0.244 C -2.57,8.399 -2.564,8.285 -2.565,8.158 -2.57,8.034 -2.384,7.654 -2.27,7.612 -2.154,7.568 -1.663,6.017 -1.703,5.752 -1.744,5.491 -1.714,4.953 -1.601,4.734 -1.495,4.514 -1.642,4.512 -1.777,4.973 -1.91,5.434 -1.974,5.75 -2.281,6.354 -2.587,6.955 -2.54,7.522 -3.109,7.903 c -0.573,0.38 -0.461,0.778 -0.862,0.668 0,0 -0.104,-0.015 0.042,-0.152 0.151,-0.139 0.252,-0.003 0.428,-0.421 0,0 0.062,-0.294 -0.11,-0.304 -0.173,-0.009 0.373,-0.505 0.484,-0.756 0.112,-0.253 0.463,-0.801 0.402,-0.991 -0.063,-0.189 -0.411,0.464 -0.655,1.002 -0.244,0.537 -0.466,0.878 -0.862,0.925 0,0 -0.038,-0.09 0.072,-0.142 0.11,-0.05 0.138,-0.09 0.141,-0.27 0,-0.177 -0.055,-0.41 0.17,-0.477 0.223,-0.069 0.21,0.067 0.286,0.035 0.075,-0.033 0.36,-0.414 0.259,-0.919 -0.1,-0.505 0.035,-1.332 0.112,-1.51 0.084,-0.179 0.45,-0.765 0.351,-0.965 -0.098,-0.199 -0.03,-0.292 0.276,-0.186 0.309,0.105 0.501,-0.026 0.138,0.676 -0.364,0.7 -0.488,0.221 -0.245,0.515 0.252,0.294 -0.063,0.745 -0.123,0.955 -0.065,0.209 0.119,0.166 0.169,0.04 0.049,-0.124 0.199,-0.816 0.379,-0.892 0.184,-0.078 0.325,-0.901 0.199,-1.213 -0.088,-0.226 -0.013,-0.345 0.037,-0.397 -0.04,0.03 -0.124,0.058 -0.276,-0.041 -0.236,-0.15 -0.93,-0.565 -0.579,-0.888 0.352,-0.323 0.254,-0.347 0.194,-0.347 -0.054,0 -0.339,0.207 0,-0.199 0.341,-0.402 0.551,-0.47 0.609,-0.579 0.061,-0.112 -0.072,0.182 0.065,0.25 0.142,0.072 0.252,-0.484 0.149,-0.566 -0.046,-0.038 -0.071,-0.243 -0.049,-0.47 -0.013,0.006 -0.049,0.021 -0.058,0.025 -0.275,0.115 0.07,0.238 0,0.474 C -2.038,1.019 -3.175,1.419 -3.255,1.481 -3.336,1.542 -3.38,1.523 -3.306,1.612 -3.233,1.703 -3.713,2.113 -3.773,1.94 -3.83,1.764 -3.979,1.792 -3.979,1.792 -4.323,1.894 -5.947,3.078 -6.215,3.099 -6.48,3.118 -6.989,3.08 -6.933,3.316 c 0.058,0.233 0.556,-0.149 0.423,0.157 -0.134,0.305 -1.093,0.559 -1.524,0.639 -0.435,0.08 -0.562,0.253 -0.562,0.253 -0.458,0.671 -1.132,1.266 -1.132,1.266 l 0.039,0.012 C -10.35,5.51 -9.589,5.289 -9.724,5 -9.862,4.712 -10.175,5.152 -10.175,5.152 -11.658,4.601 -10.46,4.847 -8.559,3.66 c 1.901,-1.188 1.544,-0.2 3.288,-1.857 1.746,-1.657 0.127,-0.315 -0.878,-0.051 -1.008,0.262 -1.242,0.86 -2.15,1.013 -0.908,0.154 -3.161,0.806 -1.977,0.121 1.184,-0.684 1.688,-1.103 2.9,-1.42 C -6.728,1.294 -5.379,0.631 -4.329,0 H 0 z"\n           id="path3153"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,311.94,1052.7)"\n         id="g3155">\n        <path\n           d="M 0,0 C -0.026,0.046 -0.072,0.1 -0.121,0.149 -0.027,0.015 0.034,-0.059 0,0"\n           id="path3157"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n      <g\n         transform="matrix(1.448,0,0,-1.448,272.14,1096.7)"\n         id="g3159">\n        <path\n           d="m 0,0 c -0.66,1.206 -1.152,2.254 -1.195,2.226 -0.072,-0.054 -0.683,0.618 -0.414,0.698 0.259,0.08 0.732,0.178 0.351,0.527 -0.379,0.351 -0.985,1.095 -0.614,0.999 0.379,-0.099 0.401,-0.05 0.106,0.261 -0.295,0.311 -0.778,1.687 -0.393,1.501 0.383,-0.182 0.358,0.255 0.187,0.6 -0.174,0.347 -0.869,0.214 0.557,0.551 1.336,0.313 0.938,-0.346 0.882,-0.432 C -0.508,6.958 -0.405,7.009 0,6.998 V 0 z"\n           id="path3161"\n           inkscape:connector-curvature="0"\n           style="fill:#003862" />\n      </g>\n    </g>\n  </g>\n  <text\n     font-size="39.999px"\n     transform="scale(1.00001,0.99999)"\n     line-height="125%"\n     style="font-size:39.99860001px;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;font-family:sans-serif"\n     xml:space="preserve"\n     y="-71.984406"\n     x="117.04559"\n     id="text3163"\n     sodipodi:linespacing="125%"><tspan\n       y="-71.984406"\n       x="117.04559"\n       id="tspan3165" /></text>\n  <g\n     transform="matrix(1.2402,0,0,1,48.17,17.315002)"\n     id="g3167"\n     style="font-family:sans-serif">\n    <text\n       font-size="13.791px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:13.46952534px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="-0.54994416"\n       x="2.8649783"\n       xml:space="preserve"\n       id="text3169"\n       sodipodi:linespacing="125%"><tspan\n         y="-0.54994416"\n         x="2.8649783"\n         id="tspan3171"\n         style="font-size:13.46952534px">{{ legendInfo.title }}</tspan></text>\n    <text\n       font-size="11.225px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:10.77562046px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="12.774043"\n       x="3.1857841"\n       xml:space="preserve"\n       id="text3173"\n       sodipodi:linespacing="125%"><tspan\n         y="12.774043"\n         x="3.1857841"\n         id="tspan3175"\n         style="font-size:10.77562046px">{{ legendInfo.author }}</tspan></text>\n    <text\n       font-size="8.9796px"\n       line-height="125%"\n       transform="scale(0.89796,1.1136)"\n       style="font-size:8.97959995px;line-height:125%;letter-spacing:0px;word-spacing:0px"\n       y="26.193958"\n       x="3.4663973"\n       xml:space="preserve"\n       id="text3177"\n       sodipodi:linespacing="125%"><tspan\n         y="26.193958"\n         x="3.4663973"\n         id="tspan3179">{{ legendInfo.date }}</tspan></text>\n  </g>\n  <g\n     transform="translate(104,6.0000016)"\n     id="g3181">\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="287.22"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="287.22"\n       id="line3183" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="258.76712"\n       font-weight="bold"\n       id="text3185">0</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="322.38"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="322.38"\n       id="line3187" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="290.33426"\n       font-weight="bold"\n       id="text3189">1</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="357.54001"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="357.54001"\n       id="line3191" />\n    <text\n       style="font-size:12px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="321.90137"\n       font-weight="bold"\n       id="text3193">2</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="392.67999"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="392.67999"\n       id="line3195" />\n    <text\n       style="font-size:13px;font-weight:bold;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="353.46854"\n       font-weight="bold"\n       id="text3197">3</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11360002;stroke-miterlimit:10"\n       y2="42.074001"\n       font-size="12"\n       x2="427.84"\n       stroke-miterlimit="10"\n       y1="19.396999"\n       x1="427.84"\n       id="line3199" />\n    <text\n       style="font-size:12px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="47.967857"\n       x="406.65717"\n       font-weight="bold"\n       id="text3201">4cm</text>\n    <line\n       style="font-size:12px;stroke:#000000;stroke-width:1.11399996;stroke-miterlimit:10"\n       y2="25.287001"\n       font-size="12"\n       x2="286.66"\n       stroke-miterlimit="10"\n       y1="25.287001"\n       x1="428.39999"\n       id="line3203" />\n    <text\n       style="font-size:12.00025729px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136,0.89795)"\n       font-size="7.7955px"\n       y="17.034184"\n       x="403.25516"\n       font-weight="bold"\n       id="text3205">{{ legendInfo.km }}km</text>\n    <g\n       style="font-size:12px;stroke:#000000;stroke-miterlimit:10"\n       mix-blend-mode="normal"\n       font-size="12"\n       transform="matrix(1.2402,0,0,1,287.22,25.397)"\n       stroke-miterlimit="10"\n       id="g3207">\n      <line\n         x2="14.173"\n         x1="14.173"\n         y2="11.339"\n         id="line3209"\n         y1="0" />\n      <line\n         x2="42.52"\n         x1="42.52"\n         y2="11.339"\n         id="line3211"\n         y1="0" />\n      <line\n         x2="70.865997"\n         x1="70.865997"\n         y2="11.339"\n         id="line3213"\n         y1="0" />\n      <line\n         x2="99.212997"\n         x1="99.212997"\n         y2="11.339"\n         id="line3215"\n         y1="0" />\n    </g>\n    <text\n       style="font-size:12px;font-weight:bold;text-anchor:end;fill:#000000;font-family:monospace"\n       transform="scale(1.1136239,0.89796924)"\n       font-size="7.7955px"\n       y="17.033819"\n       x="331.14337"\n       font-weight="bold"\n       id="text3217">{{ legendInfo.scale }}</text>\n  </g>\n  <g\n     transform="matrix(0.086033,0,0,0.086031,326.26,4.7060016)"\n     id="g3219"\n     style="stroke:#000000;stroke-width:1">\n    <g\n       transform="matrix(0.4431,0,0,0.4431,253.34,54.222)"\n       id="g3221"\n       style="stroke:#000000;stroke-width:1">\n      <path\n         d="m 373.75,91.496 c -0.95,-1.132 -74.87,153.23 -164.19,343.02 -160.8,341.68 -162.27,345.16 -156.49,350.27 3.203,2.83 6.954,4.79 8.319,4.34 1.365,-0.46 71.171,-73.88 155.14,-163.1 83.97,-89.22 153.66,-162.83 154.87,-163.56 1.2,-0.72 71.42,72.34 156.04,162.29 84.62,89.95 155.21,163.82 156.95,164.19 1.74,0.37 5.57,-1.19 8.5,-3.44 5.04,-3.86 -3.75,-23.46 -156.04,-348 -88.77,-189.18 -162.15,-344.88 -163.1,-346.01 z m -2.72,42.694 c 1.4,-1.53 2.45,63.91 2.45,148.36 V 433.62 L 231.18,584.96 C 106.57,717.42 87.38,737.82 86.08,738.47 c 0.143,-0.35 1.009,-1.57 1.361,-2.26 0.81,-1.59 64.409,-137.07 141.3,-301.05 76.89,-163.99 140.93,-299.45 142.29,-300.97 z m -99.77,642 V 1021 h 32.11 V 816.18 L 411.92,1021 h 44.6 V 776.19 h -32.11 v 204.8 L 315.85,776.19 h -44.59 z"\n         id="path3223"\n         inkscape:connector-curvature="0"\n         style="stroke:#000000;stroke-width:1" />\n    </g>\n  </g>\n  <flowRoot\n     xml:space="preserve"\n     id="flowRoot3029"\n     style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans"><flowRegion\n       id="flowRegion3031"><rect\n         id="rect3033"\n         width="707.59393"\n         height="202.33392"\n         x="-16.669556"\n         y="-43.418858" /></flowRegion><flowPara\n       id="flowPara3035" /></flowRoot></svg>\n',
module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-63b72c61",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-63b72c61",module.exports))}()},{vue:142,"vue-hot-reload-api":141}],160:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#loading-status-overlay {\n    position: absolute;\n    top: 0%;\n    left: 0%;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0);\n    opacity: 1;\n    z-index:2147483647;\n}\n#loading-status {\n    position: absolute;\n    top: 50%;\n    left:50%;\n    width:600px;\n    border-style:solid;\n    padding:10px 10px 10px 10px;\n    transform: translate(-50%,-50%);\n    background-color: rgba(0,0,0,0.3);\n    opacity: 1;\n}\n#loading-status .application{\n    font-size: 1.1em\n}\n#loading-status .component{\n    font-size: 1em;\n    font-style: italic;\n}\n#loading-status .component .name{\n    padding-left:20px\n}\n#loading-status .error {\n    color: #ec5840;\n    font-weight: bold;\n}\n#loading-status .close {\n    color: black;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{screenHeight:"layout.screenHeight"},data:function(){return{app:null,components:[],revision:1,errors:[]}},computed:{hasError:function(){return this.errors.length>0},show:function(){return this.revision&&(!this.appStatus.isReady()||this.errors.length>0||this.components.find(function(component){return!component.isReady()}))&&!0||!1},closable:function(){return this.revision&&this.app&&this.app.isFinished()},appStatus:function(){return this.app||this.register("app",this.application),this.revision&&this.app}},watch:{revision:function(newValue,oldValue){this.adjustHeight()}},props:["application"],methods:{adjustHeight:function(){if(0!==(0,_vendor.$)("#loading-status").length&&0!==this.screenHeight){var maxHeight=Math.floor(.95*this.screenHeight),height=(0,_vendor.$)("#loading-status").height(),bodyHeight=(0,_vendor.$)("#loading-status-body").height();if(bodyHeight<200&&(bodyHeight=200),bodyHeight<=maxHeight){if(height===bodyHeight)return;height=bodyHeight}else height=maxHeight;(0,_vendor.$)("#loading-status").height(height)}},close:function(){++this.revision,(0,_vendor.$)("#loading-status-overlay").remove(),(0,_vendor.$)("#loading-status").remove()},phaseStatus:function(status){return this.revision&&status},getStatus:function(componentId){return this.components.find(function(o){return o.id===componentId})},register:function(componentId,componentName){componentName=componentName||componentId;var vm=this;return vm.Status||(vm.Status=function(componentId,componentName){if("app"===componentId)vm.app=this,vm.revision+=1;else{for(var index=-1,i=0;i<vm.components.length;i++)if(componentId===vm.components[i].id){index=i;break}index>0?vm.components[index]=this:vm.components.push(this),vm.revision+=1}return this.id=componentId,this.name=componentName,this.completed=0,this.processed=0,this.processing=0,this.phases=[],this},vm.Status.prototype._change=function(){if(vm.app===this)vm.revision+=1;else{vm.revision+=1;for(var i=0;i<vm.components.length;i++)if(this.id===vm.components[i].id){_vendor.Vue.set(vm.components,i,vm.components[i]);break}}},vm.Status.prototype.phaseBegin=function(name,weight,description,critical,async){this.phases.push({name:name,weight:weight,description:description,critical:null===critical||void 0===critical||critical,async:async||!1}),this.processing+=weight,this._change()},vm.Status.prototype.phaseEnd=function(name){if(!(this.completed>=100)){var index=this.phases.findIndex(function(o){return o.name===name});index<0||(this.completed+=this.phases[index].weight,this.processed+=this.phases[index].weight,this.phases.splice(index,1),this._change())}},vm.Status.prototype.phaseFailed=function(name,reason){if(!(this.completed>=100)){var phase=this.phases.find(function(o){return o.name===name});phase&&(this.processed+=phase.weight,phase.reason=reason,phase.failed=!0,this._change())}},vm.Status.prototype.failedPhases=function(){return this.phases.filter(function(o){return o.failed})},vm.Status.prototype.isSucceed=function(){return this.completed>=100},vm.Status.prototype.isFinished=function(){return this.processed>=100},vm.Status.prototype.isReady=function(reason){return this.processing>=100&&this.phases.findIndex(function(o){return o.failed&&o.critical})<0},vm.Status.prototype.failedMessage=function(){var messages="";return _vendor.$.each(this.failedPhases,function(index,p){index>0&&(messages+="\r\n"),messages+=p.reason}),messages}),new vm.Status(componentId,componentName)}},ready:function(){var vm=this;window.alert=function(){return originAlert=window.alert,function(msg){(0,_vendor.$)("#loading-status-overlay").length>0?console.error(msg):originAlert(msg)}}();var loadingStatus=vm.register("LoadingStatus","Loading Status Component");loadingStatus.phaseBegin("initialize",100,"Override console"),vm._sequence=0;var addMessage=function(message){message&&message.length>0&&(vm.revision+=1,vm.errors.push(++vm._sequence+" : "+message))},getArguments=function(args,startIndex){var result=[];startIndex=null===startIndex||void 0===startIndex?0:startIndex;for(var i=startIndex;i<args.length;i++)result.push(args[i]);return result};console.error=function(){var originFunc=console.error;return function(args){var message=null;message=1==arguments.length?"string"==typeof arguments[0]?arguments[0]:JSON.stringify(arguments[0]):JSON.stringify(getArguments(arguments)),addMessage(message),originFunc.apply(this,arguments)}}(),console.assert=function(){var originFunc=console.assert;return function(args){if(!arguments[0]){var message=null;message=2==arguments.length?"string"==typeof arguments[1]?arguments[1]:JSON.stringify(arguments[1]):JSON.stringify(getArguments(arguments,1)),addMessage(message)}originFunc.apply(this,arguments)}}(),_vendor.Vue.config.errorHandler=function(){var originFunc=_vendor.Vue.config.errorHandler;return function(err,vm){return addMessage(err),originFunc(err,vm)}}(),loadingStatus.phaseEnd("initialize")}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div id="loading-status-overlay" v-if="show">\n<div id="loading-status" v-if="show" class="scroller">\n  <div id="loading-status-body">\n  <div class="row">\n    <div class="small-11">\n        <h4>Status</h4>\n    </div>\n    <div class="small-1">\n        <a @click="close" class="close" v-show="closable"><i class="fa fa-close" aria-hidden="true"></i></a>\n    </div>\n  </div>\n  <div class="row application">\n      <div class="small-7">\n          <a class="name">{{application}} </a>\n      </div>\n      <div class="small-5">\n          <div v-for="(index,phase) in appStatus.phases" tracking-by="$index">\n              <br v-if="index > 0">\n              <a v-if="!phaseStatus(phase).async" class="float-right"><i class="fa fa-spinner" aria-hidden="true"></i></a>\n              <a v-if="phaseStatus(phase).async" class="float-right"><i class="fa fa-pause" aria-hidden="true"></i></a>\n              <a class="action">{{phaseStatus(phase).description}}</a>\n              <a class="error" v-if="phase.failed">({{phaseStatus(phase).reason}})</a>\n          </div>\n          <a v-if="appStatus.isSucceed()" class="float-right">OK</a>\n      </div>\n  </div>\n  <div v-for="status in components" class="row component" track-by="id">\n    <div class="small-7">\n        <a class="name">{{status.name}} </a>\n    </div>\n    <div class="small-5">\n      <div v-for="(index,phase) in phaseStatus(status.phases)" tracking-by="$index">\n        <a v-if="!phaseStatus(phase).async" class="float-right"><i class="fa fa-spinner" aria-hidden="true"></i></a>\n        <a v-if="phaseStatus(phase).async" class="float-right"><i class="fa fa-pause" aria-hidden="true"></i></a>\n        <a class="action">{{phaseStatus(phase).description}}</a>\n        <a class="error" v-if="phaseStatus(phase).failed">({{phaseStatus(phase).reason}})</a>\n      </div>\n      <a v-if="phaseStatus(status).isSucceed()" class="float-right">OK</a>\n    </div>\n  </div>\n  <div v-if="hasError">\n      <hr class="row" style="border-width:4px;">\n      <div id="error-list">\n          <div v-for="error in errors" class="row" track_by="$index">\n            <div class="small-12">\n                <a class="error">{{error}} </a>\n            </div>\n          </div>\n      </div>\n   </div>\n  </div>\n</div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#loading-status-overlay {\n    position: absolute;\n    top: 0%;\n    left: 0%;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0,0,0,0);\n    opacity: 1;\n    z-index:2147483647;\n}\n#loading-status {\n    position: absolute;\n    top: 50%;\n    left:50%;\n    width:600px;\n    border-style:solid;\n    padding:10px 10px 10px 10px;\n    transform: translate(-50%,-50%);\n    background-color: rgba(0,0,0,0.3);\n    opacity: 1;\n}\n#loading-status .application{\n    font-size: 1.1em\n}\n#loading-status .component{\n    font-size: 1em;\n    font-style: italic;\n}\n#loading-status .component .name{\n    padding-left:20px\n}\n#loading-status .error {\n    color: #ec5840;\n    font-weight: bold;\n}\n#loading-status .close {\n    color: black;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-1beb4263",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-1beb4263",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],161:[function(require,module,exports){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.ol-custom-overviewmap,\n.ol-custom-overviewmap.ol-uncollapsible {\n    bottom: 0;\n    left: auto;\n    right: 0;\n    top: auto;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed)  {\n   border: 1px solid black;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-map {\n    border: none;\n    width: 300px;\n    height:150px;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-box {\n    border: 2px solid red;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed) button{\n    bottom: auto;\n    left: auto;\n    right: 1px;\n    top: 1px;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js"),_info=require("./info.vue"),_info2=_interopRequireDefault(_info),_scales=require("./scales.vue"),_scales2=_interopRequireDefault(_scales),_search=require("./search.vue"),_search2=_interopRequireDefault(_search),_featuredetail=require("./featuredetail.vue"),_featuredetail2=_interopRequireDefault(_featuredetail),_measure=require("./measure.vue"),_measure2=_interopRequireDefault(_measure),_weatherforecast=require("./weatherforecast.vue"),_weatherforecast2=_interopRequireDefault(_weatherforecast),_toolbox=require("./toolbox.vue"),_toolbox2=_interopRequireDefault(_toolbox);exports.default={store:{fixedScales:"fixedScales",resolutions:"resolutions",matrixSets:"matrixSets",dpmm:"dpmm",view:"view",displayGraticule:"settings.graticule",displayResolution:"displayResolution"},components:{gkInfo:_info2.default,gkScales:_scales2.default,gkSearch:_search2.default,gkMeasure:_measure2.default,gkFeaturedetail:_featuredetail2.default,gkWeatherforecast:_weatherforecast2.default,gkToolbox:_toolbox2.default},data:function(){return{scale:0,mapControls:{},graticule:new _vendor.ol.LabelGraticule,dragPanInter:new _vendor.ol.interaction.DragPan({condition:function(mapBrowserEvent){return(!mapBrowserEvent.pointerEvent||1!==mapBrowserEvent.pointerEvent.button)&&_vendor.ol.events.condition.noModifierKeys(mapBrowserEvent)}}),doubleClickZoomInter:new _vendor.ol.interaction.DoubleClickZoom,keyboardPanInter:new _vendor.ol.interaction.KeyboardPan,keyboardZoomInter:new _vendor.ol.interaction.KeyboardZoom,middleDragPanInter:new _vendor.ol.interaction.DragPan({condition:function(mapBrowserEvent){return!(!mapBrowserEvent.pointerEvent||1!==mapBrowserEvent.pointerEvent.button)&&(mapBrowserEvent.preventDefault(),!0)}})}},computed:{loading:function(){return this.$root.loading},catalogue:function(){return this.$root.catalogue},env:function(){return this.$root.env},annotations:function(){return this.$root.annotations},active:function(){return this.$root.active},measure:function(){return this.$root.measure},width:{cache:!1,get:function(){return(0,_vendor.$)("#map").width()}},height:{cache:!1,get:function(){return(0,_vendor.$)("#map").height()}},extent:function(){return this.olmap.getView().calculateExtent(this.olmap.getSize())},resolution:function(){return this.olmap.getView().getResolution()}},watch:{displayGraticule:function(newValue,oldValue){this.showGraticule(newValue)}},methods:{createEvent:function(source,type,options){try{return new this._event(type,options)}catch(ex){return this._event=function(type,options){_vendor.ol.events.Event.call(this,type);var ev=this;options&&_vendor.$.each(options,function(k,v){ev[k]=v})},_vendor.ol.inherits(this._event,_vendor.ol.events.Event),new this._event(type,options)}},clearFeatureProperties:function(feature){_vendor.$.each(feature.getKeys(),function(index,key){key!==feature.getGeometryName()&&feature.unset(key)})},cloneFeature:function(feat,cloneGeometry,excludedProperties){if(!1===cloneGeometry){var feature=new _vendor.ol.Feature;return _vendor.$.each(feat.getProperties(),function(key,value){key!==feat.getGeometryName()&&(excludedProperties&&excludedProperties.indexOf(key)>=0||feature.set(key,value,!0))}),feature}var feature=feat.clone();return excludedProperties&&_vendor.$.each(excludedProperties,function(index,p){feature.unset(p,!0)}),feature},isGeometryEqual:function(geom1,geom2,epsilon){epsilon=null!==epsilon&&void 0!==epsilon&&epsilon;var initGeom=function initGeom(geom){var geometries=null;if(geom instanceof _vendor.ol.geom.GeometryCollection)geometries=geom.getGeometriesArray();else if(geom instanceof _vendor.ol.geom.MultiPolygon)geometries=geom.getPolygons();else if(geom instanceof _vendor.ol.geom.MultiPoint)geometries=geom.getPolygons();else if(geom instanceof _vendor.ol.geom.MultiLineString)geometries=geom.getLineStrings();else{if(!(geom instanceof _vendor.ol.geom.Polygon))return geom;geometries=geom.getLinearRings()}return 0===geometries.length?null:1===geometries.length?initGeom(geometries[0]):geom},isCoordinateEqual=function(coords1,coords2){return epsilon?Math.abs(coords1[0]-coords2[0])<=epsilon&&Math.abs(coords1[1]-coords2[1])<=epsilon:coords1[0]===coords2[0]&&coords1[1]===coords2[1]};if(geom1=initGeom(geom1),geom2=initGeom(geom2),!geom1&&!geom2)return!0;if((geom1&&1||0)+(geom2&&1||0)===1)return!1;if(geom1 instanceof _vendor.ol.geom.Point&&geom2 instanceof _vendor.ol.geom.Point)return isCoordinateEqual(geom1.getCoordinates(),geom2.getCoordinates());if(geom1 instanceof _vendor.ol.geom.LineString&&geom2 instanceof _vendor.ol.geom.LineString){var coords1=geom1.getCoordinates(),coords2=geom2.getCoordinates(),len1=coords1.length,len2=coords2.length;if(len1!==len2)return!1;if(this.isGeometryEqual(coords1[0],coords1[len1-1])&&(len1-=1),this.isGeometryEqual(coords2[0],coords2[len1-1])&&(len2-=1),len1!==len2)return!1;var baseIndex1=0,baseIndex2=coords2.findIndex(function(c){return isCoordinateEqual(c,coords1[baseIndex1])});if(baseIndex2<0)return!1;var equal=!0;for(i1=baseIndex1+1,i2=baseIndex2+1;i1<len1;i1++,i2=(i2+1)%len2)if(!isCoordinateEqual(coords1[i1],coords2[i2])){if(i1===baseIndex1+1){equal=!1;break}return!1}if(!equal)for(i1=baseIndex1+1,i2=(len2+baseIndex2-1)%len2;i1<len1;i1++,i2=(len2+i2-1)%len2)if(!isCoordinateEqual(coords1[i1],coords2[i2]))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.LinearRing&&geom2 instanceof _vendor.ol.geom.LinearRing){var coords1=geom1.getCoordinates(),coords2=geom2.getCoordinates(),len1=coords1.length-1,len2=coords2.length-1;if(len1!==len2)return!1;var baseIndex1=0,baseIndex2=coords2.findIndex(function(c){return isCoordinateEqual(c,coords1[baseIndex1])});if(baseIndex2<0)return!1;var equal=!0;for(i1=baseIndex1+1,i2=baseIndex2+1;i1<len1;i1++,i2=(i2+1)%len2)if(!isCoordinateEqual(coords1[i1],coords2[i2])){if(i1===baseIndex1+1){equal=!1;break}return!1}if(!equal)for(i1=baseIndex1+1,i2=(len2+baseIndex2-1)%len2;i1<len1;i1++,i2=(len2+i2-1)%len2)if(!isCoordinateEqual(coords1[i1],coords2[i2]))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.Polygon&&geom2 instanceof _vendor.ol.geom.Polygon){var vm=this,rings1=geom1.getLinearRings(),rings2=geom2.getLinearRings();if(rings1.length!=rings2.length)return!1;var foundIndexes=[];for(i=0;i<rings1.length;i++)if(!rings2.find(function(r2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(r2,rings1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.MultiLineString&&geom2 instanceof _vendor.ol.geom.MultiLineString){var vm=this,lines1=geom1.getLineStrings(),lines2=geom2.getLineStrings();if(lines1.length!=lines2.length)return!1;var foundIndexes=[];for(i=0;i<lines1.length;i++)if(!lines2.find(function(l2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(l2,lines1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.MultiPolygon&&geom2 instanceof _vendor.ol.geom.MultiPolygon){var vm=this,polygons1=geom1.getPolygons(),polygons2=geom2.getPolygons();if(polygons1.length!=polygons2.length)return!1;var foundIndexes=[];for(i=0;i<polygons1.length;i++)if(!polygons2.find(function(p2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(p2,polygons1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}if(geom1 instanceof _vendor.ol.geom.GeometryCollection&&geom2 instanceof _vendor.ol.geom.GeometryCollection){var vm=this,geometries1=geom1.getGeometriesArray(),geometries2=geom2.getGeometriesArray();if(geometries1.length!=geometries2.length)return!1;var foundIndexes=[];for(i=0;i<geometries1.length;i++)if(!geometries2.find(function(p2,index){return!(foundIndexes.indexOf(index)>=0)&&(!!vm.isGeometryEqual(p2,geometries1[i])&&(foundIndexes.push(index),!0))}))return!1;return!0}return!1},showGraticule:function(show){this.graticule.setMap(show?this.olmap:null)},getControl:function(controlName){var control=this.mapControls[controlName];return control?control.controls:void 0},isControlEnabled:function(controlName){var control=this.mapControls[controlName];return control?control.enabled:void 0},enableControl:function(controlName,enable){var vm=this,control=this.mapControls[controlName];control&&control.enabled!==enable&&(control.controls&&(control.preenable&&control.preenable.call(control,enable),Array.isArray(control.controls)?_vendor.$.each(control.controls,function(index,c){enable?vm.olmap.addControl(c):vm.olmap.removeControl(c)}):enable?vm.olmap.addControl(control.controls):vm.olmap.removeControl(control.controls),control.postenable&&control.postenable.call(control,enable)),control.enabled=enable)},tintSVG:function(svgstring,tints){return tints.forEach(function(colour){svgstring=svgstring.split(colour[0]).join(colour[1])}),svgstring},getBlob:function(feature,keys,tintSettings,callback){var vm=this,tool=feature.get("toolName")?vm.annotations.getTool(feature.get("toolName")):{},key=JSON.stringify(keys.map(function(k){return vm.annotations.getStyleProperty(feature,k,"default",tool)}));if(this.svgBlobs[key])return this.svgBlobs[key];if(this.jobs[key])vm.jobs[key].then(function(){feature.changed(),callback&&callback()});else{var dimsKey=keys.length>=3?keys[2]:"dims",tintKey=keys.length>=2?keys[1]:"tint",dims=tool[dimsKey]||[48,48],tint=vm.annotations.getStyleProperty(feature,tintKey,"default",tool);Array.isArray(tint)||(tint=tintSettings&&tintSettings[tint]?tintSettings[tint]:[]);var url=vm.annotations.getStyleProperty(feature,keys[0],null,tool);"string"==typeof tint&&(url=tint,tint=[]),vm.jobs[key]=new Promise(function(resolve,reject){vm.addSVG(key,url,tint,dims,resolve)}).then(function(){feature.changed(),delete vm.jobs[key],callback&&callback()})}},addSVG:function(key,url,tint,dims,pResolve){this._addSVG||(this._addSVG=function(vm,key,url,tint,dims,pResolve){this.key=key,this.url=url,this.tint=tint||[],this.dims=dims,this.pResolve=pResolve,this.svgToAdd=Array.isArray(this.url)?this.url.length:1,this.vm=vm},this._addSVG.prototype.draw=function(){if(0!==this.svgToAdd)if(Array.isArray(this.url))for(var i=0;i<this.url.length;i++)this._load(this.url[i]);else this._load(this.url)},this._addSVG.prototype._draw=function(){if(this.svgToAdd-=1,!(this.svgToAdd>0)){void 0!==this.vm.svgBlobs[this.key]&&this.pResolve();var self=this;new Promise(function(resolve,reject){Array.isArray(self.url)?self.vm.drawSVG(self.key,self.url.map(function(u){return self.vm.svgTemplates[u]}),self.tint,self.dims,resolve,reject):self.vm.drawSVG(self.key,self.vm.svgTemplates[self.url],self.tint,self.dims,resolve,reject)}).then(function(){self.pResolve()})}},this._addSVG.prototype._load=function(svgUrl){var self=this;self.vm.svgTemplates[svgUrl]?self._draw():self.vm.jobs[svgUrl]?self.vm.jobs[svgUrl].then(function(){self._draw()}):self.vm.jobs[svgUrl]=new Promise(function(resolve,reject){var req=new window.XMLHttpRequest;req.withCredentials=!0,req.onload=function(){this.responseText&&(self.vm.svgTemplates[svgUrl]=this.responseText,resolve())},req.onerror=function(){reject()},req.open("GET",svgUrl),req.send()}).then(function(){self._draw(),delete self.vm.jobs[svgUrl]})}),new this._addSVG(this,key,url,tint,dims,pResolve).draw()},drawSVG:function(key,svgstring,tints,dims,resolve,reject){this._drawSVG||(this._drawSVG=function(vm,key,svgstring,tints,dims,resolve,reject){this.key=key,this.svgstring=svgstring,this.tints=tints,this.dims=dims,this.resolve=resolve,this.reject=reject,this.imagesToDraw=Array.isArray(this.svgstring)?this.svgstring.length:1,this.vm=vm},this._drawSVG.prototype.draw=function(){var canvas=(0,_vendor.$)("<canvas>");if(canvas.attr({width:this.dims[0],height:this.dims[1]}),0!==this.imagesToDraw)if(Array.isArray(this.svgstring))for(var i=0;i<this.svgstring.length;i++)this._drawImage(canvas,this.svgstring[i]);else this._drawImage(canvas,this.svgstring)},this._drawSVG.prototype._drawImage=function(canvas,svgstr){var self=this;canvas.drawImage({source:"data:image/svg+xml;utf8,"+encodeURIComponent(self.vm.tintSVG(svgstr,self.tints)),fromCenter:!1,x:0,y:0,width:self.dims[0],height:self.dims[1],load:function(){self.imagesToDraw-=1,0===self.imagesToDraw&&(canvas.get(0).toBlob(function(blob){self.vm.svgBlobs[self.key]=window.URL.createObjectURL(blob),self.resolve()},"image/png"),canvas=null)}})}),new this._drawSVG(this,key,svgstring,tints,dims,resolve,reject).draw()},cacheStyle:function(styleFunc,feature,keys,suffix){var vm=this;if(feature){var key=keys.map(function(k){return vm.annotations.getStyleProperty(feature,k,"default")}).join(";");key=suffix?key+";"+suffix:key;var style=this.cachedStyles[key];if(style)return style;if(style=styleFunc(feature))return style=Array.isArray(style)?style:[style],this.cachedStyles[key]=style,style}return(new _vendor.ol.layer.Vector).getStyleFunction()()},animate:function(args){this.olmap.getView().animate.apply(this.olmap.getView(),arguments)},setScale:function(scale){for(;Math.abs(this.getScale()-scale)>.001;)this.olmap.getView().setResolution(this.olmap.getView().getResolution()*scale/this.getScale());this.scale=scale},getScale:function(){var size=this.olmap.getSize(),center=this.getCenter(),extent=this.olmap.getView().calculateExtent(size);return 2*this.$root.wgs84Sphere.haversineDistance([extent[0],center[1]],center)*this.dpmm/size[0]},getFixedScale:function(scale){scale=scale||this.getScale();var closest=null;return _vendor.$.each(this.fixedScales,function(){(null===closest||Math.abs(this-scale)<Math.abs(closest-scale))&&(closest=this)}),closest},getScaleString:function(scale){return Math.round(100*scale)/100<10?"1:"+Math.round(1e3*scale).toLocaleString():Math.round(100*scale)/100>=1e3?"1:"+Math.round(scale/1e3).toLocaleString()+" M":"1:"+Math.round(scale).toLocaleString()+" K"},getDeg:function(coords){return coords[0].toFixed(5)+", "+coords[1].toFixed(5)},getDMS:function(coords){return _vendor.ol.coordinate.degreesToStringHDMS_(coords[0],"EW",1)+", "+_vendor.ol.coordinate.degreesToStringHDMS_(coords[1],"NS",1)},getMGA:function(coords){var mga=this.getMGARaw(coords);return mga?"MGA "+mga.mgaZone+" "+Math.round(mga.mgaEast)+"E "+Math.round(mga.mgaNorth)+"N":""},getMGARaw:function(coords){var results={};if(coords[0]>=108&&coords[0]<114)results.mgaZone=49;else if(coords[0]>=114&&coords[0]<120)results.mgaZone=50;else if(coords[0]>=120&&coords[0]<126)results.mgaZone=51;else if(coords[0]>=126&&coords[0]<132)results.mgaZone=52;else if(coords[0]>=132&&coords[0]<138)results.mgaZone=53;else if(coords[0]>=138&&coords[0]<144)results.mgaZone=54;else if(coords[0]>=144&&coords[0]<150)results.mgaZone=55;else{if(!(coords[0]>=150&&coords[0]<156))return null;results.mgaZone=56}var newCoords=(0,_vendor.proj4)("EPSG:4326","EPSG:283"+results.mgaZone).forward(coords);return results.mgaEast=newCoords[0],results.mgaNorth=newCoords[1],results},parseDMSString:function(dmsStr){var dmsRegex=/^\s*(-)?(\d+(?:\.\d+)?)[Â°Âº:d\s]?\s*(?:(\d+(?:\.\d+)?)['âââ²:m]\s*(?:(\d{1,2}(?:\.\d+)?)(?:"|â³|ââ|''|s)?)?)?\s*([NSEW])?[,:\s]+(-)?(\d+(?:\.\d+)?)[Â°Âº:d\s]?\s?(?:(\d+(?:\.\d+)?)['âââ²:m]\s*(?:(\d{1,2}(?:\.\d+)?)(?:"|â³|ââ|''|s)?)?)?\s*([NSEW])?$/gim,groups=dmsRegex.exec(dmsStr);if(!groups)return null;var dmsToDecimal=function(sign,deg,min,sec,dir){var sg=sign?-1:1;sg*="wWsS".indexOf(dir)>=0?-1:1;var d=Number(deg),m=min?Number(min):0,s=sec?Number(sec):0;return d>=0&&d<=180&&m>=0&&m<=60&&s>=0&&s<=60?sg*(d+m/60+s/3600):null},coords=[dmsToDecimal(groups[1],groups[2],groups[3],groups[4],groups[5]),dmsToDecimal(groups[6],groups[7],groups[8],groups[9],groups[10])];if(!coords[0]||!coords[1])return null;if((coords[0]<-90||coords[0]>90)&&(coords[1]<-90||coords[1]>90))return null;if(coords[0]<-180||coords[0]>180||coords[1]<-180||coords[1]>180)return null;if(coords[0]<-90||coords[0]>90);else if(coords[1]<-90||coords[1]>90)coords=coords.reverse();else if(groups[5]||groups[10])if(groups[5]&&groups[10]){if("nNsS".indexOf(groups[5])>=0&&"nNsS".indexOf(groups[10])>=0)return null;if("wWeE".indexOf(groups[5])>=0&&"wWeE".indexOf(groups[10])>=0)return null;"nNsS".indexOf(groups[5])>=0&&"wWeE".indexOf(groups[10])>=0&&(coords=coords.reverse())}else groups[5]&&"nNsS".indexOf(groups[5])>=0?coords=coords.reverse():groups[10]&&"wWeE".indexOf(groups[10])>=0&&(coords=coords.reverse());else coords=coords.reverse();return coords},parseMGAString:function(mgaStr){var mgaRegex=/(?:MGA|mga)\s*(49|50|51|52|53|54|55|56)\s*(\d{3,7})\s*[mM]{0,1}\s*([nNeE]{0,1})\s*,*\s*(\d{4,7})\s*[mM]{0,1}\s*([nNeE]{0,1})/gi,groups=mgaRegex.exec(mgaStr);if(!groups)return null;var results={mgaZone:parseInt(groups[1]),mgaEast:groups[2],mgaNorth:groups[4]};if("E"===groups[5]&&"N"===groups[3]&&(results.mgaEast=groups[4],results.mgaNorth=groups[2]),3===results.mgaEast.length&&4===results.mgaNorth.length)results.mgaEast=results.mgaEast+"000",results.mgaNorth=results.mgaNorth+"000";else if(6!==results.mgaEast.length||7!==results.mgaNorth.length)return null;results.mgaEast=parseInt(results.mgaEast),results.mgaNorth=parseInt(results.mgaNorth);var coords=(0,_vendor.proj4)("EPSG:283"+groups[1],"EPSG:4326").forward([results.mgaEast,results.mgaNorth]);return results.coords=coords,results},parseGridString:function(fdStr){var fdRegex=/(FD|fd|PIL|pil)\s*([a-zA-Z]{1,2})\s*([0-9]{1,5})/gi,groups=fdRegex.exec(fdStr);return groups?{gridType:groups[1].toUpperCase(),gridNorth:groups[2].toUpperCase(),gridEast:groups[3]}:null},getCenter:function(){return this.olmap.getView().getCenter()},tileLoaderHook:function(tileSource,tileLayer){var numLoadingTiles=0,badTiles=0,tileLoader=tileSource.getTileLoadFunction();return function(tile,src){0===numLoadingTiles&&(tileLayer.progress="loading",badTiles=0),numLoadingTiles++;var image=tile.getImage();image.crossOrigin="use-credentials",image.onload=function(){0===--numLoadingTiles&&(tileLayer.progress=badTiles>0?"error":"idle")},image.onerror=function(){badTiles++,image.onload()},tileLoader(tile,src)}},setUrlTimestamp:function(tileSource,time){tileSource.setUrlTimestamp||(tileSource.setUrlTimestamp=function(){var originFunc=tileSource.getTileUrlFunction();return function(time){tileSource.setTileUrlFunction(function(tileCoord,pixelRatio,projection){return originFunc(tileCoord,pixelRatio,projection)+"&time="+time},tileSource.getUrls()[0]+"?time="+time)}}()),tileSource.setUrlTimestamp(time)},refreshLayerTile:function(tileLayer){var vm=this;tileLayer.getSource().load||(tileLayer.getSource().load=function(){tileLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.setUrlTimestamp(tileLayer.getSource(),_vendor.moment.utc().unix()),tileLayer.getSource().tileCache.clear(),vm.$root.active.refreshRevision+=1}),tileLayer.getSource().load()},refreshTimelineFunc:function(layerOptions,postFetchTimelineFunc){var vm=this,_func2=null,layer=layerOptions,_getRefreshTime=function(){return layer.lastTimelineRefreshTime?_vendor.moment.tz("Australia/Perth")-layer.lastTimelineRefreshTime>1e3*layer.timelineRefresh?_vendor.moment.tz("Australia/Perth"):null:_vendor.moment.tz("Australia/Perth")},_getNextRefreshTime=function(){var nextTime=null;return nextTime=layer.lastTimelineRefreshTime?_vendor.moment.tz("Australia/Perth")-layer.lastTimelineRefreshTime>1e3*layer.timelineRefresh?_vendor.moment.tz("Australia/Perth"):(0,_vendor.moment)(layer.lastTimelineRefreshTime):_vendor.moment.tz("Australia/Perth"),nextTime.seconds(nextTime.seconds()+layer.timelineRefresh),nextTime},_setTimeIndex=function(tileLayer,previousTimeline){if(layer.timeline){var _func=function(layer,tileLayer,perviousTimeline){var d=null;d=previousTimeline&&previousTimeline.length>0&&tileLayer.get("timeIndex")&&tileLayer.get("timeIndex")<previousTimeline.length&&tileLayer.get("timeIndex")>=0?_vendor.moment.fromLocaleString(previousTimeline[tileLayer.get("timeIndex")][0]):_vendor.moment.tz("Australia/Perth");var timeIndex=null;_vendor.$.each(layer.timeline,function(index,timelineLayer){return timediff=d-_vendor.moment.fromLocaleString(timelineLayer[0]),timediff<0?(timeIndex=0==index?0:index-1,!1):0===timediff?(timeIndex=index,!1):void 0}),timeIndex=null==timeIndex?layer.timeline.length-1:timeIndex,tileLayer.set("timeIndex",timeIndex)};layer.setTimeIndex?layer.setTimeIndex(layer,tileLayer,previousTimeline,_func):_func(layer,tileLayer)}},_fetchTimelineFailed=function(layer,tileLayer,auto,status,statusText){if((layer.previewLayer||vm.getMapLayer(layer)===tileLayer)&&(tileLayer.get("timeIndex")||_setTimeIndex(tileLayer),!layer.previewLayer&&(tileLayer.progress="error",tileLayer.set("updated",layer.lastUpdatetime+"\r\n"+status+" : "+statusText),vm.active.refreshRevision+=1,auto))){var waitTimes=_getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(!0)},waitTimes)}},_timelineNotChanged=function(layer,tileLayer,auto){if((layer.previewLayer||vm.getMapLayer(layer)===tileLayer)&&(tileLayer.get("timeIndex")||_setTimeIndex(tileLayer),!layer.previewLayer&&(tileLayer.progress="",tileLayer.set("updated",layer.lastUpdatetime),vm.active.refreshRevision+=1,auto))){var waitTimes=_getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(!0)},waitTimes)}},_processTimeline=function(layer,tileLayer,auto,timeline){if(layer.previewLayer||vm.getMapLayer(layer)===tileLayer){
tileLayer.progress="",postFetchTimelineFunc&&postFetchTimelineFunc(layer,tileLayer,timeline);var previousTimeline=layer.timeline;if(layer.timeline=timeline.layers,_setTimeIndex(tileLayer,previousTimeline),tileLayer.set("updated",layer.lastUpdatetime),vm.active.refreshRevision+=1,!layer.previewLayer&&auto){var waitTimes=_getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(!0)},waitTimes)}}};return _func2=function(auto){var tileLayer=layer.mapLayer;if(!tileLayer)throw"Maplayer is null.";var currentRefreshTime=_getRefreshTime();if(null===currentRefreshTime){if(tileLayer.get("timeIndex")||_setTimeIndex(tileLayer),layer.previewLayer)return;if(!auto)return;var waitTimes=_getNextRefreshTime()-(0,_vendor.moment)();tileLayer.autoTimelineRefresh=setTimeout(function(){_func2(!0)},waitTimes)}else{(0,_vendor.moment)(currentRefreshTime);layer.lastTimelineRefreshTime=currentRefreshTime,tileLayer.progress="loading",_vendor.$.ajax(layer.fetchTimelineUrl(layer.lastUpdatetime||""),{xhrFields:{withCredentials:!0},dataType:"json",success:function(data,status,jqXHR){if(290===jqXHR.status)return void _timelineNotChanged(layer,tileLayer,auto);layer.lastUpdatetime=data.updatetime,_processTimeline(layer,tileLayer,auto,data)},error:function(jqXHR){_fetchTimelineFailed(layer,tileLayer,auto,jqXHR.status,jqXHR.responseText||jqXHR.statusText)}})}}},createTimelineLayer:function(options){if(options.mapLayer)return options.mapLayer;var vm=this;options.params=_vendor.$.extend({FORMAT:"image/jpeg",SRS:"EPSG:4326"},options.params||{});var tileSource=new _vendor.ol.source.TileWMS({params:options.params,tileGrid:new _vendor.ol.tilegrid.TileGrid({extent:[-180,-90,180,90],resolutions:this.resolutions,tileSize:[1024,1024]})}),tileLayer=new _vendor.ol.layer.Tile({opacity:options.opacity||1,source:tileSource});return tileLayer.progress="",tileSource.setTileLoadFunction(this.tileLoaderHook(tileSource,tileLayer)),tileLayer.on("propertychange",function(event){"timeIndex"===event.key&&options.timeline&&options.timeline.length>0&&tileSource.updateParams({layers:getLayerId(options.timeline[event.target.get(event.key)][1])})}),!options.refreshTimeline&&options.timelineRefresh&&options.fetchTimelineUrl&&(options.refreshTimeline=vm.refreshTimelineFunc(options,function(layer,tileLayer,timeline){tileLayer.getSource().setUrls(timeline.servers)})),tileLayer.set("name",options.name),tileLayer.set("id",options.mapLayerId),tileLayer.layer=options,options.mapLayer=tileLayer,tileLayer.refresh=function(){this.refreshTimeline||(this.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1)},tileLayer.stopAutoRefresh=function(){vm._stopAutoRefresh(this)},tileLayer.startAutoRefresh=function(){vm._startAutoRefresh(this)},tileLayer.postAdd=function(){options.refreshTimeline&&(tileLayer.autoTimelineRefresh&&(clearInterval(tileLayer.autoTimelineRefresh),tileLayer.autoTimelineRefresh=null),options.refreshTimeline(!0)),options.refresh&&(this.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1),this.startAutoRefresh()},tileLayer.postRemove=function(){vm._postRemove(this),this.autoTimelineRefresh&&(clearInterval(this.autoTimelineRefresh),this.autoTimelineRefresh=null)},tileLayer},createWFSLayer:function(options){if(options.mapLayer)return options.mapLayer;var vm=this,url=this.env.kmiService+"/wfs",withCredentialsSetting=!0;if(options.id.startsWith("hotspots:")){withCredentialsSetting=!1;var url=this.env.hotspotService+"/wfs"}options.params=_vendor.$.extend({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:getLayerId(options.id)},options.params||{});var vectorSource=new _vendor.ol.source.Vector({features:options.features||void 0,params:options.params}),vector=new _vendor.ol.layer.Vector({opacity:options.opacity||1,source:vectorSource,style:options.style,getFeatureInfo:options.getFeatureInfo});return vector.progress="",vectorSource.retrieveFeatures=function(filter,onSuccess,onError){var params=_vendor.$.extend({},options.params);filter?params.cql_filter=filter:params.cql_filter&&delete params.cql_filter,_vendor.$.ajax({url:url+"?"+_vendor.$.param(params),success:function(response,stat,xhr){var features=vm.$root.geojson.readFeatures(response);onSuccess(features)},error:function(){onError&&onError(status,message)},dataType:"json",xhrFields:{withCredentials:withCredentialsSetting}})},vectorSource.loadSource=function(loadType,onSuccess){options.cql_filter?options.params.cql_filter=options.cql_filter:options.params.cql_filter&&delete options.params.cql_filter,vm.$root.active.refreshRevision+=1,vector.progress="loading",options.hotspotFilter&&(options.params.cql_filter=options.hotspotFilter),_vendor.$.ajax({url:url+"?"+_vendor.$.param(options.params),success:function(response,stat,xhr){var features=vm.$root.geojson.readFeatures(response),defaultOnload=function(loadType,source,features){source.clear(!0),source.addFeatures(features)};if(options.onload?options.onload(loadType,vectorSource,features,defaultOnload):defaultOnload(0,vectorSource,features),vm.$root.active.refreshRevision+=1,vector.progress="idle",options.getUpdatedTime){var time=options.getUpdatedTime(features);time?vector.set("updated",time.toLocaleString()):vector.set("updated","")}else vector.set("updated",(0,_vendor.moment)().toLocaleString());vectorSource.dispatchEvent("loadsource"),onSuccess&&onSuccess()},error:function(jqXHR,status,message){vm.$root.active.refreshRevision+=1,vector.progress="error",options.onerror&&options.onerror(status,message)},dataType:"json",xhrFields:{withCredentials:withCredentialsSetting}})},options.onadd&&vectorSource.on("addfeature",function(event){options.onadd(event.feature)}),vector.set("name",options.name),vector.set("id",options.mapLayerId),vector.layer=options,options.mapLayer=vector,vector.stopAutoRefresh=function(){vm._stopAutoRefresh(this)},vector.refresh=function(type){vectorSource.loadSource(type||"auto")},vector.startAutoRefresh=function(){vm._startAutoRefresh(this)},vector.postRemove=function(){vm._postRemove(this)},vector.postAdd=function(){this.startAutoRefresh(),void 0!==options.initialLoad&&!0!==options.initialLoad||vectorSource.loadSource("initial")},vector},createWMSLayer:function(mosaicPosition,dateInfo){var vm=this,parser=new _vendor.ol.format.WMSCapabilities,layerNames=[],mosaicLayersString="";_vendor.$.get(this.env.hotspotService+"/wms?service=WMS&version=1.1.0&request=GetCapabilities").then(function(response){var capabilities=parser.read(response);_vendor.$.each(Object.keys(capabilities.Capability.Layer.Layer),function(index){layerNames.push(capabilities.Capability.Layer.Layer[index].Name)}),0==dateInfo.length?mosaicLayersString+="vrt-test":1==dateInfo.length?_vendor.$.each(layerNames,function(index){layerNames[index].startsWith("FireFlight_"+dateInfo[0])&&(mosaicLayersString+=""==mosaicLayersString?layerNames[index]:","+layerNames[index])}):2==dateInfo.length&&_vendor.$.each(layerNames,function(index){"now"==dateInfo[1]?layerNames[index].startsWith("FireFlight_")&&layerNames[index]>="FireFlight_"+dateInfo[0]&&(mosaicLayersString+=""==mosaicLayersString?layerNames[index]:","+layerNames[index]):layerNames[index]>="FireFlight_"+dateInfo[0]&&layerNames[index]<="FireFlight_"+dateInfo[1]&&(mosaicLayersString+=""==mosaicLayersString?layerNames[index]:","+layerNames[index])});var imgSource=(vm.env.hotSpotService,new _vendor.ol.source.ImageWMS({url:capabilities.Service.OnlineResource+"/hotspots/wms",serverType:"geoserver",crossOrigin:"anonymous",params:{LAYERS:mosaicLayersString},projection:"EPSG:28350"})),imgLayer=new _vendor.ol.layer.Image({opacity:1,source:imgSource,name:"Flight mosaics"});vm.olmap.getLayers().insertAt(mosaicPosition,imgLayer)})},createWMSLayerSingleImage:function(position,flight_datetime,hotspot_no,image_name){var vm=this,imgSource=new _vendor.ol.source.ImageWMS({url:this.env.hotspotService+"/wms",serverType:"geoserver",crossOrigin:"anonymous",params:{LAYERS:flight_datetime+"_img_"+image_name},projection:"EPSG:28350"}),imgLayer=new _vendor.ol.layer.Image({opacity:1,source:imgSource,name:"Hotspot image "+flight_datetime+" "+hotspot_no});vm.olmap.getLayers().insertAt(position,imgLayer)},createWMSLayerHotspots:function(filter,insertPosition){var vm=this,imgSource=new _vendor.ol.source.ImageWMS({url:this.env.hotspotService+"/wms",serverType:"geoserver",crossOrigin:"anonymous",params:{LAYERS:"hotspot_centroids_uat",cql_filter:filter},projection:"EPSG:4326"}),imgLayer=new _vendor.ol.layer.Image({opacity:1,source:imgSource,name:"Thermal Imaging Hotspots"});vm.olmap.getLayers().insertAt(insertPosition,imgLayer)},createAnnotations:function(layer){return this.annotations.featureOverlay.layer||(this.annotations.featureOverlay.layer=layer,layer.mapLayer=this.annotations.featureOverlay),this.annotations.featureOverlay},createTileLayer:function(options){if(options.mapLayer)return options.mapLayer;var vm=this;options.base&&(options.format="image/jpeg");var layer=_vendor.$.extend({opacity:1,name:"Mapbox Outdoors",id:"dpaw:mapbox_outdoors",format:"image/png",tileSize:1024,style:"",projection:"EPSG:4326",wmts_url:this.env.kmiService+"/gwc/service/wmts"},options),matrixSet=this.matrixSets[layer.projection][layer.tileSize],tileGrid=new _vendor.ol.tilegrid.WMTS({origin:_vendor.ol.extent.getTopLeft([-180,-90,180,90]),resolutions:this.resolutions,matrixIds:matrixSet.matrixIds,tileSize:layer.tileSize});tileGrid.origGetZForResolution=tileGrid.getZForResolution,tileGrid.getZForResolution=function(resolution,optDirection){return tileGrid.origGetZForResolution(1.4*resolution,-1)};var tileSource=new _vendor.ol.source.WMTS({url:layer.wmts_url,layer:getLayerId(layer.id),matrixSet:matrixSet.name,format:layer.format,style:layer.style,projection:layer.projection,wrapX:!0,tileGrid:tileGrid}),tileLayer=new _vendor.ol.layer.Tile({opacity:layer.opacity||1,source:tileSource});return tileLayer.progress="",tileLayer.set("name",layer.name,!1),tileLayer.set("id",layer.mapLayerId,!1),tileLayer.layer=options,options.mapLayer=tileLayer,options.lastUpdatetime&&tileLayer.set("updated",layer.lastUpdatetime),tileLayer.on("propertychange",function(event){"timeIndex"===event.key&&options.timeline&&options.timeline.length>0&&(options.timeline[event.target.get(event.key)][2]||(options.timeline[event.target.get(event.key)][2]=new _vendor.ol.source.WMTS({url:layer.wmts_url,layer:getLayerId(options.timeline[event.target.get(event.key)][1]),matrixSet:matrixSet.name,format:layer.format,style:layer.style,projection:layer.projection,wrapX:!0,tileGrid:tileGrid}),options.timeline[event.target.get(event.key)][2].setTileLoadFunction(vm.tileLoaderHook(options.timeline[event.target.get(event.key)][2],tileLayer)),vm.setUrlTimestamp(options.timeline[event.target.get(event.key)][2],_vendor.moment.utc().unix())),tileLayer.setSource(options.timeline[event.target.get(event.key)][2]),options.refresh&&!0!==options.autoRefreshStopped&&(tileLayer.stopAutoRefresh(),tileLayer.startAutoRefresh()))}),!options.refreshTimeline&&options.timelineRefresh&&options.fetchTimelineUrl&&(options.refreshTimeline=vm.refreshTimelineFunc(options,function(layer,tileLayer,timeline){layer.timeline&&_vendor.$.each(timeline.layers,function(index,timelineLayer){layer.timeline.length>index&&layer.timeline[index][2]&&layer.timeline[index][1]===timelineLayer[1]&&(timelineLayer[2]=layer.timeline[index][2],vm.setUrlTimestamp(timelineLayer[2],_vendor.moment.utc().unix()),timelineLayer[2].tileCache.clear())})})),tileLayer.postAdd=function(){options.refreshTimeline?(tileLayer.autoTimelineRefresh&&(clearInterval(tileLayer.autoTimelineRefresh),tileLayer.autoTimelineRefresh=null),options.refreshTimeline(!0)):tileSource.setTileLoadFunction(vm.tileLoaderHook(tileSource,tileLayer)),this.startAutoRefresh(),options.refresh&&(tileLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1)},tileLayer.postRemove=function(){vm._postRemove(this),this.autoTimelineRefresh&&(clearInterval(this.autoTimelineRefresh),this.autoTimelineRefresh=null)},tileLayer.refresh=function(){this.refreshTimeline||(this.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1),vm.refreshLayerTile(this)},tileLayer.stopAutoRefresh=function(){vm._stopAutoRefresh(this)},tileLayer.startAutoRefresh=function(){vm._startAutoRefresh(this)},tileLayer},createImageLayer:function(options){if(options.mapLayer)return options.mapLayer;var vm=this;options.base&&(options.format="image/jpeg");var layer=_vendor.$.extend({opacity:1,name:"Mapbox Outdoors",id:"dpaw:mapbox_outdoors",format:"image/png",tileSize:1024,style:"",projection:"EPSG:4326",wms_url:this.env.kmiService+"/wms"},options),imgSource=new _vendor.ol.source.ImageWMS({url:layer.wms_url,crossOrigin:"use-credentials",serverType:"geoserver",params:{LAYERS:getLayerId(layer.id),styles:layer.style},projection:layer.projection}),imgLayer=new _vendor.ol.layer.Image({opacity:layer.opacity||1,source:imgSource});return imgLayer.progress="",imgLayer.postRemove=function(){vm._postRemove(this)},imgLayer.setParams=function(options){var params=imgSource.getParams();_vendor.$.extend(params,options),params.timestamp=_vendor.moment.utc().unix(),imgSource.updateParams(params)},imgLayer.refresh=function(){options.refresh&&(imgLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1);var params=imgSource.getParams();params.timestamp=_vendor.moment.utc().unix(),imgSource.updateParams(params)},imgLayer.set("name",layer.name,!1),imgLayer.set("id",layer.mapLayerId,!1),imgLayer.layer=options,options.mapLayer=imgLayer,options.lastUpdatetime&&imgLayer.set("updated",layer.lastUpdatetime),imgLayer.stopAutoRefresh=function(){vm._stopAutoRefresh(this)},imgLayer.startAutoRefresh=function(){vm._startAutoRefresh(this)},imgLayer.postAdd=function(){this.startAutoRefresh(),options.refresh&&(imgLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.$root.active.refreshRevision+=1)},imgLayer},enableDependentLayer:function(olLayer,dependentLayerId,enabled){if(olLayer.layer&&olLayer.layer.dependentLayers){var dependentLayer=olLayer.layer.dependentLayers.find(function(l){return l.mapLayerId===dependentLayerId});if(!enabled)return void(dependentLayer&&dependentLayer.mapLayer&&(dependentLayer.mapLayer.show=!1,this.olmap.getLayers().getArray().find(function(l){return l===dependentLayer.mapLayer})&&this.active.removeLayer(dependentLayer.mapLayer)));if(dependentLayer&&dependentLayer.mapLayer&&this.olmap.getLayers().getArray().find(function(l){return l===dependentLayer.mapLayer}))return void(dependentLayer.mapLayer.show=!0);var index=this.olmap.getLayers().getArray().findIndex(function(l){return l===olLayer});if(!(index<0))for(var vm=this,i=olLayer.layer.dependentLayers.length-1;i>=0;i--){if(l=olLayer.layer.dependentLayers[i],l.mapLayerId===dependentLayerId){vm.olmap.getLayers().insertAt(index,l.mapLayer),l.mapLayer.show=!0,vm.olmap.dispatchEvent(vm.createEvent(vm,"addLayer",{mapLayer:l.mapLayer}));break}l.mapLayer.show&&--index}}},getMapLayer:function(id){if(this.olmap)return id&&id.mapLayerId&&(id=id.mapLayerId),this.olmap.getLayers().getArray().find(function(layer){return layer.get("id")===id})},init:function(options){var vm=this;options=options||{},_vendor.proj4.defs("EPSG:28349","+proj=utm +zone=49 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28350","+proj=utm +zone=50 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28351","+proj=utm +zone=51 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28352","+proj=utm +zone=52 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28353","+proj=utm +zone=53 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28354","+proj=utm +zone=54 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28355","+proj=utm +zone=55 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.proj4.defs("EPSG:28356","+proj=utm +zone=56 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),_vendor.ol.control.FullScreen.isFullScreenSupported()||((0,_vendor.$)("#map-search").addClass("noFullScreen"),(0,_vendor.$)("#map-search-button").addClass("noFullScreen")),this.olmap=new _vendor.ol.Map({logo:!1,renderer:"canvas",target:"map",view:new _vendor.ol.View({projection:"EPSG:4326",center:vm.view.center,zoom:6,maxZoom:21,minZoom:5}),controls:[],interactions:_vendor.ol.interaction.defaults({altShiftDragRotate:!1,pinchRotate:!1,dragPan:!1,doubleClickZoom:!1,keyboard:!1})}),this.setScale(this.view.scale/1e3),this.olmap.addInteraction(this.dragPanInter),this.olmap.addInteraction(this.doubleClickZoomInter),this.olmap.addInteraction(this.keyboardPanInter),this.olmap.addInteraction(this.keyboardZoomInter),this.olmap.addInteraction(this.middleDragPanInter),this.graticule.setMap(this.olmap),this.olmap.on("postrender",function(){vm.scale=vm.getScale()}),vm.olmap.on("removeLayer",function(ev){ev.mapLayer.postRemove&&ev.mapLayer.postRemove(),ev.layer.dependentLayers&&_vendor.$.each(ev.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&(dependentLayer.mapLayer.show?(delete dependentLayer.mapLayer.show,vm.active.removeLayer(dependentLayer.mapLayer)):dependentLayer.mapLayer.postRemove&&dependentLayer.mapLayer.postRemove())})}),vm.olmap.on("addLayer",function(ev){if(ev.mapLayer.postAdd&&ev.mapLayer.postAdd(),ev.mapLayer.layer&&ev.mapLayer.layer.dependentLayers){var position=vm.olmap.getLayers().getArray().findIndex(function(l){return l===ev.mapLayer});position>=0&&_vendor.$.each(ev.mapLayer.layer.dependentLayers,function(index,l){l.mapLayer||(l.mapLayer=vm["create"+l.type](l),l.mapLayer.setOpacity(l.opacity||1),l.mapLayer.dependentLayer=!0),!1!==l.autoAdd&&(vm.olmap.getLayers().insertAt(position++,l.mapLayer),l.mapLayer.show=!0,vm.olmap.dispatchEvent(vm.createEvent(vm,"addLayer",{mapLayer:l.mapLayer})))})}}),vm.olmap.on("changeLayerOrder",function(ev){if(ev.mapLayer.layer.dependentLayers){_vendor.$.each(ev.mapLayer.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&dependentLayer.mapLayer.show&&vm.olmap.removeLayer(dependentLayer.mapLayer)});var position=vm.olmap.getLayers().getArray().findIndex(function(l){return l===ev.mapLayer});position>=0&&_vendor.$.each(ev.mapLayer.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&dependentLayer.mapLayer.show&&vm.olmap.getLayers().insertAt(position++,dependentLayer.mapLayer)}),_vendor.$.each(ev.mapLayer.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&dependentLayer.mapLayer.show&&dependentLayer.dependentLayers&&vm.olmap.dispatchEvent(vm.createEvent(vm,"changeLayerOrder",{mapLayer:dependentLayer.mapLayer}))})}})},initLayers:function(fixedLayers,activeLayers){var vm=this;_vendor.$.each(fixedLayers,function(index,fixedLayer){var catLayer=vm.$root.catalogue.getLayer(fixedLayer.mapLayerId||fixedLayer.id);catLayer?(_vendor.$.extend(catLayer,fixedLayer,{name:catLayer.name||fixedLayer.name,title:catLayer.title||fixedLayer.title,abstract:catLayer.abstract||fixedLayer.abstract}),catLayer.dependentLayers&&_vendor.$.each(catLayer.dependentLayers,function(index,layer){layer.mapLayerId=layer.mapLayerId||layer.id})):vm.$root.catalogue.catalogue.push(fixedLayer)}),vm._overviewLayer=vm._overviewLayer||_vendor.$.extend({},vm.$root.catalogue.getLayer(vm.env.overviewLayer||"dpaw:mapbox_outdoors")),activeLayers=activeLayers.filter(function(activeLayer){return vm.$root.catalogue.getLayer(activeLayer[0])&&!0});var initialLayers=activeLayers.reverse().map(function(activeLayer){return _vendor.$.extend(vm.$root.catalogue.getLayer(activeLayer[0]),activeLayer[1])});_vendor.$.each(initialLayers,function(index,layer){vm.catalogue.onLayerChange(layer,!0)}),vm.mapControls=_vendor.$.extend(vm.mapControls,{zoom:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.Zoom({target:(0,_vendor.$)("#external-controls").get(0)})},overviewMap:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.OverviewMap({className:"ol-overviewmap ol-custom-overviewmap",layers:[],collapseLabel:"Â»",label:"Â«",collapsed:!1,view:new _vendor.ol.View({projection:"EPSG:4326"})}),preenable:function(enable){if(enable)this.controls.getOverviewMap().addLayer(vm["create"+vm._overviewLayer.type](vm._overviewLayer)),vm._overviewLayer.mapLayer.postAdd();else{this._interact&&(this._interact.unset(),this._interact=null);try{this.controls.getOverviewMap().removeLayer(this.controls.getOverviewMap().getLayers().item(0))}catch(ex){}}},postenable:function(enable){if(enable){var overviewMapControl=this.controls,extentbox=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overlay-container"),overviewMap=(0,_vendor.$)(".ol-custom-overviewmap").find(".ol-overviewmap-map");extentbox.length&&(this._interact=(0,_vendor.interact)(extentbox.get(0),{}).draggable({intertia:!0,restrict:{restriction:overviewMap.get(0),endOnly:!0,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:function(event){extentbox.get(0).style.left&&(extentbox.get(0).style.left=parseInt(extentbox.get(0).style.left)+event.dx+"px"),extentbox.get(0).style.right&&(extentbox.get(0).style.right=parseInt(extentbox.get(0).style.right)+event.dx+"px"),extentbox.get(0).style.bottom&&(extentbox.get(0).style.bottom=parseInt(extentbox.get(0).style.bottom)-event.dy+"px"),extentbox.get(0).style.top&&(extentbox.get(0).style.top=parseInt(extentbox.get(0).style.top)-event.dy+"px")},onend:function(event){var centralPosition=[extentbox.get(0).style.left?parseInt(extentbox.get(0).style.left)+extentbox.width()/2:parseInt(extentbox.get(0).style.right)-extentbox.width()/2,extentbox.get(0).style.bottom?overviewMap.height()-parseInt(extentbox.get(0).style.bottom)-extentbox.height()/2:overviewMap.height()-parseInt(extentbox.get(0).style.top)+extentbox.height()/2];overviewMapControl.getMap().getView().setCenter(overviewMapControl.getOverviewMap().getCoordinateFromPixel(centralPosition))}}))}}},scaleLine:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.ScaleLine},mousePosition:{enabled:!1,controls:new _vendor.ol.control.MousePosition({coordinateFormat:function(coordinate){return vm.getDeg(coordinate)+"<br/>"+vm.getDMS(coordinate)+"<br/>"+vm.getMGA(coordinate)}})},fullScreen:{enabled:!1,controls:new _vendor.ol.control.FullScreen({source:(0,_vendor.$)("body").get(0),target:(0,_vendor.$)("#external-controls").get(0),label:(0,_vendor.$)("<i/>",{class:"fa fa-expand"})[0]})},scale:{enabled:!1,autoenable:!1,controls:new _vendor.ol.control.Control({element:(0,_vendor.$)("#menu-scale").get(0),target:(0,_vendor.$)("#external-controls").get(0)})},attribution:{enabled:!1,controls:new _vendor.ol.control.Attribution}}),_vendor.$.each(vm.mapControls,function(key,control){(void 0===control.autoenable||control.autoenable)&&vm.enableControl(key,!0)})},zoomToSelected:function(minScale,getExtent){var selectedFeatures=this.annotations.selectedFeatures;if(0!==selectedFeatures.getLength()){var extent=null;1===selectedFeatures.getLength()?(extent=getExtent?getExtent(selectedFeatures.item(0)):selectedFeatures.item(0).getGeometry().getExtent(),extent=_vendor.ol.extent.isEmpty(extent)?null:extent):selectedFeatures.forEach(function(f){_vendor.ol.extent.isEmpty(getExtent?getExtent(f):f.getGeometry().getExtent())||(extent=extent||_vendor.ol.extent.createEmpty(),_vendor.ol.extent.extend(extent,getExtent?getExtent(f):f.getGeometry().getExtent()))}),extent&&(this.olmap.getView().fit(extent,this.olmap.getSize()),minScale&&this.getScale()<minScale&&this.setScale(minScale))}},setRefreshInterval:function(layer,interval){var vm=this;layer.refresh=interval,layer.dependentLayers&&_vendor.$.each(layer.dependentLayers,function(index,dependentLayer){vm.setRefreshInterval(dependentLayer,dependentLayer.inheritRefresh?layer.refresh:dependentLayer.refresh)})},getFeature:function(layers,coordinate,successCallback,failedCallback){var vm=this;Array.isArray(layers)||(layers=[layers]);!function _getFeature(index){_vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+getLayerId(layers[index].id)+"&outputFormat=json&cql_filter=CONTAINS("+(layers[index].geom_field||"wkb_geometry")+",POINT("+coordinate[1]+" "+coordinate[0]+"))",dataType:"json",success:function(response,stat,xhr){if(0===response.totalFeatures)index===layers.length-1?successCallback?successCallback(null):alert("No found"):_getFeature(index+1);else{var feature=null;layers[index].properties?(feature={},_vendor.$.each(layers[index].properties,function(field,column){feature[field]=response.features[0].properties[column]})):feature=response.features[0],successCallback?successCallback(feature):alert(JSON.stringify(feature))}},error:function(xhr,status,message){failedCallback?alert(xhr.status+" : "+(xhr.responseText||message)):failedCallback(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})}(0)},getGridData:function(coordinate,successCallback,failedCallback){successCallback||(successCallback=function(data){alert(data)}),failedCallback||(failedCallback=function(msg){alert(msg)});var vm=this,feat=new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coordinate)});_vendor.$.ajax({url:vm.env.gokartService+"/spatial",dataType:"json",data:{features:vm.$root.geojson.writeFeatures([feat]),options:JSON.stringify({grid:{action:"getClosestFeature",layers:[{id:"fd_grid_points",layerid:getLayerId("cddp:fd_grid_points"),kmiservice:vm.env.kmiService,buffer:120,properties:{grid:"fdgrid"}},{id:"pilbara_grid_1km",layerid:getLayerId("cddp:pilbara_grid_1km"),buffer:800,kmiservice:vm.env.kmiService,properties:{grid:"id"}}]}})},method:"POST",success:function(response,stat,xhr){response.features[0].grid.failed?failedCallback(response.features[0].grid.failed):successCallback("fd_grid_points"===response.features[0].grid.id?"FD:"+response.features[0].grid.feature.grid:"pilbara_grid_1km"===response.features[0].grid.id?"PIL:"+response.features[0].grid.feature.grid:null)},error:function(xhr,status,message){failedCallback(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})},getPosition:function(coordinate,successCallback,failedCallback){successCallback||(successCallback=function(data){alert(data)}),failedCallback||(failedCallback=function(msg){alert(msg)});var buffers=[50,100,150,200,300,400,1e3,2e3,1e5],vm=this;!function _getPosition(index){var buffered=_vendor.turf.bbox(_vendor.turf.buffer(_vendor.turf.point(coordinate),buffers[index],"kilometers"));_vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+getLayerId("cddp:townsite_points")+"&outputFormat=json&bbox="+buffered[1]+","+buffered[0]+","+buffered[3]+","+buffered[2],dataType:"json",success:function(response,stat,xhr){if(0===response.totalFeatures)_getPosition(index+1);else{var nearestTown=null,nearestDistance=null,distance=null;_vendor.$.each(response.features,function(index,feature){null===nearestTown?(nearestTown=feature,nearestDistance=vm.measure.getLength([feature.geometry.coordinates,coordinate])):(distance=vm.measure.getLength([feature.geometry.coordinates,coordinate]))<nearestDistance&&(nearestTown=feature,nearestDistance=distance)}),nearestDistance=vm.measure.formatLength(nearestDistance,"km");var bearing=null,position=null;0===nearestDistance?position="0m of "+nearestTown.properties.name:(bearing=vm.measure.getBearing(nearestTown.geometry.coordinates,coordinate),position=nearestDistance+" "+vm.measure.getDirection(bearing,16)+" of "+nearestTown.properties.name),successCallback(position)}},error:function(xhr,status,message){failedCallback(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})}(0)}},ready:function(){var vm=this,mapStatus=this.loading.register("olmap","Open layer map Component");mapStatus.phaseBegin("initialize",20,"Initialize"),this.svgBlobs={},this.svgTemplates={},this.cachedStyles={},this.jobs={},this._setRefreshInterval=function(layer,interval){layer.refresh=interval,layer.dependentLayers&&_vendor.$.each(layer.dependentLayers,function(index,dependentLayer){dependentLayer.inheritRefresh&&dependentLayer.mapLayer.stopAutoRefresh()})},this._stopAutoRefresh=function(olLayer){olLayer.autoRefresh&&(clearInterval(olLayer.autoRefresh),delete olLayer.autoRefresh),olLayer.layer.dependentLayers&&_vendor.$.each(olLayer.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&dependentLayer.mapLayer.stopAutoRefresh()})},this._startAutoRefresh=function(olLayer){olLayer.layer.refresh&&!olLayer.autoRefresh&&(olLayer.autoRefresh=setInterval(function(){olLayer.refresh()},1e3*olLayer.layer.refresh)),olLayer.layer.dependentLayers&&_vendor.$.each(olLayer.layer.dependentLayers,function(index,dependentLayer){dependentLayer.mapLayer&&dependentLayer.mapLayer.show&&dependentLayer.mapLayer.startAutoRefresh()})},this._postRemove=function(olLayer){this._stopAutoRefresh(olLayer),olLayer.autoTimelineRefresh&&(clearTimeout(olLayer.autoTimelineRefresh),olLayer.autoTimelineRefresh=null),olLayer.dependentLayer||(delete olLayer.layer.mapLayer,delete olLayer.layer)},_vendor.$.each(this.matrixSets,function(projection,innerMatrixSets){_vendor.$.each(innerMatrixSets,function(tileSize,matrixSet){for(var matrixIds=new Array(matrixSet.maxLevel-matrixSet.minLevel+1),z=matrixSet.minLevel;z<=matrixSet.maxLevel;++z)matrixIds[z]=matrixSet.name+":"+z;matrixSet.matrixIds=matrixIds})}),mapStatus.phaseEnd("initialize"),mapStatus.phaseBegin("gk-init",60,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){return mapStatus.phaseEnd("gk-init"),mapStatus.phaseBegin("post-init",20,"Post initialize"),(0,_vendor.$)("#map .ol-viewport canvas").attr("width")&&(vm.displayResolution[0]=Math.round((0,_vendor.$)("#map .ol-viewport canvas").attr("width")/(0,_vendor.$)("#map .ol-viewport canvas").width()*100)/100),(0,_vendor.$)("#map .ol-viewport canvas").attr("height")&&(vm.displayResolution[1]=Math.round((0,_vendor.$)("#map .ol-viewport canvas").attr("height")/(0,_vendor.$)("#map .ol-viewport canvas").height()*100)/100),mapStatus.phaseEnd("post-init"),!0})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="map" id="map" tabindex="0">\n  <gk-info v-ref:info=""></gk-info>\n</div>\n<gk-scales v-ref:scales=""></gk-scales>\n<gk-search v-ref:search=""></gk-search>\n<gk-featuredetail v-ref:featuredetail=""></gk-featuredetail>\n<gk-measure v-ref:measure=""></gk-measure>\n<gk-weatherforecast v-ref:weatherforecast=""></gk-weatherforecast>\n<gk-toolbox v-ref:toolbox=""></gk-toolbox>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.ol-custom-overviewmap,\n.ol-custom-overviewmap.ol-uncollapsible {\n    bottom: 0;\n    left: auto;\n    right: 0;\n    top: auto;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed)  {\n   border: 1px solid black;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-map {\n    border: none;\n    width: 300px;\n    height:150px;\n}\n\n.ol-custom-overviewmap .ol-overviewmap-box {\n    border: 2px solid red;\n}\n\n.ol-custom-overviewmap:not(.ol-collapsed) button{\n    bottom: auto;\n    left: auto;\n    right: 1px;\n    top: 1px;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-544f9603",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-544f9603",module.exports))}()},{"./featuredetail.vue":152,"./info.vue":153,"./measure.vue":162,"./scales.vue":163,"./search.vue":164,"./toolbox.vue":170,"./weatherforecast.vue":171,"src/vendor.js":"src/vendor.js",
vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],162:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#map-measure button {\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n#map-measure button {\n    margin-bottom: 1px;\n}\n\n  .feature-icon {\n    width: 24px;\n    height: 24px;\n  }\n  #map-measure {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    padding: 0;\n  }\n  #map-measure .selected{\n    background-color: #2199E8;\n  }\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["settings"],data:function(){return{}},computed:{loading:function(){return this.$root.loading},map:function(){return this.$root.map},active:function(){return this.$root.active},featuredetail:function(){return this.$root.featuredetail},catalogue:function(){return this.$root.catalogue},annotations:function(){return this.$root.$refs.app.$refs.annotations},measureType:function(){return["MeasureLength","MeasureArea","MeasureBearing"].indexOf(this.annotations.tool.name)>=0?this.annotations.tool.name:""},showClear:function(){return""!=this.measureType&&this.features.getLength()},isMeasureLength:function(){return"MeasureLength"===this.measureType},isMeasureArea:function(){return"MeasureArea"===this.measureType},isMeasureBearing:function(){return"MeasureBearing"===this.measureType},lengthUnit:function(){return this.settings.lengthUnit},areaUnit:function(){return this.settings.areaUnit},measureFeature:function(){return this.settings.measureFeature},tools:function(){return[{toolid:"MeasureLength",title:"Measure Length",icon:"/dist/static/images/measure-length.svg",assistantButtons:[{name:"Clear",title:"Clear Measurements",icon:"/dist/static/images/clear.svg"}]},{toolid:"MeasureArea",title:"Measure Area",icon:"/dist/static/images/measure-area.svg",assistantButtons:[{name:"Clear",title:"Clear Measurements",icon:"/dist/static/images/clear.svg"}]},{toolid:"MeasureBearing",title:"Measure Bearing",icon:"/dist/static/images/measure-bearing.svg",assistantButtons:[{name:"Clear",title:"Clear Measurements",icon:"/dist/static/images/clear.svg"}]}]}},watch:{lengthUnit:function(newValue,oldValue){var vm=this;this.features.forEach(function(feature){vm.measuring(feature,null,!0,!1,!1,"changeUnit",!0)}),_vendor.$.each(vm._measureLayers,function(index,layer){layer[1].forEach(function(feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool.measureLength&&vm.measuring(feature,tool?tool.getMeasureGeometry:null,!0,!1,!1,"changeUnit")})})},areaUnit:function(newValue,oldValue){var vm=this;this.features.forEach(function(feature){vm.measuring(feature,null,!1,!0,!1,"changeUnit",!0)}),_vendor.$.each(vm._measureLayers,function(index,layer){layer[1].forEach(function(feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool.measureArea&&vm.measuring(feature,tool?tool.getMeasureGeometry:null,!1,!0,!1,"changeUnit")})})},measureFeature:function(newValue,oldValue){var vm=this;_vendor.$.each(this._measureLayers,function(index,layer){var mapLayer=vm.map.getMapLayer(layer[0]);mapLayer&&!vm.active.isHidden(mapLayer)&&vm.enableLayerMeasurement(layer,newValue)})},measureType:function(newVal,oldVal){""===newVal?(this.overlay&&this.overlay.setMap(null),this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null),this.showTooltip(this.features,!1)):""===oldVal?(this.overlay.setMap(this.map.olmap),this.showTooltip(this.features,!0)):this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null)}},methods:{register:function(layer,features,filter){this._measureLayers=this._measureLayers||[],this._measureLayers.push([layer.id||layer,features||null,filter||null,{}])},selectTool:function(tool){},toggleTool:function(enable,tool){this.toggleMeasure(tool.toolid,enable)},isToolActivated:function(tool){return""!==this.measureType},showAssistantButton:function(button){return this.showClear},clickAssistantButton:function(button){this.clearMeasure()},enableLayerMeasurement:function(layer,enable){var vm=this,layer=Array.isArray(layer)?layer:this._measureLayers.find(function(l){return l[0]===(layer.id||layer)});if(layer)if(enable){layer[3].features_remove=layer[3].features_remove||layer[1].on("remove",function(ev){var feature=ev.element;feature.tooltip&&vm.removeTooltip(feature)}),layer[3].features_add=layer[3].features_add||layer[1].on("add",function(ev){if(vm.map.getMapLayer(layer[0])){var feature=ev.element;if(!layer[2]||layer[2](feature)){var tool=vm.annotations.getTool(feature.get("toolName"));if(!tool)return;(tool.measureLength||tool.measureArea)&&vm.measureFeature&&(vm.createTooltip(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea),vm.measuring(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,"show"))}}});var mapLayer=vm.map.getMapLayer(layer[0]);mapLayer&&!mapLayer._change_opacity&&(mapLayer._change_opacity=mapLayer._change_opacity||mapLayer.on("change:opacity",vm._changeOpacityHandler)),_vendor.$.each(layer[1].getArray(),function(index,feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool&&(tool.measureLength||tool.measureArea)&&(feature.tooltip?(vm.showTooltip(feature,!0),feature.get("measurement")||vm.measuring(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,"show")):(vm.createTooltip(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea),vm.measuring(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,"show")))})}else layer[3].features_remove&&(layer[1].unByKey(layer[3].features_remove),delete layer[3].features_remove),layer[3].features_add&&(layer[1].unByKey(layer[3].features_add),delete layer[3].features_add),this.showTooltip(layer[1],!1)},clearFeatureMeasurement:function(feature){var vm=this;vm._clearFeatureMeasurement=vm._clearFeatureMeasurement||function(feat){feat&&(this.removeTooltip(feat,!0),feat.unset("measurement",!0))},feature instanceof _vendor.ol.Collection?feature.forEach(function(feat){vm._clearFeatureMeasurement(feat)}):Array.isArray(feature)?_vendor.$.each(feature,function(index,feat){vm._clearFeatureMeasurement(feat)}):vm._clearFeatureMeasurement(feature)},remeasureFeature:function(feature){var vm=this;vm._remeasureFeature=vm._remeasureFeature||function(feat){if(feat){var tool=vm.annotations.getTool(feat.get("toolName"));tool&&(tool.measureLength||tool.measureArea||tool.measureBearing)&&(this.removeTooltip(feat,!0),feat.unset("measurement",!0),vm.createTooltip(feat,tool.getMeasureGeometry,tool.measureLength,tool.measureArea),vm.measuring(feat,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,"show"))}},feature instanceof _vendor.ol.Collection?feature.forEach(function(feat){vm._remeasureFeature(feat)}):Array.isArray(feature)?_vendor.$.each(feature,function(index,feat){vm._remeasureFeature(feat)}):vm._remeasureFeature(feature)},toggleMeasure:function(type,enable){!0===enable&&this.measureType===type||!1===enable&&this.measureType!==type||(this.measureType===type?this.annotations.setTool(this.annotations.currentTool,!0):this.annotations.setTool(type))},clearMeasure:function(){var vm=this;this.features&&this.features.clear(),this.drawingFeature&&(this.removeTooltip(this.drawingFeature),this.drawingFeature=null),this.measureType&&(_vendor.$.each(this.annotations.tool.interactions,function(index,interact){vm.map.olmap.removeInteraction(interact)}),_vendor.$.each(this.annotations.tool.interactions,function(index,interact){vm.map.olmap.addInteraction(interact)}))},startMeasureFunc:function(measureLength,measureArea,measureBearing){var vm=this;return function(evt){vm.drawingFeature=evt.feature,vm.createTooltip(vm.drawingFeature,null,measureLength,measureArea,measureBearing,!0),vm.geometryChangeHandler=vm.drawingFeature.getGeometry().on("change",function(feature,measureLength,measureArea,measureBearing){return function(evg){vm.measuring(feature,null,measureLength,measureArea,measureBearing,"drawing",!0)}}(vm.drawingFeature,measureLength,measureArea,measureBearing))}},measuring:function(feature,getMeasureGeometry,measureLength,measureArea,measureBearing,mode,measureFeature,indexes){var vm=this;if(this._measure=this._measure||function(feature,geom,tooltipElement,tooltip,measurement,measureLength,measureArea,measureBearing,mode){if(tooltipElement){if(geom instanceof _vendor.ol.geom.LineString||geom instanceof _vendor.ol.geom.Polygon){if(geom instanceof _vendor.ol.geom.LineString&&(measureLength||measureBearing)||geom instanceof _vendor.ol.geom.Polygon&&measureLength){measurement=measurement||{};var length=null;measurement.length&&"drawing"!==mode?length=measurement.length:(geom instanceof _vendor.ol.geom.LineString?length=vm.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.Polygon&&(length=vm.getLength(geom.getLinearRing(0).getCoordinates())),measurement.length=length),measureLength&&tooltipElement.find(".length").html(vm.formatLength(length))}if(measureArea&&geom instanceof _vendor.ol.geom.Polygon){measurement=measurement||{};var area=null;measurement.area&&"drawing"!==mode?area=measurement.area:(area=vm.getArea(geom),measurement.area=area),tooltipElement.find(".area").html(vm.formatArea(area))}if(measureBearing&&geom instanceof _vendor.ol.geom.LineString){measurement=measurement||{};var bearing=null;if(measurement.bearing&&"drawing"!==mode)bearing=measurement.bearing;else{var coordinates=geom.getCoordinates();bearing=Math.round(100*vm.getBearing(coordinates[0],coordinates[coordinates.length-1]))/100+"&deg;",bearing="<span style='color:red;font-weight:bold'>"+bearing+"\n"+vm.formatLength(measurement.length,"nm")+"</span>\n"+vm.formatLength(measurement.length,"km"),measurement.bearing=bearing}tooltipElement.find(".bearing").html(bearing)}if("drawing"===mode||"show"===mode||"measure"===mode){var tooltipCoord=null;geom instanceof _vendor.ol.geom.Polygon?tooltipCoord=geom.getInteriorPoint().getCoordinates():geom instanceof _vendor.ol.geom.LineString&&(tooltipCoord=measureBearing?geom.getCoordinateAt(.5):geom.getLastCoordinate()),tooltip.setPosition(tooltipCoord)}return"show"===mode?(tooltipElement.get(0).className="tooltip-measure tooltip-measured",tooltip.setOffset([0,-7])):"measure"===mode&&(tooltipElement.get(0).className="tooltip-measure tooltip-measured",tooltip.getMap()&&vm.map.olmap.removeOverlay(tooltip)),measurement}return geom instanceof _vendor.ol.geom.MultiPolygon&&(measureLength||measureArea)?(measurement=measurement||[],_vendor.$.each(geom.getPolygons(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):geom instanceof _vendor.ol.geom.MultiLineString&&(measureLength||measureBearing)?(measurement=measurement||[],_vendor.$.each(geom.getLineStrings(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):geom instanceof _vendor.ol.geom.GeometryCollection&&(measureLength||measureBearing||measureArea)?(measurement=measurement||[],_vendor.$.each(geom.getGeometriesArray(),function(index,p){index>=measurement.length?measurement.push(vm._measure(feature,p,tooltipElement[index],tooltip[index],null,measureLength,measureArea,measureBearing,mode)):measurement[index]=vm._measure(feature,p,tooltipElement[index],tooltip[index],measurement[index],measureLength,measureArea,measureBearing,mode)}),measurement):measurement}return measurement},measureFeature=(void 0===measureFeature||null===measureFeature?vm.measureFeature:measureFeature)&&(measureLength||measureArea||measureBearing),indexes&&void 0!==feature.get("measurement")&&null!==feature.get("measurement")){var geom=this.annotations.getSelectedGeometry(feature,indexes),measurement=this.getMeasurementObject(feature.get("measurement"),indexes,!0,indexes.length-2);measurement.splice(indexes[indexes.length-1],0,geom instanceof _vendor.ol.geom.GeometryCollection||geom instanceof _vendor.ol.geom.MultiPoint||geom instanceof _vendor.ol.geom.MultiLineString||geom instanceof _vendor.ol.geom.MultiPolygon?[]:geom instanceof _vendor.ol.geom.Point?null:{}),measurement=measurement[indexes[indexes.length-1]],this._measure(feature,geom,this.getMeasurementObject(feature.tooltipElement,indexes),this.getMeasurementObject(feature.tooltip,indexes),measurement,measureLength,measureArea,measureBearing,mode)}else if(measureFeature||void 0!==feature.get("measurement")&&null!==feature.get("measurement")){var measurement=this._measure(feature,getMeasureGeometry?getMeasureGeometry.call(feature):feature.getGeometry(),feature.tooltipElement,feature.tooltip,feature.get("measurement"),measureLength,measureArea,measureBearing,mode);measurement&&measurement!==feature.get("measurement")&&feature.set("measurement",measurement,!0)}},endMeasure:function(feature){var vm=this;this._endMeasure=this._endMeasure||function(tooltipElement,tooltip){tooltipElement&&(Array.isArray(tooltipElement)?_vendor.$.each(tooltipElement,function(index,t){vm._endMeasure(t,tooltip[index])}):(tooltipElement.get(0).className="tooltip-measure tooltip-measured",tooltip.setOffset([0,-7])))},this._endMeasure(feature.tooltipElement,feature.tooltip)},showTooltip:function(feature,show){var vm=this;vm._showTooltip=vm._showTooltip||function(tooltip,show){if(tooltip){if(Array.isArray(tooltip)){var process=!0;return _vendor.$.each(tooltip,function(index,t){if(!1===(process=vm._showTooltip(t,show)))return!1}),process}return show?!tooltip.getMap()&&(vm.map.olmap.addOverlay(tooltip),tooltip.setOffset([0,-7]),!0):!!tooltip.getMap()&&(vm.map.olmap.removeOverlay(tooltip),!0)}return!0},feature instanceof _vendor.ol.Collection?_vendor.$.each(feature.getArray(),function(index,f){if(!1===vm._showTooltip(f.tooltip,show))return!1}):Array.isArray(feature)?_vendor.$.each(feature,function(index,f){if(!1===vm._showTooltip(f.tooltip,show))return!1}):vm._showTooltip(feature.tooltip,show)},getMeasurementObject:function(obj,indexes,createIfEmpty,end){if(void 0===obj||null===obj)return null;if((end=null===end||void 0===end?indexes.length-1:end)<0)return obj;for(i=0;i<=end;i++)!obj[indexes[i]]&&createIfEmpty&&(obj[indexes[i]]=[]),obj=obj[indexes[i]];return obj},removeMeasurementObject:function(feature,property,indexes,removeFunc,isProperty){var measurementObj=this.getMeasurementObject(isProperty?feature.get(property):feature[property],indexes,!1,indexes.length-2);if(measurementObj){for(measurementObj[indexes[indexes.length-1]]&&removeFunc&&removeFunc(measurementObj[indexes[indexes.length-1]]),measurementObj.splice(indexes[indexes.length-1],1),i=indexes.length-3;i>=-1&&0===measurementObj.length;i--)measurementObj=this.getMeasurementObject(isProperty?feature.get(property):feature[property],indexes,!1,i),measurementObj.splice(indexes[i+1],1);isProperty?feature.get(property)&&0===feature.get(property).length&&feature.unset(property,!0):feature[property]&&0===feature[property].length&&delete feature[property]}},createTooltip:function(feature,getMeasureGeometry,measureLength,measureArea,measureBearing,measureFeature,indexes){var vm=this;this._createTooltipElement=this._createTooltipElement||function(geom,measureLength,measureArea,measureBearing){if(geom instanceof _vendor.ol.geom.Point)return null;if(geom instanceof _vendor.ol.geom.LineString&&(measureLength||measureBearing)||geom instanceof _vendor.ol.geom.Polygon&&(measureLength||measureArea)){var measureTooltipElement=(0,_vendor.$)("<div></div>");return measureLength&&measureTooltipElement.append("<div class='length'></div>"),measureArea&&geom instanceof _vendor.ol.geom.Polygon&&measureTooltipElement.append("<div class='area'></div>"),measureBearing&&geom instanceof _vendor.ol.geom.LineString&&measureTooltipElement.append("<div class='bearing' style='white-space:pre;'></div>"),measureTooltipElement.addClass("tooltip-measure tooltip-measuring"),(0,_vendor.$)("#map-measure-tooltips").append(measureTooltipElement),measureTooltipElement}if(geom instanceof _vendor.ol.geom.MultiLineString&&(measureLength||measureBearing)){var elements=[];return _vendor.$.each(geom.getLineStrings(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}if(geom instanceof _vendor.ol.geom.MultiPolygon&&(measureLength||measureArea)){var elements=[];return _vendor.$.each(geom.getPolygons(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}if(geom instanceof _vendor.ol.geom.GeometryCollection&&(measureLength||measureArea||measureBearing)){var elements=[];return _vendor.$.each(geom.getGeometriesArray(),function(index,g){elements.push(vm._createTooltipElement(g,measureLength,measureArea,measureBearing))}),elements}return null},this._createTooltip=this._createTooltip||function(tooltipElement){if(tooltipElement){if(Array.isArray(tooltipElement)){var tooltips=[];return _vendor.$.each(tooltipElement,function(index,t){tooltips.push(vm._createTooltip(t))}),tooltips}var measureTooltip=new _vendor.ol.Overlay({element:tooltipElement.get(0),offset:[0,-15],stopEvent:!1,positioning:"bottom-center"});return vm.map.olmap.addOverlay(measureTooltip),measureTooltip}return null},measureFeature=(void 0===measureFeature||null===measureFeature?vm.measureFeature:measureFeature)&&(measureLength||measureArea||measureBearing);var tooltipElement=null;if(void 0===feature.tooltipElement||null===feature.tooltipElement)measureFeature&&(tooltipElement=this._createTooltipElement(getMeasureGeometry?getMeasureGeometry.call(feature):feature.getGeometry(),measureLength,measureArea,measureBearing))&&(!Array.isArray(tooltipElement)||tooltipElement.length>0)&&(feature.tooltipElement=tooltipElement);else{if(!Array.isArray(indexes))return;tooltipElement=this.getMeasurementObject(feature.tooltipElement,indexes,!0,indexes.length-2);var geom=this.annotations.getSelectedGeometry(feature,indexes);tooltipElement.splice(indexes[indexes.length-1],0,this._createTooltipElement(geom,measureLength,measureArea,measureBearing)),tooltipElement=tooltipElement[indexes[indexes.length-1]]}if(void 0===feature.tooltip||null===feature.tooltip)measureFeature&&feature.tooltipElement&&(feature.tooltip=this._createTooltip(feature.tooltipElement));else if(Array.isArray(indexes)){var tooltip=this.getMeasurementObject(feature.tooltip,indexes,!0,indexes.length-2);tooltip.splice(indexes[indexes.length-1],0,this._createTooltip(tooltipElement))}},removeTooltip:function(feature,removeTooltipElement,indexes){var vm=this;this._removeTooltip=this._removeTooltip||function(tooltip){tooltip&&(Array.isArray(tooltip)?_vendor.$.each(tooltip,function(index,t){vm._removeTooltip(t)}):tooltip.getMap()&&vm.map.olmap.removeOverlay(tooltip))},this._removeTooltipElement=this._removeTooltipElement||function(tooltipElement){tooltipElement&&(Array.isArray(tooltipElement)?_vendor.$.each(tooltipElement,function(index,t){vm._removeTooltipElement(t)}):tooltipElement.remove())},removeTooltipElement=void 0===removeTooltipElement||removeTooltipElement,feature.tooltip&&(indexes?this.removeMeasurementObject(feature,"tooltip",indexes,this._removeTooltip):(this._removeTooltip(feature.tooltip),delete feature.tooltip)),removeTooltipElement&&feature.tooltipElement&&(indexes?this.removeMeasurementObject(feature,"tooltipElement",indexes,this._removeTooltipElement):(this._removeTooltipElement(feature.tooltipElement),delete feature.tooltipElement))},getArea:function(polygon){var area=0,vm=this;return Array.isArray(polygon)?_vendor.$.each(polygon,function(index,linearRing){0===index?area=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing)):area-=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing))}):_vendor.$.each(polygon.getLinearRings(),function(index,linearRing){0===index?area=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing.getCoordinates())):area-=Math.abs(vm.wgs84Sphere.geodesicArea(linearRing.getCoordinates()))}),area},getTotalArea:function(geom){var area=0,vm=this;return geom instanceof _vendor.ol.geom.Polygon?area=this.getArea(geom):geom instanceof _vendor.ol.geom.MultiPolygon?_vendor.$.each(geom.getPolygons(),function(index,p){area+=vm.getArea(p)}):geom instanceof _vendor.ol.geom.GeometryCollection&&_vendor.$.each(geom.getGeometriesArray(),function(index,g){area+=vm.getTotalArea(g)}),area},convertArea:function(area,unit){return unit=unit||"km2","ha"===unit?area/1e4:"km2"===unit?area/1e6:area},getLength:function(coordinates){for(var length=0,sourceProj=this.$root.map.olmap.getView().getProjection(),i=0,ii=coordinates.length-1;i<ii;++i){var c1=_vendor.ol.proj.transform(coordinates[i],sourceProj,"EPSG:4326"),c2=_vendor.ol.proj.transform(coordinates[i+1],sourceProj,"EPSG:4326");length+=this.wgs84Sphere.haversineDistance(c1,c2)}return length},getTotalLength:function(geom){var length=0;return geom instanceof _vendor.ol.geom.Polygon?length=this.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.LineString?length=this.getLength(geom.getCoordinates()):geom instanceof _vendor.ol.geom.MultiPolygon?_vendor.$.each(geom.getPolygons(),function(index,p){length+=this.getLength(p.getCoordinates())}):geom instanceof _vendor.ol.geom.MultiLineString?_vendor.$.each(geom.getLineStrings(),function(index,l){length+=this.getLength(l.getCoordinates())}):geom instanceof _vendor.ol.geom.GeometryCollection&&_vendor.$.each(geom.getGeometriesArray(),function(index,g){length+=this.getTotalLength(g)}),length},convertLength:function(length,unit){return unit=unit||"m","nm"===unit?250*length/463e3:"mile"===unit?15625*length/25146e3:"km"===unit?length/1e3:length},getBearing:function(coordinates1,coordinates2){var lon1=this._degrees2radians*coordinates1[0],lon2=this._degrees2radians*coordinates2[0],lat1=this._degrees2radians*coordinates1[1],lat2=this._degrees2radians*coordinates2[1],a=Math.sin(lon2-lon1)*Math.cos(lat2),b=Math.cos(lat1)*Math.sin(lat2)-Math.sin(lat1)*Math.cos(lat2)*Math.cos(lon2-lon1),bearing=this._radians2degrees*Math.atan2(a,b);return bearing>=0?bearing:bearing+360},getDirection:function(bearing,mode){this._direction||(this._direction={4:[90,Math.floor(4500)/100,["N","E","S","W"]],8:[45,Math.floor(2250)/100,["N","NE","E","SE","S","SW","W","NW"]],16:[22.5,Math.floor(1125)/100,["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"]],32:[11.25,Math.floor(562.5)/100,["N","NbE","NNE","NEbN","NE","NEbE","ENE","EbN","E","EbS","ESE","SEbE","SE","SEbS","SSE","SbE","S","SbW","SSW","SWbS","SW","SWbW","WSW","WbS","W","WbN","WNW","NWbW","NW","NWbN","NNW","NbW"]]}),mode=mode||16;var key=mode.toString();this._direction[key]||(mode=16,key="16");var directionIndex=(Math.floor(bearing/this._direction[key][0])+(Math.round(bearing%this._direction[key][0]*100)/100<=this._direction[key][1]?0:1))%mode;return this._direction[key][2][directionIndex]},formatLength:function(length,unit){var output=null;return unit=unit||this.lengthUnit,"nm"===unit?output="nm":"mile"===unit?output=" mile":length>100?(unit="km",output="km"):(unit="m",output="m"),length=this.convertLength(length,unit),length=length<10?Math.round(100*length)/100:Math.round(length),output=length+output},formatArea:function(area){var output=null,unit=null;return"ha"===this.areaUnit?(unit="ha",output="ha"):area>1e4?(unit="km2",output="km<sup>2</sup>"):(unit="m2",output="m<sup>2</sup>"),area=this.convertArea(area,unit),area=area<10?Math.round(100*area)/100:Math.round(area),output=area+output},featureChanged:function(feature){var vm=this;feature instanceof _vendor.ol.Collection?feature.forEach(function(feat){vm._featureChanged(feat)}):Array.isArray(feature)?_vendor.$.each(feature,function(index,feat){vm._featureChanged(feat)}):vm._featureChanged(feature)}},ready:function(){var vm=this;this._degrees2radians=Math.PI/180,this._radians2degrees=180/Math.PI;var measureStatus=vm.loading.register("measure","Measurement Component");measureStatus.phaseBegin("initialize",30,"Initialize"),this.features=new _vendor.ol.Collection,this.features.on("remove",function(event){event.element.tooltipElement&&vm.removeTooltip(event.element)}),this.style=new _vendor.ol.style.Style({fill:new _vendor.ol.style.Fill({color:"rgba(0,0,0, 0.25)"}),stroke:new _vendor.ol.style.Stroke({color:"rgba(0, 0, 0, 0.5)",lineDash:[10,10],width:2}),image:new _vendor.ol.style.Circle({radius:5,fill:new _vendor.ol.style.Fill({color:"rgb(0, 153, 255)"})})}),this.source=new _vendor.ol.source.Vector({features:this.features}),this.overlay=new _vendor.ol.layer.Vector({source:this.source,style:this.style});var measureSnap=new _vendor.ol.interaction.Snap({features:vm.annotations.features}),measureLengthInter=new _vendor.ol.interaction.Draw({source:this.source,type:"LineString",style:this.style}),drawendHandler=function(ev){vm.endMeasure(ev.feature),vm.drawingFeature=null};measureLengthInter.on("drawstart",this.startMeasureFunc(!0,!1,!1),this),measureLengthInter.on("drawend",drawendHandler,this);var measureLength={name:"MeasureLength",keepSelection:!0,interactions:[measureLengthInter,measureSnap]};this.annotations.tools.push(measureLength);var measureBearingInter=new _vendor.ol.interaction.Draw({source:this.source,type:"LineString",style:this.style,freehand:!1,maxPoints:2,minPoints:2});measureBearingInter.on("drawstart",this.startMeasureFunc(!1,!1,!0),this),measureBearingInter.on("drawend",drawendHandler,this);var measureBearing={name:"MeasureBearing",keepSelection:!0,interactions:[measureBearingInter,measureSnap]};this.annotations.tools.push(measureBearing);var measureAreaInter=new _vendor.ol.interaction.Draw({source:this.source,type:"Polygon",style:this.style});measureAreaInter.on("drawstart",this.startMeasureFunc(!0,!0,!1),this),measureAreaInter.on("drawend",drawendHandler,this);var measureArea={name:"MeasureArea",keepSelection:!0,interactions:[measureAreaInter,measureSnap]};vm._changeOpacityHandler=function(ev){vm.measureFeature&&(0===ev.target.get(ev.key)?vm.enableLayerMeasurement(ev.target.get("id"),!1):0===ev.oldValue&&vm.enableLayerMeasurement(ev.target.get("id"),!0))},vm._featureChanged=function(feature){var tool=vm.annotations.getTool(feature.get("toolName"));tool&&(tool.measureLength||tool.measureArea||tool.measureBearing)&&(feature.unset("measurement",!0),feature.tooltip&&(vm.measureFeature?vm.measuring(feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,"show"):feature.unset("measurement",!0)))},this.annotations.tools.push(measureArea);var featuresChangedListener=function(ev){ev.features.forEach(function(feature){vm._featureChanged(feature)})},addFeatureGeometryListener=function(ev){var tool=ev.feature.get("toolName");(tool=tool?vm.annotations.getTool(tool):null)&&(tool.measureLength||tool.measureArea||tool.measureBearing)&&(vm.createTooltip(ev.feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,vm.measureFeature,ev.indexes),vm.measuring(ev.feature,tool.getMeasureGeometry,tool.measureLength,tool.measureArea,!1,vm.measureFeature?"show":"measure",vm.measureFeature,ev.indexes))},deleteFeatureGeometryListener=function(ev){var tool=ev.feature.get("toolName");(tool=tool?vm.annotations.getTool(tool):null)&&(tool.measureLength||tool.measureArea||tool.measureBearing)&&(vm.removeTooltip(ev.feature,!0,ev.indexes),vm.removeMeasurementObject(ev.feature,"measurement",ev.indexes,null,!0))},deleteFeatureAllGeometriesListener=function(ev){var tool=ev.feature.get("toolName");(tool=tool?vm.annotations.getTool(tool):null)&&(tool.measureLength||tool.measureArea||tool.measureBearing)&&(vm.removeTooltip(ev.feature,!0),ev.feature.unset("measurement",!0))};this.annotations.tools.push(measureArea),this.wgs84Sphere=new _vendor.ol.Sphere(6378137),measureStatus.phaseEnd("initialize"),measureStatus.phaseBegin("gk-init",30,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){measureStatus.phaseEnd("gk-init"),measureStatus.phaseBegin("attach_event_to_olmap",10,"Attach event to olmap"),vm.map.olmap.on("addLayer",function(ev){var layer=vm._measureLayers.find(function(l){return l[0]===ev.mapLayer.get("id")});layer&&(vm.measureFeature&&vm.enableLayerMeasurement(layer,!0),ev.mapLayer._change_opacity=ev.mapLayer._change_opacity||ev.mapLayer.on("change:opacity",vm._changeOpacityHandler))}),vm.map.olmap.on("removeLayer",function(ev){var layer=vm._measureLayers.find(function(l){return l[0]===ev.mapLayer.get("id")});layer&&(ev.mapLayer._change_opacity&&(ev.mapLayer.unByKey(ev.mapLayer._change_opacity),delete ev.mapLayer._change_opacity),vm.measureFeature&&vm.enableLayerMeasurement(layer,!1))}),measureStatus.phaseEnd("attach_event_to_olmap"),measureStatus.phaseBegin("gk-postinit",20,"Listen 'gk-postinit' event",!0,!0),this.$on("gk-postinit",function(){measureStatus.phaseEnd("gk-postinit"),measureStatus.phaseBegin("attach_event_to_tool",5,"Attach event to tool");var processedInteractions=[];_vendor.$.each(vm.annotations.tools,function(index1,tool){_vendor.$.each(tool.interactions,function(index2,interaction){processedInteractions.find(function(o){return o===interaction})||(interaction instanceof _vendor.ol.interaction.Modify?interaction.on("featuresmodified",featuresChangedListener):interaction instanceof _vendor.ol.interaction.Translate?interaction.on("translateend",featuresChangedListener):interaction instanceof _vendor.ol.interaction.Draw&&interaction.events&&interaction.events.addfeaturegeometry&&interaction.on("addfeaturegeometry",addFeatureGeometryListener),interaction.events&&interaction.events.deletefeaturegeometry&&interaction.on("deletefeaturegeometry",deleteFeatureGeometryListener),interaction.events&&interaction.events.deleteallgeometries&&interaction.on("deleteallgeometries",deleteFeatureAllGeometriesListener),processedInteractions.push(interaction))})}),measureStatus.phaseEnd("attach_event_to_tool"),measureStatus.phaseBegin("init_measurable_layers",5,"Initialize measurable layers"),vm.measureFeature&&_vendor.$.each(vm._measureLayers,function(index,layer){!1===vm.active.isHidden(vm.map.getMapLayer(layer[0]))&&vm.enableLayerMeasurement(layer,!0)}),measureStatus.phaseEnd("init_measurable_layers")})})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div id="map-measure-tooltips"></div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#map-measure button {\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n#map-measure button {\n    margin-bottom: 1px;\n}\n\n  .feature-icon {\n    width: 24px;\n    height: 24px;\n  }\n  #map-measure {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    padding: 0;\n  }\n  #map-measure .selected{\n    background-color: #2199E8;\n  }\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-84b5b4f6",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-84b5b4f6",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],163:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n\n");Object.defineProperty(exports,"__esModule",{value:!0});require("src/vendor.js");exports.default={store:["fixedScales"],data:function(){return{}},computed:{scaleString:function(){return this.$root.map.getScaleString(this.$root.map.scale)}},methods:{
reset:function(){this.$els.scaleSelect.selectedIndex=0}},ready:function(){var vm=this;this.$on("gk-init",function(){this.$root.map.olmap.on("postrender",function(){vm.reset()})})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div style="display:none">\n<select class="map-control" v-el:scale-select="" @change="$root.map.setScale($event.target.value)" id="menu-scale" v-cloak="">\n    <option value="{{ $root.map.scale }}" selected="">{{ scaleString }}</option>\n    <option v-for="s in fixedScales" value="{{ s }}">{{ $root.map.getScaleString(s) }}</option>\n</select>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-4fc307dc",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-4fc307dc",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],164:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n\n#map-search.alert, #map-search-button.alert {\n    background-color: rgba(125, 47, 34, 0.7);\n}\n\n#map-search:hover.alert, #map-search-button:hover.alert {\n    background-color: rgba(125, 47, 34, 0.9);\n}\n\n#map-search.success, #map-search-button.success {\n    background-color: rgba(53, 94, 26, 0.7);\n}\n\n#map-search:hover.success, #map-search-button:hover.success {\n    background-color: rgba(53, 94, 26, 0.9);\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:["resolutions"],data:function(){return{}},computed:{env:function(){return this.$root.env},map:function(){return this.$root.map},annotations:function(){return this.$root.annotations}},methods:{searchKeyFix:function(ev){13==ev.keyCode&&this.runSearch()},clearSearchPoint:function(){this.features.clear()},setSearchPointFunc:function(func){this._setSearchPointFunc=func},runSearch:function(){var vm=this,map=this.$root.map;(0,_vendor.$)("#map-search, #map-search-button").removeClass("alert success");var query=(0,_vendor.$)("#map-search").get(0).value;if(!query)return void this.clearSearchPoint();var victory=function(searchMethod,coords,name,update_name){(0,_vendor.$)("#map-search, #map-search-button").addClass("success"),map.animate({center:coords},{resolution:vm.resolutions[10]}),update_name&&(0,_vendor.$)("#map-search").val(update_name),vm.$root.weatheroutlook&&vm.annotations.tool&&"WeatherOutlook"===vm.annotations.tool.name?vm.$root.weatheroutlook.setPosition(coords):vm.$root.weatherforecast&&vm.annotations.tool&&"WeatherForecast"===vm.annotations.tool.name?vm.$root.weatherforecast.setPosition(coords):vm._setSearchPointFunc&&vm._setSearchPointFunc(searchMethod,coords,name)||(vm.features.clear(),vm.features.push(new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coords),name:name})))},failure=function(reason){(0,_vendor.$)("#map-search, #map-search-button").addClass("alert")},dms=map.parseDMSString(query);if(dms)return void victory("DMS",dms,name);var mga=map.parseMGAString(query);if(mga)return void victory("MGA",mga.coords,map.getMGA(mga.coords));var gd=map.parseGridString(query);if(gd)return void("FD"===gd.gridType?this.queryFD(gd.gridNorth+" "+gd.gridEast,victory,failure):this.queryPIL(gd.gridNorth+gd.gridEast,victory,failure));this.queryGeocode(query,victory,failure)},queryFD:function(fdStr,victory,failure){var vm=this;_vendor.$.ajax({url:vm.env.kmiService+"/wfs?"+_vendor.$.param({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:"cddp:fd_grid_points_mapping",cql_filter:"(fdgrid = '"+fdStr+"')"}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){data.features.length?victory("FD",data.features[0].geometry.coordinates,"FD "+fdStr):failure("No Forest Department Grid reference found for "+fdStr)}})},queryPIL:function(pilStr,victory,failure){var vm=this;_vendor.$.ajax({url:vm.env.kmiService+"/wfs?"+_vendor.$.param({version:"1.1.0",service:"WFS",request:"GetFeature",outputFormat:"application/json",srsname:"EPSG:4326",typename:"cddp:pilbara_grid_10km_mapping",cql_filter:"(grid = '"+pilStr+"')"}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){data.features.length?victory("PIL",data.features[0].geometry.coordinates,"PIL "+pilStr):failure("No Pilbara Grid reference found for "+pilStr)}})},queryGeocode:function(geoStr,victory,failure){var vm=this,center=this.$root.map.getCenter();_vendor.ol.extent.containsCoordinate(this._wa_bbox,center)||(center=this._wa_perth),_vendor.$.ajax({url:vm.env.gokartService+"/mapbox/geocoding/v5/mapbox.places/"+encodeURIComponent(geoStr)+".json?"+_vendor.$.param({country:"au",proximity:center[0]+","+center[1]}),dataType:"json",xhrFields:{withCredentials:!0},success:function(data,status,xhr){if(data.features.length){var feature=null;_vendor.$.each(data.features,function(index,f){if(_vendor.ol.extent.containsCoordinate(vm._wa_bbox,f.center))return feature=f,!1;feature||(feature=f)}),victory("GEOCODE",feature.center,feature.text,feature.place_name)}else failure("No location match found for "+geoStr)}})}},ready:function(){var vm=this;vm.map.mapControls.search={enabled:!1,controls:[new _vendor.ol.control.Control({element:(0,_vendor.$)("#map-search").get(0),target:(0,_vendor.$)("#external-controls").get(0)}),new _vendor.ol.control.Control({element:(0,_vendor.$)("#map-search-button").get(0),target:(0,_vendor.$)("#external-controls").get(0)})]},this._wa_bbox=[112.5,-36,129,-13],this._wa_perth=[115.8605,-31.9527],this.style=function(feature,resolution){return new _vendor.ol.style.Style({image:new _vendor.ol.style.Circle({radius:5,fill:new _vendor.ol.style.Fill({color:"rgb(255, 255, 255)"}),stroke:new _vendor.ol.style.Stroke({width:2,color:"rgb(114, 193, 0)"})}),text:new _vendor.ol.style.Text({offsetX:12,text:feature.get("name"),textAlign:"left",font:"12px Helvetica,Roboto,Arial,sans-serif",stroke:new _vendor.ol.style.Stroke({color:"#fff",width:4})})})},this.features=new _vendor.ol.Collection,this.source=new _vendor.ol.source.Vector({features:this.features}),this.overlay=new _vendor.ol.layer.Vector({source:this.source,style:this.style}),this.$on("gk-init",function(){this.overlay.setMap(vm.map.olmap)})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n    <div style="display:none">\n    <input id="map-search" class="map-control" title="Search the map for any of the following. \n\nPlaces/Addresses, e.g.:\n- 17 Dick Perry Avenue, Kensington\n- Upper Swan, Western Australia\n\nCoordinates, e.g.:\n- 32.00858S 115.53978E\n- 115d 38m 58.0s E, 33d 20m 52.8s S\n- 115:38:58.0 E, 33:20:52.8 S\n- 115Â° 38â² 58.0â³ E, 33Â° 20â² 52.8â³ S\n\nMap Grid of Australia UTM coordinates, e.g.:\n- MGA 50 718776E 6190981N\n- MGA50 3816452\n\nForestry Department/Pilbara grid references, e.g.:\n- FD ET 79\n- PIL AF50" placeholder="Search (places, Â°, MGA, FD)" @keyup="searchKeyFix($event)">\n    <button id="map-search-button" class="map-control" @click="runSearch"><i class="fa fa-search"></i></button>\n    </div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n\n#map-search.alert, #map-search-button.alert {\n    background-color: rgba(125, 47, 34, 0.7);\n}\n\n#map-search:hover.alert, #map-search-button:hover.alert {\n    background-color: rgba(125, 47, 34, 0.9);\n}\n\n#map-search.success, #map-search-button.success {\n    background-color: rgba(53, 94, 26, 0.7);\n}\n\n#map-search:hover.success, #map-search-button:hover.success {\n    background-color: rgba(53, 94, 26, 0.9);\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-3a0809d1",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-3a0809d1",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],165:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"__esModule",{value:!0});var _systemsetting=require("./systemsetting.vue"),_systemsetting2=_interopRequireDefault(_systemsetting),_weatheroutlook=require("./weatheroutlook.vue"),_weatheroutlook2=_interopRequireDefault(_weatheroutlook);exports.default={store:{activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},data:function(){return{menu:null}},components:{gkSystemsetting:_systemsetting2.default,gkWeatheroutlook:_weatheroutlook2.default},computed:{info:function(){return this.$root.info}},methods:{setup:function(){this.$root.annotations.setTool(),this.switchMenu(this.menu)},teardown:function(){this.activeSubmenu&&this.$root[this.activeSubmenu].teardown&&this.$root[activeSubmenu].teardown()},switchMenu:function(menu){menu=menu||"systemsetting",this.activeSubmenu!==menu&&(this.activeSubmenu||menu)&&(this.activeSubmenu&&this.$root[this.activeSubmenu].teardown&&this.$root[this.activeSubmenu].teardown(),this.activeSubmenu=menu,this.activeSubmenu&&this.$root[this.activeSubmenu].setup&&this.$root[this.activeSubmenu].setup(),this.menu=menu)}},ready:function(){var vm=this;$("#settings-tabs").on("change.zf.tabs",function(target,selectedTab){var menu=selectedTab.attr("menu");vm.info.hoverable.splice(0,vm.info.hoverable.length),vm.switchMenu(menu),vm.$root.menuChanged()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-settings">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" data-tabs="" id="settings-tabs">\n        <li class="tabs-title is-active" menu="systemsetting"><a href="#systemsetting" aria-selected="true">System</a></li>\n        <li class="tabs-title" menu="weatheroutlook"><a href="#weatheroutlook" aria-selected="true">Weather Outlook</a></li>\n      </ul>\n    </div>\n  </div>\n  <div class="row collapse" id="settings-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="settings-tabs">\n        <gk-systemsetting v-ref:systemsetting=""></gk-systemsetting>\n        <gk-weatheroutlook v-ref:weatheroutlook=""></gk-weatheroutlook>\n      </div>\n    </div>\n  </div>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.data?hotAPI.update("_v-2fcf8a8c",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-2fcf8a8c",module.exports))}()},{"./systemsetting.vue":169,"./weatheroutlook.vue":172,vue:142,"vue-hot-reload-api":141}],166:[function(require,module,exports){function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.reportname {\n    font-style:italic;\n    padding-left:24px;\n    color:#6dd8ef;\n    font-size:14px;\n}\n\n.button-group .bfrsbutton {\n    padding-left:5px;\n    padding-right:5px;\n    font-size:0.8rem;\n}\n.actionicon {\n    width:9px;\n    height:9px;\n}\n.editicon {\n    width:16px;\n    height:16px;\n    margin-top: -3px;\n    margin-bottom: -4px;\n    margin-left: -2px;\n    margin-right: -2px;\n}\n.task_status {\n}\n.task_message {\n    font-style:italic;\n    font-weight:normal;\n    color:red;\n    font-size:12px;\n    white-space:pre-wrap;\n}\n.task_name {\n    font-style:normal;\n    font-weight:bold;\n    font-size:14px;\n}\n#bfrsStartDate,#bfrsEndDate {\n    font-size:13px;\n    width:118px;\n    display:inline;\n    cursor:pointer;\n    padding-left:4px;\n    padding-right:4px;\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{bushfireLabels:"settings.bfrs.bushfireLabels",viewportOnly:"settings.bfrs.viewportOnly",screenHeight:"layout.screenHeight",hintsHeight:"layout.hintsHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",hints:"hints",whoami:"whoami"},data:function(){return{clippedOnly:!1,search:"",statusFilter:"all_reports",region:"",district:"",featureLabelDisabled:!1,showFireboundary:!1,tools:[],fields:["fire_number","name"],sortedFields:[["fire_detected_or_created",!1]],drawings:new _vendor.ol.Collection,features:new _vendor.ol.Collection,clippedFeatures:[],showFilters:!1,showToggles:!1,startDate:"",endDate:"",dateRange:"",revision:1,selectRevision:1,profileRevision:1,extentFeaturesSize:0,tints:{new:[["#b43232","#c8c032"]],"new.textStroke":"#c8c032","new.textFill":"#333","new.fillColour":[0,0,0,.25],"new.colour":"#c8c032",unknown:[["#b43232","#f90c25"]],"unknown.textStroke":"#f90c25","unknown.textFill":"#333","unknown.fillColour":[0,0,0,.25],"unknown.colour":"#f90c25",initial:[["#b43232","#999999"]],"initial.textStroke":"#CCCCCC","initial.textFill":"#333","initial.fillColour":[0,0,0,.25],"initial.colour":"#D3D3D3",draft_final:[["#b43232","#FF0000"]],"draft_final.textStroke":"#FF0000","draft_final.textFill":"#FFFFFF","draft_final.fillColour":[0,0,0,.25],"draft_final.colour":"#FF0000",final_authorised:[["#b43232","#00FF00"]],"final_authorised.textStroke":"#00FF00","final_authorised.textFill":"#333","final_authorised.fillColour":[0,0,0,.25],"final_authorised.colour":"#00FF00",reviewed:[["#b43232","#00FF00"]],"reviewed.textStroke":"#00FF00","reviewed.textFill":"#333","reviewed.fillColour":[0,0,0,.25],"reviewed.colour":"#00FF00",modified:[["#b43232","#f57900"]],"modified.textStroke":"#f57900","modified.textFill":"#333","modified_authorised.fillColour":[0,0,0,.25],"modified.colour":"#f57900",selected:[["#b43232","#2199e8"]],"selected.textStroke":"#2199e8","selected.textFill":"#333"}}},computed:{map:function(){return this.$root.$refs.app.$refs.map},env:function(){return this.$root.env},annotations:function(){return this.$root.$refs.app.$refs.annotations},systemsetting:function(){return this.$root.systemsetting},dialog:function(){return this.$root.dialog},active:function(){return this.$root.active},measure:function(){return this.$root.measure},info:function(){return this.$root.info},catalogue:function(){return this.$root.catalogue},export:function(){return this.$root.export},loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},moduleStatus:function(){return this._bfrsStatus||{}},isReportMapLayerHidden:function(){return this.$root.active.isHidden(this.bushfireMapLayer)},selectedFeatures:function(){return this.annotations.getSelectedFeatures("bfrs")},selectedFeaturesSize:function(){return this.selectRevision&&this.selectedFeatures.getLength()},bushfireLayer:function(){return this.$root.catalogue.getLayer("dpaw:bushfirelist_latest")},bushfireMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.bushfireLayer):void 0},finalFireboundaryMapLayer:function(){return this.bushfireMapLayer?this.bushfireLayer.dependentLayers[0].mapLayer:null},selectedFinalFireboundaryMapLayer:function(){return this.bushfireMapLayer?this.bushfireLayer.dependentLayers[1].mapLayer:null},regions:function(){try{return this.profileRevision&&this.whoami.bushfire.regions}catch(ex){return[]}},districts:function(){var vm=this,r=null;return this.region&&(r=this.regions.find(function(o){return o.region_id===parseInt(vm.region)})),r?r.districts:[]},bushfireStyleFunc:function(){return this._bushfireStyleFunc||(this._bushfireStyleFunc=function(){var vm=this,pointStyleFunc=vm.annotations.getIconStyleFunction(vm.tints),boundaryStyleFunc=vm.annotations.getVectorStyleFunc(vm.tints),labelStyleFunc=vm.annotations.getLabelStyleFunc(vm.tints,"fire_number");return function(res){var feat=this,geometries=feat.getGeometry().getGeometriesArray(),pointStyle=geometries.length>0||geometries[0]instanceof _vendor.ol.geom.Point?pointStyleFunc.call(feat,res):null,boundaryStyle=(vm.showFireboundary||feat.tint)&&(geometries.length>1||geometries[0]instanceof _vendor.ol.geom.MultiPolygon)?boundaryStyleFunc.call(feat,res):null,selfIntersectionStyle=null;boundaryStyle&&feat.intersectionPoints&&(selfIntersectionStyle=new _vendor.ol.style.Style({geometry:feat.intersectionPoints,image:new _vendor.ol.style.Circle({fill:new _vendor.ol.style.Fill({color:[255,0,0]}),radius:4})}));var labelStyle=null;res<.003&&geometries.length>0&&feat.get("fire_number")&&vm.bushfireLabels&&!vm.$root.active.isHidden(vm.map.getMapLayer("dpaw:bushfirelist_latest"))&&(labelStyle=labelStyleFunc.call(feat,res),labelStyle.setGeometry(geometries[0]));return(pointStyle&&1)+(boundaryStyle&&1)+(labelStyle&&1)+(selfIntersectionStyle&&1)===1?pointStyle||boundaryStyle||labelStyle||selfIntersectionStyle:(vm._bushfireStyle?vm._bushfireStyle.length=0:vm._bushfireStyle=[],pointStyle&&vm._bushfireStyle.push.apply(vm._bushfireStyle,pointStyle),boundaryStyle&&vm._bushfireStyle.push.apply(vm._bushfireStyle,boundaryStyle),labelStyle&&vm._bushfireStyle.push(labelStyle),selfIntersectionStyle&&vm._bushfireStyle.push(selfIntersectionStyle),vm._bushfireStyle)}}.call(this)),this._bushfireStyleFunc},featurelist:function(){try{return this.revision&&this._featurelist.getArray()}catch(ex){return[]}},featureSize:function(){try{return this.revision&&this._featurelist.getLength()}catch(ex){return 0}},hasFeatureFilter:function(){return!(!this.search||!this.search.trim())}},watch:{isReportMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.bushfireMapLayer.changed())},bushfireLabels:function(newValue,oldValue){this.showBushfireLabels()},tools:function(newValue,oldValue){this.adjustHeight()},showFilters:function(newValue,oldValue){this.adjustHeight()},showToggles:function(newValue,oldValue){this.adjustHeight()},showFireboundary:function(newValue,oldValue){var vm=this;this.map.enableDependentLayer(this.bushfireMapLayer,"dpaw:bushfire_final_fireboundary_latest",newValue),_vendor.$.each(this._featurelist.getArray(),function(index,feature){vm.isFireboundaryDrawable(feature)&&feature.getGeometry().changed()})},clippedFeatures:function(newValue,oldValue){this.clippedOnly&&0===newValue.length&&(this.clippedOnly=!1,this.updateFeatureFilter(3,0))},dateRange:function(newValue,oldValue){this.changeDateRange()},startDate:function(newValue,oldValue){this.changeStartDate()},endDate:function(newValue,oldValue){this.changeEndDate()},region:function(newValue,oldValue){this.district=""}},methods:{regionFilter:function(downloadFilter){if(downloadFilter){var vm=this,r=this.regions.find(function(o){return o.region_id===parseInt(vm.region)});return this.region?"region='"+(r?r.region:"")+"'":null}return this.region?"region_id="+this.region:null},changeDateRange:function(){if("-1"===this.dateRange)this.changeStartDate(),this.changeEndDate();else if(""===this.dateRange)this.endDate="",this.startDate="";else{var range=_vendor.utils.getDateRange(this.dateRange,"YYYY-MM-DD HH:mm");this.startDate=range[0]||"",this.endDate=range[1]||""}},changeStartDate:function(){if("-1"===this.dateRange&&this._endDatePicker)try{""===this.startDate?this._endDatePicker.setStartDate((0,_vendor.moment)().subtract(13,"months").format("YYYY-MM-DD")+" 00:00"):this._endDatePicker.setStartDate((0,_vendor.moment)(this.startDate,"YYYY-MM-DD HH:mm").format("YYYY-MM-DD")+" 00:00")}catch(ex){}},changeEndDate:function(){if("-1"===this.dateRange&&this._startDatePicker)try{""===this.endDate?this._startDatePicker.setEndDate((0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59"):this._startDatePicker.setEndDate(this.endDate)}catch(ex){}},dateFilter:function(){"-1"!==this.dateRange&&this.changeDateRange();var startDate=this.startDate?(0,_vendor.moment)(this.startDate,"YYYY-MM-DD HH:mm",!0):null;if(startDate&&!startDate.isValid())throw"startDate is under changing.";var endDate=this.endDate&&this.endDate<(0,_vendor.moment)().format("YYYY-MM-DD HH:mm")?(0,_vendor.moment)(this.endDate,"YYYY-MM-DD HH:mm",!0):null;if(endDate&&!endDate.isValid())throw"endDate is under changing.";if(startDate){if(endDate){if(startDate>=endDate)throw"Start date must be less than end date.";return"fire_detected_or_created BETWEEN '"+startDate.utc().format("YYYY-MM-DDTHH:mm:ssZ")+"' AND '"+_vendor.utils.nextDate(endDate,"YYYY-MM-DD HH:mm").utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'"}return"fire_detected_or_created >= '"+startDate.utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'"}return endDate?"fire_detected_or_created < '"+_vendor.utils.nextDate(endDate,"YYYY-MM-DD HH:mm").utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'":null},districtFilter:function(downloadFilter){if(downloadFilter){var vm=this,d=this.districts.find(function(o){return o.id===parseInt(vm.district)});return this.district?"district='"+(d?d.district:"")+"'":null}return this.district?"district_id="+this.district:null},originpointCoordinate:function(feat){try{return feat.getGeometry().getGeometriesArray()[0].getCoordinates()}catch(ex){return null}},featureTasks:function(feat){return this.revision&&(this._taskManager?this._taskManager.getTasks(feat):null)},refreshFinalFireboundaryLayer:function(wait){var vm=this;wait=wait||1e3,this._refreshFinalFireboundaryLayer=this._refreshFinalFireboundaryLayer||debounce(function(){vm.finalFireboundaryMapLayer&&vm.finalFireboundaryMapLayer.show&&vm.finalFireboundaryMapLayer.refresh()},wait),this._refreshFinalFireboundaryLayer.call({wait:wait})},refreshSelectedFinalFireboundaryLayer:function(wait){var vm=this;wait=wait||1e3,this._refreshSelectedFinalFireboundaryLayer=this._refreshSelectedFinalFireboundaryLayer||debounce(function(){if(vm.selectedFinalFireboundaryMapLayer){var selectedFinalBushfires=vm.selectedFeatures.getArray().filter(function(f){return!vm.isFireboundaryDrawable(f)});0===selectedFinalBushfires.length?vm.selectedFinalFireboundaryMapLayer.show&&vm.map.enableDependentLayer(vm.bushfireMapLayer,"dpaw:bushfire_final_fireboundary_latest_selected",!1):(vm.selectedFinalFireboundaryMapLayer.setParams({cql_filter:"fire_number in ('"+selectedFinalBushfires.map(function(f){return f.get("fire_number")}).join("','")+"')"}),vm.selectedFinalFireboundaryMapLayer.show||vm.map.enableDependentLayer(vm.bushfireMapLayer,"dpaw:bushfire_final_fireboundary_latest_selected",!0))}},wait),this._refreshSelectedFinalFireboundaryLayer.call({wait:wait})},featureExtent:function(feat){return feat.get("fire_boundary")?feat.getGeometry()?_vendor.ol.extent.extend(feat.getGeometry().getExtent(),feat.get("fire_boundary")):feat.get("fire_boundary"):feat.getGeometry().getExtent()},zoomToSelected:function(wait){var vm=this;wait=wait||0,vm._zoomToSelected=vm._zoomToSelectedFunc||debounce(function(){vm.map.zoomToSelected(125,vm.featureExtent)},wait),0===wait?vm._zoomToSelected.call({wait:1}):vm._zoomToSelected.call({wait:wait})},open:function(options){"bfrs"!==this.activeMenu?(0,_vendor.$)("#menu-tab-bfrs-label").trigger("click"):(0,_vendor.$)("#offCanvasLeft").hasClass("reveal-responsive")||((0,_vendor.$)("#offCanvasLeft").toggleClass("reveal-responsive"),self.map.olmap.updateSize());var vm=this,updateType=null,action=options.action||"select";if(options){if("region"in options&&""!==this.region&&options.region!==this.region&&(this.region=options.region||"",updateType="region"),"district"in options&&""!==this.district&&options.district!==this.district&&(this.district=options.district||"",updateType="district"),null!==options.bushfireid&&void 0!==options.bushfireid&&(this.selectedFeatures.getLength()>0&&this.selectedFeatures.clear(),this.search&&this.search.trim().length>0?(this.clippedOnly&&(this.clippedOnly=!1),this.search="",this.updateFeatureFilter(3,0)):this.clippedOnly&&(this.clippedOnly=!1,this.updateFeatureFilter(1,0))),!(updateType=updateType||("create"===action?"query":null))&&null!==options.bushfireid&&void 0!==options.bushfireid){var bushfire=this.features.getArray().find(function(f){return f.get("fire_number")===options.bushfireid});if(bushfire)return this.selectedFeatures.push(bushfire),void(options.refresh||"update"===action?this.resetFeature(bushfire,!1,function(){vm.zoomToSelected(),vm.scrollToSelected()}):(this.zoomToSelected(),this.scrollToSelected()));updateType="query"}(updateType||options.refresh)&&(null!==options.bushfireid&&void 0!==options.bushfireid&&("all_reports"!==this.statusFilter&&(this.statusFilter="all_reports"),""!==this.dateRange&&(this.dateRange="",this.startDate="",this.endDate="")),updateType=options.refresh?"refresh":updateType,this.updateCQLFilter(1,!0,function(){if(null!==options.bushfireid&&void 0!==options.bushfireid){var feat=vm.features.getArray().find(function(o){return o.get("fire_number")==options.bushfireid});feat&&(vm.selectedFeatures.push(feat),vm.zoomToSelected(),vm.scrollToSelected())}}))}},isModifiable:function(bushfire){try{return this.whoami.bushfire.permission[bushfire.get("status")+".modify"]}catch(ex){return!1}},isFireboundaryDrawable:function(bushfire){return"new"===bushfire.get("status")||1===bushfire.get("report_status")},isEditable:function(bushfire){try{return this.whoami.bushfire.permission[bushfire.get("status")+".edit"]}catch(ex){return!1}},isDeletable:function(bushfire){return"new"===bushfire.get("status")},isCreatable:function(){try{return this.revision&&this.whoami.bushfire.permission.create}catch(ex){return!1}},canBatchUpload:function(){try{return this.revision&&this.whoami.bushfire.permission["final_authorised.modify"]}catch(ex){return!1}},canDownloadAll:function(){return!0},canEdit:function(bushfire){return this.revision&&"new"!==bushfire.get("status")&&this.isEditable(bushfire)&&"modified"!==bushfire.get("tint")},canUpload:function(bushfire){return this.revision&&this.isModifiable(bushfire)},canModify:function(bushfire){return this.revision&&this.isModifiable(bushfire)},canReset:function(bushfire){return this.revision&&"new"!==bushfire.get("status")},canSave:function(bushfire){return this.revision&&"new"!==bushfire.get("status")&&this.isModifiable(bushfire)&&"modified"===bushfire.get("tint")},canCreate:function(bushfire){return this.revision&&"new"===bushfire.get("status")&&bushfire.getGeometry().getGeometriesArray().find(function(g){return g instanceof _vendor.ol.geom.Point})},canDelete:function(bushfire){return this.revision&&this.isDeletable(bushfire)},createUrl:function(){return this.env.bfrsService+"/bfrs/create/"},editUrl:function(feat){var status=feat.get("report_status");return status>1&&status<5?this.env.bfrsService+"/bfrs/final/"+feat.get("id")+"/":this.env.bfrsService+"/bfrs/initial/"+feat.get("id")+"/"},saveUrl:function(feat){return this.env.bfrsService+"/api/v1/bushfirespatial/"+feat.get("id")+"/?format=json"},deleteUrl:function(feat){return this.env.bfrsService+"/delete/"+feat.get("id")},startEditFeature:function(feat){1===this.selectedFeatures.getLength()&&this.selectedFeatures.item(0)===feat||(this.selectedFeatures.getLength()>0&&this.selectedFeatures.clear(),this.selectedFeatures.push(feat)),this.annotations.tool!==this.ui.modifyTool&&this.annotations.setTool(this.ui.modifyTool)},validateBushfire:function(feat,validateType,callback){feat.intersectionPoints&&(delete feat.intersectionPoints,feat.changed());var indexes=null;this._validateBushfireCallback=this._validateBushfireCallback||function(error,callback){callback?callback(error):error&&alert(error)};var vm=this;try{var geometries=feat.getGeometry().getGeometries(),originPoint=geometries.find(function(g){return g instanceof _vendor.ol.geom.Point})||null;if(!originPoint)throw"No origin point placed";if(!this.isFireboundaryDrawable(feat))return void(2!=(2&feat.get("modifyType"))&&feat.get("fire_boundary")?(originPoint=originPoint.getCoordinates(),"getSpatialData"===validateType?_vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetPropertyValue&valueReference=fire_number&typeNames="+getLayerId("dpaw:bushfire_final_fireboundary_latest")+"&cql_filter=(fire_number='"+feat.get("fire_number")+"')and (CONTAINS(fire_boundary,POINT("+originPoint[1]+" "+originPoint[0]+")))",dataType:"xml",success:function(response,stat,xhr){response.firstChild&&response.firstChild.children&&response.firstChild.children.length>0?vm._validateBushfireCallback(null,callback):callback&&vm._validateBushfireCallback("Point of Origin is not inside fire boundary, please fix using the edit bushfire button",callback)},error:function(xhr,status,message){vm._validateBushfireCallback(xhr.responseText||message,callback)},xhrFields:{withCredentials:!0}}):_vendor.ol.extent.containsCoordinate(feat.get("fire_boundary"),originPoint)?vm._validateBushfireCallback(null,callback):vm._validateBushfireCallback("Point of Origin is not inside fire boundary, please fix using the edit bushfire button",callback)):vm._validateBushfireCallback(null,callback));var fireboundary=null;indexes=geometries.findIndex(function(g){return g instanceof _vendor.ol.geom.MultiPolygon}),indexes>=0?(fireboundary=geometries[indexes],indexes=[indexes]):(fireboundary=null,indexes=null);var convertedToTurf=!0,checkResult=!1;if(fireboundary&&1===fireboundary.getPolygons().length){fireboundary=fireboundary.getCoordinates(),fireboundary[0]=_vendor.turf.polygon(fireboundary[0]);var kinks=_vendor.turf.kinks(fireboundary[0]);if(kinks.features.length>0)throw feat.intersectionPoints=new _vendor.ol.geom.MultiPoint(kinks.features.map(function(p){return p.geometry.coordinates})),indexes&&indexes.push(0),"The polygon is self intersecting, please remove intersection"}else if(fireboundary&&fireboundary.getPolygons().length>1)for(fireboundary=fireboundary.getCoordinates(),index=0;index<fireboundary.length;index++)for(0===index&&(fireboundary[index]=_vendor.turf.polygon(fireboundary[index])),index2=index+1;index2<fireboundary.length;index2++){0===index&&(fireboundary[index2]=_vendor.turf.polygon(fireboundary[index2]));try{checkResult=_vendor.turf.intersect(fireboundary[index],fireboundary[index2])}catch(ex){var kinks=null;throw 0===index&&1===index2&&(kinks=_vendor.turf.kinks(fireboundary[index])).features.length>0?(feat.intersectionPoints=new _vendor.ol.geom.MultiPoint(kinks.features.map(function(p){return p.geometry.coordinates})),indexes&&indexes.push(index),"One or more fire boundaries are self intersecting, please remove self intersection"):0===index&&(kinks=_vendor.turf.kinks(fireboundary[index2])).features.length>0?(feat.intersectionPoints=new _vendor.ol.geom.MultiPoint(kinks.features.map(function(p){return p.geometry.coordinates})),indexes&&indexes.push(index2),"One or more fire boundaries are self intersecting, please remove self intersection"):(indexes&&indexes.push(index),"One or more fire boundaries are invalid, please fix it")}if(checkResult)throw indexes&&indexes.push(index),"One or more fire boundaries are intersecting, please remove intersection"}if(originPoint){if(inFireboundary=null,originPoint=_vendor.turf.point(originPoint.getCoordinates()),fireboundary&&fireboundary.length>0)for(inFireboundary=!1,index=0;index<fireboundary.length;index++)if(convertedToTurf||(fireboundary[index]=_vendor.turf.polygon(fireboundary[index])),_vendor.turf.inside(originPoint,fireboundary[index])){inFireboundary=!0;break}if(inFireboundary,!1===inFireboundary)throw indexes=[0],"Point of Origin is not inside fire boundary, please fix using the edit bushfire button";convertedToTurf=!0}vm._validateBushfireCallback(null,callback)}catch(ex){
feat.get("external_feature")||(indexes&&(feat.selectedIndex=indexes),1===this.annotations.selectedFeatures.getLength()&&this.annotations.selectedFeatures.item(0)===feat||(this.annotations.selectedFeatures.clear(),this.annotations.selectedFeatures.push(feat)),this.annotations.tool!==this.ui.modifyTool&&this.annotations.setTool(this.ui.modifyTool)),vm._validateBushfireCallback(ex.message||ex,callback)}},getSpatialData:function(feat,caller,callback,failedCallback){caller=caller||"get";var vm=this;this._defaultFailedCallback=this._defaultFailedCallback||function(msg){alert(msg)},failedCallback=failedCallback||this._defaultFailedCallback,vm._getSpatialDataCallback=vm._getSpatialDataCallback||function(feat,caller,_callback,failedCallback,spatialData){if(vm._taskManager.allTasksSucceed(feat,"getSpatialData")){if("region"in spatialData&&"district"in spatialData){var region=null,district=null;spatialData.region_id=null,spatialData.district_id=null;var name=spatialData.region;if(delete spatialData.region,name){if(name=name.toLowerCase(),!(region=vm.whoami.bushfire.regions.find(function(o){return o.region.toLowerCase()===name})))return void failedCallback("Region '"+name+"' is not found");spatialData.region_id=region.region_id}if(name=spatialData.district,delete spatialData.district,name&&region){if(name=name.toLowerCase(),!(district=region.districts.find(function(o){return o.district.toLowerCase()===name})))return void failedCallback("District '"+name+"' is not found in region '"+region.region+"'.");spatialData.district_id=district.id}}"batchimport"===caller&&spatialData.fire_boundary?(feat.get("capt_meth")&&(method=vm.whoami.bushfire.capturemethods.find(function(m){return m.code===feat.get("capt_meth")}),method?spatialData.capturemethod=method.id:feat.get("capt_desc")&&(spatialData.capturemethod=vm.whoami.bushfire.other_capturemethod_id),spatialData.capturemethod===vm.whoami.bushfire.other_capturemethod_id&&(spatialData.other_capturemethod=feat.get("capt_desc"))),_callback(spatialData)):"import"===caller&&spatialData.fire_boundary?vm.loadCapturemethods(function(){initData={},feat.get("capt_meth")&&(method=vm.whoami.bushfire.capturemethods.find(function(m){return m.code===feat.get("capt_meth")}),method&&(initData.capturemethod=method.id)),feat.get("capt_desc")&&(initData.other_capturemethod=feat.get("capt_desc")),vm.dialog.show({title:"Capture Methods",messages:vm.whoami.bushfire.capturemethod_dialogmessage,initData:initData,initFunc:function(){"capturemethod"in initData&&(0,_vendor.$)("#userdialog-button-true").prop("disabled",!1),initData.capturemethod===vm.whoami.bushfire.other_capturemethod_id&&(0,_vendor.$)("#userdialog input[name='other_capturemethod']").prop("disabled",!1)},footer:[[["",3],[!0,2,{type:"button",disabled:!0,title:"Select",click:"close",is_valid:function(button,data){return data.capturemethod?parseInt(data.capturemethod)!==vm.whoami.bushfire.othermethod_id||data.other_capturemethod?void 0:(alert("Please input the other capture method."),!1):(alert("Please choose a capture method."),!1)}}],["",2],[!1,2,{type:"button",disabled:!1,click:"close",title:"Cancel"}],["",3]]],defaultOption:!1,callback:function(isOk,data){isOk?data.capturemethod?data.capturemethod!==vm.whoami.bushfire.othermethod_id||data.other_capturemethod?(spatialData.capturemethod=data.capturemethod,data.capturemethod===vm.whoami.bushfire.othermethod_id&&(spatialData.other_capturemethod=data.other_capturemethod||null),_callback(spatialData)):failedCallback("'Other Capture Method' is missing."):failedCallback("'Capture Method' is missing."):failedCallback("Import cancelled")}})},function(msg){failedCallback(msg)}):_callback(spatialData)}else if(vm._taskManager.allTasksFinished(feat,"getSpatialData"))if(failedCallback===vm._defaultFailedCallback){var msg=vm._taskManager.errorMessages(feat,"getSpatialData").join("\r\n");msg&&alert(msg)}else failedCallback("")},vm._getSpatialData=vm._getSpatialData||function(feat,caller,_callback2,failedCallback){try{var spatialData={},modifyType="new"===feat.get("status")?3:feat.get("modifyType")||3,geometries=feat.getGeometry().getGeometriesArray(),originPoint=geometries.find(function(g){return g instanceof _vendor.ol.geom.Point})||null;originPoint=originPoint?originPoint.getCoordinates():null;var fireboundary=null;1==(1&modifyType)&&(spatialData.origin_point=originPoint,spatialData.origin_point_mga=vm.map.getMGA(originPoint),spatialData.tenure_ignition_point=null,spatialData.fire_position=null),2==(2&modifyType)&&(fireboundary=geometries.find(function(g){return g instanceof _vendor.ol.geom.MultiPolygon})||null,fireboundary&&fireboundary.getPolygons().length>0?fireboundary.getExtent():null,fireboundary=fireboundary&&fireboundary.getPolygons().length>0?fireboundary.getCoordinates():null,spatialData.fire_boundary=fireboundary,spatialData.area=null);var tenure_area_task=null;fireboundary&&2==(2&modifyType)&&(tenure_area_task=vm._taskManager.addTask(feat,"getSpatialData","tenure_area","Calculate fire boundary areas",_vendor.utils.WAITING));var tenure_origin_point_task=null,fire_position_task=null,originpoint_grid_task=null,region_task=null,district_task=null,plantation_task=null;if(["new","initial"].indexOf(feat.get("status"))>=0&&(spatialData.plantations=null,originPoint&&(plantation_task=vm._taskManager.addTask(feat,"getSpatialData","plantation","Find the plantations within 3kms",_vendor.utils.WAITING))),originPoint&&1==(1&modifyType)&&(tenure_origin_point_task=vm._taskManager.addTask(feat,"getSpatialData","tenure_origin_point","Get the tenure of ignition point",_vendor.utils.WAITING),fire_position_task=vm._taskManager.addTask(feat,"getSpatialData","fire_position","Get the fire position",_vendor.utils.WAITING),originpoint_grid_task=vm._taskManager.addTask(feat,"getSpatialData","originpoint_grid","Get origin point's grid data",_vendor.utils.WAITING),["new","initial"].indexOf(feat.get("status"))>=0&&(region_task=vm._taskManager.addTask(feat,"getSpatialData","region","Get bushfire's region",_vendor.utils.WAITING),district_task=vm._taskManager.addTask(feat,"getSpatialData","district","Get bushfire's district",_vendor.utils.WAITING))),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData),tenure_area_task){tenure_area_task.setStatus(_vendor.utils.RUNNING),vm._getValidationMessage=vm._getValidationMessage||function(message){return"Geometry check of the fire shape has found the following error: \r\n\t"+(Array.isArray(message)?message.join("\r\n\t"):message)+"\r\n\r\nPlease run a geometry check within ArcGIS before uploading\r\nFor help contact the Fire Support Systems Team fire_systems_support@dbca.wa.gov.au"};var process_overlap_func=function(result){if(feature_area=result.data,"import"===caller)return void vm.dialog.show({messages:["The sum of the burning areas in individual layers is "+Math.abs(feature_area.other_area).toFixed(2)+" greater than the total burning area "+feature_area.total_area.toFixed(2)+".","The features from the following layers are overlaped.",[["",1],[getLayerId("cddp:legislated_lands_and_waters"),11]],[["",1],[getLayerId("cddp:dept_interest_lands_and_waters"),11]],[["",1],[getLayerId("cddp:other_tenures"),11]],"Do you want to continue?"],defaultOption:!1,footer:[[["",3],[!0,2,{type:"button",title:"Yes",click:"close"}],["",2],[!1,2,{type:"button",title:"No",click:"close"}],["",3]]],callback:function(option){setTimeout(function(){option?("fb_validation_req"in feature_area||(feature_area.fb_validation_req=null),spatialData.area=feature_area,tenure_area_task.setStatus(_vendor.utils.SUCCEED)):tenure_area_task.setStatus(_vendor.utils.FAIL_CONFIRMED,"Cancelled"),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},1)}});"fb_validation_req"in feature_area||(feature_area.fb_validation_req=null),spatialData.area=feature_area,tenure_area_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},process_invalid_func=function(result){var msg=vm._getValidationMessage(result.status.invalid);if("import"===caller)return void vm.dialog.show({messages:msg,defaultOption:!1,footer:[[["",3],[!1,2,{type:"button",title:"Ok",click:"close"}],["",2],[!0,2,{type:"button",title:"Override",click:"close"}],["",3]]],callback:function(option){option?setTimeout(function(){vm.dialog.show({messages:"I acknowledge a geometry check has been run and passed in ArcGIS Geometry Tool and this is a valid shape.",defaultOption:!1,footer:[[["",3],[!0,2,{type:"button",title:"Yes",click:"close"}],["",2],[!1,2,{type:"button",title:"Cancel",click:"close"}],["",3]]],callback:function(option){setTimeout(function(){option?(result.data.fb_validation_req=!0,result.status.overlapped?process_overlap_func(result):(spatialData.area=result.data,tenure_area_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData))):(tenure_area_task.setStatus(_vendor.utils.FAIL_CONFIRMED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData))},1)}})},1):(tenure_area_task.setStatus(_vendor.utils.FAIL_CONFIRMED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData))}});"batchimport"===caller?(result.data.fb_validation_req=!0,spatialData.area=result.data,tenure_area_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)):(tenure_area_task.setStatus(_vendor.utils.FAILED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData))},layers=null;layers=["new","initial"].indexOf(feat.get("status"))>=0?null:[{id:"legislated_lands_and_waters",layerid:getLayerId("cddp:legislated_lands_and_waters"),cqlfilter:"category<>'State Forest'",kmiservice:vm.env.kmiService,properties:{category:"category"},primary_key:"ogc_fid"},{id:"state_forest_plantation_distribution",layerid:getLayerId("cddp:state_forest_plantation_distribution"),kmiservice:vm.env.kmiService,properties:{category:"fbr_fire_r"},primary_key:"ogc_fid"},{id:"dept_interest_lands_and_waters",layerid:getLayerId("cddp:dept_interest_lands_and_waters"),kmiservice:vm.env.kmiService,properties:{category:"category"},primary_key:"ogc_fid"},{id:"other_tenures",layerid:getLayerId("cddp:other_tenures"),kmiservice:vm.env.kmiService,properties:{category:"brc_fms_le"},primary_key:"ogc_fid"},{id:"sa_nt_burntarea",layerid:getLayerId("cddp:sa_nt_state_polygons_burntarea"),kmiservice:vm.env.kmiService,properties:{category:"name"},primary_key:"ogc_fid"}],_vendor.$.ajax({url:vm.env.gokartService+"/spatial",dataType:"json",data:{features:vm.$root.geojson.writeFeatures([feat]),options:JSON.stringify({area:{action:"getArea",layer_overlap:!1,merge_result:!0,unit:"ha",layers:layers}})},method:"POST",success:function(response,stat,xhr){if(response.total_features>0){var result=response.features[0].area;result.status.failed?(tenure_area_task.setStatus(_vendor.utils.FAILED,result.status.failed),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)):result.status.invalid?process_invalid_func(result):result.status.overlapped?process_overlap_func(result):(result.data.fb_validation_req=null,spatialData.area=result.data,tenure_area_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData))}else tenure_area_task.setStatus(_vendor.utils.FAILED,"Calculate area failed."),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},error:function(xhr,status,message){490===xhr.status?tenure_area_task.setStatus(_vendor.utils.FAILED,vm._getValidationMessage(xhr.responseText||message)):tenure_area_task.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},xhrFields:{withCredentials:!0}})}tenure_origin_point_task&&(tenure_origin_point_task.setStatus(_vendor.utils.RUNNING),tenure_layers=[{id:"cddp:state_forest_plantation_distribution",geom_field:"wkb_geometry",properties:{id:"ogc_fid",name:"fbr_fire_r",category:"fbr_fire_r"}},{id:"cddp:legislated_lands_and_waters",geom_field:"wkb_geometry",properties:{id:"ogc_fid",name:"name",category:"category"}},{id:"cddp:dept_interest_lands_and_waters",geom_field:"wkb_geometry",properties:{id:"ogc_fid",name:"name",category:"category"}},{id:"cddp:other_tenures",geom_field:"wkb_geometry",properties:{id:"ogc_fid",name:"brc_fms_le",category:"brc_fms_le"}},{id:"cddp:sa_nt_state_polygons_burntarea",geom_field:"wkb_geometry",properties:{id:"ogc_fid",name:"name",category:"name"}}],vm.map.getFeature(tenure_layers,originPoint,function(feature){spatialData.tenure_ignition_point=feature,tenure_origin_point_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},function(msg){tenure_origin_point_task.setStatus(_vendor.utils.FAILED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)})),fire_position_task&&(fire_position_task.setStatus(_vendor.utils.RUNNING),vm.map.getPosition(originPoint,function(position){spatialData.fire_position=position,fire_position_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},function(msg){fire_position_task.setStatus(_vendor.utils.FAILED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)})),originpoint_grid_task&&(originpoint_grid_task.setStatus(_vendor.utils.RUNNING),vm.map.getGridData(originPoint,function(grid_data){spatialData.origin_point_grid=grid_data,originpoint_grid_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},function(msg){originpoint_grid_task.setStatus(_vendor.utils.FAILED,msg),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)})),region_task&&(region_task.setStatus(_vendor.utils.RUNNING),_vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+getLayerId("cddp:dpaw_regions")+"&outputFormat=json&cql_filter=CONTAINS(wkb_geometry,POINT("+originPoint[1]+" "+originPoint[0]+"))",dataType:"json",success:function(response,stat,xhr){0===response.totalFeatures?spatialData.region=null:spatialData.region=response.features[0].properties.region,region_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},error:function(xhr,status,message){region_task.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},xhrFields:{withCredentials:!0}})),district_task&&(district_task.setStatus(_vendor.utils.RUNNING),_vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+getLayerId("dpaw:pw_districts_fssvers")+"&outputFormat=json&cql_filter=CONTAINS(wkb_geometry,POINT("+originPoint[1]+" "+originPoint[0]+"))",dataType:"json",success:function(response,stat,xhr){0===response.totalFeatures?spatialData.district=null:spatialData.district=response.features[0].properties.district,district_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},error:function(xhr,status,message){district_task.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},xhrFields:{withCredentials:!0}}))}catch(ex){vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)}if(plantation_task){plantation_task.setStatus(_vendor.utils.RUNNING);var point_buffer=_vendor.turf.buffer({type:"Feature",properties:{},geometry:{type:"Point",coordinates:originPoint}},3,"kilometers").geometry.coordinates[0],url=vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+getLayerId("cddp:plantation_annual_report")+"&outputFormat=json&cql_filter=INTERSECTS(wkb_geometry,POLYGON(("+point_buffer.map(function(p){return p[1]+" "+p[0]}).join("%2C")+")))";_vendor.$.ajax({url:url,dataType:"json",success:function(response,stat,xhr){response.totalFeatures>0&&(spatialData.plantations=response.features.map(function(o){return{ogc_fid:o.properties.ogc_fid,species:o.properties.species,sp_type:o.properties.sp_type,area_ha:o.properties.area_ha,classifica:o.properties.classifica}})),plantation_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},error:function(xhr,status,message){plantation_task.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),vm._getSpatialDataCallback(feat,caller,_callback2,failedCallback,spatialData)},xhrFields:{withCredentials:!0}})}};try{if(this.isFireboundaryDrawable(feat)||2!=(2&feat.get("modifyType"))&&feat.get("fire_boundary")){var validate_task=vm._taskManager.addTask(feat,"getSpatialData","validate","Validate bushfire",_vendor.utils.RUNNING);this.validateBushfire(feat,"getSpatialData",function(error){error?(validate_task.setStatus(_vendor.utils.FAILED,error),vm._getSpatialDataCallback(feat,caller,callback,failedCallback,{})):(validate_task.setStatus(_vendor.utils.SUCCEED),vm._getSpatialData(feat,caller,callback,failedCallback))})}else vm._getSpatialData(feat,caller,callback,failedCallback)}catch(ex){vm._getSpatialDataCallback(feat,caller,callback,failedCallback,{})}},saveFeature:function(feat,caller,callback){if(caller=caller||"save",this.canSave(feat)){var vm=this;if(!callback&&!vm._taskManager.initTasks(feat))return;var task=vm._taskManager.addTask(feat,"save","save","Save spatial data",_vendor.utils.RUNNING);callback||(callback=function(feat,status,msg){if(status===_vendor.utils.SUCCEED)vm._taskManager.clearTasks(feat),vm.resetFeature(feat,!1);else if(status===_vendor.utils.WARNING||status===_vendor.utils.FAILED){var msg=vm._taskManager.errorMessages(feat).join("\r\n");msg&&alert(msg),status===_vendor.utils.WARNING&&vm.resetFeature(feat,!1)}}),vm.getSpatialData(feat,caller,function(spatialData,job){_vendor.$.ajax({url:vm.saveUrl(feat),method:"PATCH",data:JSON.stringify(spatialData),contentType:"application/json",success:function(response,stat,xhr){if(280===xhr.status&&(response.fire_number&&response.id?(feat.set("fire_number",response.fire_number),feat.set("id",response.id)):(task.setStatus(_vendor.utils.FAILED,"The bushfire report is invalidated ,but the new fire_number and id are not returned."),callback(feat,_vendor.utils.FAILED,task.message))),!vm.isFireboundaryDrawable(feat)&&2==(2&feat.get("modifyType"))){var originPoint=feat.getGeometry().getGeometries().find(function(g){return g instanceof _vendor.ol.geom.Point})||null;if(originPoint){var checkTask=vm._taskManager.addTask(feat,"postsave","check_originpoint","Check origin within fire shape",_vendor.utils.RUNNING);return originPoint=originPoint.getCoordinates(),void _vendor.$.ajax({url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetPropertyValue&valueReference=fire_number&typeNames="+getLayerId("dpaw:bushfire_final_fireboundary_latest")+"&cql_filter=(fire_number='"+feat.get("fire_number")+"')and (CONTAINS(fire_boundary,POINT("+originPoint[1]+" "+originPoint[0]+")))",dataType:"xml",success:function(response,stat,xhr){response.firstChild&&response.firstChild.children&&0!==response.firstChild.children.length?(checkTask.setStatus(_vendor.utils.SUCCEED),task.setStatus(_vendor.utils.SUCCEED),callback(feat,_vendor.utils.SUCCEED)):(checkTask.setStatus(_vendor.utils.FAILED,"Point of Origin is not inside fire boundary, please fix using the edit bushfire button"),task.setStatus(_vendor.utils.WARNING),callback(feat,_vendor.utils.WARNING,checkTask.message))},error:function(xhr,status,message){checkTask.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),task.setStatus(_vendor.utils.WARNING),callback(feat,_vendor.utils.WARNING,checkTask.message)},xhrFields:{withCredentials:!0}})}}task.setStatus(_vendor.utils.SUCCEED),callback(feat,_vendor.utils.SUCCEED)},error:function(xhr,status,message){task.setStatus(_vendor.utils.FAILED,xhr.status+" : "+(xhr.responseText||message)),callback(feat,_vendor.utils.FAILED,task.message)},xhrFields:{withCredentials:!0}})},function(ex){task.setStatus(_vendor.utils.FAILED,ex.message||ex),callback(feat,_vendor.utils.FAILED,task.message)})}},newFireNumber:function(bushfireid,prefix){return bushfireid=Math.abs(bushfireid),(prefix||"New bushfire")+" "+(bushfireid<10?"00":bushfireid<100?"0":"")+bushfireid},newFeature:function(feat){var vm=this;this._bushfireSequence=this._bushfireSequence||0;var featId=0;return feat&&feat.get("id")?(Math.abs(feat.get("id"))>this._bushfireSequence&&(this._bushfireSequence=Math.abs(feat.get("id"))),featId=Math.abs(feat.get("id"))):(this._bushfireSequence+=1,featId=this._bushfireSequence),feat?(feat.set("status","new",!0),feat.set("tint","new",!0),feat.set("id",-1*featId,!0),feat.set("originalTint","new",!0),feat.set("toolName","Bfrs Origin Point",!0),feat.set("fillColour",this.tints["new.fillColour"],!0),feat.set("colour",this.tints["new.colour"],!0),feat.getGeometry()?feat.inViewport=_vendor.ol.extent.containsCoordinate(vm.map.extent,vm.originpointCoordinate(feat)):feat.inViewport=!1):(feat=new _vendor.ol.Feature({geometry:new _vendor.ol.geom.GeometryCollection([]),status:"new",tint:"new",id:-1*this._bushfireSequence,originalTint:"new",toolName:"Bfrs Origin Point",fillColour:this.tints["new.fillColour"],colour:this.tints["new.colour"]}),feat.inViewport=!0),feat.setStyle(this.bushfireStyleFunc),feat.set("modifyType",3,!0),feat.set("fire_number",this.newFireNumber(featId),!0),feat.set("name",this.newFireNumber(featId,"New bushfire report"),!0),feat.set("report_status",99998,!0),feat.get("created")||feat.set("created",(new Date).toISOString(),!0),feat.set("fire_detected_or_created",feat.get("fire_detected_date")||feat.get("created"),!0),feat.icon="dist/static/symbols/fire/dashed-origin.svg",vm._insertNewFeature=vm._insertNewFeature||function(features,feat){var insertIndex=null;_vendor.$.each(Array.isArray(features)?features:features.getArray(),function(index,f){if(-1===vm.featureOrder(feat,f))return insertIndex=index,!1}),null!=insertIndex?Array.isArray(features)?features.splice(insertIndex,0,feat):features.insertAt(insertIndex,feat):features.push(feat)},vm._insertNewFeature(this.features,feat),vm._insertNewFeature(this._featurelist,feat),vm.clippedFeatures.length>0&&vm._insertNewFeature(this.clippedFeatures,feat),feat},createFeature:function(feat){if(this.canCreate(feat)){var vm=this;if(!vm._taskManager.initTasks(feat))return;var task=vm._taskManager.addTask(feat,"create","create","Open bushfire report form",_vendor.utils.RUNNING);this.getSpatialData(feat,"create",function(spatialData,job){feat.set("modifyType",0,!0),feat.get("sss_id")||feat.set("sss_id",_vendor.hash.MD5(vm.whoami.email+"-"+Date.now()+"-"+feat.getGeometry().getGeometriesArray()[0].getCoordinates().join(",")),!0),spatialData.sss_id=feat.get("sss_id"),(0,_vendor.$)("#sss_create").val(JSON.stringify(spatialData)),_vendor.utils.submitForm("bushfire_create"),task.setStatus(_vendor.utils.SUCCEED),vm._taskManager.clearTasks(feat)},function(ex){task.setStatus(_vendor.utils.FAILED,"");var msg=vm._taskManager.errorMessages(feat).join("\r\n");msg&&alert(msg)})}},deleteFeature:function(feat){var vm=this;this.canDelete(feat)&&(vm._deleteFeature=vm._deleteFeature||function(feat){vm.selectedFeatures.remove(feat);var index=vm.clippedFeatures.findIndex(function(f){return f===feat});index>=0&&vm.clippedFeatures.splice(index,1),vm._featurelist.remove(feat),vm.features.remove(feat),vm.revision+=1},"new"===feat.get("status")?vm._deleteFeature(feat):window.confirm("The bushfire ("+feat.get("label")+" will be deleted. Are you sure?")&&_vendor.$.ajax({url:vm.deleteUrl(feat),success:function(response,stat,xhr){vm._deleteFeature(feat)},error:function(xhr,status,message){alert(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}}))},resetFeature:function(feat,manually,callback){var vm=this;manually=void 0===manually||manually;var filter="fire_number='"+feat.get("fire_number")+"'";this.bushfireLayer.cql_filter&&(filter=filter+" and "+this.bushfireLayer.cql_filter),this.bushfireMapLayer.getSource().retrieveFeatures(filter,function(features){if(features&&features.length){vm.initBushfire(features[0]),features[0].inViewport=_vendor.ol.extent.containsCoordinate(vm.map.extent,vm.originpointCoordinate(features[0])),void 0!==feat.selectedIndex&&(vm.annotations.getSelectedGeometry(features[0],feat.selectedIndex)?features[0].selectedIndex=feat.selectedIndex:vm.selectDefaultGeometry(features[0]));var index=vm.features.getArray().findIndex(function(f){return f.get("fire_number")===feat.get("fire_number")});index>=0&&(!manually&&vm.features.item(index).tasks&&vm.features.item(index).tasks.length>0&&(features[0].tasks=vm.features.item(index).tasks),vm.features.setAt(index,features[0])),index=vm._featurelist.getArray().findIndex(function(f){return f.get("fire_number")===feat.get("fire_number")}),index>=0&&(vm._featurelist.setAt(index,features[0]),vm.revision+=1),index=vm.clippedFeatures.findIndex(function(f){return f.get("fire_number")===feat.get("fire_number")}),index>=0&&(vm.clippedFeatures[index]=features[0],vm.revision+=1),index=vm.selectedFeatures.getArray().findIndex(function(f){return f.get("fire_number")===feat.get("fire_number")}),index>=0&&vm.selectedFeatures.setAt(index,features[0]),callback&&callback(features[0]),vm._checkPermission(features)}else{vm.selectedFeatures.remove(feat),vm._featurelist.remove(feat);var index=vm.clippedFeatures.findIndex(function(f){return f===feat});index>=0&&vm.clippedFeatures.splice(index,1),vm.features.remove(feat),vm.revision+=1,callback&&callback(null)}vm.refreshFinalFireboundaryLayer()})},adjustHeight:function(){"bfrs"===this.activeMenu&&(0,_vendor.$)("#bfrs-list").height(this.screenHeight-this.leftPanelHeadHeight-41-(0,_vendor.$)("#bfrs-list-controller-container").height()-this.hintsHeight)},postModified:function(bushfires,modifyType){var vm=this;this._bushfirePostModified=this._bushfirePostModified||function(bushfire,modifyType){"modified"===bushfire.get("tint")||"new"===bushfire.get("status")&&!bushfire.get("sss_id")||(bushfire.set("tint","modified",!0),bushfire.set("fillColour",vm.tints[bushfire.get("tint")+".fillColour"]),bushfire.set("colour",vm.tints[bushfire.get("tint")+".colour"])),-1===modifyType&&(modifyType=vm.isFireboundaryDrawable(bushfire)?3:1),bushfire.set("modifyType",(bushfire.get("modifyType")||0)|modifyType,!0)},Array.isArray(bushfires)?_vendor.$.each(bushfires,function(index,bushfire){vm._bushfirePostModified(bushfire,modifyType)}):vm._bushfirePostModified(bushfires,modifyType),vm.revision+=1},isModified:function(feat){return"modified"===feat.get("tint")},toggleSelect:function(f){this.isFeatureSelected(f)?this.selectedFeatures.remove(f):(["Bfrs Origin Point","Bfrs Edit Geometry","Bfrs Fire Boundary"].indexOf(this.annotations.tool.name)>=0&&this.selectedFeatures.clear(),this.selectedFeatures.push(f))},toggleViewportOnly:function(){this.viewportOnly=!this.viewportOnly,this.export.saveState()},toggleBushfireLabels:function(){this.bushfireLabels=!this.bushfireLabels,this.export.saveState()},initBushfire:function(feature){feature.set("status",this._reportStatus[feature.get("report_status")||99999],!0);var geometries=feature.getGeometry()?[feature.getGeometry()]:[];if(feature.get("fire_boundary")){var fire_boundary=JSON.parse(feature.get("fire_boundary"));fire_boundary.coordinates?this.isFireboundaryDrawable(feature)?(geometries.push(new _vendor.ol.geom.MultiPolygon(fire_boundary.coordinates)),feature.unset("fire_boundary",!0)):feature.set("fire_boundary",new _vendor.ol.geom.Polygon(fire_boundary.coordinates).getExtent(),!0):feature.unset("fire_boundary",!0)}else feature.unset("fire_boundary",!0);feature.setGeometry(new _vendor.ol.geom.GeometryCollection(geometries),!0);(0,_vendor.moment)(),(0,_vendor.moment)(feature.get("created"));feature.set("toolName","Bfrs Origin Point",!0),"merged"==feature.get("status")?feature.set("tint",this._reportStatus[feature.get("linked_bushfire_status")],!0):feature.set("tint",feature.get("status"),!0),feature.set("originalTint",feature.get("tint"),!0),feature.set("fillColour",this.tints[feature.get("tint")+".fillColour"]),feature.set("colour",this.tints[feature.get("tint")+".colour"]),feature.setStyle(this.bushfireStyleFunc),("initial"===feature.get("status")||"merged"===feature.get("status")&&1===feature.get("linked_bushfire_status"))&&(feature.icon="dist/static/symbols/fire/dashed-origin.svg")},showBushfireLabels:function(){this.bushfireMapLayer&&!this.$root.active.isHidden(this.bushfireMapLayer)&&this.bushfireMapLayer.changed()},featureIconSrc:function(f){var vm=this;return this.map.getBlob(f,["icon","originalTint"],this.tints,function(){(0,_vendor.$)("#bushfire-icon-"+f.get("id")).attr("src",vm.featureIconSrc(f))})},isFeatureSelected:function(f){return this.selectedFeatures.getArray().findIndex(function(o){return o===f})>=0},downloadList:function(fmt,downloadType){var vm=this,cql_filter="";this.dialog.show({messages:"Downloading bushfires...",footer:null});var bbox="",originpoint_filter="",fireboundary_filter="";if("listed"===downloadType||"history"===downloadType){if(this.clippedOnly||(vm._download_cql_filter||this.search&&this.search.trim().length>0||this.viewportOnly&&this.extentFeaturesSize!==this.featureSizea)&&(this.viewportOnly?this.extentFeaturesSize:this.featureSize)<=80){cql_filter="fire_number in ('"+this._featurelist.getArray().filter(function(f){return"new"!==f.get("status")&&!!vm.showFeature(f)}).map(function(f){return f.get("fire_number")}).join("','")+"')",originpoint_filter="&cql_filter="+cql_filter,fireboundary_filter=originpoint_filter}else cql_filter=vm._download_cql_filter||"",this.search&&this.search.trim().length>0&&(cql_filter=(cql_filter?cql_filter+" and ((":"((")+this.fields.map(function(field){return"strToLowerCase("+field+") like '%25"+vm.search.trim().toLowerCase()+"%25'"}).join(") or (")+"))"),cql_filter.length>0&&(this.viewportOnly&&this.extentFeaturesSize!==this.featureSize?(bbox=this.map.extent,originpoint_filter="&cql_filter="+cql_filter+" and BBOX(origin_point,"+bbox[1]+","+bbox[0]+","+bbox[3]+","+bbox[2]+")",fireboundary_filter="&cql_filter="+cql_filter+" and BBOX(fire_boundary,"+bbox[1]+","+bbox[0]+","+bbox[3]+","+bbox[2]+")",bbox=""):(originpoint_filter="&cql_filter="+cql_filter,fireboundary_filter=originpoint_filter));0===cql_filter.length&&this.viewportOnly&&this.extentFeaturesSize!==this.featureSize&&(bbox=this.map.extent,bbox="&bbox="+bbox[1]+","+bbox[0]+","+bbox[3]+","+bbox[2])}var bushfireLayer=getLayerId("listed"===downloadType?"dpaw:bushfire_latest":"dpaw:bushfire"),fireboundaryLayer=getLayerId("listed"===downloadType?"dpaw:bushfire_fireboundary_latest":"dpaw:bushfire_fireboundary"),options=null;if(options="history"===downloadType?{filename:"bushfires_"+downloadType+"_"+(0,_vendor.moment)().format("YYYY-MM-DD-HHmm"),srs:"EPSG:4326",layers:[{layer:"bushfire_fireboundary",ignore_if_empty:!0,sourcelayers:{url:vm.env.kmiService+"/wfs?servicea=wfs&version=2.0&request=GetFeature&typeNames="+fireboundaryLayer+fireboundary_filter+bbox,fields:["fire_number","name","district","financial_year","fire_detected_date","cause","dfes_incident_no","other_info",{name:"author",src:"fireboundary_uploaded_by"},"capt_meth","capt_desc"]},geometry_column:{name:"fire_boundary",type:"MULTIPOLYGON"}}]}:{filename:"bushfires_"+downloadType+"_"+(0,_vendor.moment)().format("YYYY-MM-DD-HHmm"),srs:"EPSG:4326",layers:[{layer:"initial_bushfire_originpoint",ignore_if_empty:!0,sourcelayers:{url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+bushfireLayer+originpoint_filter+bbox,where:"report_status='Initial Fire Report'"},geometry_column:{name:"origin_point",type:"POINT"}},{layer:"final_bushfire_originpoint",
ignore_if_empty:!0,sourcelayers:{url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+bushfireLayer+originpoint_filter+bbox,where:"report_status<>'Initial Fire Report'"},geometry_column:{name:"origin_point",type:"POINT"}},{layer:"initial_bushfire_fireboundary",ignore_if_empty:!0,sourcelayers:{url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+fireboundaryLayer+fireboundary_filter+bbox,where:"report_status='Initial Fire Report'"},geometry_column:{name:"fire_boundary",type:"MULTIPOLYGON"}},{layer:"final_bushfire_fireboundary",ignore_if_empty:!0,sourcelayers:{url:vm.env.kmiService+"/wfs?service=wfs&version=2.0&request=GetFeature&typeNames="+fireboundaryLayer+fireboundary_filter+bbox,where:"report_status<>'Initial Fire Report'"},geometry_column:{name:"fire_boundary",type:"MULTIPOLYGON"}}]},"listed"===downloadType){var geometries=null,feature=null,id=0,newBushfiresPoint=[],newBushfiresBoundary=[];_vendor.$.each(this._featurelist.getArray(),function(index,f){vm.showFeature(f)&&"new"==f.get("status")&&(geometries=f.getGeometry().getGeometriesArray(),feature=vm.map.cloneFeature(f,!1,["toolName","tint","originalTint","fillColour","colour","status","label","measurement","fire_boundary","modifyType"]),feature.setGeometry(geometries.find(function(g){return g instanceof _vendor.ol.geom.Point})||null),feature.setId(++id),newBushfiresPoint.push(feature),feature=vm.map.cloneFeature(feature,!1),feature.setGeometry(geometries.find(function(g){return g instanceof _vendor.ol.geom.MultiPolygon})||new _vendor.ol.geom.MultiPolygon),feature.setId(++id),newBushfiresBoundary.push(feature))}),newBushfiresPoint.length>0&&(options.newBushfiresOriginPoint=this.$root.geojson.writeFeatures(newBushfiresPoint),options.layers.push({layer:"new_bushfire_point",ignore_if_empty:!0,sourcelayers:{parameter:"newBushfiresOriginPoint",srs:"EPSG:4326"},geometry_column:{name:"origin_point",type:"POINT"}})),newBushfiresBoundary.length>0&&(options.newBushfiresFireboundary=this.$root.geojson.writeFeatures(newBushfiresBoundary),options.layers.push({layer:"new_bushfire_fireboundary",ignore_if_empty:!0,sourcelayers:{parameter:"newBushfiresFireboundary",srs:"EPSG:4326"},geometry_column:{name:"fire_boundary",type:"MULTIPOLYGON"}}))}this.$root.export.downloadVector(fmt,options,function(status,msg){status?vm.dialog.close():vm.dialog.addMessage(msg)})},uploadBushfire:function(targetFeature){this._uploadBushfireNumber=targetFeature.get("fire_number"),this._uploadType="fireboundary",this._uploadTargetOnly=!0,(0,_vendor.$)("#uploadBushfires").click()},importList:function(){if(0!==this.$els.bushfiresfile.files.length){var file=this.$els.bushfiresfile.files[0];this.$els.bushfiresfile.value=null;var vm=this,targetFeature=null;if(this._uploadBushfireNumber&&(targetFeature=this.features.getArray().find(function(f){return f.get("fire_number")===vm._uploadBushfireNumber}),delete this._uploadBushfireNumber,!targetFeature))return void alert("Bushfire ("+this._uploadBushfireNumber+") does not exist in the bushfire list.");var uploadType=this._uploadType;delete this._uploadType;var targetOnly=!(!targetFeature||!this._uploadTargetOnly);delete this._uploadTargetOnly;var import_task=null;if(targetFeature){if(!this._taskManager.initTasks(targetFeature))return;import_task=this._taskManager.addTask(targetFeature,"import","import","Import bushfire fire boundary",_vendor.utils.RUNNING)}vm.export.importVector(file,function(features,fileFormat){try{if(targetFeature&&!(targetFeature=vm.features.getArray().find(function(f){return f.get("fire_number")===targetFeature.get("fire_number")})))return void alert("Bushfire ("+targetFeature.get("fire_number")+") does not exist in the bushfire list.");var importedFinalFeatures=0,importingFeatures=features.length,selectedFeatures=[];!import_task&&features.length>0&&vm.dialog.show({messages:"Importing bushfires...",tasks:features.length,footer:null});var featureImported=function(status,message){import_task?message&&alert(message):(status===_vendor.utils.SUCCEED?vm.dialog.addSucceedTask():status===_vendor.utils.WARNING?vm.dialog.addWarningTask():status===_vendor.utils.IGNORED?vm.dialog.addIgnoredTask():status===_vendor.utils.MERGED?vm.dialog.addMergedTask():vm.dialog.addFailedTask(),message&&vm.dialog.addMessage(message),vm.dialog.tasks<=vm.dialog.succeedTasks&&setTimeout(function(){vm.dialog.close()},1e3)),(importingFeatures-=1)<=0&&(vm.selectedFeatures.clear(),vm.selectedFeatures.extend(selectedFeatures),importedFinalFeatures>0&&vm.refreshBushfires())},f=null,properties=null;if("gpx"===fileFormat){"originpoint"===uploadType&&(features.length=0);for(var i=features.length-1;i>=0;i--)if(feature=features[i],targetFeature&&(feature.set("fire_number",targetFeature.get("fire_number"),!0),feature.set("id",targetFeature.get("id"),!0)),"originpoint"!==uploadType)if(feature.getGeometry()instanceof _vendor.ol.geom.Point)featureImported(_vendor.utils.IGNORED),features.splice(i,1);else if(feature.getGeometry()instanceof _vendor.ol.geom.LineString){var coordinates=feature.getGeometry().getCoordinates();coordinates.push(coordinates[0]),feature.setGeometry(new _vendor.ol.geom.Polygon([coordinates]))}else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiLineString){var geom=feature.getGeometry(),coordinates=null,mp=new _vendor.ol.geom.MultiPolygon;_vendor.$.each(geom.getLineStrings(),function(index,linestring){coordinates=linestring.getCoordinates(),coordinates[coordinates.length-1][0]===coordinates[0][0]&&coordinates[coordinates.length-1][1]===coordinates[0][1]||coordinates.push(coordinates[0]),mp.appendPolygon(new _vendor.ol.geom.Polygon([coordinates]))}),feature.setGeometry(mp)}else featureImported(_vendor.utils.IGNORED),features.splice(i,1);else features.splice(i,1),featureImported(_vendor.utils.IGNORED)}else{var property=null;properties=["fire_number","capt_meth","capt_desc"];var propertyLen=null;_vendor.$.each(properties,function(index,prop){if(property=null,null===propertyLen){for(var i=prop.length;i>=8;i--){for(var name=prop.substring(0,i),j=0;j<features.length;j++)if(void 0!==features[j].get(name)){property=name;break}if(property)break}null!==property&&(propertyLen=property.length)}else{if(prop.length<=propertyLen)return;property=prop.substring(0,propertyLen)}if((property=property||prop)!==prop)for(var j=0;j<features.length;j++)void 0!==features[j].get(property)&&(features[j].set(prop,features[j].get(property),!0),features[j].unset(property))}),targetFeatureFound=!1;for(var i=features.length-1;i>=0;i--)if(feature=features[i],!targetFeature||void 0!==feature.get("fire_number")&&null!==feature.get("fire_number")||(feature.set("fire_number",targetFeature.get("fire_number"),!0),feature.set("id",targetFeature.get("id"),!0)),targetOnly&&feature.get("fire_number")!==targetFeature.get("fire_number"))features.splice(i,1),featureImported(_vendor.utils.IGNORED);else if(targetOnly&&(targetFeatureFound=!0),feature.getGeometry()instanceof _vendor.ol.geom.Point)"fireboundary"===uploadType&&(featureImported(_vendor.utils.IGNORED),features.splice(i,1));else if(feature.getGeometry()instanceof _vendor.ol.geom.Polygon)"originpoint"===uploadType&&(featureImported(_vendor.utils.IGNORED),features.splice(i,1));else if(feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon)"originpoint"===uploadType&&(featureImported(_vendor.utils.IGNORED),features.splice(i,1));else if(feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection){features.splice(i,1);var geometries=null;geometries=feature.getGeometry().getGeometries(),_vendor.$.each(geometries,function(index,geometry){f=new _vendor.ol.Feature({geometry:geometry}),features.splice(i,0,f),i+=1}),vm.dialog.addTasks(geometries.length-1)}else featureImported(_vendor.utils.IGNORED),features.splice(i,1)}if(features&&0==features.length)targetFeature?(targetFeatureFound?import_task.setStatus(_vendor.utils.WARNING,"No suitable spataial data for Bushfire("+targetFeature.get("fire_number")+") in uploaded file."):import_task.setStatus(_vendor.utils.WARNING,"Bushfire("+targetFeature.get("fire_number")+") not found"),vm._taskManager.clearTasks(targetFeature)):alert("No bushfire to import");else{features.sort(function(f1,f2){var id1=f1.get("fire_number"),id2=f2.get("fire_number");return id1?id2?id1===id2?0:id1<id2?-1:1:1:id2?void reurn:0});for(var mergeProperties=function(feat1,feat2){_vendor.$.each(properties,function(index,prop){void 0!==feat2.get(prop)&&feat1.set(prop,feat2.get(prop),!0)})},feat=null,i=features.length-1;i>=0;i--)feat&&feat.get("fire_number")===features[i].get("fire_number")&&void 0!==features[i].get("fire_number")&&null!==features[i].get("fire_number")?features[i].getGeometry()instanceof _vendor.ol.geom.Point?feat.getGeometry()instanceof _vendor.ol.geom.MultiPolygon?(feat.setGeometry(new _vendor.ol.geom.GeometryCollection([features[i].getGeometry(),feat.getGeometry()])),mergeProperties(feat,features[i]),features.splice(i,1),featureImported(_vendor.utils.MERGED)):(features.splice(i,1),featureImported(_vendor.utils.IGNORED)):features[i].getGeometry()instanceof _vendor.ol.geom.Polygon?(feat.getGeometry()instanceof _vendor.ol.geom.MultiPolygon?(feat.getGeometry().appendPolygon(features[i].getGeometry()),mergeProperties(feat,features[i]),features.splice(i,1)):feat.getGeometry()instanceof _vendor.ol.geom.Point?(feat.setGeometry(new _vendor.ol.geom.GeometryCollection([feat.getGeometry(),new _vendor.ol.geom.MultiPolygon([features[i].getGeometry().getCoordinates()])])),mergeProperties(feat,features[i]),features.splice(i,1)):feat.getGeometry()instanceof _vendor.ol.geom.GeometryCollection&&(feat.getGeometry().getGeometriesArray()[1].appendPolygon(features[i].getGeometry()),mergeProperties(feat,features[i]),features.splice(i,1)),featureImported(_vendor.utils.MERGED)):features[i].getGeometry()instanceof _vendor.ol.geom.MultiPolygon&&(feat.getGeometry()instanceof _vendor.ol.geom.MultiPolygon?(_vendor.$.each(features[i].getGeometry().getPolygons(),function(index,p){feat.getGeometry().appendPolygon(p)}),mergeProperties(feat,features[i]),features.splice(i,1)):feat.getGeometry()instanceof _vendor.ol.geom.Point?(feat.setGeometry(new _vendor.ol.geom.GeometryCollection([feat.getGeometry(),features[i].getGeometry()])),mergeProperties(feat,features[i]),features.splice(i,1)):feat.getGeometry()instanceof _vendor.ol.geom.GeometryCollection&&(_vendor.$.each(features[i].getGeometry().getPolygons(),function(index,p){feat.getGeometry().getGeometriesArray()[1].appendPolygon(p)}),mergeProperties(feat,features[i]),features.splice(i,1)),featureImported(_vendor.utils.MERGED)):(feat=features[i],feat.getGeometry()instanceof _vendor.ol.geom.Polygon&&feat.setGeometry(new _vendor.ol.geom.MultiPolygon([feat.getGeometry().getCoordinates()])));var canUpload=function(uploadedFeature,feature){if(!feature||vm.isFireboundaryDrawable(feature)){var uploadedFireboundary=null;if(uploadedFeature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection?uploadedFireboundary=uploadedFeature.getGeometry().getGeometriesArray()[1]:uploadedFeature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon&&(uploadedFireboundary=uploadedFeature.getGeometry()),uploadedFireboundary){uploadedFireboundary=uploadedFireboundary.getCoordinates();for(var points=0,pIndex=0;pIndex<uploadedFireboundary.length;pIndex++)for(var rIndex=0;rIndex<uploadedFireboundary[pIndex].length;rIndex++)points+=uploadedFireboundary[pIndex][rIndex].length;if(points>5e3)throw feature?"The initial bushfire("+uploadedFeature.get("fire_number")+") has more than 5000 vertex points.":"A uploaded new bushfire has more than 5000 vertex points."}}};targetFeature||(vm.search&&vm.search.trim().length>0?(vm.search="",vm.clippedOnly=!1,vm.updateFeatureFilter(3,0)):vm.clippedOnly&&(vm.clippedOnly=!1,vm.updateFeatureFilter(1,0)));var geometries=null;_vendor.$.each(features,function(index,feature){if(void 0!==feature.get("fire_number"))try{var feat=vm.features.getArray().find(function(f){return f.get("fire_number")===feature.get("fire_number")});if(canUpload(feature,feat),feat){if(!vm.isModifiable(feat))return void featureImported(_vendor.utils.IGNORED);changed=!1,geometries=feat.getGeometry().getGeometriesArray(),featurePoint=geometries.find(function(g){return g instanceof _vendor.ol.geom.Point})||null,vm.isFireboundaryDrawable(feat)?featureFireboundary=geometries.find(function(g){return g instanceof _vendor.ol.geom.MultiPolygon})||null:featureFireboundary=feat.get("fire_boundary");var uploadedPoint=null,uploadedFireboundary=null;feature.getGeometry()instanceof _vendor.ol.geom.Point?uploadedPoint=feature.getGeometry():feature.getGeometry()instanceof _vendor.ol.geom.GeometryCollection?(uploadedPoint=feature.getGeometry().getGeometriesArray()[0],uploadedFireboundary=feature.getGeometry().getGeometriesArray()[1]):feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon&&(uploadedFireboundary=feature.getGeometry());var modifyType=0;if(uploadedPoint&&!vm.map.isGeometryEqual(uploadedPoint,featurePoint,5e-9)&&(modifyType|=1),!uploadedFireboundary||vm.isFireboundaryDrawable(feat)&&vm.map.isGeometryEqual(uploadedFireboundary,featureFireboundary,5e-9)||(modifyType|=2),vm.isFireboundaryDrawable(feat)||2!=(2&modifyType))1==(1&modifyType)&&(featurePoint?geometries[0]=uploadedPoint:geometries.splice(0,0,uploadedPoint)),2==(2&modifyType)&&(featureFireboundary?geometries[1]=uploadedFireboundary:geometries.push(uploadedFireboundary)),selectedFeatures.push(feat),modifyType>0&&(feat.getGeometry().setGeometriesArray(geometries),vm.postModified(feat,modifyType)),import_task&&(import_task.setStatus(_vendor.utils.SUCCEED),vm._taskManager.clearTasks(feat)),featureImported(_vendor.utils.SUCCEED);else{if(feature.set("id",feat.get("id"),!0),feature.set("status",feat.get("status"),!0),feature.set("report_status",feat.get("report_status"),!0),feature.set("fire_number",feat.get("fire_number"),!0),feature.set("modifyType",modifyType|(feat.get("modifyType")||0),!0),feature.set("tint","modified",!0),feature.set("fire_boundary",uploadedFireboundary.getExtent(),!0),feature.set("external_feature",!0),newGeometries=[],1==(1&modifyType)?feature.setGeometry(new _vendor.ol.geom.GeometryCollection([uploadedPoint,uploadedFireboundary])):featurePoint?feature.setGeometry(new _vendor.ol.geom.GeometryCollection([featurePoint,uploadedFireboundary])):feature.setGeometry(new _vendor.ol.geom.GeometryCollection([uploadedFireboundary])),!targetFeature&&!vm._taskManager.initTasks(feat))return void featureImported(_vendor.utils.IGNORED);feature.tasks=feat.tasks,vm.saveFeature(feature,targetFeature?"import":"batchimport",function(f,status,msg){import_task&&import_task.setStatus(status),status===_vendor.utils.SUCCEED&&vm._taskManager.clearTasks(feat),status!==_vendor.utils.SUCCEED&&status!==_vendor.utils.WARNING||(importedFinalFeatures+=1,selectedFeatures.push(feat)),import_task&&(msg=vm._taskManager.errorMessages(feat).join("\r\n"))&&alert(msg),featureImported(status)})}}else feature.get("id")<0&&vm.newFireNumber(feature.get("id"))===feature.get("fire_number")&&vm.isCreatable()&&vm.isCreatable()?((feature.getGeometry()instanceof _vendor.ol.geom.Point||feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon)&&feature.setGeometry(new _vendor.ol.geom.GeometryCollection([feature.getGeometry()])),vm.newFeature(feature),selectedFeatures.push(feature),featureImported(_vendor.utils.SUCCEED)):featureImported(_vendor.utils.IGNORED)}catch(ex){featureImported(_vendor.utils.FAILED,ex.message||ex)}}),_vendor.$.each(features,function(index,feature){if(void 0===feature.get("fire_number"))if(vm.isCreatable())try{canUpload(feature,null),(feature.getGeometry()instanceof _vendor.ol.geom.Point||feature.getGeometry()instanceof _vendor.ol.geom.MultiPolygon)&&feature.setGeometry(new _vendor.ol.geom.GeometryCollection([feature.getGeometry()])),vm.newFeature(feature),selectedFeatures.push(feature),featureImported(_vendor.utils.SUCCEED)}catch(ex){featureImported(_vendor.utils.FAILED,ex.message||ex)}else featureImported(_vendor.utils.IGNORED)}),import_task&&1===vm._taskManager.getTasks(targetFeature).length&&(import_task.setStatus(_vendor.utils.SUCCEED),vm._taskManager.clearTasks(targetFeature))}}catch(ex){import_task&&import_task.setStatus(_vendor.utils.FAILED,ex.message||ex),targetFeature&&vm._taskManager.clearTasks(targetFeature),vm.dialog.addMessage(ex.message||ex)}},function(ex){"Cancelled"!==ex&&alert(ex),import_task&&import_task.setStatus(_vendor.utils.FAILED,ex.message||ex),targetFeature&&vm._taskManager.clearTasks(targetFeature)})}},resetFilters:function(){this.region="",this.district="",this.dateRange="",this.startDate="",this.endDate="",this.statusFilter="all_reports",this.updateCQLFilter(0)},refreshBushfires:function(){this.bushfireMapLayer.getSource().loadSource("query"),this.refreshFinalFireboundaryLayer(),this.selectedFeatures.getLength()>0&&this.refreshSelectedFinalFireboundaryLayer()},updateCQLFilter:function(wait,force,callback){var vm=this;vm._updateCQLFilterFunc||(vm._updateCQLFilterFunc=function(force,callback){try{if(!vm.bushfireMapLayer)return void vm._updateCQLFilter.call({wait:100},force,callback);var filters=[vm._statusFilters[vm.statusFilter][0],vm.regionFilter(),vm.districtFilter(),vm.dateFilter()].filter(function(f){return(f||!1)&&!0}),cql_filter="";if(cql_filter=0===filters.length?"":1===filters.length?filters[0]:"("+filters.join(") and (")+")",!force&&vm.bushfireLayer.cql_filter===cql_filter)return;vm.bushfireLayer.cql_filter=cql_filter,filters=[vm._statusFilters[vm.statusFilter][1],vm.regionFilter(!0),vm.districtFilter(!0),vm.dateFilter()].filter(function(f){return(f||!1)&&!0}),cql_filter="",cql_filter=0===filters.length?"":1===filters.length?filters[0]:"("+filters.join(") and (")+")",vm._download_cql_filter=cql_filter,vm.bushfireMapLayer.getSource().loadSource("query",callback)}catch(ex){}}),vm._updateCQLFilter||(vm._updateCQLFilter=debounce(function(force,callback){vm._updateCQLFilterFunc(force,callback)},2e3)),0===wait?vm._updateCQLFilterFunc(force,callback):void 0===wait||null===wait?vm._updateCQLFilter(force,callback):vm._updateCQLFilter.call({wait:wait},force,callback)},featureOrder:function(a,b){if("new"===a.get("status")){if("new"!==b.get("status"))return-1}else if("new"===b.get("status"))return 1;for(var index=0;index<this.sortedFields.length;index++)if(a.get(this.sortedFields[index][0])!==b.get(this.sortedFields[index][0]))return this.sortedFields[index][1]?a.get(this.sortedFields[index][0])<b.get(this.sortedFields[index][0])?-1:1:a.get(this.sortedFields[index][0])<b.get(this.sortedFields[index][0])?1:-1;return 1},featureFilter:function(feat){if("new"===feat.get("status"))return!0;var search=this.search?this.search.trim().toLowerCase():"";return!(search&&!this.fields.some(function(key){return(""+feat.get(key)).toLowerCase().indexOf(search)>-1}))},showFeature:function(feat){return this.revision&&(!this.viewportOnly||feat.inViewport)},setExtentFeatureSize:function(){var size=0;this._featurelist.forEach(function(feat){feat.inViewport&&++size}),this.extentFeaturesSize=size},clipToSelection:function(){if(0!==this.selectedFeatures.getLength()){this.clippedFeatures.splice(0,this.clippedFeatures.length);for(var index=0;index<this.features.getLength()&&"new"===this.features.item(index).get("status");index++)this.clippedFeatures.push(this.features.item(index));var vm=this;_vendor.$.each(this.selectedFeatures.getArray().sort(this.featureOrder),function(index,feat){"new"!==feat.get("status")&&vm.clippedFeatures.push(feat)}),this.clippedOnly&&this.updateFeatureFilter(1,0)}},updateFeatureFilter:function(filterType,wait){var vm=this;this._filterType=(void 0===this._filterType||null===this._filterType?0:this._filterType)|filterType,vm._updateFeatureFilter||(vm._updateFeatureFilter=debounce(function(){if(0!==vm._filterType){var list=vm.clippedOnly?vm.clippedFeatures:vm.features.getArray();if(2==(2&vm._filterType)&&vm.hasFeatureFilter&&(list=list.filter(vm.featureFilter)),vm._featurelist.clear(),vm._featurelist.extend(list),vm._filterType=0,vm.setExtentFeatureSize(),vm.selectedFeatures.getLength()>0)if(0===list.length)vm.selectedFeatures.clear();else for(var index=vm.selectedFeatures.getLength()-1;index>=0;index--)list.find(function(f){return f===vm.selectedFeatures.item(index)})||vm.selectedFeatures.removeAt(index);vm.revision+=1}},500)),0===wait?vm._updateFeatureFilter.call({wait:1}):void 0===wait||null===wait?vm._updateFeatureFilter():vm._updateFeatureFilter.call({wait:wait})},updateViewport:function(wait){var vm=this;vm._updateViewport||(vm._updateViewport=debounce(function(){var viewportExtent=vm.map.extent;vm.features.forEach(function(feat){feat.inViewport=_vendor.ol.extent.containsCoordinate(viewportExtent,vm.originpointCoordinate(feat))}),vm.setExtentFeatureSize(),vm.viewportOnly&&(vm.revision+=1)},500)),0===wait?vm._updateViewport.call({wait:1}):void 0===wait||null===wait?vm._updateViewport():vm._updateViewport.call({wait:wait})},scrollToSelected:function(){if(0!==this.selectedFeatures.getLength()){for(var index=-1,i=0;i<this._featurelist.getLength()&&(!this.showFeature(this._featurelist.item(i))||(index+=1,this._featurelist.item(i)!==this.selectedFeatures.item(0)));i++);if(index>=0){var listElement=document.getElementById("bfrs-list");index<listElement.children.length&&(listElement.scrollTop+=listElement.children[index].getBoundingClientRect().top-listElement.getBoundingClientRect().top)}}},selectDefaultGeometry:function(feature){var geometries=feature.getGeometry().getGeometriesArray();geometries.length>1?0===geometries[1].getPolygons().length?feature.selectedIndex=[0]:feature.selectedIndex=[1,0]:0===geometries.length?delete feature.selectedIndex:geometries[0]instanceof _vendor.ol.geom.Point?feature.selectedIndex=[0]:0===geometries[0].getPolygons().length?delete feature.selectedIndex:feature.selectedIndex=[0,0]},loadUserProfile:function(){var vm=this;vm._bfrsStatus.phaseBegin("load_profile",20,"Load profile"),_vendor.$.ajax({url:vm.env.bfrsService+"/api/v1/profile/?format=json",method:"GET",dataType:"json",success:function(response,stat,xhr){vm.whoami.bushfire.profile=response,vm.profileRevision+=1,vm.whoami.bushfire.regions&&(vm.region=vm.whoami.bushfire.profile.region_id||"",vm.district=vm.whoami.bushfire.profile.district_id||"",vm._bfrsStatus.phaseBegin("load_bushfires",20,"Load bushfires",!1,!0),vm.updateCQLFilter(0),vm.bushfireLayer.initialLoad=!0),vm._bfrsStatus.phaseEnd("load_profile")},error:function(xhr,status,message){alert(xhr.status+" : "+(xhr.responseText||message)),vm._bfrsStatus.phaseFailed("load_profile","Failed to loading user profile data. status = "+xhr.status+" , message = "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})},loadCapturemethods:function(callback,failedCallback){var vm=this;if(vm.whoami.bushfire.capturemethods)return void callback();var selectCaptureMethod=function(ev){(0,_vendor.$)("#userdialog-button-true").prop("disabled",!1),(0,_vendor.$)("#userdialog input[name='other_capturemethod']").prop("disabled",(0,_vendor.$)(ev.target).val()!==vm.whoami.bushfire.othermethod_id.toString())};_vendor.$.ajax({url:vm.env.bfrsService+"/api/v1/capturemethod/?format=json",method:"GET",dataType:"json",success:function(response,stat,xhr){vm.whoami.bushfire.capturemethods=response,dialogmessages=[],othermessage=null,headermessage=[["",1],["Code",3,{class:"header"}],["Desc",8,{class:"header"}]],dialogmessages.push(headermessage),_vendor.$.each(vm.whoami.bushfire.capturemethods,function(index,method){dialogmessage=[],dialogmessage.push([method.id,1,{type:"radio",name:"capturemethod",disabled:!1,click:selectCaptureMethod}]),"999"===method.code?(vm.whoami.bushfire.other_capturemethod_id=method.id,dialogmessage.push(["Other",3]),dialogmessage.push(["",8,{type:"text",name:"other_capturemethod",disabled:!0}]),othermessage=dialogmessage):(dialogmessage.push([method.code,3]),dialogmessage.push([method.desc,8]),dialogmessages.push(dialogmessage))}),othermessage&&(dialogmessages.push(othermessage),vm.whoami.bushfire.othermethod_id=othermessage[0][0]),vm.whoami.bushfire.capturemethod_dialogmessage=dialogmessages,callback()},error:function(xhr,status,message){failedCallback(xhr.status+" : "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})},loadRegions:function(){var vm=this;vm._bfrsStatus.phaseBegin("load_regions",20,"Load regions"),_vendor.$.ajax({url:vm.env.bfrsService+"/api/v1/region/?format=json",method:"GET",dataType:"json",success:function(response,stat,xhr){vm.whoami.bushfire.regions=response,vm.profileRevision+=1,vm.whoami.bushfire.profile&&(vm.region=vm.whoami.bushfire.profile.region_id||"",vm.district=vm.whoami.bushfire.profile.district_id||"",vm._bfrsStatus.phaseBegin("load_bushfires",20,"Load bushfires",!1,!0),vm.updateCQLFilter(0),vm.bushfireLayer.initialLoad=!0),vm._bfrsStatus.phaseEnd("load_regions")},error:function(xhr,status,message){alert(xhr.status+" : "+(xhr.responseText||message)),vm._bfrsStatus.phaseFailed("load_regions","Failed to loading regions data. status = "+xhr.status+" , message = "+(xhr.responseText||message))},xhrFields:{withCredentials:!0}})},setup:function(){var vm=this;this.annotations.restoreSelectedFeatures(),this.bushfireMapLayer?this.active.isHidden(this.bushfireMapLayer)&&this.active.toggleHidden(this.bushfireMapLayer):this.catalogue.onLayerChange(this.bushfireLayer,!0),this.annotations.selectable.push(this.bushfireMapLayer),this.info.hoverable.push(this.bushfireMapLayer),this.annotations.setTool(),this.$root.search.setSearchPointFunc(function(searchMethod,coords,name){if(["DMS","MGA"].indexOf(searchMethod)<0)return!1;if(vm.annotations.tool&&"Bfrs Edit Geometry"===vm.annotations.tool.name){var feat=1===vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;if(!feat)return!1;if(!vm.isModifiable(feat))return alert("Can't modify "+feat.get("status")+" report"),!0;return feat.getGeometry().getGeometriesArray().length>0&&feat.getGeometry().getGeometriesArray()[0]instanceof _vendor.ol.geom.Point?feat.getGeometry().getGeometriesArray()[0]=new _vendor.ol.geom.Point(coords):feat.getGeometry().getGeometriesArray().splice(0,0,new _vendor.ol.geom.Point(coords)),feat.getGeometry().setGeometriesArray(feat.getGeometry().getGeometriesArray()),vm.postModified(feat,1),feat.getGeometry().changed(),!0}if(vm.annotations.tool&&"Bfrs Origin Point"===vm.annotations.tool.name){var feat=vm.newFeature();return feat.getGeometry().getGeometriesArray().splice(0,0,new _vendor.ol.geom.Point(coords)),feat.getGeometry().setGeometriesArray(feat.getGeometry().getGeometriesArray()),feat.getGeometry().changed(),vm.selectedFeatures.clear(),vm.selectedFeatures.push(feat),vm.annotations.setTool("Bfrs Edit Geometry"),vm.postModified(feat,1),!0}}),this.$nextTick(this.adjustHeight)},teardown:function(){this.annotations.selectable.splice(0,this.annotations.selectable.length)}},ready:function(){var _ref,vm=this;this._download_cql_filter="",this._changingDate=!1,this._statusFilters={all_reports:["fire_not_found=0","fire_not_found='No'"],initial_fire_report:["(report_status=1) and (fire_not_found=0)","(report_status='Initial Fire Report') and (fire_not_found='No')"],notification_submitted:["(report_status=2) and (fire_not_found=0)","(report_status='Notifications Submitted') and (fire_not_found='No')"],report_authorised:["(report_status in (3,4)) and (fire_not_found=0)","(report_status in ('Report Authorised','Reviewed')) and (fire_not_found='No')"],fire_not_found:["fire_not_found=1","fire_not_found='Yes'"]},this._featurelist=new _vendor.ol.Collection,this._taskManager=_vendor.utils.getFeatureTaskManager(function(){vm.revision++}),(0,_vendor.$)("#bfrsStartDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(13,"months").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._startDatePicker=(0,_vendor.$)("#bfrsStartDate").data().datepicker}catch(ex){this._startDatePicker=null}(0,_vendor.$)("#bfrsEndDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(13,"months").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._endDatePicker=(0,_vendor.$)("#bfrsEndDate").data().datepicker}catch(ex){this._endDatePicker=null}vm._bfrsStatus=this.loading.register("bfrs","Bushfire Report Component"),vm._bfrsStatus.phaseBegin("initialize",10,"Initialize");var map=this.$root.map;vm._reportStatus={99999:"unknown",99998:"new",1:"initial",2:"draft_final",3:"final_authorised",4:"reviewed",100:"merged"},vm._reportStatusName={99999:"Unknown",99998:"New Draft Incident",1:"Draft Incident",2:"Incident Submitted",3:"Report Authorised",4:"Report Reviewed",100:"Report Merged"},vm.whoami.bushfire=vm.whoami.bushfire||{},vm.whoami.bushfire.permission=vm.whoami.bushfire.permission||{create:null,"new.edit":!1,"new.modify":!0,"new.delete":!0,"unknown.edit":!1,"unknown.modify":!1,"unknown.delete":!1,"initial.edit":!0,"initial.modify":null,"initial.delete":!1,"merged.edit":!0,"merged.modify":!1,"merged.delete":!1,"draft_final.edit":!0,"draft_final.modify":null,"draft_final.delete":!1,"final_authorised.edit":!0,"final_authorised.modify":null,"final_authorised.delete":!1,"reviewed.edit":!0,"reviewed.modify":null,"reviewed.delete":!1,_checked_:0};var permissionConfig=[["create",vm.createUrl(),"GET",null,function(hasPermission){hasPermission&&vm.tools&&!vm.tools.find(function(t){return t===vm.ui.originPointTool})&&vm.tools.push(vm.ui.originPointTool)}],["initial.edit",vm.editUrl,"GET",function(f){return"initial"===f.get("status")},null],["initial.modify",vm.saveUrl,"PATCH",function(f){return"initial"===f.get("status")},null],["draft_final.edit",vm.editUrl,"GET",function(f){return"draft_final"===f.get("status")},null],["draft_final.modify",vm.saveUrl,"PATCH",function(f){return"draft_final"===f.get("status")},null],["final_authorised.edit",vm.editUrl,"GET",function(f){return"final_authorised"===f.get("status")},null],["final_authorised.modify",vm.saveUrl,"PATCH",function(f){return"final_authorised"===f.get("status")},null],["reviewed.edit",vm.editUrl,"GET",function(f){return"reviewed"===f.get("status")},null],["reviewed.modify",vm.saveUrl,"PATCH",function(f){return"reviewed"===f.get("status")},null],["merged.edit",vm.editUrl,"GET",function(f){return"merged"===f.get("status")},null]];vm._checkPermission=function(features,callback){if(vm.whoami.bushfire.permission._checked_===permissionConfig.length)return void(callback&&callback());var taskCounter=0;vm._checkPermissionCallback=vm._checkPermissionCallback||function(callback){vm.whoami.bushfire.permission.changed&&(delete vm.whoami.bushfire.permission.changed,vm.revision+=1),callback&&callback()},taskCounter+=1;for(var index=0;index<permissionConfig.length;index++){var p=permissionConfig[index],url=null;if(null===vm.whoami.bushfire.permission[p[0]]||void 0===vm.whoami.bushfire.permission[p[0]])if(null===p[1])vm.whoami.bushfire.permission[p[0]]=!0,vm.whoami.bushfire.permission.changed=!0,vm.whoami.bushfire.permission._checked_=vm.whoami.bushfire.permission._checked_+1;else if("string"==typeof p[1])url=p[1];else{var f=Array.isArray(features)?features.find(p[3]):p[3](features)?features:null;f?url=p[1](f):(url=null,vm.whoami.bushfire.permission[p[0]]=null)}url&&(taskCounter+=1,vm.utils.checkPermission(url,p[2],function(hasPermission,permission){vm.whoami.bushfire.permission._checked_=vm.whoami.bushfire.permission._checked_+1,vm.whoami.bushfire.permission[permission[0]]=hasPermission,vm.whoami.bushfire.permission.changed=!0,permission[4]&&permission[4](hasPermission),--taskCounter<=0&&vm._checkPermissionCallback(callback)},p))}--taskCounter<=0&&vm._checkPermissionCallback(callback)},vm.loadRegions(),vm.ui={};var toolConfig={features:vm.features,selectedFeatures:vm.selectedFeatures,mapLayers:function(layer){
return"dpaw:bushfirelist_latest"===layer.get("id")}};vm.ui.dragSelectInter=vm.annotations.dragSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}})(toolConfig),vm.ui.polygonSelectInter=vm.annotations.polygonSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}})(toolConfig),vm.ui.selectInter=vm.annotations.selectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}})(toolConfig),vm.ui.geometrySelectInter=vm.annotations.selectInterFactory({condition:function(event){var result=_vendor.ol.events.condition.singleClick(event);return result&&(result=!(!vm.bushfireMapLayer||1!==vm.selectedFeatures.getLength())&&vm.bushfireMapLayer.getSource().getFeaturesAtCoordinate(event.coordinate).findIndex(function(o){return o===vm.selectedFeatures.item(0)})>=0),result}})(_vendor.$.extend({selectMode:"geometry"},toolConfig)),vm.ui.modifyInter=vm.annotations.modifyInterFactory()({features:vm.selectedFeatures,mapLayers:function(layer){return"dpaw:bushfirelist_latest"===layer.get("id")}}),vm.ui.modifyInter.on("featuresmodified",function(ev){1===ev.features.getLength()&&vm.validateBushfire(ev.features.item(0),"modifyBushfire"),vm.postModified(ev.features.getArray(),-1)}),vm.ui.originPointDraw=vm.annotations.pointDrawFactory({events:{addfeaturegeometry:!0},drawOptions:{}})({features:vm.drawings});var canDrawFireboundary=function(ev){var feat=1==vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;if(feat){feat.getGeometry();return!(!vm.isModifiable(feat)||!vm.isFireboundaryDrawable(feat))&&(!!vm.bushfireMapLayer&&(!!vm.ui.fireboundaryDraw.drawing||vm.bushfireMapLayer.getSource().getFeaturesAtCoordinate(ev.coordinate).findIndex(function(o){return o===feat})<0))}return!1};vm.ui.fireboundaryDraw=vm.annotations.polygonDrawFactory({events:{addfeaturegeometry:!0},listeners:{drawstart:function(){_vendor.$.each(vm.ui.modifyTool.interactions,function(index,interaction){interaction!==vm.ui.fireboundaryDraw&&interaction.setActive(!1)})},drawend:function(){_vendor.$.each(vm.ui.modifyTool.interactions,function(index,interaction){interaction!==vm.ui.fireboundaryDraw&&interaction.setActive(!0)})}},drawOptions:{freehandCondition:function(ev){var result=_vendor.ol.events.condition.shiftKeyOnly(ev);return result?canDrawFireboundary(ev):result},condition:function(ev){var result=_vendor.ol.events.condition.noModifierKeys(ev);return result?canDrawFireboundary(ev):result}},drawProperties:{minDistance:20,freehandSnapTolerance:12}})({features:vm.drawings}),vm.drawings.on("add",function(ev){if("Bfrs Edit Geometry"===vm.annotations.tool.name){if(1===vm.selectedFeatures.getLength()){var f=vm.selectedFeatures.item(0),indexes=null,index=f.getGeometry().getGeometriesArray().findIndex(function(g){return g instanceof _vendor.ol.geom.MultiPolygon});index>=0?(indexes=[index,f.getGeometry().getGeometriesArray()[index].getPolygons().length],f.getGeometry().getGeometriesArray()[index].appendPolygon(ev.element.getGeometry())):(index=f.getGeometry().getGeometriesArray().length,indexes=[index,0],f.getGeometry().getGeometriesArray().push(new _vendor.ol.geom.MultiPolygon([ev.element.getGeometry().getCoordinates()]))),f.getGeometry().setGeometriesArray(f.getGeometry().getGeometriesArray()),f.getGeometry().changed(),vm.postModified(f,2),vm.validateBushfire(f,"addFireboundary"),vm.ui.fireboundaryDraw.dispatchEvent(vm.map.createEvent(vm.ui.fireboundaryDraw,"addfeaturegeometry",{feature:f,indexes:indexes}))}}else{var f=null,selectedFeat=1===vm.selectedFeatures.getLength()?vm.selectedFeatures.item(0):null;selectedFeat&&"new"===selectedFeat.get("status")&&!selectedFeat.getGeometry().getGeometriesArray().find(function(g){return g instanceof _vendor.ol.geom.Point})?(f=selectedFeat,f.getGeometry().getGeometriesArray().splice(0,0,ev.element.getGeometry()),f.getGeometry().setGeometriesArray(f.getGeometry().getGeometriesArray()),f.getGeometry().changed()):(f=vm.newFeature(),f.getGeometry().getGeometriesArray().splice(0,0,ev.element.getGeometry()),f.getGeometry().setGeometriesArray(f.getGeometry().getGeometriesArray()),f.getGeometry().changed(),vm.selectedFeatures.clear(),vm.selectedFeatures.push(f),vm.annotations.setTool("Bfrs Edit Geometry"),vm.scrollToSelected()),vm.postModified(f,1),vm.ui.originPointDraw.dispatchEvent(vm.map.createEvent(vm.ui.originPointDraw,"addfeaturegeometry",{feature:f,indexes:[0]}))}vm.drawings.clear()}),[(_ref={name:"Bfrs Select",label:"Select",icon:"fa-mouse-pointer",scope:["bfrs"],keepSelection:!0,interactions:[vm.ui.dragSelectInter,vm.ui.polygonSelectInter,vm.ui.selectInter,vm.annotations.keyboardInterFactory({selectEnabled:!1,events:{deleteallgeometries:!0},deleteSelected:function(features,selectedFeatures){var feature=null;for(i=selectedFeatures.getLength()-1;i>=0;i--)feature=selectedFeatures.item(i),vm.isDeletable(feature)?vm.deleteFeature(feature):alert("Can't delete a existing bushfire.")}})]},_defineProperty(_ref,"keepSelection",!0),_defineProperty(_ref,"onSet",function(){vm.ui.dragSelectInter.setMulti(!0),vm.ui.selectInter.setMulti(!0)}),_ref),{name:"Bfrs Edit Geometry",label:"Edit Geometry",icon:"fa-pencil",scope:[],interactions:[vm.ui.geometrySelectInter,vm.annotations.keyboardInterFactory({selectEnabled:!1,events:{deletefeaturegeometry:!0},deleteSelected:function(features,selectedFeatures){selectedFeatures.forEach(function(feature){if(vm.isModifiable(feature)&&void 0!==feature.selectedIndex){if(vm.annotations.getSelectedGeometry(feature)instanceof _vendor.ol.geom.Point)return void("new"===feature.get("status")?vm.deleteFeature(feature):alert("Can't delete existing bushfire's orgin point."));vm.annotations.deleteSelectedGeometry(feature,this),vm.selectDefaultGeometry(feature),vm.postModified(feature,2),vm.validateBushfire(feature,"deleteFireboundary")}},this)}}),vm.ui.modifyInter,this.ui.fireboundaryDraw],selectMode:"geometry",keepSelection:!0,onUnset:function(){vm.selectedFeatures.forEach(function(f){f.getGeometry().changed()})},onSet:function(){if(vm.ui.geometrySelectInter.setMulti(!1),vm.selectedFeatures.getLength()>1)vm.selectedFeatures.clear();else if(1==vm.selectedFeatures.getLength()){var selectedFeature=vm.selectedFeatures.item(0);void 0===selectedFeature.selectedIndex&&vm.selectDefaultGeometry(selectedFeature);vm.map.getScale()}},comments:[{name:"Tips",description:["Click on the map to start drawing a bushfire","Hold down the 'SHIFT' key during drawing to enable freehand mode","To delete a fire boundary click inside the fire boundary to be deleted and press the 'DELETE' key","To modify the boundary or origin click and drag to adjust"]}]},{name:"Bfrs Origin Point",label:"Add Bushfire",icon:"dist/static/symbols/fire/origin.svg",tints:vm.tints,selectedFillColour:[0,0,0,.25],fillColour:[0,0,0,.25],labelStyle:{offsetX:17,strokeWidth:8,font:"Bold 12px Helvetica,Roboto,Arial,sans-serif"},size:2,interactions:[vm.ui.originPointDraw],sketchStyle:vm.annotations.getIconStyleFunction(vm.tints),scope:[],measureLength:!1,measureArea:!1,keepSelection:!0,showName:!0,getMeasureGeometry:function(){return vm.isFireboundaryDrawable(this)?this.getGeometry():null},onSet:function(){},comments:[{name:"Tips",description:["Click on the map or search a point to create a new bushfire in SSS."]}]}].forEach(function(tool){vm.annotations.tools.push(tool)}),vm.ui.modifyTool=vm.annotations.tools.find(function(tool){return"Bfrs Edit Geometry"===tool.name}),vm.ui.originPointTool=vm.annotations.tools.find(function(tool){return"Bfrs Origin Point"===tool.name}),vm.ui.panTool=vm.annotations.tools.find(function(tool){return"Pan"===tool.name}),vm.ui.selectTool=vm.annotations.tools.find(function(tool){return"Bfrs Select"===tool.name}),this.$root.fixedLayers.push({type:"WFSLayer",name:"Bushfire Report",id:"dpaw:bushfirelist_latest",getFeatureInfo:function(f){return{name:f.get("fire_number"),img:map.getBlob(f,["icon","tint"]),comments:f.get("name")+"("+(vm._reportStatusName[f.get("report_status")]||vm._reportStatusName[99999])+")"}},initialLoad:!1,refresh:300,features:vm._featurelist,min_interval:60,max_interval:600,interval_step:60,dependentLayers:[{type:"TileLayer",name:"Fire Boundary of Bushfire Final Report",id:"dpaw:bushfire_final_fireboundary_latest",autoAdd:!1,inheritRefresh:!0},{type:"ImageLayer",name:"Fire Boundary of Selected Bushfire Final Report",id:"dpaw:bushfire_final_fireboundary_latest",style:getLayerId("dpaw:bushfire_final_fireboundary_latest")+".selected",mapLayerId:"dpaw:bushfire_final_fireboundary_latest_selected",autoAdd:!1,inheritRefresh:!0}],onerror:function(status,message){vm._bfrsStatus.phaseFailed("load_bushfires",status+" : "+message)},onload:function(loadType,vectorSource,features,defaultOnload){function processResources(){for(var insertPosition=0,loadedFeature=null,index=vm.features.getLength()-1;index>=0;index--)if(f=vm.features.item(index),"new"===f.get("status"))if(f.get("sss_id"))if(loadedFeature=features.find(function(f2){return f.get("sss_id")===f2.get("sss_id")})){"modified"===f.get("tint")&&(loadedFeature.setGeometry(f.getGeometry()),loadedFeature.set("tint","modified",!0),loadedFeature.set("fillColour",vm.tints[loadedFeature.get("tint")+".fillColour"],!0),loadedFeature.set("colour",vm.tints[loadedFeature.get("tint")+".colour"],!0),loadedFeature.set("modifyType",f.get("modifyType"),!0)),f.tasks&&f.tasks.length>0&&(loadedFeature.tasks=f.tasks);var i=vm.selectedFeatures.getArray().findIndex(function(o){return o.get("fire_number")===f.get("fire_number")});i>=0&&(vm.selectedFeatures.removeAt(i),vm.selectedFeatures.push(loadedFeature))}else features.splice(insertPosition,0,ff),insertPosition+=1;else features.splice(insertPosition,0,f),insertPosition+=1;else("modified"===f.get("tint")||f.tasks)&&(loadedFeature=features.find(function(f2){return f.get("id")===f2.get("id")}))&&("modified"===f.get("tint")&&(loadedFeature.setGeometry(f.getGeometry()),loadedFeature.set("tint","modified",!0),loadedFeature.set("fillColour",vm.tints[loadedFeature.get("tint")+".fillColour"],!0),loadedFeature.set("colour",vm.tints[loadedFeature.get("tint")+".colour"],!0),loadedFeature.set("modifyType",f.get("modifyType"),!0),f.intersectionPoints&&(loadedFeature.intersectionPoints=f.intersectionPoints)),f.tasks&&f.tasks.length>0&&(loadedFeature.tasks=f.tasks));if(vm.selectedFeatures.getLength()>0)for(var index=vm.selectedFeatures.getLength()-1;index>=0;index--){var f=vm.selectedFeatures.item(index);loadedFeature=features.find(function(f1){return f1.get("fire_number")===f.get("fire_number")}),loadedFeature?(void 0!==f.selectedIndex&&(vm.annotations.getSelectedGeometry(loadedFeature,f.selectedIndex)?loadedFeature.selectedIndex=f.selectedIndex:vm.selectDefaultGeometry(loadedFeature)),vm.selectedFeatures.setAt(index,loadedFeature)):vm.selectedFeatures.removeAt(index)}if(vm.clippedFeatures.length>0)for(var index=vm.clippedFeatures.length-1;index>=0;index--){var f=vm.clippedFeatures[index];loadedFeature=features.find(function(f1){return f1.get("fire_number")===f.get("fire_number")}),loadedFeature?vm.clippedFeatures[index]=loadedFeature:vm.clippedFeatures.splice(index,1)}vm.features.clear(),vm.features.extend(features.sort(vm.featureOrder)),vm.updateViewport(0),vm.updateFeatureFilter(3,0),vm.whoami.bushfire.permission.changed&&(delete vm.whoami.bushfire.permission.changed,vm.revision+=1),vm._bfrsStatus.phaseEnd("load_bushfires")}_vendor.$.each(features,function(index,feature){vm.initBushfire(feature)}),vm._checkPermission(features,processResources)}}),vm._bfrsStatus.phaseEnd("initialize"),vm._bfrsStatus.phaseBegin("gk-init",20,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){vm._bfrsStatus.phaseEnd("gk-init"),vm._bfrsStatus.phaseBegin("attach_event",10,"Attach events"),map.olmap.getView().on("propertychange",function(){vm.updateViewport()}),vm.selectedFeatures.on("add",function(event){"geometry"===vm.annotations.tool.selectMode&&void 0===event.element.selectedIndex&&vm.selectDefaultGeometry(event.element),vm.refreshSelectedFinalFireboundaryLayer()}),vm.selectedFeatures.on("remove",function(event){vm.refreshSelectedFinalFireboundaryLayer(),1!==vm.selectedFeatures.getLength()&&vm.annotations.tool===vm.ui.modifyTool&&vm.annotations.setTool(vm.ui.panTool)}),_vendor.$.each([vm.annotations.ui.defaultPan],function(index,t){t.scope=t.scope||[],t.scope.push("bfrs")}),_vendor.$.each(vm.annotations.tools.filter(function(t){return t.scope&&t.scope.indexOf("bfrs")>=0}),function(index,t){vm.tools.splice(index,0,t)}),vm.map.olmap.on("removeLayer",function(ev){"dpaw:bushfirelist_latest"===ev.mapLayer.get("id")&&(vm.features.clear(),vm._featurelist.clear())}),vm._resolutionChanged=debounce(function(ev){vm.featureLabelDisabled=vm.map.olmap.getView().getResolution()>=.003},200),vm._resolutionChanged(),vm.map.olmap.getView().on("change:resolution",function(){vm._resolutionChanged()}),vm.selectedFeatures.on("add",function(event){vm.selectRevision+=1}),vm.selectedFeatures.on("remove",function(event){vm.selectRevision+=1}),vm._bfrsStatus.phaseEnd("attach_event"),vm.loadUserProfile()})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="menu-tab-bfrs">\n  <div class="row collapse">\n    <div class="columns">\n      <ul class="tabs" id="bfrs-tabs">\n        <li class="tabs-title is-active">\n          <a class="label" aria-selected="true" style="cursor:pointer;background-color:#ec5840;color:#fefefe" @click.stop.prevent="utils.editResource($event,null,env.bfrsService,env.bfrsService)">\n              <span>Bushfire Reporting System</span>\n              <small v-if="active.layerRefreshStatus(bushfireMapLayer)" style="white-space:pre-wrap"><br>Updated: {{ active.layerRefreshStatus(bushfireMapLayer) }}</small>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n\n  <div class="row collapse" id="bfrs-tab-panels">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="bfrs-tabs">\n        <div id="bfrs-list-tab" class="tabs-panel is-active" v-cloak="">\n          <div id="bfrs-list-controller-container">\n              <div class="tool-slice row collapse">\n                <div class="small-12">\n                  <div class="expanded button-group">\n                    <a v-for="t in tools" class="button button-tool" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label" style="font-size: 0.9rem;">{{{ annotations.icon(t) }}} {{t.showName?t.label:""}}</a>\n                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="small-9 columns">\n                  <div class="row">\n                    <div class="switch tiny">\n                      <input class="switch-input" id="bushfiresInViewport" type="checkbox" v-bind:checked="viewportOnly" @change="toggleViewportOnly">\n                      <label class="switch-paddle" for="bushfiresInViewport">\n                        <span class="show-for-sr">Viewport bushfires only</span>\n                      </label>\n                    </div>\n                    <label for="bushfiresInViewport" class="side-label">Restrict to viewport ({{extentFeaturesSize}}/{{featureSize}})</label>\n                  </div>\n                </div>\n                <div class="small-3 columns" style="text-align:right;padding-right:0px">\n                  <span v-on:click="showToggles = !showToggles" style="cursor:pointer"><i class="fa {{showToggles?\'fa-angle-double-up\':\'fa-angle-double-down\'}}" aria-hidden="true"></i> Toggles</span>\n                </div>\n              </div>\n              <div v-show="showToggles">\n              <div class="row">\n                <div class="switch tiny">\n                  <input class="switch-input" id="toggleBushfireLabels" type="checkbox" v-bind:checked="bushfireLabels" @change="toggleBushfireLabels" v-bind:disabled="featureLabelDisabled">\n                  <label class="switch-paddle" for="toggleBushfireLabels">\n                    <span class="show-for-sr">Display bushfire labels</span>\n                  </label>\n                </div>\n                <label for="toggleBushfireLabels" class="side-label">Display bushfire labels</label>\n              </div>\n              <div class="row">\n                <div class="switch tiny">\n                  <input class="switch-input" id="toggleReportInfo" type="checkbox" v-bind:disabled="!systemsetting.hoverInfoSwitchable" v-bind:checked="systemsetting.hoverInfo" @change="systemsetting.toggleHoverInfo">\n                  <label class="switch-paddle" for="toggleReportInfo">\n                    <span class="show-for-sr">Display hovering bushfire info</span>\n                  </label>\n                </div>\n                <label for="toggleReportInfo" class="side-label">Display hovering bushfire info</label>\n              </div>\n              <div class="row">\n                <div class="small-12">\n                  <div class="columns">\n                    <div class="row">\n                      <div class="switch tiny">\n                        <input class="switch-input" id="showFireboundary" type="checkbox" v-model="showFireboundary">\n                        <label class="switch-paddle" for="showFireboundary">\n                          <span class="show-for-sr">Show fire boundary</span>\n                       </label>\n                      </div>\n                      <label for="showFireboundary" style="side-label" class="side-label">Show fire boundary</label>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div class="row">\n                <div class="small-12">\n                  <div class="columns">\n                    <div class="row">\n                      <div class="switch tiny">\n                        <input class="switch-input" id="clippedBushfireReportOnly" v-bind:disabled="clippedFeatures.length === 0" type="checkbox" v-model="clippedOnly" @change="updateFeatureFilter(3,0)">\n                        <label class="switch-paddle" for="clippedBushfireReportOnly">\n                          <span class="show-for-sr">Show saved selection</span>\n                       </label>\n                      </div>\n                      <label for="clippedBushfireReportOnly" style="side-label" class="side-label">Show saved selection\n                      </label>\n                      <a class="button tiny secondary" title="Save selection" style="margin-top:0px;margin-bottom:5px;padding-top:6px;padding-left:1px;padding-right:1px;padding-bottom:0px;border:0px;height:24px;font-size:0.73rem;background-color:#2199e8" @click="clipToSelection()" v-bind:disabled="selectedFeaturesSize === 0">\n                          Save selection ({{selectedFeaturesSize}})\n                      </a>\n                      ({{clippedFeatures.length}}/{{features.getLength()}})\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              </div>\n\n              <div class="row collapse">\n                <div class="small-8 columns">\n                  <input type="search" v-model="search" placeholder="Find a bushfire" @keyup="updateFeatureFilter(3)">\n                </div>\n                <div class="small-4 columns" style="text-align:right">\n                  <span v-on:click="showFilters = !showFilters" style="cursor:pointer"><i class="fa {{showFilters?\'fa-angle-double-up\':\'fa-angle-double-down\'}}" aria-hidden="true"></i> Filters</span>\n                </div>\n              </div>\n              <div v-show="showFilters">\n              <div class="row collapse">\n                <div class="small-6 columns">\n                  <select name="select" v-model="region">\n                    <option value="" selected="">All regions</option>\n                    <option v-for="r in regions" value="{{r.region_id}}" track-by="region_id">\n                      {{r.region}}\n                    </option>\n                  </select>\n                </div>\n                <div class="small-6 columns">\n                  <select name="select" v-model="district">\n                    <option value="" selected="">All districts</option>\n                    <option v-for="d in districts" value="{{d.id}}" track-by="id">\n                      {{d.district}}\n                    </option>\n                  </select>\n                </div>\n              </div>\n\n              <div class="row collapse">\n                <div class="small-4">\n                  <select name="select" v-model="dateRange" style="font-size:15px;">\n                    <option value="" selected="">Date range</option>\n                    <option value="21024">Last 24 hours </option>\n                    <option value="31007">Last 7 days </option>\n                    <option value="70001">Current Financial Year </option>\n                    <option value="-1">User Defined</option>\n                  </select>\n                </div>\n                <div class="small-8">\n                    <input type="text" id="bfrsStartDate" class="span2" v-model="startDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="dateRange !== \'-1\'" readonly="">\n                    <i class="fa fa-minus" style="margin-top:10px"></i>\n                    <input type="text" id="bfrsEndDate" class="span2" v-model="endDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="dateRange !== \'-1\'" readonly="">\n                </div>\n              </div>\n\n              <div class="row collapse">\n                <div class="small-6 columns">\n                  <select name="select" v-model="statusFilter">\n                    <option value="all_reports" selected="">All Reports</option>\n                    <option value="initial_fire_report">Initial Fire Report</option>\n                    <option value="notification_submitted">Notifications Submitted</option>\n                    <option value="report_authorised">Report Authorised</option>\n                    <option value="fire_not_found">Fire Not Found</option>\n                  </select>\n                </div>\n                <div class="small-6 expanded button-group">\n                  <a title="Search" class="button" style="height:38px;margin-left:10px;" @click="updateCQLFilter(0)">Search</a>\n                  <a title="Reset filters" class="button" style="height:38px;margin-left:10px;" @click="resetFilters()">Reset</a>\n                </div>\n              </div>\n\n              </div>\n\n              <div class="tool-slice row collapse">\n                <div class="small-12 expanded button-group">\n                  <a title="Zoom to selected" class="button bfrsbutton" @click="zoomToSelected()"><img style="width:13px;height:13px" src="dist/static/images/zoom-to-selected.svg"><br>Zoom To<br>Selected</a>\n                  <a title="Refresh bushfire list" class="button bfrsbutton" @click="refreshBushfires()"><i class="fa fa-refresh" aria-hidden="true"></i><br>Refresh<br>Bushfires </a>\n                  <div v-show="canBatchUpload()" class="button bfrsbutton">\n                      <label for="uploadBushfires" title="{{utils.importSpatialFileTypeDesc}}">\n                          <i class="fa fa-upload"></i><br>Batch<br>Upload\n                      </label>\n                      <input type="file" id="uploadBushfires" class="show-for-sr" name="bushfiresfile" accept="{{utils.importSpatialFileTypes}}" v-el:bushfiresfile="" @change="importList()">\n                  </div>\n                  <a v-show="canDownloadAll()" class="button bfrsbutton" @click="downloadList(\'gpkg\',\'all\')" title="Export Bushfire as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i><br><span style="white-space:nowrap">Download All</span><br>(gpkg) </a>\n                  <a class="button bfrsbutton" @click="downloadList(\'gpkg\',\'listed\')" title="Export Bushfire as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i><br>Download<br>(gpkg)</a>\n                  <a class="button bfrsbutton" @click="downloadList(\'geojson\',\'history\')" title="Export Bushfire as GeoPackage"><i class="fa fa-download" aria-hidden="true"></i><br>Export<br>(geojson)</a>\n                </div>\n              </div>\n\n          </div>\n\n          <div id="bfrs-list" class="layers-flexibleframe scroller" style="margin-left:-15px; margin-right:-15px;">\n            <template v-for="f in featurelist" track-by="get(\'id\')">\n            <div v-if="showFeature(f)" class="row feature-row" v-bind:class="{\'feature-selected\': isFeatureSelected(f) }" @click="toggleSelect(f)">\n              <div class="small-12 columns">\n                <a v-if="canReset(f)" @click.stop.prevent="resetFeature(f)" title="Reset" class="button tiny secondary float-right acion" style="margin-left:2px"><i class="fa fa-undo actionicon"></i></a>\n                <a v-if="canDelete(f)" @click.stop.prevent="deleteFeature(f)" title="Delete" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-trash actionicon"></i></a>\n                <a v-if="canUpload(f)" @click.stop.prevent="uploadBushfire(f)" title="Upload" class="button tiny secondary float-right acion" style="margin-left:2px"><i class="fa fa-upload actionicon"></i></a>\n                <a v-if="canModify(f)" @click.stop.prevent="startEditFeature(f)" title="Edit Bushfire" class="button tiny secondary float-right action">\n                  <svg class="editicon"><use xlink:href="dist/static/images/iD-sprite.svg#icon-area"></use></svg>\n                </a>\n                <a v-if="canCreate(f)" @click.stop.prevent="createFeature(f)" title="Create" class="button tiny secondary float-right action" style="margin-left:2px;background-color:red"><i class="fa fa-save actionicon"></i></a>\n                <a v-if="canEdit(f) " @click.stop.prevent="utils.editResource($event)" title="Open bushfire form" href="{{editUrl(f)}}" target="{{env.bfrsService}}" class="button tiny secondary float-right action" style="margin-left:2px"><i class="fa fa-pencil-square-o actionicon"></i></a>\n                <a v-if="canSave(f)" @click.stop.prevent="saveFeature(f)" title="Save" class="button tiny secondary float-right action" style="margin-left:2px;background-color:red">\n                  <i class="fa fa-save actionicon"></i>\n                </a>\n                <div class="feature-title"><img class="feature-icon" id="bushfire-icon-{{f.get(\'id\')}}" v-bind:src="featureIconSrc(f)"> {{ f.get(\'fire_number\') }} <i><small></small></i></div>\n              </div>\n              <div class="small-12 columns">\n                    <div class="feature-title"><span class="reportname">{{f.get(\'name\')}}</span></div>\n                    <div v-if="f.get(\'status\') === \'merged\'" style="float:right"><img src="/dist/static/images/merge.svg"> {{f.get(\'linked_bushfire_number\')}}</div>\n              </div>\n              <template v-for="task in featureTasks(f)" track-by="$index">\n                <div class="small-12 columns">\n                    <a class="task_status float-right" title="{{revision &amp;&amp; task.statusText}}"> <i class="fa {{revision &amp;&amp; task.icon}}"></i></a>\n                    <a class="task_name">{{task.description}}</a>\n                </div>\n                <div v-if="revision &amp;&amp; task.message" class="small-12 columns">\n                    <p class="task_message">{{revision &amp;&amp; task.message}}</p>\n                </div>\n\n              </template>\n            </div>\n            </template>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  <form id="bushfire_create" name="bushfire_create" action="{{createUrl()}}" method="post" target="{{utils.getWindowTarget(env.bfrsService)}}">\n      <input type="hidden" name="sss_create" id="sss_create">\n  </form>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.reportname {\n    font-style:italic;\n    padding-left:24px;\n    color:#6dd8ef;\n    font-size:14px;\n}\n\n.button-group .bfrsbutton {\n    padding-left:5px;\n    padding-right:5px;\n    font-size:0.8rem;\n}\n.actionicon {\n    width:9px;\n    height:9px;\n}\n.editicon {\n    width:16px;\n    height:16px;\n    margin-top: -3px;\n    margin-bottom: -4px;\n    margin-left: -2px;\n    margin-right: -2px;\n}\n.task_status {\n}\n.task_message {\n    font-style:italic;\n    font-weight:normal;\n    color:red;\n    font-size:12px;\n    white-space:pre-wrap;\n}\n.task_name {\n    font-style:normal;\n    font-weight:bold;\n    font-size:14px;\n}\n#bfrsStartDate,#bfrsEndDate {\n    font-size:13px;\n    width:118px;\n    display:inline;\n    cursor:pointer;\n    padding-left:4px;\n    padding-right:4px;\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-03fda12c",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-03fda12c",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],167:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#thermalFromDate, #thermalToDate, #singleDate {\n    cursor:pointer}\n\t\n/* Style the button that is used to open and close the collapsible content */\n.collapsible {\n  background-color: #eee;\n  color: #444;\n  cursor: pointer;\n  padding: 10px;\n  width: 100%;\n  border: 1px solid #009;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n}\n\n/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */\n.active, .collapsible:hover {\n  background-color: #ccc;\n}\n\n/* Style the collapsible content. Note: hidden by default */\n.showImages {\n  padding: 0 1px;\n  display: none;\n  overflow: hidden;\n  background-color: #f1f1f1;\n}\n\n/*Button colours*/\n.red {\n       background-color: red;\n   }\n.blue {\n       background-color: blue;\n   }\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{hotspotLabels:!0,viewportOnly:"settings.viewportOnly",hintsHeight:"layout.hintsHeight",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",whoami:"whoami"},data:function(){return{clicked:!1,showFlightFootprint:!1,showRawImageMosaic:!1,showDateRange:!1,showEmailComposer:!1,flights:[],search:"",groupFilter:"",tools:[],thermalDateRange:"21024",features:new _vendor.ol.Collection,extentFeaturesSize:0,footprints:new _vendor.ol.Collection,imagesShow:{},emailList:[],featureLabelDisabled:!1,clippedFeatures:[],thermalFromDate:"",thermalToDate:"",revision:1,selectRevision:1,extent:null}},computed:{map:function(){return this.$root.map},env:function(){return this.$root.env},active:function(){return this.$root.active},annotations:function(){return this.$root.$refs.app.$refs.annotations},info:function(){return this.$root.info},systemsetting:function(){return this.$root.systemsetting},catalogue:function(){return this.$root.catalogue},export:function(){return this.$root.export},loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},selectedFeatures:function(){return this.annotations.getSelectedFeatures("thermal")},selectedFeaturesSize:function(){return this.selectRevision&&this.selectedFeatures.getLength()},hotspotLayer:function(){return this.$root.catalogue.getLayer("hotspots:hotspot_centroids")},hotspotMapLayer:function(){
return this.$root.map?this.$root.map.getMapLayer(this.hotspotLayer):void 0},hotspotStyleFunc:function(){return this._hotspotStyleFunc||(this._hotspotStyleFunc=function(){var labelStyleFunc=function(){return new _vendor.ol.style.Style({text:new _vendor.ol.style.Text({text:"o",font:"24px Calibri,sans-serif",fill:new _vendor.ol.style.Fill({color:"#fff"}),stroke:new _vendor.ol.style.Stroke({color:"#fff",width:2})}),image:new _vendor.ol.style.Circle({fill:new _vendor.ol.style.Fill({color:[0,0,255]}),radius:12})})};return function(res){return labelStyleFunc.call(this,res)}}.call(this)),this._hotspotStyleFunc},flightFootprintLayer:function(){return this.$root.catalogue.getLayer("hotspots:hotspot_flight_footprints")},flightFootprintMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.flightFootprintLayer):void 0},footprintStyle:function(){return newfootprintStyle=new _vendor.ol.style.Style({stroke:new _vendor.ol.style.Stroke({width:5,color:[0,0,255]})})},postmark_client:function(){return new(require("postmark").Client)("c5abeaf7-cf27-4539-8f8a-790786320f30")},featurelist:function(){try{return this.revision&&this._featurelist.getArray().reverse()}catch(ex){return[]}},featurelistSize:function(){try{return this.revision&&this._featurelist.getLength()}catch(ex){return 0}},hasFeatureFilter:function(){return!(!this.search||!this.search.trim())},invalidDateFilter:function(){var invalid=!0;if(this.showDateRange||void 0!=this.thermalSingleDate&&""!=this.thermalSingleDate&&(invalid=!1),this.showDateRange&&(void 0!=this.thermalDateRange&&"-1"!=this.thermalDateRange&&(invalid=!1),"-1"==this.thermalDateRange)){var startDatetime=this.thermalFromDate.replace(/-/g,"").replace(" ","_").replace(":",""),endDatetime=this.thermalToDate.replace(/-/g,"").replace(" ","_").replace(":","");""==endDatetime&&(endDatetime=(0,_vendor.moment)().format("YYYYMMDD_HHmm"));var startYear=parseInt(startDatetime.substring(0,4)),startMonth=parseInt(startDatetime.substring(4,6))-1,startDay=startDatetime.substring(6,8),startHr=startDatetime.substring(9,11),startMin=startDatetime.substring(11,13),endYear=parseInt(endDatetime.substring(0,4)),endMonth=parseInt(endDatetime.substring(4,6))-1,endDay=endDatetime.substring(6,8),endHr=endDatetime.substring(9,11),endMin=endDatetime.substring(11,13),start=new Date(startYear,startMonth,startDay,startHr,startMin,0);new Date(endYear,endMonth,endDay,endHr,endMin,0)-start<=2592e5&&(invalid=!1)}return invalid}},watch:{thermalDateRange:function(newValue,oldValue){this.changeThermalDateRange()},thermalFromDate:function(newValue,oldValue){this.changeThermalFromDate()},thermalToDate:function(newValue,oldValue){this.changeThermalToDate()}},methods:{adjustHeight:function(){"thermal"===this.activeMenu&&$("#hotspot-list").height(this.screenHeight-this.leftPanelHeadHeight-350-$("#hotspot-list-controller-container").height()-this.hintsHeight)},changeThermalDateRange:function(){if("-1"===this.thermalDateRange)if(this.thermalFromDate)this.changeThermalFromDate(),this.changeThermalToDate();else{var range=_vendor.utils.getDateRange(21024,"YYYY-MM-DD HH:mm");this.thermalFromDate=range[0]||"",(range[1]||"")!==this.thermalToDate?this.thermalToDate=range[1]||"":this.changeThermalToDate()}else{var range=_vendor.utils.getDateRange(this.thermalDateRange,"YYYY-MM-DD HH:mm");this.thermalFromDate=range[0]||"",this.thermalToDate=range[1]||""}},changeThermalFromDate:function(){if("-1"===this.thermalDateRange&&this._thermalToDatePicker)try{""===this.thermalFromDate?this._thermalToDatePicker.setStartDate((0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00"):this._thermalToDatePicker.setStartDate((0,_vendor.moment)(this.thermalFromDate,"YYYY-MM-DD HH:mm").format("YYYY-MM-DD")+" 00:00")}catch(ex){}},changeThermalToDate:function(){if("-1"===this.thermalDateRange&&this._thermalFromDatePicker)try{""===this.thermalToDate?this._thermalFromDatePicker.setEndDate((0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59"):this._thermalFromDatePicker.setEndDate(this.thermalToDate)}catch(ex){}},hasDateFilter:function(){var dateFilterSpecified=!1;return(this.showDateRange||void 0!=this.thermalSingleDate)&&(dateFilterSpecified=!0),dateFilterSpecified},showFeature:function(feat){return this.revision&&(!this.viewportOnly||feat.inViewport)},scrollToSelected:function(){if(0!==this.selectedFeatures.getLength()){for(var index=-1,i=0;i<this._featurelist.getLength()&&(!this.showFeature(this._featurelist.item(i))||(index+=1,this._featurelist.item(i)!==this.selectedFeatures.item(0)));i++);if(index>=0){var listElement=document.getElementById("hotspot-list");index<listElement.children.length&&(listElement.scrollTop+=listElement.children[index].getBoundingClientRect().top-listElement.getBoundingClientRect().top)}}},toggleSelect:function(f){this.isFeatureSelected(f)?this.selectedFeatures.remove(f):this.selectedFeatures.push(f)},toggleViewportOnly:function(){this.viewportOnly=!this.viewportOnly,this.export.saveState()},toggleFlightFootprint:function(){this.showFlightFootprint=!this.showFlightFootprint,this.export.saveState();var map=this.$root.map,footprintsLoaded=!1,hotspotsLoaded=!1;if(map.olmap.getLayers().forEach(function(layer){"Thermal Imaging Flight Footprints"===layer.get("name")&&(footprintsLoaded=!0),"Thermal Imaging Hotspots"===layer.get("name")&&(hotspotsLoaded=!0)}),hotspotsLoaded&&this.showFlightFootprint){this.flightFootprintLayer.style=this.footprintStyle;var footprintOLLayer=map.createWFSLayer(this.flightFootprintLayer);map.olmap.addLayer(footprintOLLayer),footprintOLLayer.refresh()}else hotspotsLoaded&&!this.showFlightFootprint&&map.olmap.getLayers().forEach(function(layer){"Thermal Imaging Flight Footprints"===layer.get("name")&&map.olmap.removeLayer(layer)})},toggleRawImageMosaic:function(){this.showRawImageMosaic=!this.showRawImageMosaic,this.export.saveState();var vm=this,map=this.$root.map,mosaicLoaded=!1,hotspotsLoaded=!1;if(map.olmap.getLayers().forEach(function(layer){"Flight mosaics"===layer.get("name")&&(mosaicLoaded=!0),"Thermal Imaging Hotspots"===layer.get("name")&&(mosaicPosition=map.olmap.getLayers().getArray().findIndex(function(l){return l===layer}),hotspotsLoaded=!0)}),hotspotsLoaded&&this.showRawImageMosaic){console.log("HOT SPOT IS LOADED mosaicLoaded");var dateInfo=this.getDateInfoForMosaics(vm);map.createWMSLayer(mosaicPosition,dateInfo)}else hotspotsLoaded&&!this.showRawImageMosaic&&map.olmap.getLayers().forEach(function(layer){"Flight mosaics"===layer.get("name")&&map.olmap.removeLayer(layer)})},toggleDateRange:function(){this.thermalSingleDate=void 0,this.showDateRange&&(this.thermalFromDate=void 0,this.thermalToDate=void 0,this.ThermalDateRange=21024,this.changeThermalDateRange()),this.showDateRange||(this.thermalFromDate=void 0,this.thermalToDate=void 0)},isFeatureSelected:function(f){return this.selectedFeatures.getArray().findIndex(function(o){return f===o})>=0},updateCQLFilter:function(wait){var vm=this;vm._updateCQLFilter||(vm._updateCQLFilter=debounce(function(updateType){try{if(""===vm.hotspotLayer.cql_filter)return;vm.hotspotLayer.cql_filter="",vm.hotspotMapLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.hotspotMapLayer.getSource().loadSource("query")}catch(ex){alert(ex)}},500)),0===wait?vm._updateCQLFilter.call({wait:1}):void 0===wait||null===wait?vm._updateCQLFilter():vm._updateCQLFilter.call({wait:wait})},getDateInfoForMosaics:function(vm){var dateInfo=[];if(vm.showDateRange){var start=vm.thermalFromDate.replace(/-/g,"").replace(" ","_").replace(":",""),end=vm.thermalToDate.replace(/-/g,"").replace(" ","_").replace(":","");dateInfo.push(start),""===end?dateInfo.push("now"):dateInfo.push(end)}else if(void 0!=vm.thermalSingleDate){var singleDate=vm.thermalSingleDate.replace(/-/g,"");dateInfo.push(singleDate)}return dateInfo},removeHotspotList:function(){document.getElementById("hotspot-list").querySelectorAll(".collapsible").forEach(function(button){button.parentNode.remove()})},removeImages:function(){var hotspotButtons=(this.$root.map,document.getElementById("hotspot-list").querySelectorAll(".collapsible")),i=0;return hotspotButtons.forEach(function(button){"block"===button.nextElementSibling.style.display&&(setTimeout(function(){button.click()},10),i+=1)}),i},loadHotspotLayers:function(){if(!this.invalidDateFilter){var _this=this,vm=this;vm._featurelist.clear(),vm.setExtentFeatureSize();var cqlFilter="";if(vm.hasDateFilter())if(void 0!=vm.thermalSingleDate){var singleDate=vm.thermalSingleDate.replace(/-/g,"");cqlFilter="strStartsWith(flight_datetime,'"+singleDate+"')=true"}else if(""==vm.thermalToDate){var fromDate=vm.thermalFromDate.replace(/-/g,"");cqlFilter="flight_datetime>'"+fromDate+"'"}else{var toDate=vm.thermalToDate.replace(/-/g,""),fromDate=vm.thermalFromDate.replace(/-/g,"");cqlFilter="flight_datetime between '"+fromDate+"' and '"+toDate+"'"}var map=vm.$root.map,imagesRemoved=vm.removeImages();timeout=10*imagesRemoved,setTimeout(function(){map.olmap.getLayers().getArray().slice().forEach(function(layer){"Thermal Imaging Flight Footprints"===layer.get("name")&&map.olmap.removeLayer(layer),"Flight mosaics"===layer.get("name")&&map.olmap.removeLayer(layer),"Thermal Imaging Hotspots"==layer.get("name")&&map.olmap.removeLayer(layer),layer.get("name").startsWith("Hotspot image")&&map.olmap.removeLayer(layer)}),vm.hotspotLayer.hotspotFilter=cqlFilter,vm.flightFootprintLayer.hotspotFilter=cqlFilter,vm.flightFootprintLayer.style=vm.footprintStyle;var footprintOLLayer=map.createWFSLayer(vm.flightFootprintLayer);map.olmap.addLayer(footprintOLLayer),footprintOLLayer.refresh(),map.olmap.getLayers().getArray().slice().forEach(function(layer){"Thermal Imaging Flight Footprints"==layer.get("name")&&map.olmap.removeLayer(layer)});var insertPosition=map.olmap.getLayers().getArray().length;map.createWMSLayerHotspots(cqlFilter,insertPosition);var mosaicPosition=insertPosition;if(vm.showFlightFootprint&&(map.olmap.addLayer(footprintOLLayer),footprintOLLayer.refresh()),vm.showRawImageMosaic){var dateInfo=_this.getDateInfoForMosaics(vm);map.createWMSLayer(mosaicPosition,dateInfo)}map.createWFSLayer(vm.hotspotLayer).getSource().retrieveFeatures(cqlFilter,function(features){vm.features.clear(),vm.updateFeatureFilter(0),vm.features.extend(features.sort(vm.featureOrder)),$.each(features,function(index,feature){var imagesString=feature.get("images"),imagesArray=imagesString.split(",");feature.shortImages=imagesArray})})},timeout)}},clearHotspotLayers:function(){var _this2=this;this.removeImages(),this.removeHotspotLayers(),this.removeHotspotList(),setTimeout(function(){_this2.removeHotspotMosaic()},100)},featureFilter:function(f){var search=this.search?this.search.toLowerCase().trim():"";return!search||this.fields.some(function(key){return(""+f.get(key)).toLowerCase().indexOf(search)>-1})},featureOrder:function(a,b){var as=[a.get("flight_datetime"),a.get("hotspot_no")],bs=[b.get("flight_datetime"),b.get("hotspot_no")];return as[0]<bs[0]?1:as[0]>bs[0]?-1:as[1]<bs[1]?1:as[1]>bs[1]?-1:0},updateFeatureFilter:function(wait){var vm=this;vm.flights=[],vm._updateFeatureFilter||(vm._updateFeatureFilter=debounce(function(){var list=vm.features.getArray();if(vm.hasFeatureFilter&&(list=list.filter(vm.featureFilter)),vm.hasDateFilter()){if(void 0!=vm.thermalSingleDate){var singleDate=vm.thermalSingleDate.replace(/-/g,"");list=list.filter(function(feature){return feature.get("flight_datetime").startsWith(singleDate)})}else if(vm.showDateRange){var start=vm.thermalFromDate.replace(/-/g,"").replace(" ","_").replace(":",""),end=vm.thermalToDate.replace(/-/g,"").replace(" ","_").replace(":","");list=""===end?list.filter(function(feature){return feature.get("flight_datetime")>start}):list.filter(function(feature){return feature.get("flight_datetime")>start&&feature.get("flight_datetime")<end})}if(0==list.length)return void alert("No hotspots recorded in that period");list.forEach(function(feature){var flight=feature.get("flight_datetime");vm.flights.includes(flight)||vm.flights.push(flight)})}if(vm._featurelist.clear(),vm._featurelist.extend(list),!this.showFlightFootprint){var extent=list[0].getGeometry().getExtent();list.forEach(function(feature){_vendor.ol.extent.extend(extent,feature.getGeometry().getExtent())}),vm.$root.map.olmap.getView().fit(extent,vm.$root.map.olmap.getSize())}if(vm.setExtentFeatureSize(),vm.selectedFeatures.getLength()>0)if(0===list.length)vm.selectedFeatures.clear(),vm.clippedFeatures.splice(0,vm.clippedFeatures.length);else for(var index=vm.selectedFeatures.getLength()-1;index>=0;index--)list.find(function(f){return f===vm.selectedFeatures.item(index)})||vm.selectedFeatures.removeAt(index);vm.revision+=1},500)),0===wait?vm._updateFeatureFilter.call({wait:1}):void 0===wait||null===wait?vm._updateFeatureFilter():vm._updateFeatureFilter.call({wait:wait})},updateFootprintFilter:function(wait){var vm=this;vm._updateFootprintFilter||(vm._updateFootprintFilter=debounce(function(){var list=vm.footprints.getArray();if(vm.hasFeatureFilter&&(list=list.filter(vm.featureFilter)),vm.hasDateFilter())if(void 0!=vm.thermalSingleDate){var singleDate=vm.thermalSingleDate.replace(/-/g,"");list=list.filter(function(feature){return feature.get("flight_datetime").startsWith(singleDate)})}else if(vm.showDateRange){var start=vm.thermalFromDate.replace(/-/g,"").replace(" ","_").replace(":",""),end=vm.thermalToDate.replace(/-/g,"").replace(" ","_").replace(":","");list=""===end?list.filter(function(feature){return feature.get("flight_datetime")>start}):list.filter(function(feature){return feature.get("flight_datetime")>start&&feature.get("flight_datetime")<end})}vm._footprintlist.clear(),vm._footprintlist.extend(list);var extent=list[0].getGeometry().getExtent();list.forEach(function(feature){_vendor.ol.extent.extend(extent,feature.getGeometry().getExtent())}),vm.$root.map.olmap.getView().fit(extent,vm.$root.map.olmap.getSize())},500)),0===wait?vm._updateFootprintFilter.call({wait:1}):void 0===wait||null===wait?vm._updateFootprintFilter():vm._updateFootprintFilter.call({wait:wait})},toggleImageList:function(event){var hotspotID=event.target.innerHTML,imageListContent=event.target.nextElementSibling;if("block"===imageListContent.style.display){var children=imageListContent.children,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=children[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _item=_step.value;_item.innerHTML=_item.innerHTML.replace("<b>","").replace(" ON</b>","")}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}imageListContent.style.display="none";var map=this.$root.map;map.olmap.getLayers().forEach(function(layer){layer.get("name")==="Hotspot image "+hotspotID&&map.olmap.removeLayer(layer)})}else imageListContent.style.display="block"},listImageFiles:function(f){var imagesString=f.get("images"),imagesArrayPrelim=imagesString.split(","),imagesArray=[];return imagesArrayPrelim.forEach(function(item){var pos1=item.indexOf("/PNGs/")+6,pos2=item.indexOf(".png"),imageName=item.slice(pos1,pos2);imagesArray.push(imageName)}),imagesArray},showImage:function(flight_datetime,hotspot_no,file,index,parentIndex){file=file.replace(" ","");var map=this.$root.map,hotspots_position=0;map.olmap.getLayers().forEach(function(layer){layer.get("name")==="Hotspot image "+flight_datetime+" "+hotspot_no&&map.olmap.removeLayer(layer)});var position=map.olmap.getLayers().getArray().length-1;map.olmap.getLayers().forEach(function(layer){"Flight mosaics"===layer.get("name")&&(mosaicLoaded=!0),"Thermal Imaging Hotspots"===layer.get("name")&&(hotspots_position=map.olmap.getLayers().getArray().findIndex(function(l){return l===layer}),hotspotsLoaded=!0)}),position=hotspots_position,map.createWMSLayerSingleImage(position,flight_datetime,hotspot_no,file)},changeButtons:function(event){var siblingButtons=this.getSiblingButtons(event.target);event.target.innerHTML.endsWith(" ON")||event.target.innerHTML.endsWith(" ON</b>")||(event.target.innerHTML=event.target.innerHTML.replace("image ","<b>image ")+" ON</b>"),siblingButtons.forEach(function(item,index){item.innerHTML=item.innerHTML.replace("<b>","").replace(" ON</b>","")})},getSiblingButtons:function(buttonElement){for(var siblings=[],sibling=buttonElement.parentNode.firstChild;sibling;)1===sibling.nodeType&&sibling!==buttonElement&&siblings.push(sibling),sibling=sibling.nextSibling;return siblings},removeHotspotLayers:function(){try{var map=this.$root.map;map.olmap.getLayers().forEach(function(layer){"Thermal Imaging Hotspots"===layer.get("name")&&map.olmap.removeLayer(layer),"Thermal Imaging Flight Footprints"===layer.get("name")&&map.olmap.removeLayer(layer)})}catch(ex){alert(ex)}},removeHotspotMosaic:function(){try{var map=this.$root.map;map.olmap.getLayers().forEach(function(layer){"Flight mosaics"===layer.get("name")&&map.olmap.removeLayer(layer)})}catch(ex){alert(ex)}},showEmailComposerPanel_OLD:function(){this.showEmailComposer=!this.showEmailComposer;var vm=this;0==vm.emailList.length&&((this.env.gokartService="")&&this.env.gokartServicewindow.location.href.slice(0,-4),$.get(this.env.gokartService+"/hotspot_email_list").then(function(response){var jsonObject=JSON.parse(response);vm.emailList=jsonObject.objects,select=document.getElementById("emailRecipient");for(email in vm.emailList)select.add(new Option(vm.emailList[email]))}))},showEmailComposerPanel:function(){if(0==this.flights.length&&0==this.showEmailComposer)return void alert("The email function is designed to work only if one or more hotspot flights are loaded in the map.");this.showEmailComposer=!this.showEmailComposer;var vm=this;0==vm.emailList.length&&((this.env.gokartService="")&&this.env.gokartServicewindow.location.href.slice(0,-4),$.get(this.env.gokartService+"/hotspot_email_list").then(function(response){vm.emailList=JSON.parse(response),select=document.getElementById("emailRecipient");for(item in vm.emailList)select.add(new Option(vm.emailList[item].email))}))},sendEmail_OLD:function(){var recipient=document.getElementById("emailRecipient").value,messageText=document.getElementById("emailText").value,vm=this,cqlFilter="";if(vm.hasDateFilter()&&void 0!=vm.thermalSingleDate){cqlFilter="strStartsWith(flight_datetime, '"+vm.thermalSingleDate.replace(/-/g,"")+"') = true"}this.getDateInfoForMosaics(vm);if(0==messageText.length)return void alert("You need to type in a message.");$.get(this.env.gokartService+"/send_hotspot_email/"+recipient+"/"+messageText+"/"+vm.flights+"/"+cqlFilter).then(function(response){alert(response)})},sendEmail:function(){var recipient=document.getElementById("emailRecipient").value,messageText=document.getElementById("emailText").value,vm=this,cqlFilter="";if(vm.hasDateFilter()&&void 0!=vm.thermalSingleDate&&(cqlFilter="strStartsWith(flight_datetime, '"+vm.thermalSingleDate.replace(/-/g,"")+"') = true"),this.getDateInfoForMosaics(vm),0==messageText.length)return void alert("You need to type in a message.");try{$.get(this.env.gokartService+"/send_hotspot_email/"+recipient+"/"+messageText+"/"+vm.flights+"/"+cqlFilter).then(function(response){alert(response)})}catch(err){alert(err.name+": "+err.message)}},setExtentFeatureSize:function(){var size=0;this._featurelist.forEach(function(feat){feat.inViewport&&++size}),this.extentFeaturesSize=size},updateViewport:function(wait){var vm=this;vm._updateViewport||(vm._updateViewport=debounce(function(){var viewportExtent=vm.map.extent;vm.features.forEach(function(feat){feat.inViewport=feat.getGeometry()&&_vendor.ol.extent.containsCoordinate(viewportExtent,feat.getGeometry().getCoordinates())}),vm.setExtentFeatureSize(),vm.viewportOnly&&(vm.revision+=1)},500)),0===wait?vm._updateViewport.call({wait:1}):void 0===wait||null===wait?vm._updateViewport.call({wait:1}):vm._updateViewport.call({wait:wait})},updateViewport_NEW:function(wait){var vm=this;vm._updateViewport||(vm._updateViewport=debounce(function(){var viewportExtent=vm.map.extent;vm.features.forEach(function(feat){feat.inViewport=feat.getGeometry()&&_vendor.ol.extent.containsCoordinate(viewportExtent,feat.getGeometry().getCoordinates())}),vm.setExtentFeatureSize(),vm.viewportOnly&&(vm.revision+=1)},500)),0===wait?vm._updateViewport.call({wait:1}):void 0===wait||null===wait?vm._updateViewport():vm._updateViewport.call({wait:wait})},clipToSelection:function(){if(0!==this.selectedFeatures.getLength()){this.clippedFeatures.splice(0,this.clippedFeatures.length);for(var index=0;index<this.selectedFeatures.getLength();index++)this.clippedFeatures.push(this.selectedFeatures.item(index).get("deviceid"));this.clippedOnly&&this.updateCQLFilter()}},setup:function(){this.$nextTick(this.adjustHeight)},teardown:function(){this.annotations.selectable.splice(0,this.annotations.selectable.length)}},ready:function(){var vm=this,thermalStatus=this.loading.register("thermal","Thermal Imaging Component");vm._featurelist=new _vendor.ol.Collection,vm._footprintlist=new _vendor.ol.Collection,thermalStatus.phaseBegin("initialize",20,"Initialize"),$("#thermalFromDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._thermalFromDatePicker=$("#thermalFromDate").data().datepicker}catch(ex){console.log(ex),this._thermalFromDatePicker=null}$("#thermalToDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._thermalToDatePicker=$("#thermalToDate").data().datepicker}catch(ex){this._thermalToDatePicker=null}this.changeThermalDateRange(),thermalStatus.phaseBegin("load_hotspots",30,"Load hotspots",!1,!0),this.$root.fixedLayers.push({type:"WFSLayer",name:"Thermal Imaging Hotspots",id:"hotspots:hotspot_centroids",features:vm._featurelist,getFeatureInfo:function(f){return{flight_datetime:f.get("flight_datetime"),hotspot_no:f.get("hotspot_no"),images:f.get("images")}},onerror:function(status,message){thermalStatus.phaseFailed("load_hotspots",status+" : "+message)},onload:function(loadType,vectorSource,features,defaultOnload){vm.features.clear(),vm.updateFeatureFilter(0),vm.features.extend(features.sort(vm.featureOrder)),$.each(features,function(index,feature){var imagesString=feature.get("images"),imagesArray=imagesString.split(",");feature.shortImages=imagesArray})}}),this.$root.fixedLayers.push({type:"WFSLayer",name:"Thermal Imaging Flight Footprints",id:"hotspots:hotspot_flight_footprints",features:vm._footprintlist,getFeatureInfo:function(f){return{flight_datetime:f.get("flight_datetime")}},onerror:function(status,message){thermalStatus.phaseFailed("load_hotspots",status+" : "+message)},onload:function(loadType,vectorSource,features,defaultOnload){vm.footprints.clear(),vm.footprints.extend(features),vm.updateFootprintFilter(0),$.each(features,function(index,feature){feature.setStyle(new _vendor.ol.style.Style({stroke:new _vendor.ol.style.Stroke({width:5,color:[0,0,255]})}))})}}),thermalStatus.phaseEnd("load_hotspots"),[{name:"Thermal Imaging Select",label:"Select",icon:"fa-mouse-pointer",scope:["thermal"],selectedFeatures:vm.selectedFeatures,keepSelection:!0,interactions:[vm.annotations.dragSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}}),vm.annotations.polygonSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}}),vm.annotations.selectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}})],onSet:function(){vm.annotations.ui.dragSelectInter.setMulti(!0),vm.annotations.ui.selectInter.setMulti(!0)},comments:[{name:"Tips",description:["Select all features using shortcut key 'Ctrl + A'","Select features using mouse.","Hold 'Ctrl' to enable polygon selection","Delete selected features using key 'Del'"]}]}].forEach(function(tool){vm.annotations.tools.push(tool)}),thermalStatus.phaseEnd("initialize"),thermalStatus.phaseBegin("gk-init",30,"Listen 'gk-init' event"),this.$on("gk-init",function(){thermalStatus.phaseEnd("gk-init"),thermalStatus.phaseBegin("attach_events",10,"Attach events"),vm.map.olmap.getView().on("propertychange",function(){vm.updateViewport()}),vm.selectedFeatures.on("add",function(event){vm.selectRevision+=1}),vm.selectedFeatures.on("remove",function(event){vm.selectRevision+=1}),vm.map.olmap.on("removeLayer",function(ev){"hotspots:hotspot_centroids"===ev.mapLayer.get("id")?(vm.features.clear(),vm._featurelist.clear()):"hotspots:hotspot_flight_footprints"===ev.mapLayer.get("id")&&(vm.footprints.clear(),vm._footprintlist.clear())}),vm._resolutionChanged=debounce(function(ev){vm.featureLabelDisabled=vm.map.olmap.getView().getResolution()>=.003,vm.featureDirDisabled=vm.map.olmap.getView().getResolution()>=.003},200),vm._resolutionChanged(),vm.map.olmap.getView().on("change:resolution",function(){vm._resolutionChanged()}),thermalStatus.phaseEnd("attach_events"),thermalStatus.phaseBegin("init_tools",10,"Initialize tools"),$.each([vm.annotations.ui.defaultPan],function(index,t){t.scope=t.scope||[],t.scope.push("thermal")}),vm.tools=vm.annotations.tools.filter(function(t){return t.scope&&t.scope.indexOf("thermal")>=0}),thermalStatus.phaseEnd("init_tools")})}},module.exports.__esModule&&(module.exports=module.exports.default),
("function"==typeof module.exports?module.exports.options:module.exports).template='\n  <div class="tabs-panel" id="menu-tab-thermal">\n    <div class="row collapse">\n      <div class="columns">\n        <ul class="tabs" id="thermal-tabs">\n          <li class="tabs-title is-active"><a class="label" aria-selected="true">Thermal Imaging</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="row collapse" id="thermal-tab-panels">\n      <div class="columns">\n        <div class="tabs-content vertical" data-tabs-content="thermal-tabs">\n          <div id="thermal-list-tab" class="tabs-panel is-active" v-cloak="">\n            <div id="thermal-list-controller-container">\n            <div class="tool-slice row collapse">\n              <div class="small-12">\n\t\t\t\t<div class="expanded button-group">\n\t\t\t\t  <a v-for="t in tools" class="button button-tool" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label" style="font-size: 0.9rem;">{{{ annotations.icon(t) }}} {{t.showName?t.label:""}}</a>\n\t\t\t\t</div>\t\n              </div>\n            </div>\n            <div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="thermalInViewport" type="checkbox" v-bind:checked="viewportOnly" @change="toggleViewportOnly">\n                    <label class="switch-paddle" for="thermalInViewport">\n                      <span class="show-for-sr">Viewport thermal imagery only</span>\n                    </label>\n                  </div>\n                  <label for="thermalInViewport" class="side-label">Restrict to viewport ({{extentFeaturesSize}}/{{featurelistSize}})</label>\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t<div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="showFlightFootprint" type="checkbox" v-bind:checked="showFlightFootprint" @change="toggleFlightFootprint">\n                    <label class="switch-paddle" for="showFlightFootprint">\n                      <span class="show-for-sr">Show Flight Footprint</span>\n                    </label>\n                  </div>\n                  <label for="showFlightFootprint" class="side-label">Show flight footprint</label>\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t<div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="mosaicRawImage" type="checkbox" v-bind:checked="showRawImageMosaic" @change="toggleRawImageMosaic">\n                    <label class="switch-paddle" for="mosaicRawImage">\n                      <span class="show-for-sr">Mosaic raw image</span>\n                    </label>\n                  </div>\n                  <label for="mosaicRawImage" class="side-label">Show mosaic image</label>\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t<div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="dateRange" type="checkbox" v-model="showDateRange" @change="toggleDateRange">\n                    <label class="switch-paddle" for="dateRange">\n                      <span class="show-for-sr">Date range</span>\n                    </label>\n                  </div>\n                  <label v-if="showDateRange" for="dateRange" class="side-label">Date range (up to 72 hr)</label>\n\t\t\t\t  <label v-else="" for="dateRange" class="side-label">Date range (off)</label>\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t<div v-if="!showDateRange" class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                    <label>Date:\n\t\t\t\t\t\t<input type="date" class="date" id="singleDate" v-model="thermalSingleDate">\n\t\t\t\t\t</label>\n                </div>\n              </div>\n\t\t    </div>\n            <div id="date-range-panel" v-show="showDateRange">\n              <div class="row collapse tool-slice">\n                <div class="small-2">\n                  <label for="dateRangeFrom">From:</label>\n                </div>\n                <div class="small-5">\n                  <input type="text" id="thermalFromDate" class="span2" @click="changeThermalFromDate" v-model="thermalFromDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="thermalDateRange !== \'-1\'" readonly="">\n\t\t\t\t  \x3c!--input type="text" id="thermalFromDate" class="span2" v-model="thermalFromDate" placeholder="YYYY-MM-DD HH:mm"  v-bind:disabled="thermalDateRange !== \'-1\'"  readonly></input--\x3e\n                </div>\n                <div class="small-5">\n                  <select name="select" v-model="thermalDateRange">\n                      \x3c!--option value="21001">Last hour</option--\x3e \n\t\t\t\t\t  <option value="21004">Last 4 hours</option> \n\t\t\t\t\t   <option value="21008">Last 8 hours</option> \n\t\t\t\t\t  <option value="21024">Last 24 hours</option> \n\t\t\t\t\t  <option value="31002">Last 48 hours</option> \n                      <option value="31003">Last 3 days</option> \n                      \x3c!--option value="31005">Last 5 days</option> \n                      <option value="31007">Last 7 days</option> \n                      <option value="31030">Last 30 days</option--\x3e \n                      <option value="-1">User Defined</option> \n                </select>\n                </div>\n              </div>\n              <div class="row collapse tool-slice">\n                <div class="small-2">\n                  <label for="dateRangeTo">To:</label>\n                </div>\n                <div class="small-5">\n                  <input type="text" id="thermalToDate" class="span2" v-model="thermalToDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="thermalDateRange !== \'-1\'" readonly="">\n                </div>\n              </div>\n            </div>\n\t\t\t<div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n\t\t\t\t</div>\n\t\t\t  </div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t</div>\n\t\t\t<div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                    <a class="button" :disabled="invalidDateFilter" @click="loadHotspotLayers" title="Show Hotspots" button="" style="margin:5px;">Show Hotspots </a>\n\t\t\t\t\t<a class="button" :disabled="invalidDateFilter" @click="clearHotspotLayers" title="Clear Hotspots" button="" style="margin:5px;">Clear Hotspots </a>\n\t\t\t\t\t\x3c!--a class="button" :disabled="invalidDateFilter"@click="removeHotspotMosaic" title="Clear Mosaic" button style="margin:5px;">Clear Mosaic </a--\x3e\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t\x3c!--div class="row">\n              <div class="small-9 columns" >\n                <div class="row">\n                    <a class="button" @click="showEmailComposerPanel" title="Show Email Composer"><i class="fa fa-envelope" aria-hidden="true" v-model="mdlShowEmailComposer"></i> Email </a>\n                </div>\n              </div>\n\t\t    </div>\n\t\t\t<div v-show="showEmailComposer" id="emailPanel" >\n\t\t\t\t<form id="emailForm">\n\t\t\t\t<p>Email to\n\t\t\t\t<select id="emailRecipient">\n\t\t\t\t</select>\n\t\t\t\t\n   \t\t\t\t</p>\n\t\t\t\t<div>\n\t\t\t\t<textarea id="emailText" placeholder="Type message here" style="width:360px; height:190px; color:#000; opacity:1"></textarea>\n\t\t\t\t<p></p>\n\t\t\t\t</div>\n\t\t\t\t<div v-show="showEmailComposer">\n\t\t\t\t<input v-on:click="sendEmail" type="button" id="sendEmail" style="background-color:#39e" value="Send">\n\t\t\t\t<input v-on:click="showEmailComposer = !showEmailComposer" type="reset" id="cancelEmail" style="background-color:#39e" value="Cancel">\n\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div--\x3e\n        </div>\n\t\t\n\t\t<div id="hotspot-list" class="layers-flexibleframe scroller" style="margin-left:-15px; margin-right:-15px;">\n              \x3c!--template v-for="f in featurelist" track-by="get(\'hotspot_no\')"--\x3e\n\t\t\t  <template v-for="f in featurelist">\n\t\t\t    <div v-if="showFeature(f)" class="row feature-row" v-bind:class="{\\\'feature-selected\\\': isFeatureSelected(f) }" @click="toggleSelect(f)"> \n\t\t\t    <button class="collapsible" v-on:click="toggleImageList">{{f.get(\'flight_datetime\')}} {{f.get(\'hotspot_no\')}}</button>\n\t\t\t\t\x3c!--button class="collapsible" @click="toggleImageList(event, f.get(\'flight_datetime\'), f.get(\'hotspot_no\'))">{{f.get(\'flight_datetime\')}} {{f.get(\'hotspot_no\')}}</button--\x3e\n\t\t\t    <div class="showImages">\n\t\t\t\t  <template v-for="imageFile in f.shortImages">\n\t\t\t\t  \x3c!--a class="button" @click="showImage(imageFile)" id={{imageFile}}><i class="fa fa-camera"></i>View image {{imageFile}}</a--\x3e\n\t\t\t\t  \x3c!--button v-bind:id="\'img_\' + imageFile" class="button"  v-on:click="showImage(imageFile)" ><i class="fa fa-camera"></i>View image {{imageFile}}</button--\x3e\n\t\t\t\t  <button v-bind:id="\'img_\' + imageFile" v-bind:class="[&quot;button&quot;]" v-on:click="changeButtons" @click="showImage(f.get(\'flight_datetime\'), f.get(\'hotspot_no\'), imageFile, $index, $parent.$index)">\n\t\t\t\t\t<i class="fa fa-camera"></i>        image {{imageFile}}</button>\n\t\t\t\t  \x3c!--button v-bind:id="\'img_\' + imageFile" v-bind:class=["button"] @click="showImage(f.get(\'flight_datetime\'), imageFile)" ><i class="fa fa-camera"></i>View image {{imageFile}}</button--\x3e\n\t\t\t\t  \x3c!--template>\n\t\t\t\t\t  <div class="images" v-for="imageFile in f.shortImages" :key="imageFile">\n\t\t\t\t\t\t<button class="favorite" v-on:click="imageFile.favorited = !imageFile.favorited">\n\t\t\t\t\t\t\t<i v-bind:class="[{ \'red\' : imageFile.favorited }, \'fa fa-camera\']">View image {{imageFile}}</i>\n\t\t\t\t\t\t</button>           \n\t\t\t\t\t  </div--\x3e\n\t\t\t\t  </template>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t  </template>\n\t\t</div>\n      </div>\n    </div>\n  </div>\n</div></div>',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#thermalFromDate, #thermalToDate, #singleDate {\n    cursor:pointer}\n\t\n/* Style the button that is used to open and close the collapsible content */\n.collapsible {\n  background-color: #eee;\n  color: #444;\n  cursor: pointer;\n  padding: 10px;\n  width: 100%;\n  border: 1px solid #009;\n  text-align: left;\n  outline: none;\n  font-size: 15px;\n}\n\n/* Add a background color to the button if it is clicked on (add the .active class with JS), and when you move the mouse over it (hover) */\n.active, .collapsible:hover {\n  background-color: #ccc;\n}\n\n/* Style the collapsible content. Note: hidden by default */\n.showImages {\n  padding: 0 1px;\n  display: none;\n  overflow: hidden;\n  background-color: #f1f1f1;\n}\n\n/*Button colours*/\n.red {\n       background-color: red;\n   }\n.blue {\n       background-color: blue;\n   }\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-1d7609c2",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-1d7609c2",module.exports))}()},{postmark:138,"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],168:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#historyFromDate, #historyToDate {\n    cursor:pointer\n}\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{resourceLabels:"settings.resourceLabels",resourceDirections:"settings.resourceDirections",viewportOnly:"settings.viewportOnly",hintsHeight:"layout.hintsHeight",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",whoami:"whoami"},data:function(){var fill="#ff6600";return{toggleHistory:!1,showToggles:!1,clippedOnly:!1,search:"",groupFilter:"",sourceflag:3,tools:[],historyRange:"21001",fields:["id","registration","rin_display","deviceid","symbol","district_display","usual_driver","callsign_display","usual_location","current_driver","contractor_details","source_device_type"],features:new _vendor.ol.Collection,extentFeaturesSize:0,featureLabelDisabled:!1,featureDirDisabled:!1,clippedFeatures:[],historyFromDate:"",historyToDate:"",tints:{red:[[fill,"#ed2727"],["#7c3100","#480000"]],orange:[[fill,"#ff6600"],["#7c3100","#562200"]],yellow:[[fill,"#ffd700"],["#7c3100","#413104"]],green:[[fill,"#71c837"],["#7c3100","#1b310d"]],selected:[["#000000","#2199e8"],["#7c3100","#2199e8"],[fill,"#ffffff"]]},revision:1,selectRevision:1}},computed:{map:function(){return this.$root.map},env:function(){return this.$root.env},active:function(){return this.$root.active},annotations:function(){return this.$root.$refs.app.$refs.annotations},info:function(){return this.$root.info},systemsetting:function(){return this.$root.systemsetting},catalogue:function(){return this.$root.catalogue},export:function(){return this.$root.export},loading:function(){return this.$root.loading},utils:function(){return this.$root.utils},isTrackingMapLayerHidden:function(){return this.$root.active.isHidden(this.trackingMapLayer)},isHistoryMapLayerHidden:function(){return this.$root.active.isHidden(this.historyMapLayer)},selectedFeatures:function(){return this.annotations.getSelectedFeatures("tracking")},selectedFeaturesSize:function(){return this.selectRevision&&this.selectedFeatures.getLength()},queryHistoryDisabled:function(){return!(this.selectRevision&&this.selectedFeatures&&this.selectedFeatures.getLength()&&""!==this.historyFromDate)},showOtherExternalResource:{get:function(){return 1==(1&this.sourceflag)},set:function(show){this.setSourceFlag(1,show)}},showDBCAResource:{get:function(){return 2==(2&this.sourceflag)},set:function(show){this.setSourceFlag(2,show)}},showDFESResource:{get:function(){return 4==(4&this.sourceflag)},set:function(show){this.setSourceFlag(4,show)}},trackingLayer:function(){return this.$root.catalogue.getLayer("dpaw:resource_tracking_live")},trackingMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.trackingLayer):void 0},historyLayer:function(){return this.$root.catalogue.getLayer("dpaw:resource_tracking_history")},historyMapLayer:function(){return this.$root.map?this.$root.map.getMapLayer(this.historyLayer):void 0},featurelist:function(){try{return this.revision&&this._featurelist.getArray()}catch(ex){return[]}},featurelistSize:function(){try{return this.revision&&this._featurelist.getLength()}catch(ex){return 0}},hasFeatureFilter:function(){return!(!this.search||!this.search.trim())}},watch:{isTrackingMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.trackingMapLayer.changed())},isHistoryMapLayerHidden:function(newValue,oldValue){void 0!==newValue&&void 0!==oldValue&&(this.map.resolution>=.003||this.historyMapLayer.changed())},resourceLabels:function(newValue,oldValue){this.showResourceLabelsOrDirections()},resourceDirections:function(newValue,oldValue){this.showResourceLabelsOrDirections()},toggleHistory:function(){this.adjustHeight()},showToggles:function(newValue,oldValue){this.adjustHeight()},sourceflag:function(newValue,oldValue){this.updateCQLFilter(1e3)},historyRange:function(newValue,oldValue){this.changeHistoryRange()},historyFromDate:function(newValue,oldValue){this.changeHistoryFromDate()},historyToDate:function(newValue,oldValue){this.changeHistoryToDate()}},methods:{adjustHeight:function(){"tracking"===this.activeMenu&&$("#tracking-list").height(this.screenHeight-this.leftPanelHeadHeight-41-$("#tracking-list-controller-container").height()-this.hintsHeight)},changeHistoryRange:function(){if("-1"===this.historyRange)if(this.historyFromDate)this.changeHistoryFromDate(),this.changeHistoryToDate();else{var range=_vendor.utils.getDateRange(21001,"YYYY-MM-DD HH:mm");this.historyFromDate=range[0]||"",(range[1]||"")!==this.historyToDate?this.historyToDate=range[1]||"":this.changeHistoryToDate()}else{var range=_vendor.utils.getDateRange(this.historyRange,"YYYY-MM-DD HH:mm");this.historyFromDate=range[0]||"",this.historyToDate=range[1]||""}},changeHistoryFromDate:function(){if("-1"===this.historyRange&&this._historyToDatePicker)try{""===this.historyFromDate?this._historyToDatePicker.setStartDate((0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00"):this._historyToDatePicker.setStartDate((0,_vendor.moment)(this.historyFromDate,"YYYY-MM-DD HH:mm").format("YYYY-MM-DD")+" 00:00")}catch(ex){}},changeHistoryToDate:function(){if("-1"===this.historyRange&&this._historyFromDatePicker)try{""===this.historyToDate?this._historyFromDatePicker.setEndDate((0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59"):this._historyFromDatePicker.setEndDate(this.historyToDate)}catch(ex){}},historyDateFilter:function(){"-1"!==this.historyRange&&this.changeHistoryRange();var startDate=this.historyFromDate?(0,_vendor.moment)(this.historyFromDate,"YYYY-MM-DD HH:mm",!0):null;if(startDate&&!startDate.isValid())throw"From date is under changing.";var endDate=this.historyToDate&&this.historyToDate<(0,_vendor.moment)().format("YYYY-MM-DD HH:mm")?(0,_vendor.moment)(this.historyToDate,"YYYY-MM-DD HH:mm",!0):null;if(endDate&&!endDate.isValid())throw"To date is under changing.";if(startDate){if(endDate){if(startDate>=endDate)throw"Start date must be earlier than end date.";return"seen BETWEEN '"+startDate.utc().format("YYYY-MM-DDTHH:mm:ssZ")+"' AND '"+_vendor.utils.nextDate(endDate,"YYYY-MM-DD HH:mm").utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'"}return"seen >= '"+startDate.utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'"}if(endDate)return"seen < '"+_vendor.utils.nextDate(endDate,"YYYY-MM-DD HH:mm").utc().format("YYYY-MM-DDTHH:mm:ssZ")+"'";throw"Please speicify history range."},setSourceFlag:function(flag,show){null===show||void 0===show?this.sourceflag=this.sourceflag^flag:show&&0==(this.sourceflag&flag)?this.sourceflag+=flag:show||(this.sourceflag&flag)!==flag||(this.sourceflag-=flag)},getSourceFilter:function(){if(this.showDBCAResource&&this.showDFESResource&&this.showOtherExternalResource)return null;if(!this.showDBCAResource&&!this.showDFESResource&&!this.showOtherExternalResource)throw"Please choose at least one resource source.";var filter="";return this.showDBCAResource&&(filter+="'fleetcare','iriditrak','dplus','spot','other'"),this.showDFESResource&&(""!==filter&&(filter+=","),filter+="'dfes'"),this.showOtherExternalResource&&(""!==filter&&(filter+=","),filter+="'tracplus'"),"source_device_type in ("+filter+")"},ago:function(time){var now=(0,_vendor.moment)();return 1==now.diff((0,_vendor.moment)(time),"days")?now.diff((0,_vendor.moment)(time),"days")+" day":now.diff((0,_vendor.moment)(time),"days")>1?now.diff((0,_vendor.moment)(time),"days")+" days":1==now.diff((0,_vendor.moment)(time),"hours")?now.diff((0,_vendor.moment)(time),"hours")+" hr":now.diff((0,_vendor.moment)(time),"hours")>1?now.diff((0,_vendor.moment)(time),"hours")+" hrs":1==now.diff((0,_vendor.moment)(time),"minutes")?now.diff((0,_vendor.moment)(time),"minutes")+" min":now.diff((0,_vendor.moment)(time),"minutes")<1?"<1 min":now.diff((0,_vendor.moment)(time),"minutes")+" mins"},scrollToSelected:function(){if(0!==this.selectedFeatures.getLength()){for(var index=-1,i=0;i<this._featurelist.getLength()&&(!this.showFeature(this._featurelist.item(i))||(index+=1,this._featurelist.item(i)!==this.selectedFeatures.item(0)));i++);if(index>=0){var listElement=document.getElementById("tracking-list");index<listElement.children.length&&(listElement.scrollTop+=listElement.children[index].getBoundingClientRect().top-listElement.getBoundingClientRect().top)}}},toggleSelect:function(f){this.isFeatureSelected(f)?this.selectedFeatures.remove(f):this.selectedFeatures.push(f)},toggleViewportOnly:function(){this.viewportOnly=!this.viewportOnly,this.export.saveState()},toggleResourceLabels:function(){this.resourceLabels=!this.resourceLabels,this.export.saveState()},showResourceLabelsOrDirections:function(){var vm=this;$.each([this.trackingMapLayer,this.historyMapLayer],function(index,mapLayer){mapLayer&&!vm.$root.active.isHidden(mapLayer)&&mapLayer.changed()})},toggleResourceDirections:function(){this.resourceDirections=!this.resourceDirections,this.export.saveState()},showFeature:function(feat){return this.revision&&(!this.viewportOnly||feat.inViewport)},featureIconSrc:function(f){var vm=this;return vm.selectRevision&&this.map.getBlob(f,["icon","originalTint"],this.tints,function(){$("#device-icon-"+f.get("id")).attr("src",vm.featureIconSrc(f))})},isFeatureSelected:function(f){return this.selectedFeatures.getArray().findIndex(function(o){return f===o})>=0},downloadList:function(){var list=null;list=this.viewportOnly?this._featurelist.getArray().filter(function(f){return f.inViewport}):this._featurelist.getArray(),this.$root.export.exportVector(list,"trackingdata")},downloadSelectedCSV:function(){var deviceFilter="";return this.selectedFeatures.getLength()>0&&(deviceFilter="deviceid__in="+this.selectedFeatures.getArray().map(function(o){return o.get("deviceid")}).join(",")),deviceFilter},clearHistory:function(){var historyLayer=this.historyLayer;this.toggleHistory||(historyLayer.cql_filter="clearhistorylayer",this.$root.catalogue.onLayerChange(historyLayer,!1))},updateCQLFilter:function(wait){var vm=this;vm._updateCQLFilter||(vm._updateCQLFilter=debounce(function(updateType){try{var groupFilter=vm.groupFilter,deviceFilter="",sourceFilter=vm.getSourceFilter();vm.clippedOnly&&(vm.clippedFeatures.length>0?deviceFilter="deviceid in ('"+vm.clippedFeatures.join("','")+"')":vm.clippedOnly=!1);var cql_filter="";if((cql_filter=deviceFilter||(groupFilter&&sourceFilter?"("+groupFilter+") and ("+sourceFilter+")":groupFilter||(sourceFilter||"")))===vm.trackingLayer.cql_filter)return;vm.trackingLayer.cql_filter=cql_filter,vm.trackingMapLayer.set("updated",(0,_vendor.moment)().toLocaleString()),vm.trackingMapLayer.getSource().loadSource(deviceFilter?"querySavedSelection":"query")}catch(ex){alert(ex)}},500)),0===wait?vm._updateCQLFilter.call({wait:1}):void 0===wait||null===wait?vm._updateCQLFilter():vm._updateCQLFilter.call({wait:wait})},historyCQLFilter:function(){try{var historyLayer=this.historyLayer,deviceFilter="deviceid in ('"+this.selectedFeatures.getArray().map(function(o){return o.get("deviceid")}).join("','")+"')";if(historyLayer.cql_filter=deviceFilter+"and "+this.historyDateFilter(),this.$root.catalogue.onLayerChange(historyLayer,!0))this.info.hoverable.push(this.historyMapLayer);else{this.$root.map.getMapLayer(historyLayer).getSource().loadSource("query")}}catch(ex){alert(ex)}},featureFilter:function(f){var search=this.search?this.search.toLowerCase().trim():"";return!search||this.fields.some(function(key){return(""+f.get(key)).toLowerCase().indexOf(search)>-1})},featureOrder:function(a,b){var as=a.get("seen"),bs=b.get("seen");return as<bs?1:as>bs?-1:0},updateFeatureFilter:function(wait){var vm=this;vm._updateFeatureFilter||(vm._updateFeatureFilter=debounce(function(){var list=vm.features.getArray();if(vm.hasFeatureFilter&&(list=list.filter(vm.featureFilter)),vm._featurelist.clear(),vm._featurelist.extend(list),vm.setExtentFeatureSize(),vm.selectedFeatures.getLength()>0)if(0===list.length)vm.selectedFeatures.clear(),vm.clippedFeatures.splice(0,vm.clippedFeatures.length);else for(var index=vm.selectedFeatures.getLength()-1;index>=0;index--)list.find(function(f){return f===vm.selectedFeatures.item(index)})||vm.selectedFeatures.removeAt(index);vm.revision+=1},500)),0===wait?vm._updateFeatureFilter.call({wait:1}):void 0===wait||null===wait?vm._updateFeatureFilter():vm._updateFeatureFilter.call({wait:wait})},setExtentFeatureSize:function(){var size=0;this._featurelist.forEach(function(feat){feat.inViewport&&++size}),this.extentFeaturesSize=size},updateViewport:function(wait){var vm=this;vm._updateViewport||(vm._updateViewport=debounce(function(){var viewportExtent=vm.map.extent;vm.features.forEach(function(feat){feat.inViewport=feat.getGeometry()&&_vendor.ol.extent.containsCoordinate(viewportExtent,feat.getGeometry().getCoordinates())}),vm.setExtentFeatureSize(),vm.viewportOnly&&(vm.revision+=1)},500)),0===wait?vm._updateViewport.call({wait:1}):void 0===wait||null===wait?vm._updateViewport():vm._updateViewport.call({wait:wait})},clipToSelection:function(){if(0!==this.selectedFeatures.getLength()){this.clippedFeatures.splice(0,this.clippedFeatures.length);for(var index=0;index<this.selectedFeatures.getLength();index++)this.clippedFeatures.push(this.selectedFeatures.item(index).get("deviceid"));this.clippedOnly&&this.updateCQLFilter()}},setup:function(){this.annotations.restoreSelectedFeatures(),this.trackingMapLayer?this.active.isHidden(this.trackingMapLayer)&&this.active.toggleHidden(this.trackingMapLayer):this.catalogue.onLayerChange(this.trackingLayer,!0),this.annotations.selectable.push(this.trackingMapLayer),this.info.hoverable.push(this.trackingMapLayer),this.historyMapLayer&&this.info.hoverable.push(this.historyMapLayer),this.annotations.setTool(),this.$nextTick(this.adjustHeight)},teardown:function(){this.annotations.selectable.splice(0,this.annotations.selectable.length)}},ready:function(){var vm=this,trackingStatus=this.loading.register("tracking","Resource Tracking Component");vm._featurelist=new _vendor.ol.Collection,trackingStatus.phaseBegin("initialize",20,"Initialize"),$("#historyFromDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._historyFromDatePicker=$("#historyFromDate").data().datepicker}catch(ex){console.log(ex),this._historyFromDatePicker=null}$("#historyToDate").fdatepicker({format:"yyyy-mm-dd hh:ii",disableDblClickSelection:!0,leftArrow:"<<",rightArrow:">>",startDate:(0,_vendor.moment)().subtract(10,"years").format("YYYY-MM-DD")+" 00:00",endDate:(0,_vendor.moment)().format("YYYY-MM-DD")+" 23:59",pickTime:!0,minuteStep:1});try{this._historyToDatePicker=$("#historyToDate").data().datepicker}catch(ex){this._historyToDatePicker=null}this.changeHistoryRange();var resourceTrackingStyleFunc=function(layerId){return function(res){var feat=this,style=vm.map.cacheStyle(function(feat){var src=vm.map.getBlob(feat,["icon","tint"],vm.tints);return!!src&&new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:src,scale:.5,snapToPixel:!0}),text:new _vendor.ol.style.Text({offsetX:12,textAlign:"left",font:"12px Helvetica,Roboto,Arial,sans-serif",stroke:new _vendor.ol.style.Stroke({color:"#fff",width:4})}),stroke:new _vendor.ol.style.Stroke({color:[52,101,164,.6],width:4})})},feat,["icon","tint"]);if(style[0].getText&&style[0].getText()&&(res<.003&&vm.resourceLabels&&!vm.$root.active.isHidden(vm.map.getMapLayer(layerId))?style[0].getText().setText(feat.get("label")):style[0].getText().setText("")),res<.003&&vm.resourceDirections){var heading=feat.get("heading"),speed=feat.get("velocity");if(void 0!==heading&&(0!==heading||0!==speed))return vm.styleWithDirection?vm.styleWithDirection[0]=style[0]:vm.styleWithDirection=style.concat([new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:"/dist/static/symbols/device/direction.svg",scale:1,snapToPixel:!0})})]),vm.styleWithDirection[1].getImage().setRotation(heading/180*Math.PI),vm.styleWithDirection}return style}},deviceLabel=function(device){var name="";device.get("symbol"),device.get("district_display");return name=device.get("callsign")+" "+device.get("registration"),name=name.replace("null","")},addResourceFunc=function(styleFunc){return function(f){var now=(0,_vendor.moment)(),timestamp=(0,_vendor.moment)(f.get("seen")),tint="red";now.diff(timestamp,"hours")<24&&(tint="orange"),now.diff(timestamp,"hours")<3&&(tint="yellow"),now.diff(timestamp,"hours")<1&&(tint="green"),"dfes"===f.get("source_device_type")?f.set("icon",["dist/static/symbols/device/external_d.svg","dist/static/symbols/device/dfes_generic.svg"],!0):"tracplus"===f.get("source_device_type")?f.set("icon",["dist/static/symbols/device/external_e.svg","dist/static/symbols/device/"+f.get("symbolid")+".svg"],!0):f.set("icon","dist/static/symbols/device/"+f.get("symbolid")+".svg",!0),f.set("tint",tint,!0),f.set("originalTint",tint,!0),f.set("label",deviceLabel(f),!0),f.set("time",timestamp.toLocaleString(),!0),f.set("partialId","resourceInfo",!0),f.set("selectId",f.get("deviceid"),!0),f.setStyle(styleFunc,!0)}},deviceExtraHoverLabel=function(device){var rin_symbols=["heavy duty","gang truck","dozer","loader","grader","tender","float"],symbol=device.get("symbol"),return_label="",callsign_label="",callsign_display=device.get("callsign_display"),c_label="",u_label="",c_driver=" "+(device.get("current_driver")||""),u_driver=" "+(device.get("usual_driver")||""),u_location=" "+(device.get("usual_location")||""),contractor_label="Contractor: "+(device.get("contractor_details")||"");return callsign_display&&-1===rin_symbols.indexOf(symbol)&&(callsign_label="Callsign: "+callsign_display)," "!=u_driver?(u_label+="Usual driver:"+u_driver," "!=u_location&&(u_label+=", Location:"+u_location)):" "!=u_location&&(u_label+="Usual location:"+u_location)," "!=c_driver&&(c_label+="Current driver:"+c_driver),""!=callsign_label&&(return_label+=callsign_label),""!=callsign_label&""!=c_label?return_label+="<br>"+c_label:""!=c_label&&(return_label+=c_label),""==c_label&&""==callsign_label||""==u_label?""!=u_label&&(return_label+=u_label):return_label+="<br>"+u_label,""==c_label&&""==u_label||"Contractor: "==contractor_label?"Contractor: "!=contractor_label&&(return_label+=contractor_label):return_label+="<br>"+contractor_label,return_label};trackingStatus.phaseBegin("load_resources",30,"Load resources",!1,!0);var _addResourceFunc=addResourceFunc(resourceTrackingStyleFunc("dpaw:resource_tracking_live"));this.$root.fixedLayers.push({type:"WFSLayer",name:"Resource Tracking",id:"dpaw:resource_tracking_live",features:vm._featurelist,cql_filter:vm.getSourceFilter(),getFeatureInfo:function(f){var extra_device_label=deviceExtraHoverLabel(f);return{name:f.get("label"),img:vm.map.getBlob(f,["icon","tint"]),comments:"("+vm.ago(f.get("seen"))+" ago, Heading:"+f.get("heading")+"&deg;)<br>"+extra_device_label}},refresh:60,onerror:function(status,message){trackingStatus.phaseFailed("load_resources",status+" : "+message)},onload:function(loadType,vectorSource,features,defaultOnload){function processResources(){if($.each(features,function(index,f){_addResourceFunc(f)}),vm.selectedFeatures.getLength()>0)for(var loadedFeature=null,index=vm.selectedFeatures.getLength()-1;index>=0;index--){var f=vm.selectedFeatures.item(index);loadedFeature=features.find(function(f1){return f1.get("deviceid")===f.get("deviceid")}),loadedFeature?vm.selectedFeatures.setAt(index,loadedFeature):vm.selectedFeatures.removeAt(index)}if(vm.features.clear(),vm.features.extend(features.sort(vm.featureOrder)),vm.updateViewport(0),vm.updateFeatureFilter(0),"querySavedSelection"===loadType)for(var index=vm.clippedFeatures.length-1;index>=0;index--)features.find(function(f){return f.get("deviceid")===vm.clippedFeatures[index]})||vm.clippedFeatures.splice(index,1);trackingStatus.phaseEnd("load_resources")}
if((null===vm.whoami.editVehicle||void 0===vm.whoami.editVehicle)&&features.length>0){var f=features.find(function(f){return"tracplus"!=f.get("source_device_type")});f?_vendor.utils.checkPermission(vm.env.resourceTrackingService+"/sss_admin/tracking/device/"+f.get("id")+"/change/","GET",function(allowed){vm.whoami.editVehicle=allowed,processResources()}):processResources()}else processResources()}},{type:"WFSLayer",name:"Resource Tracking History",id:"dpaw:resource_tracking_history",onadd:function(addResource){return function(f){f.getGeometry()instanceof _vendor.ol.geom.Point&&addResource(f)}}(addResourceFunc(resourceTrackingStyleFunc("dpaw:resource_tracking_history"))),cql_filter:!1,getFeatureInfo:function(f){if(f.getGeometry()instanceof _vendor.ol.geom.Point){var name=deviceLabel(f),extra_device_label=deviceExtraHoverLabel(f);return{name:name,img:vm.map.getBlob(f,["icon","tint"]),comments:"("+f.get("label")+", Heading:"+f.get("heading")+"&deg;)<br>"+extra_device_label}}return{name:f.get("name"),img:vm.map.getBlob(f,["icon","tint"]),comments:"("+f.get("startTime")+" - "+f.get("endTime")+")"}},onload:function(loadType,vectorSource,features,defaultOnload){defaultOnload(loadType,vectorSource,features);var devices={};features.forEach(function(feature){var deviceid=feature.get("deviceid");deviceid in devices||(devices[deviceid]=[]),devices[deviceid].push(feature)}),Object.keys(devices).forEach(function(device){devices[device].sort(vm.featureOrder);var coords=devices[device].map(function(point){return point.set("label",(0,_vendor.moment)(point.get("seen")).format("MMM DD HH:mm")),point.getGeometry().getCoordinates()}),f=devices[device][0],name=deviceLabel(f),feature=new _vendor.ol.Feature({name:name+" path",icon:f.get("icon"),tint:f.get("tint"),endTime:(0,_vendor.moment)(f.get("seen")).format("MMM DD HH:mm"),startTime:(0,_vendor.moment)(devices[device][devices[device].length-1].get("seen")).format("MMM DD HH:mm"),geometry:new _vendor.ol.geom.LineString(coords)});vectorSource.addFeature(feature)})}}),[{name:"Resourcetracking Select",label:"Select",icon:"fa-mouse-pointer",scope:["tracking"],selectedFeatures:vm.selectedFeatures,keepSelection:!0,interactions:[vm.annotations.dragSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}}),vm.annotations.polygonSelectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}}),vm.annotations.selectInterFactory({listeners:{selected:function(selectedFeatures){vm.scrollToSelected()}}})],onSet:function(){vm.annotations.ui.dragSelectInter.setMulti(!0),vm.annotations.ui.selectInter.setMulti(!0)},comments:[{name:"Tips",description:["Select all features using shortcut key 'Ctrl + A'","Select features using mouse.","Hold 'Ctrl' to enable polygon selection","Delete selected features using key 'Del'"]}]}].forEach(function(tool){vm.annotations.tools.push(tool)}),trackingStatus.phaseEnd("initialize"),trackingStatus.phaseBegin("gk-init",30,"Listen 'gk-init' event"),this.$on("gk-init",function(){trackingStatus.phaseEnd("gk-init"),trackingStatus.phaseBegin("attach_events",10,"Attach events"),vm.map.olmap.getView().on("propertychange",function(){vm.updateViewport()}),vm.selectedFeatures.on("add",function(event){vm.selectRevision+=1}),vm.selectedFeatures.on("remove",function(event){vm.selectRevision+=1}),vm.map.olmap.on("removeLayer",function(ev){"dpaw:resource_tracking_live"===ev.mapLayer.get("id")&&(vm.features.clear(),vm._featurelist.clear())}),vm._resolutionChanged=debounce(function(ev){vm.featureLabelDisabled=vm.map.olmap.getView().getResolution()>=.003,vm.featureDirDisabled=vm.map.olmap.getView().getResolution()>=.003},200),vm._resolutionChanged(),vm.map.olmap.getView().on("change:resolution",function(){vm._resolutionChanged()}),trackingStatus.phaseEnd("attach_events"),trackingStatus.phaseBegin("init_tools",10,"Initialize tools"),$.each([vm.annotations.ui.defaultPan],function(index,t){t.scope=t.scope||[],t.scope.push("tracking")}),vm.tools=vm.annotations.tools.filter(function(t){return t.scope&&t.scope.indexOf("tracking")>=0}),trackingStatus.phaseEnd("init_tools")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n  <div class="tabs-panel" id="menu-tab-tracking">\n    <div class="row collapse">\n      <div class="columns">\n        <ul class="tabs" id="tracking-tabs">\n          <li class="tabs-title is-active"><a class="label" aria-selected="true">Resource Tracking</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="row collapse" id="tracking-tab-panels">\n      <div class="columns">\n        <div class="tabs-content vertical" data-tabs-content="tracking-tabs">\n          <div id="tracking-list-tab" class="tabs-panel is-active" v-cloak="">\n            <div id="tracking-list-controller-container">\n            <div class="tool-slice row collapse">\n              <div class="small-12">\n                <div class="expanded button-group">\n                  <a v-for="t in tools | filterIf \'showName\' undefined" class="button button-tool" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}}</a>\n                </div>\n                <div class="row resetmargin">\n                  <div v-for="t in tools | filterIf \'showName\' true" class="small-6" v-bind:class="{\'rightmargin\': $index % 2 === 0}">\n                    <a class="expanded secondary button" v-bind:class="{\'selected\': t.name == annotations.tool.name}" @click="annotations.setTool(t)" v-bind:title="t.label">{{{ annotations.icon(t) }}} {{ t.label }}</a>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div class="row">\n              <div class="small-9 columns">\n                <div class="row">\n                  <div class="switch tiny">\n                    <input class="switch-input" id="resourcesInViewport" type="checkbox" v-bind:checked="viewportOnly" @change="toggleViewportOnly">\n                    <label class="switch-paddle" for="resourcesInViewport">\n                      <span class="show-for-sr">Viewport resources only</span>\n                    </label>\n                  </div>\n                  <label for="resourcesInViewport" class="side-label">Restrict to viewport ({{extentFeaturesSize}}/{{featurelistSize}})</label>\n                </div>\n              </div>\n              <div class="small-3 columns" style="text-align:right;padding-right:0px">\n                <span v-on:click="showToggles = !showToggles" style="cursor:pointer"><i class="fa {{showToggles?\'fa-angle-double-up\':\'fa-angle-double-down\'}}" aria-hidden="true"></i> Toggles</span>\n              </div>\n            </div>\n            <div v-show="showToggles">\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleDBCAResourceLabels" type="checkbox" v-bind:disabled="clippedOnly" v-bind:checked="showDBCAResource" @change="showDBCAResource = !showDBCAResource">\n                <label class="switch-paddle" for="toggleDBCAResourceLabels">\n                  <span class="show-for-sr">Show DBCA Resources</span>\n                </label>\n              </div>\n              <label for="toggleDBCAResourceLabels" class="side-label">Show DBCA Resources</label>\n            </div>\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleDFESResourceLabels" type="checkbox" v-bind:disabled="clippedOnly" v-bind:checked="showDFESResource" @change="showDFESResource = !showDFESResource">\n                <label class="switch-paddle" for="toggleDFESResourceLabels">\n                  <span class="show-for-sr">Show DFES Resources</span>\n                </label>\n              </div>\n              <label for="toggleDFESResourceLabels" class="side-label">Show DFES Resources</label>\n            </div>\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleOtherExternalResourceLabels" type="checkbox" v-bind:disabled="clippedOnly" v-bind:checked="showOtherExternalResource" @change="showOtherExternalResource = !showOtherExternalResource">\n                <label class="switch-paddle" for="toggleOtherExternalResourceLabels">\n                  <span class="show-for-sr">Show Other Aviation Resources</span>\n                </label>\n              </div>\n              <label for="toggleDBCAResourceLabels" class="side-label">Show Other Aviation Resources</label>\n            </div>\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleResourceLabels" type="checkbox" v-bind:checked="resourceLabels" @change="toggleResourceLabels" v-bind:disabled="featureLabelDisabled">\n                <label class="switch-paddle" for="toggleResourceLabels">\n                  <span class="show-for-sr">Display resource labels</span>\n                </label>\n              </div>\n              <label for="toggleResourceLabels" class="side-label">Display resource labels</label>\n            </div>\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleResourceDirections" type="checkbox" v-bind:checked="resourceDirections" @change="toggleResourceDirections" v-bind:disabled="featureDirDisabled">\n                <label class="switch-paddle" for="toggleResourceDirections">\n                  <span class="show-for-sr">Display resource directions</span>\n                </label>\n              </div>\n              <label for="toggleResourceDirections" class="side-label">Display resource directions</label>\n            </div>\n\n            <div class="row">\n              <div class="switch tiny">\n                <input class="switch-input" id="toggleResourceInfo" type="checkbox" v-bind:disabled="!systemsetting.hoverInfoSwitchable" v-bind:checked="systemsetting.hoverInfo" @change="systemsetting.toggleHoverInfo">\n                <label class="switch-paddle" for="toggleResourceInfo">\n                  <span class="show-for-sr">Display hovering resource info</span>\n                </label>\n              </div>\n              <label for="toggleResourceInfo" class="side-label">Display hovering resource info</label>\n            </div>\n\n            <div class="row">\n              <div class="small-12">\n                <div class="columns">\n                  <div class="row">\n                    <div class="switch tiny">\n                      <input class="switch-input" id="clippedResourceOnly" v-bind:disabled="clippedFeatures.length === 0" type="checkbox" v-model="clippedOnly" @change="updateCQLFilter()">\n                      <label class="switch-paddle" for="clippedResourceOnly">\n                        <span class="show-for-sr">Show saved selection</span>\n                     </label>\n                    </div>\n                    <label for="clippedResourceOnly" style="side-label" class="side-label">Show saved selection\n                    </label>\n                    <a class="button tiny secondary" title="Save selection" style="margin-top:0px;margin-bottom:5px;padding-top:6px;padding-left:1px;padding-right:1px;padding-bottom:0px;border:0px;height:24px;font-size:0.73rem;background-color:#2199e8" @click="clipToSelection()" v-bind:disabled="selectedFeaturesSize === 0">\n                        Save selection ({{selectedFeaturesSize}})\n                    </a> \n                    ({{clippedFeatures.length}})\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            </div>\n            <div class="row collapse">\n              <div class="small-6 columns">\n                <select name="select" v-model="groupFilter" @change="updateCQLFilter()" v-bind:disabled="clippedOnly">\n                  <option value="" selected="">All resources</option> \n                  <option value="symbolid LIKE \'%aircraft\'">Aircraft</option>\n                  <option value="symbolid LIKE \'%comms_bus\'">Communications Bus</option>\n                  <option value="symbolid LIKE \'%gang_truck\'">Gang Truck</option>\n                  <option value="symbolid LIKE \'%heavy_duty\'">Heavy Duty</option>\n                  <option value="(symbolid LIKE \'%heavy_duty\' OR symbolid LIKE \'%gang_truck\')">Gang Truck and Heavy Duty</option>\n                  <option value="symbolid LIKE \'%light_unit\'">Light Unit</option>\n                  <option value="(symbolid LIKE \'%dozer\' OR symbolid LIKE \'%grader\' OR symbolid LIKE \'%loader\')">Machinery</option>\n                  <option value="(symbolid LIKE \'%2_wheel_drive\' OR symbolid LIKE \'%4_wheel_drive_passenger\' OR symbolid LIKE \'%4_wheel_drive_ute\')">Other Light Fleet</option>\n                </select>\n              </div>\n              <div class="small-6 columns">\n                <input type="search" v-model="search" placeholder="Find a resource" @keyup="updateFeatureFilter(500)">\n              </div>\n            </div>\n            <div class="row">\n              <div class="small-7">\n                <div class="columns">\n                  <div class="row">\n                    <div class="switch tiny">\n                      <input class="switch-input" id="resourceHistory" type="checkbox" v-model="toggleHistory" @change="clearHistory">\n                      <label class="switch-paddle" for="resourceHistory">\n\t\t\t\t\t\t<span class="show-for-sr">Query history</span>\n\t\t\t\t\t  </label>\n                    </div>\n                    <label for="resourceHistory" class="side-label">Query history</label>\n                  </div>\n                </div>\n              </div>\n              <div class="small-5">\n                <a title="Zoom to selected" class="button" @click="map.zoomToSelected()"><i class="fa fa-search"></i></a>\n                <a title="Download list as geoJSON" class="button" @click="downloadList()"><i class="fa fa-download"></i></a>\n                <a title="Download all or selected as CSV" class="button" href="{{selectRevision&amp;&amp;env.resourceTrackingService}}/devices.csv?{{downloadSelectedCSV()}}" target="_blank"><i class="fa fa-table"></i></a>\n              </div>\n            </div>\n            <div id="history-panel" v-show="toggleHistory">\n              <div class="row collapse tool-slice">\n                <div class="small-2">\n                  <label for="historyFrom">From:</label>\n                </div>\n                <div class="small-5">\n                  <input type="text" id="historyFromDate" class="span2" v-model="historyFromDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="historyRange !== \'-1\'" readonly="">\n                </div>\n                <div class="small-5">\n                  <select name="select" v-model="historyRange">\n                      <option value="21001">Last hour</option> \n                      <option value="21003">Last 3 hours</option> \n                      <option value="21024">Last 24 hours</option> \n                      <option value="31007">Last 7 days</option> \n                      <option value="31030">Last 30 days</option> \n                      <option value="-1">User Defined</option> \n                </select>\n                </div>\n              </div>\n              <div class="row collapse tool-slice">\n                <div class="small-2">\n                  <label for="historyTo">To:</label>\n                </div>\n                <div class="small-5">\n                  <input type="text" id="historyToDate" class="span2" v-model="historyToDate" placeholder="YYYY-MM-DD HH:mm" v-bind:disabled="historyRange !== \'-1\'" readonly="">\n                </div>\n                <div class="small-3"></div>\n                <div class="small-2">\n                  <button v-bind:disabled="queryHistoryDisabled" class="button" style="float: right" @click="historyCQLFilter">Go</button>\n                </div>\n              </div>\n            </div>\n            </div>\n\n\n            <div id="tracking-list" class="layers-flexibleframe scroller" style="margin-left:-15px; margin-right:-15px;">\n              <template v-for="f in featurelist" track-by="get(\'id\')">\n              <div class="row feature-row" v-if="showFeature(f)" v-bind:class="{\'feature-selected\': isFeatureSelected(f) }" @click="toggleSelect(f)">\n                <div class="columns">\n                  \x3c!--a v-if="whoami.editVehicle && [\'tracplus\',\'dfes\'].indexOf(f.get(\'source_device_type\')) < 0" @click.stop.prevent="utils.editResource($event)" title="Edit resource" href="{{env.resourceTrackingService}}/sss_admin/tracking/device/{{ f.get(\'id\') }}/change/" target="{{env.resourceTrackingService}}" class="button tiny secondary float-right"><i class="fa fa-pencil"></i></a--\x3e\n                  <a v-if=" [\'tracplus\',\'dfes\'].indexOf(f.get(\'source_device_type\')) < 0" @click.stop.prevent="utils.editResource($event)" title="Edit resource" href="{{env.resourceTrackingService}}/sss_admin/tracking/device/{{ f.get(\'id\') }}/change/" target="{{env.resourceTrackingService}}" class="button tiny secondary float-right"><i class="fa fa-pencil"></i></a>\n                  \n\t\t\t\t  <div class="feature-title"><img class="feature-icon" id="device-icon-{{f.get(\'id\')}}" v-bind:src="featureIconSrc(f)"> {{ f.get(\'label\') }} <i><small>({{ ago(f.get(\'seen\')) }})</small></i>\n                  </div>\n                </div>\n              </div>\n              </template>\n            </div>\n\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#historyFromDate, #historyToDate {\n    cursor:pointer\n}\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-8224c5c8",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-8224c5c8",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],169:[function(require,module,exports){(function(global){(function(){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n.about-pane {\n    font-size: 12px;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{settings:"settings",overviewMap:"settings.overviewMap",undoLimit:"settings.undoLimit",measureFeature:"settings.measureFeature",lengthUnit:"settings.lengthUnit",areaUnit:"settings.areaUnit",rightHandTools:"settings.rightHandTools",graticule:"settings.graticule",showHints:"showHints",tourVersion:"settings.tourVersion",whoami:"whoami"},data:function(){return{configuredUndoLimit:0}},computed:{loading:function(){return this.$root.loading},profile:function(){return this.$root.profile},measure:function(){return this.$root.measure},info:function(){return this.$root.info},annotations:function(){return this.$root.annotations},export:function(){return this.$root.export},drawinglogs:function(){return this.$root.annotations.drawinglogs},map:function(){return this.$root.map},undoLimitDesc:function(){return(this.configuredUndoLimit<0?"Off":0===this.configuredUndoLimit?"Unlimited":this.configuredUndoLimit)+"/"+(this.undoLimit<0?"Off":0===this.undoLimit?"Unlimited":this.undoLimit)},configuringUndoLimit:{get:function(){return this.configuredUndoLimit},set:function(val){var vm=this;val<0&&(val=-1),this.configuredUndoLimit=val,this._changeUndoLimit=vm._changeUndoLimit||global.debounce(function(){vm.drawinglogs.size=this.configuredUndoLimit},5e3),this._changeUndoLimit()}},undoEnabled:function(){return this.configuredUndoLimit>=0},hoverInfoSwitchable:function(){return this.$root.annotations.tool&&"Pan"===this.$root.annotations.tool.name},hoverInfo:function(){return!!this.map&&this.info.enabled}},watch:{rightHandTools:function(newValue,oldValue){this.showRightHandTools(newValue)},overviewMap:function(newValue,oldValue){this.showOverviewMap(newValue)},showHints:function(newValue,oldValue){var vm=this;this.$nextTick(function(){vm.$root.setHintsHeight()})}},methods:{logout:function(){document.location="/logout"},setup:function(){this.annotations.setTool()},saveState:function(wait){var vm=this;wait=wait||1,this._saveState=this._saveState||debounce(function(){vm.export.saveState()},wait),this._saveState.call({wait:wait})},enableUndo:function(enable){this.configuringUndoLimit=enable?this.undoLimit<0?0:this.undoLimit:-1},toggleRightHandTools:function(ev){this.rightHandTools=ev.target.checked,this.saveState()},showRightHandTools:function(show){var vm=this;_vendor.$.each(vm.map.mapControls,function(key,control){["overviewMap","fullScreen","search","mousePosition","attribution"].indexOf(key)<0&&vm.map.enableControl(key,show)})},toggleGraticule:function(ev){this.graticule=ev.target.checked,this.saveState()},toggleShowHints:function(){this.showHints=!this.showHints},toggleHoverInfo:function(ev){this.info.hoverInfo=ev.target.checked,this.saveState()},toggleMeasureFeature:function(ev){this.measureFeature=ev.target.checked,this.export.saveState()},toggleOverviewMap:function(ev){this.overviewMap=!this.overviewMap,this.export.saveState()},showOverviewMap:function(show){show&&this.map.getControl("overviewMap").setCollapsed(!1),this.map.enableControl("overviewMap",show)},reset:function(){window.confirm("This will clear all of your selected layers and drawings. Are you sure?")&&localforage.setItem("sssOfflineStore",{settings:this.$root.persistentData.settings}).then(function(v){document.location.reload()})},resetSettings:function(){window.confirm("This will clear all customized settings and reset to system default settings. Are you sure?")&&(this.$root.store.settings=_vendor.$.extend({},JSON.parse(JSON.stringify(this.$root.defaultSettings)),{tourVersion:this.tourVersion}),this.export.saveState())}},ready:function(){var vm=this,settingStatus=this.loading.register("setting","Setting Component");this.configuredUndoLimit=this.undoLimit,settingStatus.phaseBegin("gk-postinit",80,"Listen 'gk-postinit' event",!0,!0),this.$on("gk-postinit",function(){settingStatus.phaseEnd("gk-postinit"),settingStatus.phaseBegin("initialize",20,"Initialize",!0,!1),vm.showOverviewMap(vm.overviewMap),vm.showRightHandTools(vm.rightHandTools),settingStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel is-active" id="systemsetting" v-cloak="">\n  <div class="row ">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="setting-tabs">\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleGraticule" type="checkbox" v-bind:checked="graticule" @change="toggleGraticule">\n              <label class="switch-paddle" for="toggleGraticule">\n                  <span class="show-for-sr">Display graticule</span>\n              </label>\n            </div>\n            <label for="toggleGraticule" class="side-label">Display graticule</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleOverviewMap" type="checkbox" v-bind:checked="overviewMap" @change="toggleOverviewMap">\n              <label class="switch-paddle" for="toggleOverviewMap">\n                  <span class="show-for-sr">Show overview map</span>\n              </label>\n            </div>\n            <label for="toggleOverviewMap" class="side-label">Show overview map</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleHoverInfo" type="checkbox" v-bind:checked="hoverInfo" @change="toggleHoverInfo">\n              <label class="switch-paddle" for="toggleHoverInfo">\n                <span class="show-for-sr">Display hovering feature info</span>\n              </label>\n            </div>\n            <label for="toggleHoverInfo" class="side-label">Display hovering feature info</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleRightHandTools" type="checkbox" v-bind:checked="rightHandTools" @change="toggleRightHandTools">\n              <label class="switch-paddle" for="toggleRightHandTools">\n                <span class="show-for-sr">Show right hand tools</span>\n              </label>\n            </div>\n            <label for="toggleRightHandTools" class="side-label">Show right hand tools</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="switch tiny">\n              <input class="switch-input" id="toggleMeasureFeature" type="checkbox" v-bind:checked="measureFeature" @change="toggleMeasureFeature">\n              <label class="switch-paddle" for="toggleMeasureFeature">\n                <span class="show-for-sr">Measure feature</span>\n              </label>\n            </div>\n            <label for="toggleMeasureFeature" class="side-label">Measure feature</label>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Distance unit:</label>\n              </div>\n              <div class="small-8">\n                  <select name="lengthUnit" v-model="lengthUnit" @change="saveState()">\n                      <option value="nm">Nautical Mile</option>      \n                      <option value="mile">Mile</option>      \n                      <option value="km">Kilometer</option>      \n                  </select>\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Area unit:</label>\n              </div>\n              <div class="small-8">\n                  <select name="areaUnit" v-model="areaUnit" @change="saveState()">\n                      <option value="ha">Hectare</option>      \n                      <option value="km2">km2</option>      \n                  </select>\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n            <div class="columns small-4"><label class="tool-label">Undo limit:<br>{{ undoLimitDesc }}</label></div>\n            <div class="columns small-7"><input class="layer-opacity" type="range" min="0" max="1000" step="10" v-model="configuringUndoLimit" v-bind:disabled="!undoEnabled"></div>\n            <div class="columns small-1">\n              <a title="Disable undo feature" v-if="undoEnabled" class="button tiny secondary float-right" @click="enableUndo(false)"><i class="fa fa-stop"></i></a>\n              <a title="Enable undo feature" v-if="!undoEnabled" class="button tiny secondary float-right" @click="enableUndo(true)"><i class="fa fa-play"></i></a>\n            </div>\n          </div>\n\n         <div class="tool-slice row collapse">\n             <hr class="small-12">\n             <div class="small-3">\n                 <label class="tool-label">Reset:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="reset-sss" class="button alert" title="Clear the current drawing and layer selection (saved views will be retained)" @click="reset()"><i class="fa fa-refresh"></i> Reset SSS</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="reset-settings" class="button alert" title="Reset to system default settings" @click="resetSettings()"><i class="fa fa-refresh"></i> Reset Settings</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n                 <label class="tool-label">Tour:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="take-tour" class="button" title="Take a tour of the new SSS interface" @click="$root.takeTour()"><i class="fa fa-book"></i> Take Tour</a>\n                </div>\n             </div>\n\n             <div class="small-3">\n                 <label class="tool-label">Logout:</label>\n             </div>\n             <div class="small-9">\n                <div class="expanded button-group">\n                  <a id="take-tour" class="button" title="Logout" @click="logout()"><i class="fa fa-sign-out"></i> {{whoami.email}}</a>\n                </div>\n             </div>\n          </div>\n          \n\n          <div class="about-pane row collapse about-pane">\n            <hr class="small-12">\n            <div class="small-12">\n              <p><b>DISCLAIMER:</b> The Department of Parks and Wildlife does not guarantee that this map is without flaw of any kind and disclaims all liability for any error, or loss or other consequence which may arise from relying on any information depicted. Apart from any use permitted under the Copyright Act, no part of this map may be reproduced by any process without the written permission of the authors. Crown copyright reserved.</p>\n            </div>\n          </div>\n      </div>\n    </div>\n  </div>\n\n  <img src="dist/static/images/about.svg" class="right-bottom-icon" data-open="aboutModal">\n\n  <div class="reveal" id="aboutModal" data-reveal="">\n      <div class="about-pane row collapse about-pane">\n        <h5 class="small-12">{{profile.description}}</h5>\n        <div class="small-4">Version:</div>\n        <span class="small-8">{{profile.version}}</span>\n        <div class="small-4">Branch:</div>\n        <span class="small-8">{{profile.repositoryBranch}}</span>\n        <div class="small-4">Last commit:</div>\n        <span class="small-8">{{profile.lastCommit}}</span>\n        <div class="small-4">Commit date:</div>\n        <span class="small-8">{{profile.commitDate}}</span>\n        <div class="small-12">\n          <p><br>Â© 2016 Government of Western Australia<br>Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a> (the "License"). Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License.</p>\n        </div>\n      </div>\n      <button class="close-button" data-close="" aria-label="Close Accessible Modal" type="button">\n          <span aria-hidden="true">Ã</span>\n      </button>\n  </div>\n\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n.about-pane {\n    font-size: 12px;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-3d0488a8",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-3d0488a8",module.exports))}()}).call(this)
}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],170:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#toolbox_control button{\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n#toolbox_control .selected{\n    background-color: #2199E8;\n}\n#toolbox_control .warning{\n    background-color: rgba(125, 47, 34, 0.7);\n}\n#toolbox_control {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    width:48px;\n    height:48px;\n    padding: 0;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{},data:function(){return{tool:{},tools:[],showTools:!1}},computed:{loading:function(){return this.$root.loading},annotations:function(){return this.$root.annotations},map:function(){return this.$root.map},env:function(){return this.$root.env},components:function(){return env.weatherForecastUrl?[this.$root.weatheroutlook,this.$root.weatherforecast,this.$root.featuredetail,this.$root.measure]:[this.$root.weatheroutlook,this.$root.featuredetail,this.$root.measure]},enabled:function(){return this.layers.length>0},topPosition:function(){return 180},topPositionStyle:function(){return"top:"+this.topPosition+"px"},mapControl:function(){return this._controller||(this._controller=new _vendor.ol.control.Control({element:(0,_vendor.$)("#toolbox_control").get(0),target:(0,_vendor.$)("#external-controls").get(0)})),this._controller},isControlActivated:function(){return!(!this.tool||!this.tool._component||this.tool._component===this)&&this.tool._component.isToolActivated(this.tool)},isControlWarning:function(){return!!(this.tool&&this.tool._component&&this.tool._component!==this&&this.tool._component.isToolWarning)&&this.tool._component.isToolWarning(this.tool)},showTool:function(){return this.tool&&this.tool._component!==this&&!this.showTools},toolTitle:function(){return this.tool.title}},watch:{},methods:{inToolbox:function(component){return this.components.findIndex(function(o){return o===component})>=0},selectTool:function(tool,enabled){this.showTools=!1,enabled=null===enabled||void 0===enabled||enabled,tool._component&&tool._component!==this?(this.tool=tool,this.tool._component.selectTool(this.tool),enabled&&this.tool._component.toggleTool(!0,this.tool)):(this.isControlActivated&&this.toggleTool(),this.tool=tool)},toggleTool:function(enabled){this.tool._component&&this.tool._component!==this&&this.tool._component.toggleTool(enabled,this.tool)},isToolSelected:function(t){return this.tool===t},showAssistantButton:function(button){return!this.showTools&&(this.tool._component!==this&&this.tool._component.showAssistantButton&&this.tool._component.showAssistantButton(button))},clickAssistantButton:function(button){this.tool._component&&this.tool._component!==this&&this.tool._component.clickAssistantButton(button)}},ready:function(){var vm=this;this._toolboxStatus=vm.loading.register("toolbox","Toolbox Component"),this._toolboxStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0),this.$on("gk-init",function(){vm._toolboxStatus.phaseEnd("gk-init"),vm._toolboxStatus.phaseBegin("initialize",20,"Initialize",!0,!1);var defaultTool=null,nonTool={toolid:"deselect-tool",title:"",icon:"/dist/static/images/non-tool.svg",_component:vm,assistantButtons:[]};vm.tools.push(nonTool),defaultTool=nonTool;var index=1;_vendor.$.each(vm.components,function(index1,component){_vendor.$.each(component.tools,function(index2,tool){tool._component=component,tool.assistantButtons=null===tool.assistantButtons||void 0===tool.assistantButtons?[]:tool.assistantButtons,vm.tools.splice(4*Math.floor(index/4),0,tool),null===defaultTool&&(defaultTool=tool),index+=1})}),vm.tools.length&&(vm.map.mapControls.toolbox={enabled:!1,autoenable:!1,controls:vm.mapControl},vm.selectTool(defaultTool,!1)),vm._toolboxStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div style="display:none">\n<div id="toolbox_control" class="ol-selectable ol-control" v-bind:style="topPositionStyle">\n    <button type="button" id="toolbox_expand" style="margin-bottom:1px" @click="showTools=!showTools" title="Toolbox">\n        <img src="/dist/static/images/toolbox.svg" width="36" height="36">\n    </button>\n    <button type="button" id="toolbox_tool" title="{{toolTitle}}" v-show="showTool" @click="toggleTool()" v-bind:class="{\'selected\':isControlActivated,\'warning\':isControlWarning}">\n        <img v-bind:src="tool.icon" width="48" height="48">\n    </button>\n    <div v-show="showTools" style="position:absolute;width:200px;right:0px" id="toolbox_tools">\n        <button type="button" v-for="t in tools" title="{{t.title}}" id="{{t.toolid}}" style="margin-left:2px;margin-bottom:1px;float:right" track-by="$index" @click.stop.prevent="selectTool(t)" v-bind:class="{\'selected\':isToolSelected(t)}">\n            <img v-bind:src="t.icon" width="36" height="36">\n        </button>\n    </div>\n    <template v-for="t in tool.assistantButtons" track-by="$index">\n        <button type="button" v-show="showAssistantButton(t)" style="margin-top:1px" title="{{t.title}}" @click.stop.prevent="clickAssistantButton(t)">\n            <img v-bind:src="t.icon">\n        </button>\n    </template>\n</div>\n</div>\n\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#toolbox_control button{\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n#toolbox_control .selected{\n    background-color: #2199E8;\n}\n#toolbox_control .warning{\n    background-color: rgba(125, 47, 34, 0.7);\n}\n#toolbox_control {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    width:48px;\n    height:48px;\n    padding: 0;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-a39dca4c",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-a39dca4c",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],171:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{},data:function(){return{forecastTool:{},forecastTools:[{toolid:"incident-weather-forecast",title:"Incident Weather Forecast",icon:"/dist/static/images/weather-forecast.svg"}]}},computed:{loading:function(){return this.$root.loading},map:function(){return this.$root.map},annotations:function(){return this.$root.annotations},env:function(){return this.$root.env},isControlSelected:function(){return!!this.annotations&&this.annotations.tool===this._weatherforecastTool},tools:function(){return this.forecastTools}},watch:{isControlSelected:function(newValue,oldValue){newValue?this._overlay.setMap(this.map.olmap):this._overlay.setMap(null)}},methods:{toggleTool:function(enable){if(this.warning=!1,this._weatherforecastTool){if(!0===enable&&this.annotations.tool===this._weatherforecastTool)return;if(!1===enable&&this.annotations.tool!==this._weatherforecastTool)return;this.annotations.tool===this._weatherforecastTool?this.annotations.setTool(this.annotations.currentTool,!0):this.annotations.setTool(this._weatherforecastTool)}else this.annotations.setTool(this.annotations.currentTool,!0)},selectTool:function(tool){this.forecastTool!==tool&&(this.forecastTool=tool)},isToolActivated:function(tool){return this.isControlSelected},setPosition:function(coordinate){this._features.clear(),this._features.push(new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coordinate)}))},getWeatherForecast:function(coordinate){var vm=this;vm._getWeatherForecast=vm._getWeatherForecast||function(coordinate,position){var requestData={point:coordinate,position:position,forecast_url:vm.env.weatherForecastUrl};(0,_vendor.$)("#weatherforecast_data").val(JSON.stringify(requestData)),_vendor.utils.submitForm("get_weatherforecast",{width:screen.width>1890?1890:screen.width,height:screen.height>1060?1060:screen.height},!0)},this.map.getPosition(coordinate,function(position){vm._getWeatherForecast.call(this,coordinate,position)})}},ready:function(){var vm=this;this._weatherforecastStatus=vm.loading.register("weatherforecast","Weather Forecast Component"),this._weatherforecastStatus.phaseBegin("gk-init",80,"Listen 'gk-init' event",!0,!0);this.$root.map;this.$on("gk-init",function(){vm._weatherforecastStatus.phaseEnd("gk-init"),vm._weatherforecastStatus.phaseBegin("initialize",20,"Initialize",!0,!1),vm._features=new _vendor.ol.Collection,vm._features.on("add",function(event){vm.getWeatherForecast(event.element.getGeometry().getCoordinates())}),vm._style=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:"dist/static/images/pin.svg",anchorOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",anchor:[8,0]})}),vm._source=new _vendor.ol.source.Vector({features:vm._features}),vm._overlay=new _vendor.ol.layer.Vector({source:vm._source,style:vm._style});var weatherforecastInter=new _vendor.ol.interaction.Draw({source:vm._source,type:"Point",style:vm._style});weatherforecastInter.on("drawend",function(){vm._features.clear()},vm),vm._weatherforecastTool={name:"WeatherForecast",keepSelection:!0,interactions:[weatherforecastInter]},vm.annotations.tools.push(this._weatherforecastTool),vm._weatherforecastStatus.phaseEnd("initialize")})}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<form id="get_weatherforecast" name="weatherforecast" action="{{env.gokartService + \'/weatherforecast\'}}" method="post" target="weatherforecast">\n    <input type="hidden" name="data" id="weatherforecast_data">\n</form>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-1704c2d4",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-1704c2d4",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}],172:[function(require,module,exports){var __vueify_insert__=require("vueify/lib/insert-css"),__vueify_style__=__vueify_insert__.insert("\n#weatheroutlook_control button{\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n.datasource-desc {\n    font-style:italic;\n    padding-left:24px;\n    color:#6dd8ef;\n    font-size:14px;\n}\n\n#weatheroutlook-data-config .accordion {\n    background-color: transparent\n}\n#weatheroutlook-data-config .accordion-content {\n    background-color: transparent\n}\n#daily-title.alert{\n    background-color: rgba(171, 116, 107, 0.7);\n}\n.outlook-datasources {\n    font-size: 100%;\n}\n#weatheroutlook_control .selected{\n    background-color: #2199E8;\n}\n#weatheroutlook_control {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    padding: 0;\n}\n\n");Object.defineProperty(exports,"__esModule",{value:!0});var _vendor=require("src/vendor.js");exports.default={store:{outlookSettings:"settings.weatheroutlook",screenHeight:"layout.screenHeight",leftPanelHeadHeight:"layout.leftPanelHeadHeight",activeMenu:"activeMenu",activeSubmenu:"activeSubmenu"},data:function(){return{format:"html",initialized:!1,showDailyDatasources:!1,editingReportHours:"",editingColumnTitle:"",editingColumnGroup:"",selectedRow:null,selectedDatasource:{},selectedIndex:-1,selectedSubindex:-1,selectedColumn:null,outlookTool:{},outlookTools:[{toolid:"weather-outlook-default",title:"Default 4 Day Weather Outlook",icon:"/dist/static/images/weather-outlook-default.svg",fixed_columns:!0},{toolid:"weather-outlook-customized",title:"Customized Weather Outlook",icon:"/dist/static/images/weather-outlook-customized.svg",fixed_columns:!1},{toolid:"weather-outlook-amicus",title:"Weather Outlook Amicus Export",icon:"/dist/static/images/weather-outlook-amicus.svg",fixed_columns:!0}],showSettings:!1,revision:1,columnRevision:1}},computed:{loading:function(){return this.$root.loading},setting:function(){return this.$root.setting},map:function(){return this.$root.map},env:function(){return this.$root.env},systemsetting:function(){return this.$root.systemsetting},measure:function(){return this.$root.measure},active:function(){return this.$root.active},catalogue:function(){return this.$root.catalogue},annotations:function(){return this.$root.$refs.app.$refs.annotations},dailyDatasources:function(){return this.columnRevision&&(this._datasources?this._datasources.dailyDatasources:[])},datasources:function(){return this.columnRevision&&(this._datasources?this._datasources.datasources:[])},isDayReadonly:function(){return"weather-outlook-default"===this.outlookTool.toolid},isDailyTitleReadonly:function(){return"weather-outlook-customized"!==this.outlookTool.toolid},isTimeReadonly:function(){return"weather-outlook-default"===this.outlookTool.toolid},isColumnsReadonly:function(){return!this.initialized||"weather-outlook-customized"!==this.outlookTool.toolid},outlookTitle:function(){return this.outlookTool.title},outlookSetting:function(){return this.columnRevision&&this.getOutlookSetting()},reportType:{get:function(){return this.revision&&this.getReportType()},set:function(value){this.setReportType(value),this.revision+=1}},reportHours:{get:function(){return this.revision&&this.getReportHours()},set:function(value){this.setReportHours(value),this.revision+=1}},dailyTitle:{get:function(){return this.revision&&this.getDailyTitle()},set:function(value){this.setDailyTitle(value),this.revision+=1}},outlookDays:{get:function(){return this.revision&&this.getOutlookDays()},set:function(value){this.setOutlookDays(value),this.revision+=1}},outlookColumns:{get:function(){return this.columnRevision&&(this.initialized?this.getOutlookColumns():[])},set:function(value){this.setOutlookColumns(value)}},columnGroups:{get:function(){return this.columnRevision&&this.getColumnGroups()},set:function(value){this.setColumnGroups(value)}},reportTimes:{get:function(){return this.revision&&this.getReportTimes()},set:function(value){this.setReportTimes(value)}},isControlSelected:function(){return!!this.annotations&&this.annotations.tool===this._weatheroutlookTool},selectedColumnTitle:{get:function(){return null===this.selectedColumn||this.selectedColumn.group?"":this.selectedColumn.options&&this.selectedColumn.options.title||this.selectedDatasource.options.title},set:function(value){null===this.selectedColumn||this.selectedColumn.group||(value=value.trim(),value&&this.selectedDatasource.options.title!==value?(this.selectedColumn.options=this.selectedColumn.options||{},this.selectedColumn.options.title=value):this.selectedColumn.options&&"title"in this.selectedColumn.options&&delete this.selectedColumn.options.title)}},tools:function(){return this.outlookTools}},watch:{isControlSelected:function(newValue,oldValue){newValue?this._overlay.setMap(this.map.olmap):this._overlay.setMap(null)},outlookDays:function(newValue,oldValue){this.changeOutlookToolTitle()},outlookTool:function(newValue,oldValue){this.adjustHeight()},outlookSetting:function(newValue,oldValue){this.editingReportHours=newValue?newValue.reportHours:""},reportType:function(newValue,oldValue){0!==newValue&&0!==oldValue||this.adjustHeight()}},methods:{adjustHeight:function(){if("settings"===this.activeMenu&&"weatheroutlook"===this.activeSubmenu){this._columnEditorHeight=this._columnEditorHeight||(0,_vendor.$)("#weatheroutlook-column-editor").height();var height=this.screenHeight-this.leftPanelHeadHeight-(0,_vendor.$)("#weatheroutlook-settings").height()-200;(0,_vendor.$)("#weatheroutlook-header").height(height),(0,_vendor.$)("#weatheroutlook-columns").height(height-this._columnEditorHeight),(0,_vendor.$)("#weatheroutlook-datasources").height(height)}},open:function(options){"settings"!==this.activeMenu&&(0,_vendor.$)("#menu-tab-settings-label").trigger("click"),"weatheroutlook"!==this.activeSubmenu&&(0,_vendor.$)("#weatheroutlook-label").trigger("click"),(0,_vendor.$)("#offCanvasLeft").hasClass("reveal-responsive")||((0,_vendor.$)("#offCanvasLeft").toggleClass("reveal-responsive"),this.map.olmap.updateSize())},getOutlookTool:function(toolid){return toolid?this.outlookTools.find(function(o){return o.toolid===toolid}):this.outlookTool},getOutlookSetting:function(toolid){return toolid=toolid||this.outlookTool.toolid,"weather-outlook-default"===toolid?(this._defaultOutlookSetting||(this._defaultOutlookSetting={}),this.revision&&this._defaultOutlookSetting):(this.outlookSettings[toolid]||(this.outlookSettings[toolid]={}),this.revision&&this.outlookSettings[toolid])},getReportType:function(toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;return toolid=toolid||this.outlookTool.toolid,null!==outlookSetting.reportType&&void 0!==outlookSetting.reportType||("weather-outlook-default"===toolid?(this.setReportType(0,toolid),this.setReportHours("9,12,15,18",toolid)):"weather-outlook-customized"===toolid?this.setReportType(3,toolid):this.setReportType(1,toolid)),outlookSetting.reportType},setReportType:function(value,toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;toolid=toolid||this.outlookTool.toolid,outlookSetting.reportType=parseInt(value),outlookSetting.reportTimes=null},getReportHours:function(toolid){return 0===this.getReportType(toolid)?this.getOutlookSetting(toolid).reportHours:""},setReportHours:function(value,toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;toolid=toolid||this.outlookTool.toolid,outlookSetting.reportHours=value,0===this.getReportType(toolid)&&(outlookSetting.reportTimes=null)},getDailyTitle:function(toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;return toolid=toolid||this.outlookTool.toolid,outlookSetting.dailyTitle||("weather-outlook-default"===toolid?this.setDailyTitle("{date} {weather}",toolid):"weather-outlook-customized"===toolid?this.setDailyTitle("{date} {weather}",toolid):this.setDailyTitle("{date}",toolid)),outlookSetting.dailyTitle},setDailyTitle:function(value,toolid){(toolid?this.getOutlookSetting(toolid):this.outlookSetting).dailyTitle=value},getOutlookDays:function(toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;return toolid=toolid||this.outlookTool.toolid,outlookSetting.outlookDays||("weather-outlook-default"===toolid?this.setOutlookDays(4,toolid):"weather-outlook-customized"===toolid?this.setOutlookDays(4,toolid):this.setOutlookDays(2,toolid)),outlookSetting.outlookDays},setOutlookDays:function(value,toolid){(toolid?this.getOutlookSetting(toolid):this.outlookSetting).outlookDays=parseInt(value)},getOutlookColumns:function(toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;return toolid=toolid||this.outlookTool.toolid,outlookSetting.outlookColumns&&0!==outlookSetting.outlookColumns.length||this.setOutlookColumns(null,toolid),outlookSetting.outlookColumns},setOutlookColumns:function(columns,toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;toolid=toolid||this.outlookTool.tooid,console.log("toolID"),console.log(toolid),columns&&0!==columns.length||(columns="weather-outlook-default"===toolid?[{workspace:"bom",id:"IDW71034_WA_WxIcon_SFC_ICON"},{workspace:"bom",id:"IDW71000_WA_T_SFC"},{workspace:"bom",id:"IDW71001_WA_Td_SFC"},{workspace:"bom",id:"IDW71018_WA_RH_SFC"},{group:"10m Wind",datasources:[{workspace:"bom",id:"IDW71089_WA_Wind_Dir_SFC"},{workspace:"bom",id:"IDW71071_WA_WindMagKmh_SFC"},{workspace:"bom",id:"IDW71072_WA_WindGustKmh_SFC"}]},{workspace:"bom",id:"IDW71127_WA_DF_SFC"},{workspace:"bom",id:"IDW71139_WA_Curing_SFC"},{workspace:"bom",id:"IDZ10135_AUS_AFDRS_fbi_SFC"},{workspace:"bom",id:"IDZ10134_AUS_AFDRS_fdr_SFC_HTML"}]:"weather-outlook-customized"===toolid?[{workspace:"bom",id:"IDW71034_WA_WxIcon_SFC_ICON"},{workspace:"bom",id:"IDW71000_WA_T_SFC"},{workspace:"bom",id:"IDW71001_WA_Td_SFC"},{workspace:"bom",id:"IDW71018_WA_RH_SFC"},{group:"10m Wind",datasources:[{workspace:"bom",id:"IDW71089_WA_Wind_Dir_SFC"},{workspace:"bom",id:"IDW71071_WA_WindMagKmh_SFC"},{workspace:"bom",id:"IDW71072_WA_WindGustKmh_SFC"}]},{workspace:"bom",id:"IDW71127_WA_DF_SFC"},{workspace:"bom",id:"IDW71139_WA_Curing_SFC"},{workspace:"bom",id:"IDZ10135_AUS_AFDRS_fbi_SFC"},{workspace:"bom",id:"IDZ10134_AUS_AFDRS_fdr_SFC_HTML"}]:[{workspace:"bom",id:"IDW71000_WA_T_SFC",options:{title:"air_temperature"}},{workspace:"bom",id:"IDW71001_WA_Td_SFC",options:{title:"dewpoint_temperature"}},{workspace:"bom",id:"IDW71018_WA_RH_SFC",options:{title:"relative_humidity"}},{workspace:"bom",id:"IDW71089_WA_Wind_Dir_SFC",options:{title:"wind_direction"}},{workspace:"bom",id:"IDW71071_WA_WindMagKmh_SFC",options:{title:"wind_speed"}},{workspace:"bom",id:"IDW71072_WA_WindGustKmh_SFC",options:{title:"wind_gust_speed"}},{workspace:"bom",id:"IDW71111_WA_Wind_Dir_1500mAMSL",options:{title:"wind_direction_850hpa"}},{workspace:"bom",id:"IDW71110_WA_WindMagKmh_1500mAMSL",options:{title:"wind_speed_850hpa"}},{workspace:"bom",id:"IDW71117_WA_FFDI_SFC",options:{title:"forest_fire_danger_index"}},{workspace:"bom",id:"IDW71122_WA_GFDI_SFC",options:{title:"grassland_fire_danger_index"}},{workspace:"bom",id:"IDZ10134_AUS_AFDRS_fdr_SFC_NOHTML",options:{title:"FDR"}},{workspace:"bom",id:"IDW71127_WA_DF_SFC",options:{title:"DF"}},{workspace:"bom",id:"IDW71139_WA_Curing_SFC",options:{title:"Curing"}},{workspace:"bom",id:"IDZ10135_AUS_AFDRS_fbi_SFC",options:{title:"FBI"}}]);var outlookTool=this.getOutlookTool(toolid),vm=this;outlookSetting.outlookColumns=columns;var columnGroups=this.getColumnGroups(toolid);columnGroups.length>0&&(colmnGroups.length=0),_vendor.$.each(vm._datasources.datasources,function(index,ds){"selected"in ds||(ds.selected={}),ds.selected[toolid]=!1});for(var required=!1,index=outlookSetting.outlookColumns.length-1;index>=0;index--)if(column=outlookSetting.outlookColumns[index],column.group){required=!1;for(var subindex=column.datasources.length-1;subindex>=0;subindex--){subcolumn=column.datasources[subindex];var ds=vm._datasources.datasources.find(function(o){return o.workspace===subcolumn.workspace&&o.id===subcolumn.id});ds?(ds.selected[toolid]=!0,subcolumn.name=ds.name,subcolumn.required=!!ds.required,required=required||subcolumn.required):column.datasources.splice(subindex,1)}column.required=required;var groupIndex=columnGroups.findIndex(function(o){return o===column.group});0===column.datasources.length?(vm.outlookColumns.splice(index,1),groupIndex>=0&&columnGroups.splice(groupIndex,1)):groupIndex<0&&columnGroups.push(column.group)}else{var ds=vm._datasources.datasources.find(function(o){return o.workspace===column.workspace&&o.id===column.id});ds?(ds.selected[toolid]=!0,column.name=ds.name,column.required=!!ds.required):outlookSetting.outlookColumns.splice(index,1)}outlookTool.fixed_columns||_vendor.$.each(vm._datasources.datasources,function(index,ds){ds.required&&!ds.selected[toolid]&&vm.toggleDatasource(ds,!0,null,null,toolid)}),columnGroups.sort(),toolid===this.outlookTool.toolid&&(this.editingColumnTitle="",this.editingColumnGroup="",this.selectedRow=null,this.selectedDatasource=null,this.selectedIndex=-1,this.selectedSubindex=-1,this.selectedColumn=null,this.columnRevision+=1)},getColumnGroups:function(toolid){return toolid=toolid||this.outlookTool.toolid,toolid in this._columnGroups||(this._columnGroups[toolid]=[]),this._columnGroups[toolid]},setColumnGroups:function(value,toolid){toolid=toolid||this.outlookTool.toolid,this._columnGroups[toolid]=value},getReportTimes:function(toolid){toolid=toolid||this.outlookTool.toolid;var outlookSetting=this.getOutlookSetting(toolid);if(!outlookSetting.reportTimes){var reportTimes=[],reportType=this.getReportType(toolid);if(reportType>0)for(var hour=0;hour<24;)hour%reportType==0&&(hour<10?reportTimes.push("0"+hour+":00:00"):reportTimes.push(hour+":00:00")),hour+=1;else{if(null!=this.getReportHours(toolid)){var hours=this.reportHours+"";hours.length>0&&_vendor.$.each(hours.split(","),function(index,hour){hour<10?reportTimes.push("0"+hour+":00:00"):reportTimes.push(hour+":00:00")})}}this.setReportTimes(reportTimes,toolid)}return outlookSetting.reportTimes},setReportTimes:function(value,toolid){(toolid?this.getOutlookSetting(toolid):this.outlookSetting).reportTimes=value},changeOutlookToolTitle:function(toolid){var outlookTool=this.getOutlookTool(toolid);"weather-outlook-customized"===outlookTool.toolid?outlookTool.title="Customised "+this.getOutlookDays(toolid)+" Day Weather Outlook":"weather-outlook-amicus"===outlookTool.toolid&&(outlookTool.title=this.getOutlookDays(toolid)+" Day Weather Outlook Amicus Export")},selectSetting:function(s){this.showSettings=!1,this.outlookTool!==s&&(this.outlookTool=s)},selectTool:function(tool){"weather-outlook-default"!==tool.toolid&&this.open(),this.outlookTool!==tool&&(this.outlookTool=tool,this.revsion+=1,this.columnRevision+=1)},toggleTool:function(enable){if(this._weatheroutlookTool){if(!0===enable&&this.annotations.tool===this._weatheroutlookTool)return;if(!1===enable&&this.annotations.tool!==this._weatheroutlookTool)return;this.annotations.tool===this._weatheroutlookTool?this.annotations.setTool(this.annotations.currentTool,!0):this.annotations.setTool(this._weatheroutlookTool)}else this.annotations.setTool(this.annotations.currentTool,!0)},isToolActivated:function(tool){return this.isControlSelected},isDegreeUnit:function(ds){return"C"===ds.metadata.unit},selectColumn:function(index,subindex,column){this.selectedRow&&this.selectedRow.removeClass("feature-selected"),this.selectedIndex=index,this.selectedSubindex=subindex<0||null===subindex||void 0==subindex?-1:subindex,this.selectedRow=-1==this.selectedSubindex?(0,_vendor.$)("#active-column-"+this.selectedIndex):(0,_vendor.$)("#active-column-"+this.selectedIndex+"-"+this.selectedSubindex),this.selectedColumn=column,column.group?(this.selectedDatasource=null,this.editingColumnTitle="",this.editingColumnGroup=column.group):(this.selectedDatasource=this._datasources.datasources.find(function(o){return o.id===column.id}),this.editingColumnTitle=this.selectedColumnTitle,this.editingColumnGroup=subindex>=0?this.outlookColumns[index].group:""),this.selectedRow.addClass("feature-selected")},changeColumnTitle:function(event){event&&"keyup"===event.type&&13!==event.keyCode||this.selectedColumnTitle!==this.editingColumnTitle&&(this.selectedColumnTitle=this.editingColumnTitle,this.systemsetting.saveState(1e4))},changeColumnGroup:function(event){if(!event||"keyup"!==event.type||13===event.keyCode){this.editingColumnGroup=this.editingColumnGroup.trim();var vm=this;if(this.selectedColumn.group){if(this.editingColumnGroup===this.selectedColumn.group)return;var groupIndex=this.columnGroups.findIndex(function(o){return o===vm.selectedColumn.group});groupIndex>=0&&this.columnGroups.splice(groupIndex,1),this.editingColumnGroup?(groupIndex=this.outlookColumns.findIndex(function(o){return!!o.group&&o.group===vm.editingColumnGroup}),groupIndex>=0?(this.outlookColumns[groupIndex].datasources.push.apply(this.outlookColumns[groupIndex].datasources,this.selectedColumn.datasources),this.outlookColumns.splice(this.selectedIndex,1),this.selectedIndex<groupIndex?this.selectedIndex=groupIndex-1:this.selectedIndex=groupIndex,this.selectedIndex=groupIndex,this.selectedSubindex=-1,this.selectedColumn=this.outlookColumns[groupIndex],this.selectedRow=null,this.selectedDatasource=null,this.editingColumnTitle=""):(this.outlookColumns[vm.selectedIndex].group=this.editingColumnGroup,this.columnGroups.push(this.editingColumnGroup),this.columnGroups.sort())):(this.outlookColumns.splice(this.selectedIndex,1),_vendor.$.each(this.selectedColumn.datasources,function(index,col){vm.outlookColumns.splice(vm.selectedIndex+index,0,col)}),this.selectedIndex=-1,this.selectedSubindex=-1,this.selectedColumn=null,this.selectedRow=null,this.selectedDatasource=null,this.editingColumnTitle="",this.editingColumnGroup="")}else{if(this.editingColumnGroup){if(this.selectedSubindex>=0&&this.outlookColumns[this.selectedIndex].group===this.editingColumnGroup)return}else if(this.selectedSubindex<0)return;if(this.selectedSubindex>=0)if(this.outlookColumns[this.selectedIndex].datasources.splice(this.selectedSubindex,1),0===this.outlookColumns[this.selectedIndex].datasources.length){var groupIndex=this.columnGroups.findIndex(function(o){return o===vm.outlookColumns[vm.selectedIndex].group});groupIndex>=0&&this.columnGroups.splice(groupIndex,1),this.outlookColumns.splice(this.selectedIndex,1)}else this.selectedIndex+=1;else this.outlookColumns.splice(this.selectedIndex,1);if(this.editingColumnGroup){var groupIndex=this.outlookColumns.findIndex(function(o){return!!o.group&&o.group===vm.editingColumnGroup});groupIndex>=0?(this.outlookColumns[groupIndex].datasources.push(this.selectedColumn),this.selectedIndex=groupIndex,this.selectedSubindex=this.outlookColumns[groupIndex].datasources.length-1):(this.outlookColumns.splice(this.selectedIndex,0,{group:this.editingColumnGroup,datasources:[this.selectedColumn]}),this.selectedSubindex=0,this.columnGroups.push(this.editingColumnGroup),this.columnGroups.sort())}else this.outlookColumns.splice(this.selectedIndex,0,this.selectedColumn),this.selectedSubindex=-1}this.columnRevision+=1}},toggleDatasource:function(ds,add,index,subindex,toolid){var outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting;toolid=toolid||this.outlookTool.toolid,ds&&(ds.selected[toolid]=void 0===add||null===add?!ds.selected[toolid]:add);var vm=this;if(ds&&ds.selected[toolid])if(ds.options&&ds.options.group){group=ds.options&&ds.options.group;var groupIndex=outlookSetting.outlookColumns.findIndex(function(o){return!!o.group&&o.group===group});groupIndex>=0?(outlookSetting.outlookColumns[groupIndex].required=outlookSetting.outlookColumns[groupIndex].required||ds.required||!1,outlookSetting.outlookColumns[groupIndex].datasources.push({workspace:ds.workspace,id:ds.id,name:ds.name,required:ds.required||!1})):outlookSetting.outlookColumns.push({group:group,datasources:[{workspace:ds.workspace,id:ds.id,name:ds.name,required:ds.required||!1}]});var columnGroups=this.getColumnGroups(toolid);groupIndex=columnGroups.findIndex(function(o){return o===group}),groupIndex<0&&(columnGroups.push(group),columnGroups.sort())}else outlookSetting.outlookColumns.push({workspace:ds.workspace,id:ds.id,name:ds.name,required:ds.required||!1});else{if(ds.required)return;if(null!==index&&void 0!==index||_vendor.$.each(outlookSetting.outlookColumns,function(i,column){if(column.group){if(j=column.datasources.findIndex(function(o){return o.workspace===ds.workspace&&o.id===ds.id}),j>=0)return index=i,subindex=j,!1}else if(column.workspace===ds.workspace&&column.id===ds.id)return index=i,subindex=-1,!1}),subindex>=0){if(outlookSetting.outlookColumns[index].datasources.splice(subindex,1),toolid===this.outlookTool.toolid&&(this.selectedIndex===index&&this.selectedSubindex===subindex?(this.selectedIndex=-1,this.selectedSubindex=-1,this.selectedColumn=null,this.selectedRow=null,this.selectedDatasource=null,this.editingColumnTitle="",
this.editingColumnGroup=""):this.selectedIndex===index&&this.selectedSubindex>subindex&&(this.selectedSubindex-=1)),0===outlookSetting.outlookColumns[index].datasources.length){var columnGroups=this.getColumnGroups(toolid),groupIndex=columnGroups.findIndex(function(o){return o===vm.outlookColumns[index].group});groupIndex>=0&&columnGroups.splice(groupIndex,1),this.outlookColumns.splice(index,1),toolid===this.outlookTool.toolid&&this.selectedIndex>index&&(this.selectedIndex-=1)}}else index>=0&&(outlookSetting.outlookColumns.splice(index,1),toolid===this.outlookTool.toolid&&(this.selectedIndex===index?(this.selectedIndex=-1,this.selectedSubindex=-1,this.selectedColumn=null,this.selectedRow=null,this.selectedDatasource=null,this.editingColumnTitle="",this.editingColumnGroup=""):this.selectedIndex>index&&(this.selectedIndex-=1)))}this.systemsetting.saveState(1e4),toolid===this.outlookTool.toolid&&(this.columnRevision+=1)},moveDown:function(index,subindex,column){if(subindex>=0){if(index>=this.outlookColumns.length||index<0)return;if(subindex>=this.outlookColumns[index].datasources.length-1||subindex<0)return}else if(index>=this.outlookColumns.length-1||index<0)return;subindex>=0?(this.outlookColumns[index].datasources[subindex]=this.outlookColumns[index].datasources[subindex+1],this.outlookColumns[index].datasources[subindex+1]=column,this.selectedSubindex===subindex?this.selectedSubindex+=1:this.selectedSubindex===subindex-1&&(this.selectedSubindex-=1)):(this.outlookColumns[index]=this.outlookColumns[index+1],this.outlookColumns[index+1]=column,this.selectedIndex===index?this.selectedIndex+=1:this.selectedIndex===index-1&&(this.selectedIndex-=1)),this.systemsetting.saveState(1e4),this.columnRevision+=1},moveUp:function(index,subindex,column){if(subindex>=0){if(index>=this.outlookColumns.length||index<0)return;if(subindex>=this.outlookColumns[index].datasources.length||subindex<=0)return}else if(index>=this.outlookColumns.length||index<=0)return;subindex>=0?(this.outlookColumns[index].datasources[subindex]=this.outlookColumns[index].datasources[subindex-1],this.outlookColumns[index].datasources[subindex-1]=column,this.selectedSubindex===subindex?this.selectedSubindex-=1:this.selectedSubindex===subindex-1&&(this.selectedSubindex+=1)):(this.outlookColumns[index]=this.outlookColumns[index-1],this.outlookColumns[index-1]=column,this.selectedIndex===index?this.selectedIndex-=1:this.selectedIndex===index-1&&(this.selectedIndex+=1)),this.systemsetting.saveState(1e4),this.columnRevision+=1},removeColumn:function(index,subindex,column){var vm=this;if(!column.required)if(column.group)for(var subindex=column.datasources.length-1;subindex>=0;subindex--){var datasource=vm._datasources.datasources.find(function(o){return column.datasources[subindex].workspace===o.workspace&&column.datasources[subindex].id===o.id});vm.toggleDatasource(datasource,!1,index,subindex)}else{var datasource=this._datasources.datasources.find(function(o){return column.workspace===o.workspace&&column.id===o.id});this.toggleDatasource(datasource,!1,index,subindex)}},isDatasourceSelected:function(ds){try{return this.columnRevision&&ds.selected[this.outlookTool.toolid]}catch(ex){return!1}},isShow:function(ds){return"Daily"!=ds.metadata.type||this.showDailyDatasources},formatReportHours:function(event){if(!event||"keyup"!==event.type||13===event.keyCode){var hours="";_vendor.$.each(this.editingReportHours.split(","),function(index,hour){hour=parseInt(hour.trim()),!isNaN(hour)&&hour>=0&&hour<24&&(""===hours?hours=hour:hours+=","+hour)}),this.editingReportHours=hours,this.reportHours!==hours&&(this.reportHours=hours,this.systemsetting.saveState(1e4))}},getDailyData:function(toolid){if(toolid=toolid||this.outlookTool.toolid,!this._dailyData[toolid]){for(var result,dailyVars={},ds=null,varPattern=null,outlookSetting=toolid?this.getOutlookSetting(toolid):this.outlookSetting,title=outlookSetting.dailyTitle,rerun=!0,unavailableVars=null;rerun;)for(varPattern=/\{([^\}]+)\}/g,rerun=!1;result=varPattern.exec(title||"");)if("date"===result[1]);else{if(!(ds=this._datasources.dailyDatasources.find(function(ds){return ds.var===result[1]}))){null===unavailableVars?unavailableVars=result[1]:unavailableVars+=" , "+result[1],title=title.replace(result[0],"N/A"),rerun=!0;break}dailyVars[result[1]]={workspace:ds.workspace,id:ds.id}}this._dailyData[toolid]=[title,dailyVars,unavailableVars]}return this._dailyData[toolid]},checkDailyTitle:function(event){if("keyup"===event.type&&13!==event.keyCode)return void(this._dailyData[this.outlookTool.toolid]=null);(0,_vendor.$)("#daily-title").removeClass("alert"),null!==this.getDailyData(!0)[2]?((0,_vendor.$)("#daily-title").addClass("alert"),alert("The variables ("+unavailableVars+") are unavailable")):this.systemsetting.saveState(1e4)},loadDatasources:function(){var vm=this;this._weatheroutlookStatus.phaseBegin("load_datasources",80,"Load datasources"),this.refreshDatasources(!0,function(){vm._weatheroutlookStatus.phaseEnd("load_datasources"),vm.initialized=!0,vm.columnRevision+=1},function(msg){vm._weatheroutlookStatus.phaseFailed("load_datasources","Failed to loading datasources. status = "+msg)})},refreshDatasources:function(refresh,callback,failedCallback){var vm=this;this._datasources=[],_vendor.$.ajax({url:vm.env.gokartService+"/outlookmetadata"+(refresh?"?refresh=true":""),method:"GET",dataType:"json",success:function(response,stat,xhr){_vendor.$.each(response.datasources,function(index,datasource){datasource.metadata&&datasource.metadata.refresh_time&&(datasource.metadata.refresh_time=_vendor.moment.tz(datasource.metadata.refresh_time,"YYYY-MM-DD HH:mm:ss","Australia/Perth"))}),vm._datasources={datasources:response.datasources,dailyDatasources:[]},_vendor.$.each(vm._datasources.datasources,function(index,ds){ds.var&&"Daily"===ds.metadata.type&&vm._datasources.dailyDatasources.push(ds)}),vm.columnRevision+=1,vm.$nextTick(function(){vm._dailyData={},vm._columnGroups={};var outlookSetting=null,outlookTool=null;_vendor.$.each(vm.outlookTools,function(index,tool){outlookSetting=vm.getOutlookSetting(tool.toolid),outlookTool=vm.getOutlookTool(tool.toolid),outlookTool.fixed_columns?vm.setOutlookColumns(null,tool.toolid):(outlookSetting=vm.getOutlookSetting(tool.toolid),vm.setOutlookColumns(outlookSetting.outlookColumns,tool.toolid))})}),callback&&callback()},error:function(xhr,status,message){var msg=xhr.status+" : "+(xhr.responseText||message);alert(msg),failedCallback&&failedCallback(msg)},xhrFields:{withCredentials:!0}})},setPosition:function(coordinate){this._features.clear(),this._features.push(new _vendor.ol.Feature({geometry:new _vendor.ol.geom.Point(coordinate)}))},getWeatherOutlook:function(coordinate){if(0===this.reportTimes.length)return void alert("No weather outlook times are configured in settings module");var vm=this,_getWeatherOutlook=function(position){var requestData=null,format=vm.format,dailyData=vm.getDailyData();if(null===dailyData[2]||""===dailyData[2]||confirm("The variables ("+dailyData[2]+") are unavailable.\r\nDo you want to continue?"))if("weather-outlook-amicus"===vm.outlookTool.toolid?(requestData={point:coordinate,options:{title:vm.outlookDays+" Day Weather Outlook for "+position+"("+Math.round(1e4*coordinate[0])/1e4+","+Math.round(1e4*coordinate[1])/1e4+")",position:position,latitude:Math.round(1e4*coordinate[1])/1e4,longitude:Math.round(1e4*coordinate[0])/1e4,no_data:""},outlooks:[{days:_vendor.utils.getDatetimes(["00:00:00"],vm.outlookDays,1).map(function(dt){return dt.format("YYYY-MM-DD")}),times:vm.reportTimes,min_time:(0,_vendor.moment)().format("YYYY-MM-DD HH:00:00"),options:{expired:1},times_data:vm.outlookColumns}]},format="amicus"):requestData={point:coordinate,options:{title:vm.outlookDays+" Day Weather Outlook for "+position+"("+Math.round(1e4*coordinate[0])/1e4+","+Math.round(1e4*coordinate[1])/1e4+")"},outlooks:[{days:_vendor.utils.getDatetimes(["00:00:00"],vm.outlookDays,1).map(function(dt){return dt.format("YYYY-MM-DD")}),times:vm.reportTimes,options:{daily_title_pattern:dailyData[0]||"{date}"},daily_data:dailyData[1]||{},times_data:vm.outlookColumns}]},"html"===format)(0,_vendor.$)("#weatheroutlook_data").val(JSON.stringify(requestData)),_vendor.utils.submitForm("get_weatheroutlook",{width:screen.width>1890?1890:screen.width,height:screen.height>1060?1060:screen.height},!0);else try{var req=new window.XMLHttpRequest;req.open("POST",vm.env.gokartService+"/weatheroutlook/"+format),req.responseType="blob",req.withCredentials=!0,req.onload=function(event){try{if(req.status>=400){var reader=new FileReader;reader.addEventListener("loadend",function(e){alert(e.target.result)}),reader.readAsText(req.response)}else{var filename=null;if(req.getResponseHeader("Content-Disposition")){var matches=vm._filename_re.exec(req.getResponseHeader("Content-Disposition"));filename=matches&&matches[1]?matches[1]:null}filename||(filename="weather_outlook_"+(0,_vendor.moment)().format("YYYYMMDD_HHmm")+"."+format),(0,_vendor.saveAs)(req.response,filename)}}catch(ex){alert(ex.message||ex)}};var formData=new window.FormData;formData.append("data",JSON.stringify(requestData)),req.send(formData)}catch(ex){callback(!1,ex.message||ex)}};this.map.getPosition(coordinate,_getWeatherOutlook)}},created:function(){this._dailyData={},this._columnGroups={},this.outlookTool=this.outlookTools[0]},ready:function(){var vm=this;this._filename_re=new RegExp("filename=['\"](.+)['\"]"),this._weatheroutlookStatus=vm.loading.register("weatheroutlook","BOM Spot Outlook Component"),this._weatheroutlookStatus.phaseBegin("initialize",20,"Initialize"),this.editingReportHours=this.reportHours,this.loadDatasources();this.$root.map;this._features=new _vendor.ol.Collection,this._features.on("add",function(event){vm.getWeatherOutlook(event.element.getGeometry().getCoordinates())}),this._style=new _vendor.ol.style.Style({image:new _vendor.ol.style.Icon({src:"dist/static/images/pin.svg",anchorOrigin:"bottom-left",anchorXUnits:"pixels",anchorYUnits:"pixels",anchor:[8,0]})}),this._source=new _vendor.ol.source.Vector({features:this._features}),this._overlay=new _vendor.ol.layer.Vector({source:this._source,style:this._style});var weatheroutlookInter=new _vendor.ol.interaction.Draw({source:this._source,type:"Point",style:this._style});weatheroutlookInter.on("drawend",function(){vm._features.clear()},this),this._weatheroutlookTool={name:"WeatherOutlook",keepSelection:!0,interactions:[weatheroutlookInter]},this.annotations.tools.push(this._weatheroutlookTool),this.adjustHeight();var vm=this;_vendor.$.each(this.outlookTools,function(index,tool){vm.changeOutlookToolTitle(tool.toolid)}),this._weatheroutlookStatus.phaseEnd("initialize")}},module.exports.__esModule&&(module.exports=module.exports.default),("function"==typeof module.exports?module.exports.options:module.exports).template='\n<div class="tabs-panel" id="weatheroutlook" v-cloak="">\n  <div class="row">\n    <div class="columns">\n      <div class="tabs-content vertical" data-tabs-content="setting-tabs">\n        <div id="weatheroutlook-settings">\n\n          <div class="tool-slice row collapse">\n              <div class="small-12">\n                  <label style="font-weight:bold">{{outlookTitle}}</label>\n              </div>\n              <div class="small-12">\n                  <hr class="small-12">\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Outlook Days:</label>\n              </div>\n              <div class="small-8">\n                  <select name="weatheroutlookOutlookDays" v-model="outlookDays" @change="systemsetting.saveState(10000)" v-bind:disabled="isDayReadonly">\n                      <option value="1">Today</option>      \n                      <option value="2">2 Days</option>      \n                      <option value="3">3 Days</option>      \n                      <option value="4">4 Days</option>      \n                      <option value="6">6 Days</option>      \n                      <option value="7">7 Days</option>      \n                  </select>\n              </div>\n          </div>\n\n          <div class="tool-slice row collapse">\n              <div class="small-4">\n                  <label class="tool-label">Outlook Times:</label>\n              </div>\n              <div class="small-8">\n                  <select name="weatheroutlookReportType" v-model="reportType" @change="systemsetting.saveState(10000)" v-bind:disabled="isTimeReadonly">\n                      <option value="1">Hourly</option>      \n                      <option value="2">2 Hourly</option>      \n                      <option value="3">3 Hourly</option>      \n                      <option value="4">4 Hourly</option>      \n                      <option value="6">6 Hourly</option>      \n                      <option value="0">Others</option>      \n                  </select>\n                  <div v-show="reportType == 0">\n                    <input type="text" v-model="editingReportHours" placeholder="hours(0-23) separated by \',\'" @blur="formatReportHours" @keyup="formatReportHours" v-bind:disabled="isTimeReadonly">\n                  </div>\n              </div>\n              <div class="small-12" v-show="outlookTool.toolid != \'weather-outlook-amicus\'">\n                  <hr class="small-12">\n              </div>\n          </div>\n        </div>\n\n        <div class="tool-slice row collapse" id="weatheroutlook-data-config" v-show="outlookTool.toolid != \'weather-outlook-amicus\'">\n          <div class="columns">\n              <ul class="accordion" data-accordion="">\n                  <li class="accordion-item" data-accordion-item="">\n                      \x3c!-- Accordion tab title --\x3e\n                      <a href="#" class="accordion-title">Daily Title</a>\n                      \x3c!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. --\x3e\n                      <div class="accordion-content scroller" data-tab-content="" id="weatheroutlook-header">\n                          <textarea type="text" rows="4" style="width:100%;resize:vertical" id="daily-title" v-model="dailyTitle" placeholder="{date}" @blur="checkDailyTitle" @keyup="checkDailyTitle" v-bind:readonly="isDailyTitleReadonly"> </textarea>\n                          <div class="row feature-row status-row">\n                              <div class="small-4">\n                                  <div class="outlook-datasources">date</div>\n                              </div>\n                              <div class="small-8">\n                                  <div class="outlook-datasources">outlook date</div>\n                              </div>\n                          </div>\n                          <div v-for="ds in dailyDatasources" track-by="id" class="row feature-row status-row">\n                              <div class="small-4">\n                                  <div class="outlook-datasources">{{ ds.var}} </div>\n                              </div>\n                              <div class="small-8">\n                                  <div class="outlook-datasources">{{ ds.name}}</div>\n                              </div>\n                          </div>\n                      </div>\n                  </li>\n                  <li class="accordion-item is-active" data-accordion-item="">\n                      \x3c!-- Accordion tab title --\x3e\n                      <a href="#" class="accordion-title">Chosen Columns</a>\n                      \x3c!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. --\x3e\n                      <div class="accordion-content" data-tab-content="">\n                          <div class="scroller" id="weatheroutlook-columns" style="margin-left:-16px;margin-right:-16px">\n                          <div style="margin-left:16px;margin-right:16px">\n                              <template v-for="(index,column) in (columnRevision &amp;&amp; outlookColumns)" track-by="$index">\n                                  <template v-if="column.group">\n                                  <div class="row feature-row {{column===selectedColumn?&quot;feature-selected&quot;:&quot;&quot;}}" @click="selectColumn(index,-1,column)" id="active-column-{{index}}">\n                                      <div class="small-12">\n                                          {{ column.group}}\n                                          <div class="text-right float-right" v-show="!isColumnsReadonly">\n                                              <a @click.stop.prevent="removeColumn(index,-1,column)" v-show="!column.required" class="button tiny secondary alert" title="Remove"><i class="fa fa-close"></i></a>\n                                              <a v-bind:disabled="index <= 0" @click.stop.prevent="moveUp(index,-1,column)" title="Move Up" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-up"></i>\n                                              </a>\n                                              <a v-bind:disabled="index >= outlookColumns.length - 1" @click.stop.prevent="moveDown(index,-1,column)" title="Move Down" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-down"></i>\n                                              </a>\n                                          </div>\n                                      </div>\n                                  </div>\n                                  <div v-for="(subindex,subcolumn) in columnRevision &amp;&amp; column.datasources" track-by="id" class="row feature-row {{subcolumn===selectedColumn?&quot;feature-selected&quot;:&quot;&quot;}}" @click.stop.prevent="selectColumn(index,subindex,subcolumn)" id="active-column-{{index}}-{{subindex}}" style="margin-left:0px;">\n                                      <div class="small-12">\n                                          {{ subcolumn.name}}\n                                          <div class="text-right float-right" v-show="!isColumnsReadonly">\n                                              <a @click.stop.prevent="removeColumn(index,subindex,subcolumn)" v-show="!subcolumn.required" class="button tiny secondary alert" title="Remove"><i class="fa fa-close"></i></a>\n                                              <a v-bind:disabled="subindex <= 0" @click.stop.prevent="moveUp(index,subindex,subcolumn)" title="Move Up" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-up"></i>\n                                              </a>\n                                              <a v-bind:disabled="subindex >= column.datasources.length - 1" @click.stop.prevent="moveDown(index,subindex,subcolumn)" title="Move Down" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-down"></i>\n                                              </a>\n                                          </div>\n                                      </div>\n                                  </div>\n                                  </template>\n                                  <template v-if="column.id">\n                                  <div class="row feature-row {{column===selectedColumn?&quot;feature-selected&quot;:&quot;&quot;}}" @click="selectColumn(index,-1,column)" id="active-column-{{index}}">\n                                      <div class="small-12">\n                                          {{ column.name}}\n                                          <div class="text-right float-right" v-show="!isColumnsReadonly">\n                                              <a @click.stop.prevent="removeColumn(index,-1,column)" class="button tiny secondary alert" v-show="!column.required" title="Remove"><i class="fa fa-close"></i></a>\n                                              <a v-bind:disabled="index <= 0" @click.stop.prevent="moveUp(index,-1,column)" title="Move Up" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-up"></i>\n                                              </a>\n                                              <a v-bind:disabled="index >= outlookColumns.length - 1" @click.stop.prevent="moveDown(index,-1,column)" title="Move Down" class="button tiny secondary">\n                                                  <i class="fa fa-arrow-down"></i>\n                                              </a>\n                                          </div>\n                                      </div>\n                                  </div>\n                                  </template>\n                              </template>\n                          </div>\n                          </div>\n\n                          <div class="row" id="weatheroutlook-column-editor" style="margin-left:-10px;margin-right:-10px">\n                              <div class="small-4">\n                                  <label class="tool-label">Title:</label>\n                              </div>\n                              <div class="small-8">\n                                  <input type="text" v-model="editingColumnTitle" @blur="changeColumnTitle()" @keyup="changeColumnTitle" v-bind:disabled="isColumnsReadonly || !selectedColumn || selectedColumn.group">\n                              </div>\n                              <div class="small-4">\n                                  <label class="tool-label">Group:</label>\n                              </div>\n                              <div class="small-8">\n                                  <input type="text" v-model="editingColumnGroup" list="column-groups" @blur="changeColumnGroup()" @keyup="changeColumnGroup" v-bind:disabled="isColumnsReadonly || !selectedColumn">\n                                  <datalist id="column-groups">\n                                      <option v-for="group in columnGroups" track-by="$index" value="{{group}}">\n                                  </option></datalist>\n                              </div>\n                          </div>\n                      </div>\n                  </li>\n                  <li class="accordion-item" data-accordion-item="">\n                      \x3c!-- Accordion tab title --\x3e\n                      <a href="#" class="accordion-title">Available Columns</a>\n                      \x3c!-- Accordion tab content: it would start in the open state due to using the `is-active` state class. --\x3e\n                      <div class="accordion-content scroller" data-tab-content="" id="weatheroutlook-datasources">\n\n                          <div class="row">\n                            <div class="switch tiny">\n                              <input class="switch-input" id="toggleDailyDatasources" type="checkbox" v-bind:checked="showDailyDatasources" @change="showDailyDatasources=!showDailyDatasources">\n                              <label class="switch-paddle" for="toggleDailyDatasources">\n                                <span class="show-for-sr">Show daily datasources</span>\n                              </label>\n                            </div>\n                            <label for="toggleDailyDatasources" class="side-label">Show daily datasources</label>\n                            <a @click.stop.prevent="refreshDatasources(true)" title="Refresh" style="margin-left:120px"><i class="fa fa-refresh"></i></a>\n                          </div>\n\n                          <template v-for="ds in datasources" track-by="id">\n                            <div v-if="isShow(ds)" class="row feature-row status-row">\n                              <div class="small-12">\n                                  {{ ds.name}}\n                                  <div class="text-right float-right">\n                                     <div class="switch tiny" @click.stop="">\n                                         <input class="switch-input ctlgsw" id="outlook_ds_{{ $index }}" v-bind:disabled="isColumnsReadonly || ds.required" type="checkbox" @change="toggleDatasource(ds)" v-bind:checked="isDatasourceSelected(ds)">\n                                         <label class="switch-paddle" for="outlook_ds_{{ $index }}">\n                                             <span class="show-for-sr">Toggle</span>\n                                         </label>\n                                      </div>\n                                  </div>\n                              </div>\n                              <div class="small-6 datasource-desc">\n                                  <div class="outlook-datasources">Type: {{ ds.metadata.type }}</div>\n                              </div>\n                              <div class="small-6 datasource-desc">\n                                  <div class="outlook-datasources" v-if="isDegreeUnit(ds)">Unit: Â°\n                                  </div>\n                                  <div class="outlook-datasources" v-if="ds.metadata.unit &amp;&amp; !isDegreeUnit(ds)">Unit: {{ ds.metadata.unit}}\n                                  </div>\n                              </div>\n                              <div class="small-12 datasource-desc">\n                                  <div class="outlook-datasources">Title: {{ ds.options.title }}</div>\n                              </div>\n                              <div class="small-12 datasource-desc">\n                                  <div class="outlook-datasources">Updated: {{ ds.metadata.refresh_time?ds.metadata.refresh_time.toLocaleString():"" }}</div>\n                              </div>\n                            </div>\n                          </template>\n                      </div>\n                  </li>\n              </ul>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n  <form id="get_weatheroutlook" name="weatheroutlook" action="{{env.gokartService + \'/weatheroutlook/html\'}}" method="post" target="weatheroutlook">\n      <input type="hidden" name="data" id="weatheroutlook_data">\n  </form>\n</div>\n',module.hot&&function(){module.hot.accept();var hotAPI=require("vue-hot-reload-api");hotAPI.install(require("vue"),!0),hotAPI.compatible&&(module.hot.dispose(function(){__vueify_insert__.cache["\n#weatheroutlook_control button{\n    width: 48px;\n    height: 48px;\n    margin: 0;\n}\n\n.datasource-desc {\n    font-style:italic;\n    padding-left:24px;\n    color:#6dd8ef;\n    font-size:14px;\n}\n\n#weatheroutlook-data-config .accordion {\n    background-color: transparent\n}\n#weatheroutlook-data-config .accordion-content {\n    background-color: transparent\n}\n#daily-title.alert{\n    background-color: rgba(171, 116, 107, 0.7);\n}\n.outlook-datasources {\n    font-size: 100%;\n}\n#weatheroutlook_control .selected{\n    background-color: #2199E8;\n}\n#weatheroutlook_control {\n    position: absolute;\n    left: auto;\n    right: 16px;\n    bottom: auto;\n    padding: 0;\n}\n\n"]=!1,document.head.removeChild(__vueify_style__)}),module.hot.data?hotAPI.update("_v-8e7f01bc",module.exports,("function"==typeof module.exports?module.exports.options:module.exports).template):hotAPI.createRecord("_v-8e7f01bc",module.exports))}()},{"src/vendor.js":"src/vendor.js",vue:142,"vue-hot-reload-api":141,"vueify/lib/insert-css":143}]},{},[147]);
